(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ng(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Fh={exports:{}},Ra={},qh={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),rg=Symbol.for("react.portal"),ig=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),ag=Symbol.for("react.provider"),lg=Symbol.for("react.context"),ug=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),dg=Symbol.for("react.memo"),fg=Symbol.for("react.lazy"),rf=Symbol.iterator;function hg(t){return t===null||typeof t!="object"?null:(t=rf&&t[rf]||t["@@iterator"],typeof t=="function"?t:null)}var Kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wh=Object.assign,Vh={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=Vh,this.updater=n||Kh}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hh(){}Hh.prototype=Ri.prototype;function xc(t,e,n){this.props=t,this.context=e,this.refs=Vh,this.updater=n||Kh}var Ec=xc.prototype=new Hh;Ec.constructor=xc;Wh(Ec,Ri.prototype);Ec.isPureReactComponent=!0;var sf=Array.isArray,Gh=Object.prototype.hasOwnProperty,jc={current:null},Jh={key:!0,ref:!0,__self:!0,__source:!0};function Qh(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Gh.call(e,r)&&!Jh.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:qs,type:t,key:s,ref:a,props:i,_owner:jc.current}}function pg(t,e){return{$$typeof:qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cc(t){return typeof t=="object"&&t!==null&&t.$$typeof===qs}function mg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var of=/\/+/g;function Ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mg(""+t.key):e.toString(36)}function Vo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qs:case rg:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ll(a,0):r,sf(i)?(n="",t!=null&&(n=t.replace(of,"$&/")+"/"),Vo(i,e,n,"",function(p){return p})):i!=null&&(Cc(i)&&(i=pg(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(of,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",sf(t))for(var c=0;c<t.length;c++){s=t[c];var d=r+Ll(s,c);a+=Vo(s,e,n,d,i)}else if(d=hg(t),typeof d=="function")for(t=d.call(t),c=0;!(s=t.next()).done;)s=s.value,d=r+Ll(s,c++),a+=Vo(s,e,n,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Eo(t,e,n){if(t==null)return t;var r=[],i=0;return Vo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function vg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Ho={transition:null},gg={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:jc};function Yh(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Eo,forEach:function(t,e,n){Eo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eo(t,function(){e++}),e},toArray:function(t){return Eo(t,function(e){return e})||[]},only:function(t){if(!Cc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Ri;_e.Fragment=ig;_e.Profiler=og;_e.PureComponent=xc;_e.StrictMode=sg;_e.Suspense=cg;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gg;_e.act=Yh;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Wh({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=jc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(d in e)Gh.call(e,d)&&!Jh.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&c!==void 0?c[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){c=Array(d);for(var p=0;p<d;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:qs,type:t.type,key:i,ref:s,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:lg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ag,_context:t},t.Consumer=t};_e.createElement=Qh;_e.createFactory=function(t){var e=Qh.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:ug,render:t}};_e.isValidElement=Cc;_e.lazy=function(t){return{$$typeof:fg,_payload:{_status:-1,_result:t},_init:vg}};_e.memo=function(t,e){return{$$typeof:dg,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Ho.transition;Ho.transition={};try{t()}finally{Ho.transition=e}};_e.unstable_act=Yh;_e.useCallback=function(t,e){return _t.current.useCallback(t,e)};_e.useContext=function(t){return _t.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};_e.useEffect=function(t,e){return _t.current.useEffect(t,e)};_e.useId=function(){return _t.current.useId()};_e.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return _t.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};_e.useRef=function(t){return _t.current.useRef(t)};_e.useState=function(t){return _t.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return _t.current.useTransition()};_e.version="18.3.1";qh.exports=_e;var we=qh.exports;const ni=Bh(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yg=we,wg=Symbol.for("react.element"),_g=Symbol.for("react.fragment"),bg=Object.prototype.hasOwnProperty,kg=yg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sg={key:!0,ref:!0,__self:!0,__source:!0};function Xh(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)bg.call(e,r)&&!Sg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wg,type:t,key:s,ref:a,props:i,_owner:kg.current}}Ra.Fragment=_g;Ra.jsx=Xh;Ra.jsxs=Xh;Fh.exports=Ra;var g=Fh.exports,Zh={exports:{}},$t={},ep={exports:{}},tp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ie,fe){var he=ie.length;ie.push(fe);e:for(;0<he;){var je=he-1>>>1,ze=ie[je];if(0<i(ze,fe))ie[je]=fe,ie[he]=ze,he=je;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var fe=ie[0],he=ie.pop();if(he!==fe){ie[0]=he;e:for(var je=0,ze=ie.length,at=ze>>>1;je<at;){var zt=2*(je+1)-1,sn=ie[zt],lt=zt+1,on=ie[lt];if(0>i(sn,he))lt<ze&&0>i(on,sn)?(ie[je]=on,ie[lt]=he,je=lt):(ie[je]=sn,ie[zt]=he,je=zt);else if(lt<ze&&0>i(on,he))ie[je]=on,ie[lt]=he,je=lt;else break e}}return fe}function i(ie,fe){var he=ie.sortIndex-fe.sortIndex;return he!==0?he:ie.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var d=[],p=[],v=1,y=null,_=3,j=!1,z=!1,B=!1,H=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(ie){for(var fe=n(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=ie)r(p),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=n(p)}}function $(ie){if(B=!1,S(ie),!z)if(n(d)!==null)z=!0,Ce(V);else{var fe=n(p);fe!==null&&Ut($,fe.startTime-ie)}}function V(ie,fe){z=!1,B&&(B=!1,E(G),G=-1),j=!0;var he=_;try{for(S(fe),y=n(d);y!==null&&(!(y.expirationTime>fe)||ie&&!ye());){var je=y.callback;if(typeof je=="function"){y.callback=null,_=y.priorityLevel;var ze=je(y.expirationTime<=fe);fe=t.unstable_now(),typeof ze=="function"?y.callback=ze:y===n(d)&&r(d),S(fe)}else r(d);y=n(d)}if(y!==null)var at=!0;else{var zt=n(p);zt!==null&&Ut($,zt.startTime-fe),at=!1}return at}finally{y=null,_=he,j=!1}}var K=!1,L=null,G=-1,ae=5,Y=-1;function ye(){return!(t.unstable_now()-Y<ae)}function st(){if(L!==null){var ie=t.unstable_now();Y=ie;var fe=!0;try{fe=L(!0,ie)}finally{fe?vt():(K=!1,L=null)}}else K=!1}var vt;if(typeof b=="function")vt=function(){b(st)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,rn=ot.port2;ot.port1.onmessage=st,vt=function(){rn.postMessage(null)}}else vt=function(){H(st,0)};function Ce(ie){L=ie,K||(K=!0,vt())}function Ut(ie,fe){G=H(function(){ie(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ie){ie.callback=null},t.unstable_continueExecution=function(){z||j||(z=!0,Ce(V))},t.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<ie?Math.floor(1e3/ie):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(ie){switch(_){case 1:case 2:case 3:var fe=3;break;default:fe=_}var he=_;_=fe;try{return ie()}finally{_=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ie,fe){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var he=_;_=ie;try{return fe()}finally{_=he}},t.unstable_scheduleCallback=function(ie,fe,he){var je=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?je+he:je):he=je,ie){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=he+ze,ie={id:v++,callback:fe,priorityLevel:ie,startTime:he,expirationTime:ze,sortIndex:-1},he>je?(ie.sortIndex=he,e(p,ie),n(d)===null&&ie===n(p)&&(B?(E(G),G=-1):B=!0,Ut($,he-je))):(ie.sortIndex=ze,e(d,ie),z||j||(z=!0,Ce(V))),ie},t.unstable_shouldYield=ye,t.unstable_wrapCallback=function(ie){var fe=_;return function(){var he=_;_=fe;try{return ie.apply(this,arguments)}finally{_=he}}}})(tp);ep.exports=tp;var xg=ep.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eg=we,Dt=xg;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var np=new Set,xs={};function Ur(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(xs[t]=e,t=0;t<e.length;t++)np.add(e[t])}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_u=Object.prototype.hasOwnProperty,jg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},lf={};function Cg(t){return _u.call(lf,t)?!0:_u.call(af,t)?!1:jg.test(t)?lf[t]=!0:(af[t]=!0,!1)}function Og(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Pg(t,e,n,r){if(e===null||typeof e>"u"||Og(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Pc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Pc);it[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Pc);it[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Pc);it[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tc(t,e,n,r){var i=it.hasOwnProperty(e)?it[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Pg(e,n,i,r)&&(n=null),r||i===null?Cg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Nn=Eg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),si=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),Nc=Symbol.for("react.strict_mode"),bu=Symbol.for("react.profiler"),rp=Symbol.for("react.provider"),ip=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),ku=Symbol.for("react.suspense"),Su=Symbol.for("react.suspense_list"),Rc=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),sp=Symbol.for("react.offscreen"),uf=Symbol.iterator;function Xi(t){return t===null||typeof t!="object"?null:(t=uf&&t[uf]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Ul;function as(t){if(Ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ul=e&&e[1]||""}return`
`+Ul+t}var zl=!1;function Ml(t,e){if(!t||zl)return"";zl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,c=s.length-1;1<=a&&0<=c&&i[a]!==s[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==s[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==s[c]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=c);break}}}finally{zl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function Tg(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=Ml(t.type,!1),t;case 11:return t=Ml(t.type.render,!1),t;case 1:return t=Ml(t.type,!0),t;default:return""}}function xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case si:return"Portal";case bu:return"Profiler";case Nc:return"StrictMode";case ku:return"Suspense";case Su:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ip:return(t.displayName||"Context")+".Consumer";case rp:return(t._context.displayName||"Context")+".Provider";case Ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rc:return e=t.displayName||null,e!==null?e:xu(t.type)||"Memo";case qn:e=t._payload,t=t._init;try{return xu(t(e))}catch{}}return null}function Ng(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xu(e);case 8:return e===Nc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ir(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function op(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ag(t){var e=op(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Co(t){t._valueTracker||(t._valueTracker=Ag(t))}function ap(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=op(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ia(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eu(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function cf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ir(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lp(t,e){e=e.checked,e!=null&&Tc(t,"checked",e,!1)}function ju(t,e){lp(t,e);var n=ir(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cu(t,e.type,ir(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function df(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cu(t,e,n){(e!=="number"||ia(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ir(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ou(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ff(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(ls(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ir(n)}}function up(t,e){var n=ir(e.value),r=ir(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oo,dp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rg=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){Rg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fs[e]=fs[t]})});function fp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fs.hasOwnProperty(t)&&fs[t]?(""+e).trim():e+"px"}function hp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ig=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tu(t,e){if(e){if(Ig[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Nu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=null;function Ic(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ru=null,yi=null,wi=null;function pf(t){if(t=Vs(t)){if(typeof Ru!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Ua(e),Ru(t.stateNode,t.type,e))}}function pp(t){yi?wi?wi.push(t):wi=[t]:yi=t}function mp(){if(yi){var t=yi,e=wi;if(wi=yi=null,pf(t),e)for(t=0;t<e.length;t++)pf(e[t])}}function vp(t,e){return t(e)}function gp(){}var Bl=!1;function yp(t,e,n){if(Bl)return t(e,n);Bl=!0;try{return vp(t,e,n)}finally{Bl=!1,(yi!==null||wi!==null)&&(gp(),mp())}}function js(t,e){var n=t.stateNode;if(n===null)return null;var r=Ua(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Iu=!1;if(Cn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Iu=!1}function Dg(t,e,n,r,i,s,a,c,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var hs=!1,sa=null,oa=!1,Du=null,$g={onError:function(t){hs=!0,sa=t}};function Lg(t,e,n,r,i,s,a,c,d){hs=!1,sa=null,Dg.apply($g,arguments)}function Ug(t,e,n,r,i,s,a,c,d){if(Lg.apply(this,arguments),hs){if(hs){var p=sa;hs=!1,sa=null}else throw Error(Q(198));oa||(oa=!0,Du=p)}}function zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mf(t){if(zr(t)!==t)throw Error(Q(188))}function zg(t){var e=t.alternate;if(!e){if(e=zr(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mf(i),t;if(s===r)return mf(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function _p(t){return t=zg(t),t!==null?bp(t):null}function bp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bp(t);if(e!==null)return e;t=t.sibling}return null}var kp=Dt.unstable_scheduleCallback,vf=Dt.unstable_cancelCallback,Mg=Dt.unstable_shouldYield,Bg=Dt.unstable_requestPaint,Ke=Dt.unstable_now,Fg=Dt.unstable_getCurrentPriorityLevel,Dc=Dt.unstable_ImmediatePriority,Sp=Dt.unstable_UserBlockingPriority,aa=Dt.unstable_NormalPriority,qg=Dt.unstable_LowPriority,xp=Dt.unstable_IdlePriority,Ia=null,mn=null;function Kg(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Ia,t,void 0,(t.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Hg,Wg=Math.log,Vg=Math.LN2;function Hg(t){return t>>>=0,t===0?32:31-(Wg(t)/Vg|0)|0}var Po=64,To=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function la(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~i;c!==0?r=us(c):(s&=a,s!==0&&(r=us(s)))}else a=n&~i,a!==0?r=us(a):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-en(e),i=1<<n,r|=t[n],e&=~i;return r}function Gg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-en(s),c=1<<a,d=i[a];d===-1?(!(c&n)||c&r)&&(i[a]=Gg(c,e)):d<=e&&(t.expiredLanes|=c),s&=~c}}function $u(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ep(){var t=Po;return Po<<=1,!(Po&4194240)&&(Po=64),t}function Fl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ks(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-en(e),t[e]=n}function Qg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-en(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-en(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function jp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cp,Lc,Op,Pp,Tp,Lu=!1,No=[],Qn=null,Yn=null,Xn=null,Cs=new Map,Os=new Map,Wn=[],Yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(t,e){switch(t){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":Cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function es(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vs(e),e!==null&&Lc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Xg(t,e,n,r,i){switch(e){case"focusin":return Qn=es(Qn,t,e,n,r,i),!0;case"dragenter":return Yn=es(Yn,t,e,n,r,i),!0;case"mouseover":return Xn=es(Xn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cs.set(s,es(Cs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Os.set(s,es(Os.get(s)||null,t,e,n,r,i)),!0}return!1}function Np(t){var e=Cr(t.target);if(e!==null){var n=zr(e);if(n!==null){if(e=n.tag,e===13){if(e=wp(n),e!==null){t.blockedOn=e,Tp(t.priority,function(){Op(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Go(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Au=r,n.target.dispatchEvent(r),Au=null}else return e=Vs(n),e!==null&&Lc(e),t.blockedOn=n,!1;e.shift()}return!0}function yf(t,e,n){Go(t)&&n.delete(e)}function Zg(){Lu=!1,Qn!==null&&Go(Qn)&&(Qn=null),Yn!==null&&Go(Yn)&&(Yn=null),Xn!==null&&Go(Xn)&&(Xn=null),Cs.forEach(yf),Os.forEach(yf)}function ts(t,e){t.blockedOn===e&&(t.blockedOn=null,Lu||(Lu=!0,Dt.unstable_scheduleCallback(Dt.unstable_NormalPriority,Zg)))}function Ps(t){function e(i){return ts(i,t)}if(0<No.length){ts(No[0],t);for(var n=1;n<No.length;n++){var r=No[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qn!==null&&ts(Qn,t),Yn!==null&&ts(Yn,t),Xn!==null&&ts(Xn,t),Cs.forEach(e),Os.forEach(e),n=0;n<Wn.length;n++)r=Wn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wn.length&&(n=Wn[0],n.blockedOn===null);)Np(n),n.blockedOn===null&&Wn.shift()}var _i=Nn.ReactCurrentBatchConfig,ua=!0;function ey(t,e,n,r){var i=Ee,s=_i.transition;_i.transition=null;try{Ee=1,Uc(t,e,n,r)}finally{Ee=i,_i.transition=s}}function ty(t,e,n,r){var i=Ee,s=_i.transition;_i.transition=null;try{Ee=4,Uc(t,e,n,r)}finally{Ee=i,_i.transition=s}}function Uc(t,e,n,r){if(ua){var i=Uu(t,e,n,r);if(i===null)Xl(t,e,r,ca,n),gf(t,r);else if(Xg(i,t,e,n,r))r.stopPropagation();else if(gf(t,r),e&4&&-1<Yg.indexOf(t)){for(;i!==null;){var s=Vs(i);if(s!==null&&Cp(s),s=Uu(t,e,n,r),s===null&&Xl(t,e,r,ca,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xl(t,e,r,null,n)}}var ca=null;function Uu(t,e,n,r){if(ca=null,t=Ic(r),t=Cr(t),t!==null)if(e=zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ca=t,null}function Ap(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Fg()){case Dc:return 1;case Sp:return 4;case aa:case qg:return 16;case xp:return 536870912;default:return 16}default:return 16}}var Gn=null,zc=null,Jo=null;function Rp(){if(Jo)return Jo;var t,e=zc,n=e.length,r,i="value"in Gn?Gn.value:Gn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Jo=i.slice(t,1<r?1-r:void 0)}function Qo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ao(){return!0}function wf(){return!1}function Lt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ao:wf,this.isPropagationStopped=wf,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ao)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ao)},persist:function(){},isPersistent:Ao}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mc=Lt(Ii),Ws=Ue({},Ii,{view:0,detail:0}),ny=Lt(Ws),ql,Kl,ns,Da=Ue({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(ql=t.screenX-ns.screenX,Kl=t.screenY-ns.screenY):Kl=ql=0,ns=t),ql)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),_f=Lt(Da),ry=Ue({},Da,{dataTransfer:0}),iy=Lt(ry),sy=Ue({},Ws,{relatedTarget:0}),Wl=Lt(sy),oy=Ue({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),ay=Lt(oy),ly=Ue({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uy=Lt(ly),cy=Ue({},Ii,{data:0}),bf=Lt(cy),dy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function py(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hy[t])?!!e[t]:!1}function Bc(){return py}var my=Ue({},Ws,{key:function(t){if(t.key){var e=dy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(t){return t.type==="keypress"?Qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vy=Lt(my),gy=Ue({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kf=Lt(gy),yy=Ue({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),wy=Lt(yy),_y=Ue({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),by=Lt(_y),ky=Ue({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sy=Lt(ky),xy=[9,13,27,32],Fc=Cn&&"CompositionEvent"in window,ps=null;Cn&&"documentMode"in document&&(ps=document.documentMode);var Ey=Cn&&"TextEvent"in window&&!ps,Ip=Cn&&(!Fc||ps&&8<ps&&11>=ps),Sf=" ",xf=!1;function Dp(t,e){switch(t){case"keyup":return xy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function jy(t,e){switch(t){case"compositionend":return $p(e);case"keypress":return e.which!==32?null:(xf=!0,Sf);case"textInput":return t=e.data,t===Sf&&xf?null:t;default:return null}}function Cy(t,e){if(ai)return t==="compositionend"||!Fc&&Dp(t,e)?(t=Rp(),Jo=zc=Gn=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ip&&e.locale!=="ko"?null:e.data;default:return null}}var Oy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Oy[t.type]:e==="textarea"}function Lp(t,e,n,r){pp(r),e=da(e,"onChange"),0<e.length&&(n=new Mc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ms=null,Ts=null;function Py(t){Gp(t,0)}function $a(t){var e=ci(t);if(ap(e))return t}function Ty(t,e){if(t==="change")return e}var Up=!1;if(Cn){var Vl;if(Cn){var Hl="oninput"in document;if(!Hl){var jf=document.createElement("div");jf.setAttribute("oninput","return;"),Hl=typeof jf.oninput=="function"}Vl=Hl}else Vl=!1;Up=Vl&&(!document.documentMode||9<document.documentMode)}function Cf(){ms&&(ms.detachEvent("onpropertychange",zp),Ts=ms=null)}function zp(t){if(t.propertyName==="value"&&$a(Ts)){var e=[];Lp(e,Ts,t,Ic(t)),yp(Py,e)}}function Ny(t,e,n){t==="focusin"?(Cf(),ms=e,Ts=n,ms.attachEvent("onpropertychange",zp)):t==="focusout"&&Cf()}function Ay(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $a(Ts)}function Ry(t,e){if(t==="click")return $a(e)}function Iy(t,e){if(t==="input"||t==="change")return $a(e)}function Dy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nn=typeof Object.is=="function"?Object.is:Dy;function Ns(t,e){if(nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_u.call(e,i)||!nn(t[i],e[i]))return!1}return!0}function Of(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pf(t,e){var n=Of(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Of(n)}}function Mp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bp(){for(var t=window,e=ia();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ia(t.document)}return e}function qc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $y(t){var e=Bp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mp(n.ownerDocument.documentElement,n)){if(r!==null&&qc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Pf(n,s);var a=Pf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ly=Cn&&"documentMode"in document&&11>=document.documentMode,li=null,zu=null,vs=null,Mu=!1;function Tf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||li==null||li!==ia(r)||(r=li,"selectionStart"in r&&qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Ns(vs,r)||(vs=r,r=da(zu,"onSelect"),0<r.length&&(e=new Mc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function Ro(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},Gl={},Fp={};Cn&&(Fp=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function La(t){if(Gl[t])return Gl[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fp)return Gl[t]=e[n];return t}var qp=La("animationend"),Kp=La("animationiteration"),Wp=La("animationstart"),Vp=La("transitionend"),Hp=new Map,Nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function or(t,e){Hp.set(t,e),Ur(e,[t])}for(var Jl=0;Jl<Nf.length;Jl++){var Ql=Nf[Jl],Uy=Ql.toLowerCase(),zy=Ql[0].toUpperCase()+Ql.slice(1);or(Uy,"on"+zy)}or(qp,"onAnimationEnd");or(Kp,"onAnimationIteration");or(Wp,"onAnimationStart");or("dblclick","onDoubleClick");or("focusin","onFocus");or("focusout","onBlur");or(Vp,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),My=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function Af(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ug(r,e,void 0,t),t.currentTarget=null}function Gp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],d=c.instance,p=c.currentTarget;if(c=c.listener,d!==s&&i.isPropagationStopped())break e;Af(i,c,p),s=d}else for(a=0;a<r.length;a++){if(c=r[a],d=c.instance,p=c.currentTarget,c=c.listener,d!==s&&i.isPropagationStopped())break e;Af(i,c,p),s=d}}}if(oa)throw t=Du,oa=!1,Du=null,t}function Ae(t,e){var n=e[Wu];n===void 0&&(n=e[Wu]=new Set);var r=t+"__bubble";n.has(r)||(Jp(e,t,2,!1),n.add(r))}function Yl(t,e,n){var r=0;e&&(r|=4),Jp(n,t,r,e)}var Io="_reactListening"+Math.random().toString(36).slice(2);function As(t){if(!t[Io]){t[Io]=!0,np.forEach(function(n){n!=="selectionchange"&&(My.has(n)||Yl(n,!1,t),Yl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Io]||(e[Io]=!0,Yl("selectionchange",!1,e))}}function Jp(t,e,n,r){switch(Ap(e)){case 1:var i=ey;break;case 4:i=ty;break;default:i=Uc}n=i.bind(null,e,n,t),i=void 0,!Iu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Cr(c),a===null)return;if(d=a.tag,d===5||d===6){r=s=a;continue e}c=c.parentNode}}r=r.return}yp(function(){var p=s,v=Ic(n),y=[];e:{var _=Hp.get(t);if(_!==void 0){var j=Mc,z=t;switch(t){case"keypress":if(Qo(n)===0)break e;case"keydown":case"keyup":j=vy;break;case"focusin":z="focus",j=Wl;break;case"focusout":z="blur",j=Wl;break;case"beforeblur":case"afterblur":j=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=_f;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=iy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=wy;break;case qp:case Kp:case Wp:j=ay;break;case Vp:j=by;break;case"scroll":j=ny;break;case"wheel":j=Sy;break;case"copy":case"cut":case"paste":j=uy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=kf}var B=(e&4)!==0,H=!B&&t==="scroll",E=B?_!==null?_+"Capture":null:_;B=[];for(var b=p,S;b!==null;){S=b;var $=S.stateNode;if(S.tag===5&&$!==null&&(S=$,E!==null&&($=js(b,E),$!=null&&B.push(Rs(b,$,S)))),H)break;b=b.return}0<B.length&&(_=new j(_,z,null,n,v),y.push({event:_,listeners:B}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",_&&n!==Au&&(z=n.relatedTarget||n.fromElement)&&(Cr(z)||z[On]))break e;if((j||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,j?(z=n.relatedTarget||n.toElement,j=p,z=z?Cr(z):null,z!==null&&(H=zr(z),z!==H||z.tag!==5&&z.tag!==6)&&(z=null)):(j=null,z=p),j!==z)){if(B=_f,$="onMouseLeave",E="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(B=kf,$="onPointerLeave",E="onPointerEnter",b="pointer"),H=j==null?_:ci(j),S=z==null?_:ci(z),_=new B($,b+"leave",j,n,v),_.target=H,_.relatedTarget=S,$=null,Cr(v)===p&&(B=new B(E,b+"enter",z,n,v),B.target=S,B.relatedTarget=H,$=B),H=$,j&&z)t:{for(B=j,E=z,b=0,S=B;S;S=Jr(S))b++;for(S=0,$=E;$;$=Jr($))S++;for(;0<b-S;)B=Jr(B),b--;for(;0<S-b;)E=Jr(E),S--;for(;b--;){if(B===E||E!==null&&B===E.alternate)break t;B=Jr(B),E=Jr(E)}B=null}else B=null;j!==null&&Rf(y,_,j,B,!1),z!==null&&H!==null&&Rf(y,H,z,B,!0)}}e:{if(_=p?ci(p):window,j=_.nodeName&&_.nodeName.toLowerCase(),j==="select"||j==="input"&&_.type==="file")var V=Ty;else if(Ef(_))if(Up)V=Iy;else{V=Ay;var K=Ny}else(j=_.nodeName)&&j.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(V=Ry);if(V&&(V=V(t,p))){Lp(y,V,n,v);break e}K&&K(t,_,p),t==="focusout"&&(K=_._wrapperState)&&K.controlled&&_.type==="number"&&Cu(_,"number",_.value)}switch(K=p?ci(p):window,t){case"focusin":(Ef(K)||K.contentEditable==="true")&&(li=K,zu=p,vs=null);break;case"focusout":vs=zu=li=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,Tf(y,n,v);break;case"selectionchange":if(Ly)break;case"keydown":case"keyup":Tf(y,n,v)}var L;if(Fc)e:{switch(t){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else ai?Dp(t,n)&&(G="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Ip&&n.locale!=="ko"&&(ai||G!=="onCompositionStart"?G==="onCompositionEnd"&&ai&&(L=Rp()):(Gn=v,zc="value"in Gn?Gn.value:Gn.textContent,ai=!0)),K=da(p,G),0<K.length&&(G=new bf(G,t,null,n,v),y.push({event:G,listeners:K}),L?G.data=L:(L=$p(n),L!==null&&(G.data=L)))),(L=Ey?jy(t,n):Cy(t,n))&&(p=da(p,"onBeforeInput"),0<p.length&&(v=new bf("onBeforeInput","beforeinput",null,n,v),y.push({event:v,listeners:p}),v.data=L))}Gp(y,e)})}function Rs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function da(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=js(t,n),s!=null&&r.unshift(Rs(t,s,i)),s=js(t,e),s!=null&&r.push(Rs(t,s,i))),t=t.return}return r}function Jr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rf(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var c=n,d=c.alternate,p=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&p!==null&&(c=p,i?(d=js(n,s),d!=null&&a.unshift(Rs(n,d,c))):i||(d=js(n,s),d!=null&&a.push(Rs(n,d,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var By=/\r\n?/g,Fy=/\u0000|\uFFFD/g;function If(t){return(typeof t=="string"?t:""+t).replace(By,`
`).replace(Fy,"")}function Do(t,e,n){if(e=If(e),If(t)!==e&&n)throw Error(Q(425))}function fa(){}var Bu=null,Fu=null;function qu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ku=typeof setTimeout=="function"?setTimeout:void 0,qy=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,Ky=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(t){return Df.resolve(null).then(t).catch(Wy)}:Ku;function Wy(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ps(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ps(e)}function Zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $f(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),pn="__reactFiber$"+Di,Is="__reactProps$"+Di,On="__reactContainer$"+Di,Wu="__reactEvents$"+Di,Vy="__reactListeners$"+Di,Hy="__reactHandles$"+Di;function Cr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$f(t);t!==null;){if(n=t[pn])return n;t=$f(t)}return e}t=n,n=t.parentNode}return null}function Vs(t){return t=t[pn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Ua(t){return t[Is]||null}var Vu=[],di=-1;function ar(t){return{current:t}}function Re(t){0>di||(t.current=Vu[di],Vu[di]=null,di--)}function Pe(t,e){di++,Vu[di]=t.current,t.current=e}var sr={},mt=ar(sr),jt=ar(!1),Rr=sr;function Ei(t,e){var n=t.type.contextTypes;if(!n)return sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(t){return t=t.childContextTypes,t!=null}function ha(){Re(jt),Re(mt)}function Lf(t,e,n){if(mt.current!==sr)throw Error(Q(168));Pe(mt,e),Pe(jt,n)}function Qp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,Ng(t)||"Unknown",i));return Ue({},n,r)}function pa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sr,Rr=mt.current,Pe(mt,t),Pe(jt,jt.current),!0}function Uf(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=Qp(t,e,Rr),r.__reactInternalMemoizedMergedChildContext=t,Re(jt),Re(mt),Pe(mt,t)):Re(jt),Pe(jt,n)}var kn=null,za=!1,eu=!1;function Yp(t){kn===null?kn=[t]:kn.push(t)}function Gy(t){za=!0,Yp(t)}function lr(){if(!eu&&kn!==null){eu=!0;var t=0,e=Ee;try{var n=kn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kn=null,za=!1}catch(i){throw kn!==null&&(kn=kn.slice(t+1)),kp(Dc,lr),i}finally{Ee=e,eu=!1}}return null}var fi=[],hi=0,ma=null,va=0,Bt=[],Ft=0,Ir=null,xn=1,En="";function kr(t,e){fi[hi++]=va,fi[hi++]=ma,ma=t,va=e}function Xp(t,e,n){Bt[Ft++]=xn,Bt[Ft++]=En,Bt[Ft++]=Ir,Ir=t;var r=xn;t=En;var i=32-en(r)-1;r&=~(1<<i),n+=1;var s=32-en(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,xn=1<<32-en(e)+i|n<<i|r,En=s+t}else xn=1<<s|n<<i|r,En=t}function Kc(t){t.return!==null&&(kr(t,1),Xp(t,1,0))}function Wc(t){for(;t===ma;)ma=fi[--hi],fi[hi]=null,va=fi[--hi],fi[hi]=null;for(;t===Ir;)Ir=Bt[--Ft],Bt[Ft]=null,En=Bt[--Ft],Bt[Ft]=null,xn=Bt[--Ft],Bt[Ft]=null}var It=null,Rt=null,De=!1,Xt=null;function Zp(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,It=t,Rt=Zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,It=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ir!==null?{id:xn,overflow:En}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,It=t,Rt=null,!0):!1;default:return!1}}function Hu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gu(t){if(De){var e=Rt;if(e){var n=e;if(!zf(t,e)){if(Hu(t))throw Error(Q(418));e=Zn(n.nextSibling);var r=It;e&&zf(t,e)?Zp(r,n):(t.flags=t.flags&-4097|2,De=!1,It=t)}}else{if(Hu(t))throw Error(Q(418));t.flags=t.flags&-4097|2,De=!1,It=t}}}function Mf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;It=t}function $o(t){if(t!==It)return!1;if(!De)return Mf(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qu(t.type,t.memoizedProps)),e&&(e=Rt)){if(Hu(t))throw em(),Error(Q(418));for(;e;)Zp(t,e),e=Zn(e.nextSibling)}if(Mf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=It?Zn(t.stateNode.nextSibling):null;return!0}function em(){for(var t=Rt;t;)t=Zn(t.nextSibling)}function ji(){Rt=It=null,De=!1}function Vc(t){Xt===null?Xt=[t]:Xt.push(t)}var Jy=Nn.ReactCurrentBatchConfig;function rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var c=i.refs;a===null?delete c[s]:c[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Lo(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function tm(t){function e(E,b){if(t){var S=E.deletions;S===null?(E.deletions=[b],E.flags|=16):S.push(b)}}function n(E,b){if(!t)return null;for(;b!==null;)e(E,b),b=b.sibling;return null}function r(E,b){for(E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function i(E,b){return E=rr(E,b),E.index=0,E.sibling=null,E}function s(E,b,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<b?(E.flags|=2,b):S):(E.flags|=2,b)):(E.flags|=1048576,b)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function c(E,b,S,$){return b===null||b.tag!==6?(b=au(S,E.mode,$),b.return=E,b):(b=i(b,S),b.return=E,b)}function d(E,b,S,$){var V=S.type;return V===oi?v(E,b,S.props.children,$,S.key):b!==null&&(b.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===qn&&Bf(V)===b.type)?($=i(b,S.props),$.ref=rs(E,b,S),$.return=E,$):($=ra(S.type,S.key,S.props,null,E.mode,$),$.ref=rs(E,b,S),$.return=E,$)}function p(E,b,S,$){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=lu(S,E.mode,$),b.return=E,b):(b=i(b,S.children||[]),b.return=E,b)}function v(E,b,S,$,V){return b===null||b.tag!==7?(b=Ar(S,E.mode,$,V),b.return=E,b):(b=i(b,S),b.return=E,b)}function y(E,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=au(""+b,E.mode,S),b.return=E,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jo:return S=ra(b.type,b.key,b.props,null,E.mode,S),S.ref=rs(E,null,b),S.return=E,S;case si:return b=lu(b,E.mode,S),b.return=E,b;case qn:var $=b._init;return y(E,$(b._payload),S)}if(ls(b)||Xi(b))return b=Ar(b,E.mode,S,null),b.return=E,b;Lo(E,b)}return null}function _(E,b,S,$){var V=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return V!==null?null:c(E,b,""+S,$);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jo:return S.key===V?d(E,b,S,$):null;case si:return S.key===V?p(E,b,S,$):null;case qn:return V=S._init,_(E,b,V(S._payload),$)}if(ls(S)||Xi(S))return V!==null?null:v(E,b,S,$,null);Lo(E,S)}return null}function j(E,b,S,$,V){if(typeof $=="string"&&$!==""||typeof $=="number")return E=E.get(S)||null,c(b,E,""+$,V);if(typeof $=="object"&&$!==null){switch($.$$typeof){case jo:return E=E.get($.key===null?S:$.key)||null,d(b,E,$,V);case si:return E=E.get($.key===null?S:$.key)||null,p(b,E,$,V);case qn:var K=$._init;return j(E,b,S,K($._payload),V)}if(ls($)||Xi($))return E=E.get(S)||null,v(b,E,$,V,null);Lo(b,$)}return null}function z(E,b,S,$){for(var V=null,K=null,L=b,G=b=0,ae=null;L!==null&&G<S.length;G++){L.index>G?(ae=L,L=null):ae=L.sibling;var Y=_(E,L,S[G],$);if(Y===null){L===null&&(L=ae);break}t&&L&&Y.alternate===null&&e(E,L),b=s(Y,b,G),K===null?V=Y:K.sibling=Y,K=Y,L=ae}if(G===S.length)return n(E,L),De&&kr(E,G),V;if(L===null){for(;G<S.length;G++)L=y(E,S[G],$),L!==null&&(b=s(L,b,G),K===null?V=L:K.sibling=L,K=L);return De&&kr(E,G),V}for(L=r(E,L);G<S.length;G++)ae=j(L,E,G,S[G],$),ae!==null&&(t&&ae.alternate!==null&&L.delete(ae.key===null?G:ae.key),b=s(ae,b,G),K===null?V=ae:K.sibling=ae,K=ae);return t&&L.forEach(function(ye){return e(E,ye)}),De&&kr(E,G),V}function B(E,b,S,$){var V=Xi(S);if(typeof V!="function")throw Error(Q(150));if(S=V.call(S),S==null)throw Error(Q(151));for(var K=V=null,L=b,G=b=0,ae=null,Y=S.next();L!==null&&!Y.done;G++,Y=S.next()){L.index>G?(ae=L,L=null):ae=L.sibling;var ye=_(E,L,Y.value,$);if(ye===null){L===null&&(L=ae);break}t&&L&&ye.alternate===null&&e(E,L),b=s(ye,b,G),K===null?V=ye:K.sibling=ye,K=ye,L=ae}if(Y.done)return n(E,L),De&&kr(E,G),V;if(L===null){for(;!Y.done;G++,Y=S.next())Y=y(E,Y.value,$),Y!==null&&(b=s(Y,b,G),K===null?V=Y:K.sibling=Y,K=Y);return De&&kr(E,G),V}for(L=r(E,L);!Y.done;G++,Y=S.next())Y=j(L,E,G,Y.value,$),Y!==null&&(t&&Y.alternate!==null&&L.delete(Y.key===null?G:Y.key),b=s(Y,b,G),K===null?V=Y:K.sibling=Y,K=Y);return t&&L.forEach(function(st){return e(E,st)}),De&&kr(E,G),V}function H(E,b,S,$){if(typeof S=="object"&&S!==null&&S.type===oi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case jo:e:{for(var V=S.key,K=b;K!==null;){if(K.key===V){if(V=S.type,V===oi){if(K.tag===7){n(E,K.sibling),b=i(K,S.props.children),b.return=E,E=b;break e}}else if(K.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===qn&&Bf(V)===K.type){n(E,K.sibling),b=i(K,S.props),b.ref=rs(E,K,S),b.return=E,E=b;break e}n(E,K);break}else e(E,K);K=K.sibling}S.type===oi?(b=Ar(S.props.children,E.mode,$,S.key),b.return=E,E=b):($=ra(S.type,S.key,S.props,null,E.mode,$),$.ref=rs(E,b,S),$.return=E,E=$)}return a(E);case si:e:{for(K=S.key;b!==null;){if(b.key===K)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(E,b.sibling),b=i(b,S.children||[]),b.return=E,E=b;break e}else{n(E,b);break}else e(E,b);b=b.sibling}b=lu(S,E.mode,$),b.return=E,E=b}return a(E);case qn:return K=S._init,H(E,b,K(S._payload),$)}if(ls(S))return z(E,b,S,$);if(Xi(S))return B(E,b,S,$);Lo(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(E,b.sibling),b=i(b,S),b.return=E,E=b):(n(E,b),b=au(S,E.mode,$),b.return=E,E=b),a(E)):n(E,b)}return H}var Ci=tm(!0),nm=tm(!1),ga=ar(null),ya=null,pi=null,Hc=null;function Gc(){Hc=pi=ya=null}function Jc(t){var e=ga.current;Re(ga),t._currentValue=e}function Ju(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){ya=t,Hc=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Hc!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(ya===null)throw Error(Q(308));pi=t,ya.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var Or=null;function Qc(t){Or===null?Or=[t]:Or.push(t)}function rm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Qc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pn(t,r)}function Pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kn=!1;function Yc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function im(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pn(t,n)}return i=r.interleaved,i===null?(e.next=e,Qc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pn(t,n)}function Yo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}function Ff(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wa(t,e,n,r){var i=t.updateQueue;Kn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,p=d.next;d.next=null,a===null?s=p:a.next=p,a=d;var v=t.alternate;v!==null&&(v=v.updateQueue,c=v.lastBaseUpdate,c!==a&&(c===null?v.firstBaseUpdate=p:c.next=p,v.lastBaseUpdate=d))}if(s!==null){var y=i.baseState;a=0,v=p=d=null,c=s;do{var _=c.lane,j=c.eventTime;if((r&_)===_){v!==null&&(v=v.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var z=t,B=c;switch(_=e,j=n,B.tag){case 1:if(z=B.payload,typeof z=="function"){y=z.call(j,y,_);break e}y=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=B.payload,_=typeof z=="function"?z.call(j,y,_):z,_==null)break e;y=Ue({},y,_);break e;case 2:Kn=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[c]:_.push(c))}else j={eventTime:j,lane:_,tag:c.tag,payload:c.payload,callback:c.callback,next:null},v===null?(p=v=j,d=y):v=v.next=j,a|=_;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;_=c,c=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(v===null&&(d=y),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=v,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$r|=a,t.lanes=a,t.memoizedState=y}}function qf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Hs={},vn=ar(Hs),Ds=ar(Hs),$s=ar(Hs);function Pr(t){if(t===Hs)throw Error(Q(174));return t}function Xc(t,e){switch(Pe($s,e),Pe(Ds,t),Pe(vn,Hs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pu(e,t)}Re(vn),Pe(vn,e)}function Oi(){Re(vn),Re(Ds),Re($s)}function sm(t){Pr($s.current);var e=Pr(vn.current),n=Pu(e,t.type);e!==n&&(Pe(Ds,t),Pe(vn,n))}function Zc(t){Ds.current===t&&(Re(vn),Re(Ds))}var $e=ar(0);function _a(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tu=[];function ed(){for(var t=0;t<tu.length;t++)tu[t]._workInProgressVersionPrimary=null;tu.length=0}var Xo=Nn.ReactCurrentDispatcher,nu=Nn.ReactCurrentBatchConfig,Dr=0,Le=null,Je=null,Ze=null,ba=!1,gs=!1,Ls=0,Qy=0;function ft(){throw Error(Q(321))}function td(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nn(t[n],e[n]))return!1;return!0}function nd(t,e,n,r,i,s){if(Dr=s,Le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=t===null||t.memoizedState===null?e0:t0,t=n(r,i),gs){s=0;do{if(gs=!1,Ls=0,25<=s)throw Error(Q(301));s+=1,Ze=Je=null,e.updateQueue=null,Xo.current=n0,t=n(r,i)}while(gs)}if(Xo.current=ka,e=Je!==null&&Je.next!==null,Dr=0,Ze=Je=Le=null,ba=!1,e)throw Error(Q(300));return t}function rd(){var t=Ls!==0;return Ls=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Le.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function Vt(){if(Je===null){var t=Le.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=Ze===null?Le.memoizedState:Ze.next;if(e!==null)Ze=e,Je=t;else{if(t===null)throw Error(Q(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Ze===null?Le.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function Us(t,e){return typeof e=="function"?e(t):e}function ru(t){var e=Vt(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var c=a=null,d=null,p=s;do{var v=p.lane;if((Dr&v)===v)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(c=d=y,a=r):d=d.next=y,Le.lanes|=v,$r|=v}p=p.next}while(p!==null&&p!==s);d===null?a=r:d.next=c,nn(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Le.lanes|=s,$r|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iu(t){var e=Vt(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);nn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function om(){}function am(t,e){var n=Le,r=Vt(),i=e(),s=!nn(r.memoizedState,i);if(s&&(r.memoizedState=i,Et=!0),r=r.queue,id(cm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ze!==null&&Ze.memoizedState.tag&1){if(n.flags|=2048,zs(9,um.bind(null,n,r,i,e),void 0,null),et===null)throw Error(Q(349));Dr&30||lm(n,e,i)}return i}function lm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function um(t,e,n,r){e.value=n,e.getSnapshot=r,dm(e)&&fm(t)}function cm(t,e,n){return n(function(){dm(e)&&fm(t)})}function dm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nn(t,n)}catch{return!0}}function fm(t){var e=Pn(t,1);e!==null&&tn(e,t,1,-1)}function Kf(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:t},e.queue=t,t=t.dispatch=Zy.bind(null,Le,t),[e.memoizedState,t]}function zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Le.updateQueue,e===null?(e={lastEffect:null,stores:null},Le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hm(){return Vt().memoizedState}function Zo(t,e,n,r){var i=fn();Le.flags|=t,i.memoizedState=zs(1|e,n,void 0,r===void 0?null:r)}function Ma(t,e,n,r){var i=Vt();r=r===void 0?null:r;var s=void 0;if(Je!==null){var a=Je.memoizedState;if(s=a.destroy,r!==null&&td(r,a.deps)){i.memoizedState=zs(e,n,s,r);return}}Le.flags|=t,i.memoizedState=zs(1|e,n,s,r)}function Wf(t,e){return Zo(8390656,8,t,e)}function id(t,e){return Ma(2048,8,t,e)}function pm(t,e){return Ma(4,2,t,e)}function mm(t,e){return Ma(4,4,t,e)}function vm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gm(t,e,n){return n=n!=null?n.concat([t]):null,Ma(4,4,vm.bind(null,e,t),n)}function sd(){}function ym(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&td(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wm(t,e){var n=Vt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&td(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function _m(t,e,n){return Dr&21?(nn(n,e)||(n=Ep(),Le.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function Yy(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=nu.transition;nu.transition={};try{t(!1),e()}finally{Ee=n,nu.transition=r}}function bm(){return Vt().memoizedState}function Xy(t,e,n){var r=nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},km(t))Sm(e,n);else if(n=rm(t,e,n,r),n!==null){var i=wt();tn(n,t,r,i),xm(n,e,r)}}function Zy(t,e,n){var r=nr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(km(t))Sm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,c=s(a,n);if(i.hasEagerState=!0,i.eagerState=c,nn(c,a)){var d=e.interleaved;d===null?(i.next=i,Qc(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=rm(t,e,i,r),n!==null&&(i=wt(),tn(n,t,r,i),xm(n,e,r))}}function km(t){var e=t.alternate;return t===Le||e!==null&&e===Le}function Sm(t,e){gs=ba=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}var ka={readContext:Wt,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},e0={readContext:Wt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:Wf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4194308,4,vm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zo(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Xy.bind(null,Le,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:Kf,useDebugValue:sd,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=Kf(!1),e=t[0];return t=Yy.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Le,i=fn();if(De){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),et===null)throw Error(Q(349));Dr&30||lm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Wf(cm.bind(null,r,s,t),[t]),r.flags|=2048,zs(9,um.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=fn(),e=et.identifierPrefix;if(De){var n=En,r=xn;n=(r&~(1<<32-en(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ls++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t0={readContext:Wt,useCallback:ym,useContext:Wt,useEffect:id,useImperativeHandle:gm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:wm,useReducer:ru,useRef:hm,useState:function(){return ru(Us)},useDebugValue:sd,useDeferredValue:function(t){var e=Vt();return _m(e,Je.memoizedState,t)},useTransition:function(){var t=ru(Us)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:om,useSyncExternalStore:am,useId:bm,unstable_isNewReconciler:!1},n0={readContext:Wt,useCallback:ym,useContext:Wt,useEffect:id,useImperativeHandle:gm,useInsertionEffect:pm,useLayoutEffect:mm,useMemo:wm,useReducer:iu,useRef:hm,useState:function(){return iu(Us)},useDebugValue:sd,useDeferredValue:function(t){var e=Vt();return Je===null?e.memoizedState=t:_m(e,Je.memoizedState,t)},useTransition:function(){var t=iu(Us)[0],e=Vt().memoizedState;return[t,e]},useMutableSource:om,useSyncExternalStore:am,useId:bm,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return(t=t._reactInternals)?zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=nr(t),s=jn(r,i);s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(tn(e,t,i,r),Yo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=nr(t),s=jn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=er(t,s,i),e!==null&&(tn(e,t,i,r),Yo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=nr(t),i=jn(n,r);i.tag=2,e!=null&&(i.callback=e),e=er(t,i,r),e!==null&&(tn(e,t,r,n),Yo(e,t,r))}};function Vf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Ns(n,r)||!Ns(i,s):!0}function Em(t,e,n){var r=!1,i=sr,s=e.contextType;return typeof s=="object"&&s!==null?s=Wt(s):(i=Ct(e)?Rr:mt.current,r=e.contextTypes,s=(r=r!=null)?Ei(t,i):sr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Hf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function Yu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wt(s):(s=Ct(e)?Rr:mt.current,i.context=Ei(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ba.enqueueReplaceState(i,i.state,null),wa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=Tg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var r0=typeof WeakMap=="function"?WeakMap:Map;function jm(t,e,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xa||(xa=!0,lc=r),Xu(t,e)},n}function Cm(t,e,n){n=jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xu(t,e),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Gf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new r0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=g0.bind(null,t,e,n),e.then(t,t))}function Jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jn(-1,1),e.tag=2,er(n,e,1))),n.lanes|=1),t)}var i0=Nn.ReactCurrentOwner,Et=!1;function yt(t,e,n,r){e.child=t===null?nm(e,null,n,r):Ci(e,t.child,n,r)}function Yf(t,e,n,r,i){n=n.render;var s=e.ref;return bi(e,i),r=nd(t,e,n,r,s,i),n=rd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(De&&n&&Kc(e),e.flags|=1,yt(t,e,r,i),e.child)}function Xf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Om(t,e,s,r,i)):(t=ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(a,r)&&t.ref===e.ref)return Tn(t,e,i)}return e.flags|=1,t=rr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Om(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ns(s,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Tn(t,e,i)}return Zu(t,e,n,r,i)}function Pm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(vi,At),At|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(vi,At),At|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(vi,At),At|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(vi,At),At|=r;return yt(t,e,i,n),e.child}function Tm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zu(t,e,n,r,i){var s=Ct(n)?Rr:mt.current;return s=Ei(e,s),bi(e,i),n=nd(t,e,n,r,s,i),r=rd(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tn(t,e,i)):(De&&r&&Kc(e),e.flags|=1,yt(t,e,n,i),e.child)}function Zf(t,e,n,r,i){if(Ct(n)){var s=!0;pa(e)}else s=!1;if(bi(e,i),e.stateNode===null)ea(t,e),Em(e,n,r),Yu(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Wt(p):(p=Ct(n)?Rr:mt.current,p=Ei(e,p));var v=n.getDerivedStateFromProps,y=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||d!==p)&&Hf(e,a,r,p),Kn=!1;var _=e.memoizedState;a.state=_,wa(e,r,a,i),d=e.memoizedState,c!==r||_!==d||jt.current||Kn?(typeof v=="function"&&(Qu(e,n,v,r),d=e.memoizedState),(c=Kn||Vf(e,n,c,r,_,d,p))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=p,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,im(t,e),c=e.memoizedProps,p=e.type===e.elementType?c:Jt(e.type,c),a.props=p,y=e.pendingProps,_=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Wt(d):(d=Ct(n)?Rr:mt.current,d=Ei(e,d));var j=n.getDerivedStateFromProps;(v=typeof j=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==y||_!==d)&&Hf(e,a,r,d),Kn=!1,_=e.memoizedState,a.state=_,wa(e,r,a,i);var z=e.memoizedState;c!==y||_!==z||jt.current||Kn?(typeof j=="function"&&(Qu(e,n,j,r),z=e.memoizedState),(p=Kn||Vf(e,n,p,r,_,z,d)||!1)?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,z,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,z,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=z),a.props=r,a.state=z,a.context=d,r=p):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return ec(t,e,n,r,s,i)}function ec(t,e,n,r,i,s){Tm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Uf(e,n,!1),Tn(t,e,s);r=e.stateNode,i0.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ci(e,t.child,null,s),e.child=Ci(e,null,c,s)):yt(t,e,c,s),e.memoizedState=r.state,i&&Uf(e,n,!0),e.child}function Nm(t){var e=t.stateNode;e.pendingContext?Lf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lf(t,e.context,!1),Xc(t,e.containerInfo)}function eh(t,e,n,r,i){return ji(),Vc(i),e.flags|=256,yt(t,e,n,r),e.child}var tc={dehydrated:null,treeContext:null,retryLane:0};function nc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Am(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe($e,i&1),t===null)return Gu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ka(a,r,0,null),t=Ar(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nc(n),e.memoizedState=tc,t):od(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return s0(t,e,a,r,c,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=rr(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?s=rr(c,s):(s=Ar(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?nc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=tc,r}return s=t.child,t=s.sibling,r=rr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function od(t,e){return e=Ka({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uo(t,e,n,r){return r!==null&&Vc(r),Ci(e,t.child,null,n),t=od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s0(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=su(Error(Q(422))),Uo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ka({mode:"visible",children:r.children},i,0,null),s=Ar(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ci(e,t.child,null,a),e.child.memoizedState=nc(a),e.memoizedState=tc,s);if(!(e.mode&1))return Uo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,s=Error(Q(419)),r=su(s,r,void 0),Uo(t,e,a,r)}if(c=(a&t.childLanes)!==0,Et||c){if(r=et,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pn(t,i),tn(r,t,i,-1))}return fd(),r=su(Error(Q(421))),Uo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=y0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rt=Zn(i.nextSibling),It=e,De=!0,Xt=null,t!==null&&(Bt[Ft++]=xn,Bt[Ft++]=En,Bt[Ft++]=Ir,xn=t.id,En=t.overflow,Ir=e),e=od(e,r.children),e.flags|=4096,e)}function th(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ju(t.return,e,n)}function ou(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Rm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&th(t,n,e);else if(t.tag===19)th(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_a(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ou(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_a(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ou(e,!0,n,null,s);break;case"together":ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o0(t,e,n){switch(e.tag){case 3:Nm(e),ji();break;case 5:sm(e);break;case 1:Ct(e.type)&&pa(e);break;case 4:Xc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(ga,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?Am(t,e,n):(Pe($e,$e.current&1),t=Tn(t,e,n),t!==null?t.sibling:null);Pe($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Rm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,Pm(t,e,n)}return Tn(t,e,n)}var Im,rc,Dm,$m;Im=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rc=function(){};Dm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Pr(vn.current);var s=null;switch(n){case"input":i=Eu(t,i),r=Eu(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=Ou(t,i),r=Ou(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fa)}Tu(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var c=i[p];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xs.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var d=r[p];if(c=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==c&&(d!=null||c!=null))if(p==="style")if(c){for(a in c)!c.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&c[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xs.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ae("scroll",t),s||c===d||(s=[])):(s=s||[]).push(p,d))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};$m=function(t,e,n,r){n!==r&&(e.flags|=4)};function is(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function a0(t,e,n){var r=e.pendingProps;switch(Wc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Ct(e.type)&&ha(),ht(e),null;case 3:return r=e.stateNode,Oi(),Re(jt),Re(mt),ed(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($o(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&(dc(Xt),Xt=null))),rc(t,e),ht(e),null;case 5:Zc(e);var i=Pr($s.current);if(n=e.type,t!==null&&e.stateNode!=null)Dm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return ht(e),null}if(t=Pr(vn.current),$o(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[pn]=e,r[Is]=s,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)Ae(cs[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":cf(r,s),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ae("invalid",r);break;case"textarea":ff(r,s),Ae("invalid",r)}Tu(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var c=s[a];a==="children"?typeof c=="string"?r.textContent!==c&&(s.suppressHydrationWarning!==!0&&Do(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Do(r.textContent,c,t),i=["children",""+c]):xs.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Co(r),df(r,s,!0);break;case"textarea":Co(r),hf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=fa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[pn]=e,t[Is]=r,Im(t,e,!1,!1),e.stateNode=t;e:{switch(a=Nu(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)Ae(cs[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":cf(t,r),i=Eu(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":ff(t,r),i=Ou(t,r),Ae("invalid",t);break;default:i=r}Tu(n,i),c=i;for(s in c)if(c.hasOwnProperty(s)){var d=c[s];s==="style"?hp(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&dp(t,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Es(t,d):typeof d=="number"&&Es(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xs.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Ae("scroll",t):d!=null&&Tc(t,s,d,a))}switch(n){case"input":Co(t),df(t,r,!1);break;case"textarea":Co(t),hf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ir(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?gi(t,!!r.multiple,s,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)$m(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Pr($s.current),Pr(vn.current),$o(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(s=r.nodeValue!==n)&&(t=It,t!==null))switch(t.tag){case 3:Do(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Do(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return ht(e),null;case 13:if(Re($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Rt!==null&&e.mode&1&&!(e.flags&128))em(),ji(),e.flags|=98560,s=!1;else if(s=$o(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[pn]=e}else ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else Xt!==null&&(dc(Xt),Xt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?Qe===0&&(Qe=3):fd())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Oi(),rc(t,e),t===null&&As(e.stateNode.containerInfo),ht(e),null;case 10:return Jc(e.type._context),ht(e),null;case 17:return Ct(e.type)&&ha(),ht(e),null;case 19:if(Re($e),s=e.memoizedState,s===null)return ht(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)is(s,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=_a(t),a!==null){for(e.flags|=128,is(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ke()>Ti&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304)}else{if(!r)if(t=_a(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!De)return ht(e),null}else 2*Ke()-s.renderingStartTime>Ti&&n!==1073741824&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ke(),e.sibling=null,n=$e.current,Pe($e,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return dd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?At&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function l0(t,e){switch(Wc(e),e.tag){case 1:return Ct(e.type)&&ha(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),Re(jt),Re(mt),ed(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zc(e),null;case 13:if(Re($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re($e),null;case 4:return Oi(),null;case 10:return Jc(e.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var zo=!1,pt=!1,u0=typeof WeakSet=="function"?WeakSet:Set,le=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(t,e,r)}else n.current=null}function ic(t,e,n){try{n()}catch(r){Be(t,e,r)}}var nh=!1;function c0(t,e){if(Bu=ua,t=Bp(),qc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,c=-1,d=-1,p=0,v=0,y=t,_=null;t:for(;;){for(var j;y!==n||i!==0&&y.nodeType!==3||(c=a+i),y!==s||r!==0&&y.nodeType!==3||(d=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(j=y.firstChild)!==null;)_=y,y=j;for(;;){if(y===t)break t;if(_===n&&++p===i&&(c=a),_===s&&++v===r&&(d=a),(j=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=j}n=c===-1||d===-1?null:{start:c,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:t,selectionRange:n},ua=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var B=z.memoizedProps,H=z.memoizedState,E=e.stateNode,b=E.getSnapshotBeforeUpdate(e.elementType===e.type?B:Jt(e.type,B),H);E.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch($){Be(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return z=nh,nh=!1,z}function ys(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ic(e,n,s)}i=i.next}while(i!==r)}}function Fa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lm(t){var e=t.alternate;e!==null&&(t.alternate=null,Lm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Is],delete e[Wu],delete e[Vy],delete e[Hy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Um(t){return t.tag===5||t.tag===3||t.tag===4}function rh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Um(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fa));else if(r!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}function ac(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ac(t,e,n),t=t.sibling;t!==null;)ac(t,e,n),t=t.sibling}var nt=null,Qt=!1;function zn(t,e,n){for(n=n.child;n!==null;)zm(t,e,n),n=n.sibling}function zm(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Ia,n)}catch{}switch(n.tag){case 5:pt||mi(n,e);case 6:var r=nt,i=Qt;nt=null,zn(t,e,n),nt=r,Qt=i,nt!==null&&(Qt?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(Qt?(t=nt,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),Ps(t)):Zl(nt,n.stateNode));break;case 4:r=nt,i=Qt,nt=n.stateNode.containerInfo,Qt=!0,zn(t,e,n),nt=r,Qt=i;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&ic(n,e,a),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!pt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Be(n,e,c)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,zn(t,e,n),pt=r):zn(t,e,n);break;default:zn(t,e,n)}}function ih(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new u0),e.forEach(function(r){var i=w0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:nt=c.stateNode,Qt=!1;break e;case 3:nt=c.stateNode.containerInfo,Qt=!0;break e;case 4:nt=c.stateNode.containerInfo,Qt=!0;break e}c=c.return}if(nt===null)throw Error(Q(160));zm(s,a,i),nt=null,Qt=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){Be(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mm(e,t),e=e.sibling}function Mm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),dn(t),r&4){try{ys(3,t,t.return),Fa(3,t)}catch(B){Be(t,t.return,B)}try{ys(5,t,t.return)}catch(B){Be(t,t.return,B)}}break;case 1:Ht(e,t),dn(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(Ht(e,t),dn(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var i=t.stateNode;try{Es(i,"")}catch(B){Be(t,t.return,B)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,c=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&lp(i,s),Nu(c,a);var p=Nu(c,s);for(a=0;a<d.length;a+=2){var v=d[a],y=d[a+1];v==="style"?hp(i,y):v==="dangerouslySetInnerHTML"?dp(i,y):v==="children"?Es(i,y):Tc(i,v,y,p)}switch(c){case"input":ju(i,s);break;case"textarea":up(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var j=s.value;j!=null?gi(i,!!s.multiple,j,!1):_!==!!s.multiple&&(s.defaultValue!=null?gi(i,!!s.multiple,s.defaultValue,!0):gi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Is]=s}catch(B){Be(t,t.return,B)}}break;case 6:if(Ht(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(B){Be(t,t.return,B)}}break;case 3:if(Ht(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(B){Be(t,t.return,B)}break;case 4:Ht(e,t),dn(t);break;case 13:Ht(e,t),dn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ud=Ke())),r&4&&ih(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(p=pt)||v,Ht(e,t),pt=p):Ht(e,t),dn(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(le=t,v=t.child;v!==null;){for(y=le=v;le!==null;){switch(_=le,j=_.child,_.tag){case 0:case 11:case 14:case 15:ys(4,_,_.return);break;case 1:mi(_,_.return);var z=_.stateNode;if(typeof z.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,z.props=e.memoizedProps,z.state=e.memoizedState,z.componentWillUnmount()}catch(B){Be(r,n,B)}}break;case 5:mi(_,_.return);break;case 22:if(_.memoizedState!==null){oh(y);continue}}j!==null?(j.return=_,le=j):oh(y)}v=v.sibling}e:for(v=null,y=t;;){if(y.tag===5){if(v===null){v=y;try{i=y.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=fp("display",a))}catch(B){Be(t,t.return,B)}}}else if(y.tag===6){if(v===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(B){Be(t,t.return,B)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;v===y&&(v=null),y=y.return}v===y&&(v=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Ht(e,t),dn(t),r&4&&ih(t);break;case 21:break;default:Ht(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Um(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Es(i,""),r.flags&=-33);var s=rh(t);ac(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=rh(t);oc(t,c,a);break;default:throw Error(Q(161))}}catch(d){Be(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d0(t,e,n){le=t,Bm(t)}function Bm(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||zo;if(!a){var c=i.alternate,d=c!==null&&c.memoizedState!==null||pt;c=zo;var p=pt;if(zo=a,(pt=d)&&!p)for(le=i;le!==null;)a=le,d=a.child,a.tag===22&&a.memoizedState!==null?ah(i):d!==null?(d.return=a,le=d):ah(i);for(;s!==null;)le=s,Bm(s),s=s.sibling;le=i,zo=c,pt=p}sh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,le=s):sh(t)}}function sh(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Fa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qf(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qf(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var y=v.dehydrated;y!==null&&Ps(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}pt||e.flags&512&&sc(e)}catch(_){Be(e,e.return,_)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function oh(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function ah(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fa(4,e)}catch(d){Be(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){Be(e,i,d)}}var s=e.return;try{sc(e)}catch(d){Be(e,s,d)}break;case 5:var a=e.return;try{sc(e)}catch(d){Be(e,a,d)}}}catch(d){Be(e,e.return,d)}if(e===t){le=null;break}var c=e.sibling;if(c!==null){c.return=e.return,le=c;break}le=e.return}}var f0=Math.ceil,Sa=Nn.ReactCurrentDispatcher,ad=Nn.ReactCurrentOwner,Kt=Nn.ReactCurrentBatchConfig,Se=0,et=null,He=null,rt=0,At=0,vi=ar(0),Qe=0,Ms=null,$r=0,qa=0,ld=0,ws=null,St=null,ud=0,Ti=1/0,_n=null,xa=!1,lc=null,tr=null,Mo=!1,Jn=null,Ea=0,_s=0,uc=null,ta=-1,na=0;function wt(){return Se&6?Ke():ta!==-1?ta:ta=Ke()}function nr(t){return t.mode&1?Se&2&&rt!==0?rt&-rt:Jy.transition!==null?(na===0&&(na=Ep()),na):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Ap(t.type)),t):1}function tn(t,e,n,r){if(50<_s)throw _s=0,uc=null,Error(Q(185));Ks(t,n,r),(!(Se&2)||t!==et)&&(t===et&&(!(Se&2)&&(qa|=n),Qe===4&&Vn(t,rt)),Ot(t,r),n===1&&Se===0&&!(e.mode&1)&&(Ti=Ke()+500,za&&lr()))}function Ot(t,e){var n=t.callbackNode;Jg(t,e);var r=la(t,t===et?rt:0);if(r===0)n!==null&&vf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vf(n),e===1)t.tag===0?Gy(lh.bind(null,t)):Yp(lh.bind(null,t)),Ky(function(){!(Se&6)&&lr()}),n=null;else{switch(jp(r)){case 1:n=Dc;break;case 4:n=Sp;break;case 16:n=aa;break;case 536870912:n=xp;break;default:n=aa}n=Jm(n,Fm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Fm(t,e){if(ta=-1,na=0,Se&6)throw Error(Q(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=la(t,t===et?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ja(t,r);else{e=r;var i=Se;Se|=2;var s=Km();(et!==t||rt!==e)&&(_n=null,Ti=Ke()+500,Nr(t,e));do try{m0();break}catch(c){qm(t,c)}while(!0);Gc(),Sa.current=s,Se=i,He!==null?e=0:(et=null,rt=0,e=Qe)}if(e!==0){if(e===2&&(i=$u(t),i!==0&&(r=i,e=cc(t,i))),e===1)throw n=Ms,Nr(t,0),Vn(t,r),Ot(t,Ke()),n;if(e===6)Vn(t,r);else{if(i=t.current.alternate,!(r&30)&&!h0(i)&&(e=ja(t,r),e===2&&(s=$u(t),s!==0&&(r=s,e=cc(t,s))),e===1))throw n=Ms,Nr(t,0),Vn(t,r),Ot(t,Ke()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Sr(t,St,_n);break;case 3:if(Vn(t,r),(r&130023424)===r&&(e=ud+500-Ke(),10<e)){if(la(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ku(Sr.bind(null,t,St,_n),e);break}Sr(t,St,_n);break;case 4:if(Vn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-en(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*f0(r/1960))-r,10<r){t.timeoutHandle=Ku(Sr.bind(null,t,St,_n),r);break}Sr(t,St,_n);break;case 5:Sr(t,St,_n);break;default:throw Error(Q(329))}}}return Ot(t,Ke()),t.callbackNode===n?Fm.bind(null,t):null}function cc(t,e){var n=ws;return t.current.memoizedState.isDehydrated&&(Nr(t,e).flags|=256),t=ja(t,e),t!==2&&(e=St,St=n,e!==null&&dc(e)),t}function dc(t){St===null?St=t:St.push.apply(St,t)}function h0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vn(t,e){for(e&=~ld,e&=~qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-en(e),r=1<<n;t[n]=-1,e&=~r}}function lh(t){if(Se&6)throw Error(Q(327));ki();var e=la(t,0);if(!(e&1))return Ot(t,Ke()),null;var n=ja(t,e);if(t.tag!==0&&n===2){var r=$u(t);r!==0&&(e=r,n=cc(t,r))}if(n===1)throw n=Ms,Nr(t,0),Vn(t,e),Ot(t,Ke()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Sr(t,St,_n),Ot(t,Ke()),null}function cd(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Ti=Ke()+500,za&&lr())}}function Lr(t){Jn!==null&&Jn.tag===0&&!(Se&6)&&ki();var e=Se;Se|=1;var n=Kt.transition,r=Ee;try{if(Kt.transition=null,Ee=1,t)return t()}finally{Ee=r,Kt.transition=n,Se=e,!(Se&6)&&lr()}}function dd(){At=vi.current,Re(vi)}function Nr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qy(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Wc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ha();break;case 3:Oi(),Re(jt),Re(mt),ed();break;case 5:Zc(r);break;case 4:Oi();break;case 13:Re($e);break;case 19:Re($e);break;case 10:Jc(r.type._context);break;case 22:case 23:dd()}n=n.return}if(et=t,He=t=rr(t.current,null),rt=At=e,Qe=0,Ms=null,ld=qa=$r=0,St=ws=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Or=null}return t}function qm(t,e){do{var n=He;try{if(Gc(),Xo.current=ka,ba){for(var r=Le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ba=!1}if(Dr=0,Ze=Je=Le=null,gs=!1,Ls=0,ad.current=null,n===null||n.return===null){Qe=1,Ms=e,He=null;break}e:{var s=t,a=n.return,c=n,d=e;if(e=rt,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,v=c,y=v.tag;if(!(v.mode&1)&&(y===0||y===11||y===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var j=Jf(a);if(j!==null){j.flags&=-257,Qf(j,a,c,s,e),j.mode&1&&Gf(s,p,e),e=j,d=p;var z=e.updateQueue;if(z===null){var B=new Set;B.add(d),e.updateQueue=B}else z.add(d);break e}else{if(!(e&1)){Gf(s,p,e),fd();break e}d=Error(Q(426))}}else if(De&&c.mode&1){var H=Jf(a);if(H!==null){!(H.flags&65536)&&(H.flags|=256),Qf(H,a,c,s,e),Vc(Pi(d,c));break e}}s=d=Pi(d,c),Qe!==4&&(Qe=2),ws===null?ws=[s]:ws.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=jm(s,d,e);Ff(s,E);break e;case 1:c=d;var b=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(tr===null||!tr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=Cm(s,c,e);Ff(s,$);break e}}s=s.return}while(s!==null)}Vm(n)}catch(V){e=V,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Km(){var t=Sa.current;return Sa.current=ka,t===null?ka:t}function fd(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!($r&268435455)&&!(qa&268435455)||Vn(et,rt)}function ja(t,e){var n=Se;Se|=2;var r=Km();(et!==t||rt!==e)&&(_n=null,Nr(t,e));do try{p0();break}catch(i){qm(t,i)}while(!0);if(Gc(),Se=n,Sa.current=r,He!==null)throw Error(Q(261));return et=null,rt=0,Qe}function p0(){for(;He!==null;)Wm(He)}function m0(){for(;He!==null&&!Mg();)Wm(He)}function Wm(t){var e=Gm(t.alternate,t,At);t.memoizedProps=t.pendingProps,e===null?Vm(t):He=e,ad.current=null}function Vm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l0(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(n=a0(n,e,At),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function Sr(t,e,n){var r=Ee,i=Kt.transition;try{Kt.transition=null,Ee=1,v0(t,e,n,r)}finally{Kt.transition=i,Ee=r}return null}function v0(t,e,n,r){do ki();while(Jn!==null);if(Se&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Qg(t,s),t===et&&(He=et=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mo||(Mo=!0,Jm(aa,function(){return ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kt.transition,Kt.transition=null;var a=Ee;Ee=1;var c=Se;Se|=4,ad.current=null,c0(t,n),Mm(n,t),$y(Fu),ua=!!Bu,Fu=Bu=null,t.current=n,d0(n),Bg(),Se=c,Ee=a,Kt.transition=s}else t.current=n;if(Mo&&(Mo=!1,Jn=t,Ea=i),s=t.pendingLanes,s===0&&(tr=null),Kg(n.stateNode),Ot(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xa)throw xa=!1,t=lc,lc=null,t;return Ea&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===uc?_s++:(_s=0,uc=t):_s=0,lr(),null}function ki(){if(Jn!==null){var t=jp(Ea),e=Kt.transition,n=Ee;try{if(Kt.transition=null,Ee=16>t?16:t,Jn===null)var r=!1;else{if(t=Jn,Jn=null,Ea=0,Se&6)throw Error(Q(331));var i=Se;for(Se|=4,le=t.current;le!==null;){var s=le,a=s.child;if(le.flags&16){var c=s.deletions;if(c!==null){for(var d=0;d<c.length;d++){var p=c[d];for(le=p;le!==null;){var v=le;switch(v.tag){case 0:case 11:case 15:ys(8,v,s)}var y=v.child;if(y!==null)y.return=v,le=y;else for(;le!==null;){v=le;var _=v.sibling,j=v.return;if(Lm(v),v===p){le=null;break}if(_!==null){_.return=j,le=_;break}le=j}}}var z=s.alternate;if(z!==null){var B=z.child;if(B!==null){z.child=null;do{var H=B.sibling;B.sibling=null,B=H}while(B!==null)}}le=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,le=a;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ys(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,le=E;break e}le=s.return}}var b=t.current;for(le=b;le!==null;){a=le;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,le=S;else e:for(a=b;le!==null;){if(c=le,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Fa(9,c)}}catch(V){Be(c,c.return,V)}if(c===a){le=null;break e}var $=c.sibling;if($!==null){$.return=c.return,le=$;break e}le=c.return}}if(Se=i,lr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Ia,t)}catch{}r=!0}return r}finally{Ee=n,Kt.transition=e}}return!1}function uh(t,e,n){e=Pi(n,e),e=jm(t,e,1),t=er(t,e,1),e=wt(),t!==null&&(Ks(t,1,e),Ot(t,e))}function Be(t,e,n){if(t.tag===3)uh(t,t,n);else for(;e!==null;){if(e.tag===3){uh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tr===null||!tr.has(r))){t=Pi(n,t),t=Cm(e,t,1),e=er(e,t,1),t=wt(),e!==null&&(Ks(e,1,t),Ot(e,t));break}}e=e.return}}function g0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,et===t&&(rt&n)===n&&(Qe===4||Qe===3&&(rt&130023424)===rt&&500>Ke()-ud?Nr(t,0):ld|=n),Ot(t,e)}function Hm(t,e){e===0&&(t.mode&1?(e=To,To<<=1,!(To&130023424)&&(To=4194304)):e=1);var n=wt();t=Pn(t,e),t!==null&&(Ks(t,e,n),Ot(t,n))}function y0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Hm(t,n)}function w0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Hm(t,n)}var Gm;Gm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,o0(t,e,n);Et=!!(t.flags&131072)}else Et=!1,De&&e.flags&1048576&&Xp(e,va,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ea(t,e),t=e.pendingProps;var i=Ei(e,mt.current);bi(e,n),i=nd(null,e,r,t,i,n);var s=rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(s=!0,pa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yc(e),i.updater=Ba,e.stateNode=i,i._reactInternals=e,Yu(e,r,t,n),e=ec(null,e,r,!0,s,n)):(e.tag=0,De&&s&&Kc(e),yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b0(r),t=Jt(r,t),i){case 0:e=Zu(null,e,r,t,n);break e;case 1:e=Zf(null,e,r,t,n);break e;case 11:e=Yf(null,e,r,t,n);break e;case 14:e=Xf(null,e,r,Jt(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Zu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Zf(t,e,r,i,n);case 3:e:{if(Nm(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,im(t,e),wa(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pi(Error(Q(423)),e),e=eh(t,e,r,n,i);break e}else if(r!==i){i=Pi(Error(Q(424)),e),e=eh(t,e,r,n,i);break e}else for(Rt=Zn(e.stateNode.containerInfo.firstChild),It=e,De=!0,Xt=null,n=nm(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===i){e=Tn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return sm(e),t===null&&Gu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,qu(r,i)?a=null:s!==null&&qu(r,s)&&(e.flags|=32),Tm(t,e),yt(t,e,a,n),e.child;case 6:return t===null&&Gu(e),null;case 13:return Am(t,e,n);case 4:return Xc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),Yf(t,e,r,i,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Pe(ga,r._currentValue),r._currentValue=a,s!==null)if(nn(s.value,a)){if(s.children===i.children&&!jt.current){e=Tn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var c=s.dependencies;if(c!==null){a=s.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=jn(-1,n&-n),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?d.next=d:(d.next=v.next,v.next=d),p.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Ju(s.return,n,e),c.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Q(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Ju(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bi(e,n),i=Wt(i),r=r(i),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,i=Jt(r,e.pendingProps),i=Jt(r.type,i),Xf(t,e,r,i,n);case 15:return Om(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jt(r,i),ea(t,e),e.tag=1,Ct(r)?(t=!0,pa(e)):t=!1,bi(e,n),Em(e,r,i),Yu(e,r,i,n),ec(null,e,r,!0,t,n);case 19:return Rm(t,e,n);case 22:return Pm(t,e,n)}throw Error(Q(156,e.tag))};function Jm(t,e){return kp(t,e)}function _0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new _0(t,e,n,r)}function hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b0(t){if(typeof t=="function")return hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ac)return 11;if(t===Rc)return 14}return 2}function rr(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ra(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")hd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case oi:return Ar(n.children,i,s,e);case Nc:a=8,i|=8;break;case bu:return t=qt(12,n,e,i|2),t.elementType=bu,t.lanes=s,t;case ku:return t=qt(13,n,e,i),t.elementType=ku,t.lanes=s,t;case Su:return t=qt(19,n,e,i),t.elementType=Su,t.lanes=s,t;case sp:return Ka(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rp:a=10;break e;case ip:a=9;break e;case Ac:a=11;break e;case Rc:a=14;break e;case qn:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=qt(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ar(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Ka(t,e,n,r){return t=qt(22,t,r,e),t.elementType=sp,t.lanes=n,t.stateNode={isHidden:!1},t}function au(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function lu(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function k0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fl(0),this.expirationTimes=Fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pd(t,e,n,r,i,s,a,c,d){return t=new k0(t,e,n,c,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=qt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yc(s),t}function S0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Qm(t){if(!t)return sr;t=t._reactInternals;e:{if(zr(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Ct(n))return Qp(t,n,e)}return e}function Ym(t,e,n,r,i,s,a,c,d){return t=pd(n,r,!0,t,i,s,a,c,d),t.context=Qm(null),n=t.current,r=wt(),i=nr(n),s=jn(r,i),s.callback=e??null,er(n,s,i),t.current.lanes=i,Ks(t,i,r),Ot(t,r),t}function Wa(t,e,n,r){var i=e.current,s=wt(),a=nr(i);return n=Qm(n),e.context===null?e.context=n:e.pendingContext=n,e=jn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=er(i,e,a),t!==null&&(tn(t,i,a,s),Yo(t,i,a)),a}function Ca(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ch(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function md(t,e){ch(t,e),(t=t.alternate)&&ch(t,e)}function x0(){return null}var Xm=typeof reportError=="function"?reportError:function(t){console.error(t)};function vd(t){this._internalRoot=t}Va.prototype.render=vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Wa(t,e,null,null)};Va.prototype.unmount=vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Wa(null,t,null,null)}),e[On]=null}};function Va(t){this._internalRoot=t}Va.prototype.unstable_scheduleHydration=function(t){if(t){var e=Pp();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wn.length&&e!==0&&e<Wn[n].priority;n++);Wn.splice(n,0,t),n===0&&Np(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dh(){}function E0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=Ca(a);s.call(p)}}var a=Ym(e,r,t,0,null,!1,!1,"",dh);return t._reactRootContainer=a,t[On]=a.current,As(t.nodeType===8?t.parentNode:t),Lr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var p=Ca(d);c.call(p)}}var d=pd(t,0,!1,null,null,!1,!1,"",dh);return t._reactRootContainer=d,t[On]=d.current,As(t.nodeType===8?t.parentNode:t),Lr(function(){Wa(e,d,n,r)}),d}function Ga(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var c=i;i=function(){var d=Ca(a);c.call(d)}}Wa(e,a,t,i)}else a=E0(n,e,t,i,r);return Ca(a)}Cp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&($c(e,n|1),Ot(e,Ke()),!(Se&6)&&(Ti=Ke()+500,lr()))}break;case 13:Lr(function(){var r=Pn(t,1);if(r!==null){var i=wt();tn(r,t,1,i)}}),md(t,1)}};Lc=function(t){if(t.tag===13){var e=Pn(t,134217728);if(e!==null){var n=wt();tn(e,t,134217728,n)}md(t,134217728)}};Op=function(t){if(t.tag===13){var e=nr(t),n=Pn(t,e);if(n!==null){var r=wt();tn(n,t,e,r)}md(t,e)}};Pp=function(){return Ee};Tp=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Ru=function(t,e,n){switch(e){case"input":if(ju(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ua(r);if(!i)throw Error(Q(90));ap(r),ju(r,i)}}}break;case"textarea":up(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};vp=cd;gp=Lr;var j0={usingClientEntryPoint:!1,Events:[Vs,ci,Ua,pp,mp,cd]},ss={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C0={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Nn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_p(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||x0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ia=Bo.inject(C0),mn=Bo}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(Q(200));return S0(t,e,null,n)};$t.createRoot=function(t,e){if(!gd(t))throw Error(Q(299));var n=!1,r="",i=Xm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pd(t,1,!1,null,null,n,!1,r,i),t[On]=e.current,As(t.nodeType===8?t.parentNode:t),new vd(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=_p(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Lr(t)};$t.hydrate=function(t,e,n){if(!Ha(e))throw Error(Q(200));return Ga(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!gd(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Xm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ym(e,null,t,1,n??null,i,!1,s,a),t[On]=e.current,As(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Va(e)};$t.render=function(t,e,n){if(!Ha(e))throw Error(Q(200));return Ga(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Ha(t))throw Error(Q(40));return t._reactRootContainer?(Lr(function(){Ga(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};$t.unstable_batchedUpdates=cd;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ha(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Ga(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Zm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zm)}catch(t){console.error(t)}}Zm(),Zh.exports=$t;var O0=Zh.exports,ev,fh=O0;ev=fh.createRoot,fh.hydrateRoot;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),T0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),hh=t=>{const e=T0(t);return e.charAt(0).toUpperCase()+e.slice(1)},tv=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),N0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var A0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=we.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...c},d)=>we.createElement("svg",{ref:d,...A0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tv("lucide",i),...!s&&!N0(c)&&{"aria-hidden":"true"},...c},[...a.map(([p,v])=>we.createElement(p,v)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=(t,e)=>{const n=we.forwardRef(({className:r,...i},s)=>we.createElement(R0,{ref:s,iconNode:e,className:tv(`lucide-${P0(hh(t))}`,`lucide-${t}`,r),...i}));return n.displayName=hh(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],D0=$i("calculator",I0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ph=$i("clipboard-list",$0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],U0=$i("hammer",L0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mh=$i("moon",z0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],vh=$i("sun",M0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],gh=$i("wrench",B0),F0="modulepreload",q0=function(t){return"/BricoFrank/"+t},yh={},Gs=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(d=>{if(d=q0(d),d in yh)return;yh[d]=!0;const p=d.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const y=document.createElement("link");if(y.rel=p?"stylesheet":F0,p||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),p)return new Promise((_,j)=>{y.addEventListener("load",_),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})},K0=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Li);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wh extends yd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _h extends yd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bh extends yd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fc||(fc={}));var W0=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};class V0{constructor(e,{headers:n={},customFetch:r,region:i=fc.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=K0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return W0(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:c,signal:d}=r;let p={},{region:v}=r;v||(v=this.region);const y=new URL(`${this.url}/${n}`);v&&v!=="any"&&(p["x-region"]=v,y.searchParams.set("forceFunctionRegion",v));let _;c&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=c):typeof c=="string"?(p["Content-Type"]="text/plain",_=c):typeof FormData<"u"&&c instanceof FormData?_=c:(p["Content-Type"]="application/json",_=JSON.stringify(c)));const j=yield this.fetch(y.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:_,signal:d}).catch(E=>{throw E.name==="AbortError"?E:new wh(E)}),z=j.headers.get("x-relay-error");if(z&&z==="true")throw new _h(j);if(!j.ok)throw new bh(j);let B=((i=j.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),H;return B==="application/json"?H=yield j.json():B==="application/octet-stream"?H=yield j.blob():B==="text/event-stream"?H=j:B==="multipart/form-data"?H=yield j.formData():H=yield j.text(),{data:H,error:null,response:j}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new wh(s)}:{data:null,error:s,response:s instanceof bh||s instanceof _h?s.context:void 0}}})}}var xt={},wd={},Ja={},Js={},Qa={},Ya={},H0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=H0();const G0=Ni.fetch,nv=Ni.fetch.bind(Ni),rv=Ni.Headers,J0=Ni.Request,Q0=Ni.Response,Li=Object.freeze(Object.defineProperty({__proto__:null,Headers:rv,Request:J0,Response:Q0,default:nv,fetch:G0},Symbol.toStringTag,{value:"Module"})),Y0=ng(Li);var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});let X0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xa.default=X0;var iv=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ya,"__esModule",{value:!0});const Z0=iv(Y0),ew=iv(Xa);let tw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Z0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,c,d,p;let v=null,y=null,_=null,j=s.status,z=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?y=b:y=JSON.parse(b))}const H=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(d=s.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");H&&E&&E.length>1&&(_=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(v={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,_=null,j=406,z="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const H=await s.text();try{v=JSON.parse(H),Array.isArray(v)&&s.status===404&&(y=[],v=null,j=200,z="OK")}catch{s.status===404&&H===""?(j=204,z="No Content"):v={message:H}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,j=200,z="OK"),v&&this.shouldThrowOnError)throw new ew.default(v)}return{error:v,data:y,count:_,status:j,statusText:z}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,c,d;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(c=s==null?void 0:s.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(d=s==null?void 0:s.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Ya.default=tw;var nw=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qa,"__esModule",{value:!0});const rw=nw(Ya);let iw=class extends rw.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",c=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${c?`${c},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var c;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),p=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${p}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Qa.default=iw;var sw=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0});const ow=sw(Qa);let aw=class extends ow.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Js.default=aw;var lw=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});const os=lw(Js);let uw=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,n){const{head:r=!1,count:i}=n??{},s=r?"HEAD":"GET";let a=!1;const c=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",c),i&&this.headers.append("Prefer",`count=${i}`),new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(a.length>0){const c=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const c="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(d.length>0){const p=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new os.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new os.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new os.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ja.default=uw;var sv=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wd,"__esModule",{value:!0});const cw=sv(Ja),dw=sv(Js);let fw=class ov{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new cw.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ov(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let c;const d=new URL(`${this.url}/rpc/${e}`);let p;r||i?(c=r?"HEAD":"GET",Object.entries(n).filter(([y,_])=>_!==void 0).map(([y,_])=>[y,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([y,_])=>{d.searchParams.append(y,_)})):(c="POST",p=n);const v=new Headers(this.headers);return s&&v.set("Prefer",`count=${s}`),new dw.default({method:c,url:d,headers:v,schema:this.schemaName,body:p,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};wd.default=fw;var Ui=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const av=Ui(wd);xt.PostgrestClient=av.default;const lv=Ui(Ja);xt.PostgrestQueryBuilder=lv.default;const uv=Ui(Js);xt.PostgrestFilterBuilder=uv.default;const cv=Ui(Qa);xt.PostgrestTransformBuilder=cv.default;const dv=Ui(Ya);xt.PostgrestBuilder=dv.default;const fv=Ui(Xa);xt.PostgrestError=fv.default;var hw=xt.default={PostgrestClient:av.default,PostgrestQueryBuilder:lv.default,PostgrestFilterBuilder:uv.default,PostgrestTransformBuilder:cv.default,PostgrestBuilder:dv.default,PostgrestError:fv.default};const{PostgrestClient:pw,PostgrestQueryBuilder:Xb,PostgrestFilterBuilder:Zb,PostgrestTransformBuilder:ek,PostgrestBuilder:tk,PostgrestError:nk}=hw;class mw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const vw="2.75.0",gw=`realtime-js/${vw}`,yw="1.0.0",hc=1e4,ww=1e3,_w=100;var bs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bs||(bs={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var Yt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Yt||(Yt={}));var pc;(function(t){t.websocket="websocket"})(pc||(pc={}));var Er;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Er||(Er={}));class bw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const c=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+s));a=a+s;const p=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:c,event:d,payload:p}}}class hv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const kh=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=kw(a,t,e,i),s),{}):{}},kw=(t,e,n,r)=>{const i=e.find(c=>c.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?pv(s,a):mc(a)},pv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return jw(e,n)}switch(t){case Oe.bool:return Sw(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return xw(e);case Oe.json:case Oe.jsonb:return Ew(e);case Oe.timestamp:return Cw(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return mc(e);default:return mc(e)}},mc=t=>t,Sw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},xw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ew=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},jw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(c=>pv(e,c))}return t},Cw=t=>typeof t=="string"?t.replace(" ","T"):t,mv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class uu{constructor(e,n,r={},i=hc){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Sh||(Sh={}));class ks{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,i,s,a),this.pendingDiffs.forEach(d=>{this.state=ks.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ks.syncDiff(this.state,i,s,a),c())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),c={},d={};return this.map(s,(p,v)=>{a[p]||(d[p]=v)}),this.map(a,(p,v)=>{const y=s[p];if(y){const _=v.map(H=>H.presence_ref),j=y.map(H=>H.presence_ref),z=v.filter(H=>j.indexOf(H.presence_ref)<0),B=y.filter(H=>_.indexOf(H.presence_ref)<0);z.length>0&&(c[p]=z),B.length>0&&(d[p]=B)}else c[p]=v}),this.syncDiff(s,{joins:c,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(c,d)=>{var p;const v=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(d),v.length>0){const y=e[c].map(j=>j.presence_ref),_=v.filter(j=>y.indexOf(j.presence_ref)<0);e[c].unshift(..._)}r(c,v,d)}),this.map(a,(c,d)=>{let p=e[c];if(!p)return;const v=d.map(y=>y.presence_ref);p=p.filter(y=>v.indexOf(y.presence_ref)<0),e[c]=p,i(c,p,d),p.length===0&&delete e[c]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xh||(xh={}));var Ss;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ss||(Ss={}));var bn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bn||(bn={}));class _d{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new hv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new ks(this),this.broadcastEndpointURL=mv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:a,presence:c,private:d}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(j=>j.filter))!==null&&i!==void 0?i:[],v=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,y={},_={broadcast:a,presence:Object.assign(Object.assign({},c),{enabled:v}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(j=>e==null?void 0:e(bn.CHANNEL_ERROR,j)),this._onClose(()=>e==null?void 0:e(bn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:j})=>{var z;if(this.socket.setAuth(),j===void 0){e==null||e(bn.SUBSCRIBED);return}else{const B=this.bindings.postgres_changes,H=(z=B==null?void 0:B.length)!==null&&z!==void 0?z:0,E=[];for(let b=0;b<H;b++){const S=B[b],{filter:{event:$,schema:V,table:K,filter:L}}=S,G=j&&j[b];if(G&&G.event===$&&G.schema===V&&G.table===K&&G.filter===L)E.push(Object.assign(Object.assign({},S),{id:G.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(bn.SUBSCRIBED);return}}).receive("error",j=>{this.state=Ge.errored,e==null||e(bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ge.joined&&e===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,c,d;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new uu(this,Yt.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uu(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>_w){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:c,error:d,leave:p,join:v}=Yt;if(r&&[c,d,p,v].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,n,r);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(j=>{var z,B,H;return((z=j.filter)===null||z===void 0?void 0:z.event)==="*"||((H=(B=j.filter)===null||B===void 0?void 0:B.event)===null||H===void 0?void 0:H.toLocaleLowerCase())===a}).map(j=>j.callback(_,r)):(s=this.bindings[a])===null||s===void 0||s.filter(j=>{var z,B,H,E,b,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in j){const $=j.id,V=(z=j.filter)===null||z===void 0?void 0:z.event;return $&&((B=n.ids)===null||B===void 0?void 0:B.includes($))&&(V==="*"||(V==null?void 0:V.toLocaleLowerCase())===((H=n.data)===null||H===void 0?void 0:H.type.toLocaleLowerCase()))}else{const $=(b=(E=j==null?void 0:j.filter)===null||E===void 0?void 0:E.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return $==="*"||$===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===a}).map(j=>{if(typeof _=="object"&&"ids"in _){const z=_.data,{schema:B,table:H,commit_timestamp:E,type:b,errors:S}=z;_=Object.assign(Object.assign({},{schema:B,table:H,commit_timestamp:E,eventType:b,new:{},old:{},errors:S}),this._getPayloadRecords(z))}j.callback(_,r)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&_d.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=kh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=kh(e.columns,e.old_record)),n}}const cu=()=>{},Fo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ow=[1e3,2e3,5e3,1e4],Pw=1e4,Tw=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Nw{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hc,this.transport=null,this.heartbeatIntervalMs=Fo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cu,this.ref=0,this.reconnectTimer=null,this.logger=cu,this.conn=null,this.sendBuffer=[],this.serializer=new bw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Gs(async()=>{const{default:c}=await Promise.resolve().then(()=>Li);return{default:c}},void 0).then(({default:c})=>c(...a)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${pc.websocket}`,this.httpEndpoint=mv(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:yw}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bs.connecting:return Er.Connecting;case bs.open:return Er.Open;case bs.closing:return Er.Closing;default:return Er.Closed}}isConnected(){return this.connectionState()===Er.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new _d(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ww,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Fo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,c=a?`(${a})`:"",d=s.status||"";this.log("receive",`${d} ${r} ${i} ${c}`.trim(),s),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Tw],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:gw};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Yt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new hv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,c,d,p,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:hc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Fo.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:cu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:y=>Ow[y-1]||Pw,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(y,_)=>_(JSON.stringify(y)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class bd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ve(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Aw extends bd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vc extends bd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Rw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};const vv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Li);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Iw=()=>Rw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gs(()=>Promise.resolve().then(()=>Li),void 0)).Response:Response}),gc=t=>{if(Array.isArray(t))return t.map(n=>gc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=gc(r)}),e},Dw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Mr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};const du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$w=(t,e,n)=>Mr(void 0,void 0,void 0,function*(){const r=yield Iw();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Aw(du(i),s,a))}).catch(i=>{e(new vc(du(i),i))}):e(new vc(du(t),t))}),Lw=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Dw(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Qs(t,e,n,r,i,s){return Mr(this,void 0,void 0,function*(){return new Promise((a,c)=>{t(n,Lw(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>$w(d,c,r))})})}function Oa(t,e,n,r){return Mr(this,void 0,void 0,function*(){return Qs(t,"GET",e,n,r)})}function hn(t,e,n,r,i){return Mr(this,void 0,void 0,function*(){return Qs(t,"POST",e,r,i,n)})}function yc(t,e,n,r,i){return Mr(this,void 0,void 0,function*(){return Qs(t,"PUT",e,r,i,n)})}function Uw(t,e,n,r){return Mr(this,void 0,void 0,function*(){return Qs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gv(t,e,n,r,i){return Mr(this,void 0,void 0,function*(){return Qs(t,"DELETE",e,r,i,n)})}var zw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};class Mw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return zw(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}var Bw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};class Fw{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new Mw(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return Bw(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}var kt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};const qw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Eh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Kw{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=vv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return kt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Eh),i);let c=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,c["cache-control"]=`max-age=${a.cacheControl}`,c["content-type"]=a.contentType,d&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const p=this._removeEmptyFolders(n),v=this._getFinalPath(p),y=yield(e=="PUT"?yc:hn)(this.fetch,`${this.url}/object/${v}`,s,Object.assign({headers:c},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}upload(e,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return kt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),c=new URL(this.url+`/object/upload/sign/${a}`);c.searchParams.set("token",n);try{let d;const p=Object.assign({upsert:Eh.upsert},i),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",p.cacheControl)):(d=r,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const y=yield yc(this.fetch,c.toString(),d,{headers:v});return{data:{path:s,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ve(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return kt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield hn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),c=a.searchParams.get("token");if(!c)throw new bd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:c},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}update(e,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return kt(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}copy(e,n,r){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield hn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return kt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield hn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return kt(this,void 0,void 0,function*(){try{const i=yield hn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",c=this._getFinalPath(e),d=()=>Oa(this.fetch,`${this.url}/${i}/${c}${a}`,{headers:this.headers,noResolveJson:!0});return new Fw(d,this.shouldThrowOnError)}info(e){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Oa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:gc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}exists(e){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Uw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r)&&r instanceof vc){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${p}`)}}}remove(e){return kt(this,void 0,void 0,function*(){try{return{data:yield gv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}list(e,n,r){return kt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},qw),n),{prefix:e||""});return{data:yield hn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}listV2(e,n){return kt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield hn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Ww="2.75.0",Vw={"X-Client-Info":`storage-js/${Ww}`};var Qr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};class Hw{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Vw),n),this.fetch=vv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Qr(this,void 0,void 0,function*(){try{return{data:yield Oa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}getBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield Oa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}createBucket(e){return Qr(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield hn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Qr(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield hn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Qr(this,void 0,void 0,function*(){try{return{data:yield gv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}class Gw extends Hw{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Kw(this.url,this.headers,e,this.fetch)}}const Jw="2.75.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const Qw={"X-Client-Info":`supabase-js-${ds}/${Jw}`},Yw={headers:Qw},Xw={schema:"public"},Zw={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e_={};var t_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};const n_=t=>{let e;return t?e=t:typeof fetch>"u"?e=nv:e=fetch,(...n)=>e(...n)},r_=()=>typeof Headers>"u"?rv:Headers,i_=(t,e,n)=>{const r=n_(n),i=r_();return(s,a)=>t_(void 0,void 0,void 0,function*(){var c;const d=(c=yield e())!==null&&c!==void 0?c:t;let p=new i(a==null?void 0:a.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},a),{headers:p}))})};var s_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};function o_(t){return t.endsWith("/")?t:t+"/"}function a_(t,e){var n,r;const{db:i,auth:s,realtime:a,global:c}=t,{db:d,auth:p,realtime:v,global:y}=e,_={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},p),s),realtime:Object.assign(Object.assign({},v),a),storage:{},global:Object.assign(Object.assign(Object.assign({},y),c),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>s_(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function l_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(o_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const yv="2.75.0",ri=30*1e3,wc=3,fu=wc*ri,u_="http://localhost:9999",c_="supabase.auth.token",d_={"X-Client-Info":`gotrue-js/${yv}`},_c="X-Supabase-Api-Version",wv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},f_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,h_=10*60*1e3;class Bs extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class p_ extends Bs{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function m_(t){return de(t)&&t.name==="AuthApiError"}class jr extends Bs{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ur extends Bs{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Fn extends ur{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function v_(t){return de(t)&&t.name==="AuthSessionMissingError"}class Yr extends ur{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qo extends ur{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ko extends ur{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function g_(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class jh extends ur{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bc extends ur{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hu(t){return de(t)&&t.name==="AuthRetryableFetchError"}class Ch extends ur{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class kc extends ur{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oh=` 	
\r=`.split(""),y_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Oh.length;e+=1)t[Oh[e].charCodeAt(0)]=-2;for(let e=0;e<Pa.length;e+=1)t[Pa[e].charCodeAt(0)]=e;return t})();function Ph(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pa[r]),e.queuedBits-=6}}function _v(t,e,n){const r=y_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Th(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{b_(a,r,n)};for(let a=0;a<t.length;a+=1)_v(t.charCodeAt(a),i,s);return e.join("")}function w_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function __(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}w_(r,e)}}function b_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Si(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)_v(t.charCodeAt(i),n,r);return new Uint8Array(e)}function k_(t){const e=[];return __(t,n=>e.push(n)),new Uint8Array(e)}function Tr(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Ph(i,n,r)),Ph(null,n,r),e.join("")}function S_(t){return Math.round(Date.now()/1e3)+t}function x_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Nt=()=>typeof window<"u"&&typeof document<"u",_r={tested:!1,writable:!1},bv=()=>{if(!Nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_r.tested)return _r.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),_r.tested=!0,_r.writable=!0}catch{_r.tested=!0,_r.writable=!1}return _r.writable};function E_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const kv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Li);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},j_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ii=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},br=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mn=async(t,e)=>{await t.removeItem(e)};class Za{constructor(){this.promise=new Za.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Za.promiseConstructor=Promise;function pu(t){const e=t.split(".");if(e.length!==3)throw new kc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!f_.test(e[r]))throw new kc("JWT not in base64url format");return{header:JSON.parse(Th(e[0])),payload:JSON.parse(Th(e[1])),signature:Si(e[2]),raw:{header:e[0],payload:e[1]}}}async function C_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function O_(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function P_(t){return("0"+t.toString(16)).substr(-2)}function T_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,P_).join("")}async function N_(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function A_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await N_(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xr(t,e,n=!1){const r=T_();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ii(t,`${e}-code-verifier`,i);const s=await A_(r);return[s,r===s?"plain":"s256"]}const R_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function I_(t){const e=t.headers.get(_c);if(!e||!e.match(R_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function D_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zr(t){if(!L_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nh(t){return JSON.parse(JSON.stringify(t))}var U_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),z_=[502,503,504];async function Ah(t){var e;if(!j_(t))throw new bc(xr(t),0);if(z_.includes(t.status))throw new bc(xr(t),t.status);let n;try{n=await t.json()}catch(s){throw new jr(xr(s),s)}let r;const i=I_(t);if(i&&i.getTime()>=wv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ch(xr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Fn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Ch(xr(n),t.status,n.weak_password.reasons);throw new p_(xr(n),t.status||500,r)}const M_=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ve(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_c]||(s[_c]=wv["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const c=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await B_(t,e,n+c,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function B_(t,e,n,r,i,s){const a=M_(e,r,i,s);let c;try{c=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new bc(xr(d),0)}if(c.ok||await Ah(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(d){await Ah(d)}}function Gt(t){var e;let n=null;K_(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=S_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rh(t){const e=Gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function F_(t){return{data:t,error:null}}function q_(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=U_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},a);return{data:{properties:c,user:d},error:null}}function Ih(t){return t}function K_(t){return t.access_token&&t.refresh_token&&t.expires_in}const vu=["global","local","others"];var W_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class V_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=kv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=vu[0]){if(vu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vu.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Hn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=W_(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:q_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,c,d;try{const p={nextPage:null,lastPage:0,total:0},v=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ih});if(v.error)throw v.error;const y=await v.json(),_=(a=v.headers.get("x-total-count"))!==null&&a!==void 0?a:0,j=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return j.length>0&&(j.forEach(z=>{const B=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(z.split(";")[1].split("=")[1]);p[`${H}Page`]=B}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(de(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Zr(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Zr(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Hn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Zr(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Hn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zr(e.userId);try{const{data:n,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Zr(e.userId),Zr(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,c,d;try{const p={nextPage:null,lastPage:0,total:0},v=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ih});if(v.error)throw v.error;const y=await v.json(),_=(a=v.headers.get("x-total-count"))!==null&&a!==void 0?a:0,j=(d=(c=v.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return j.length>0&&(j.forEach(z=>{const B=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),H=JSON.parse(z.split(";")[1].split("=")[1]);p[`${H}Page`]=B}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(de(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function Dh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ei={debug:!!(globalThis&&bv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class H_ extends Sv{}async function G_(t,e,n){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new H_(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ei.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function J_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Q_(t){return parseInt(t,16)}function Y_(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function X_(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:c,requestId:d,resources:p,scheme:v,uri:y,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const j=xv(t.address),z=v?`${v}://${r}`:r,B=t.statement?`${t.statement}
`:"",H=`${z} wants you to sign in with your Ethereum account:
${j}

${B}`;let E=`URI: ${y}
Version: ${_}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),c&&(E+=`
Not Before: ${c.toISOString()}`),d&&(E+=`
Request ID: ${d}`),p){let b=`
Resources:`;for(const S of p){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);b+=`
- ${S}`}E+=b}return`${H}
${E}`}class We extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Ta extends We{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Z_({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(jv(a)){if(s.rp.id!==a)return new We({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function eb({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(jv(r)){if(n.rpId!==r)return new We({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Ev=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class tb{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const nb=new tb;function rb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Ev(t,["challenge","user","excludeCredentials"]),s=Si(e).buffer,a=Object.assign(Object.assign({},n),{id:Si(n.id).buffer}),c=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const p=r[d];c.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Si(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function ib(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ev(t,["challenge","allowCredentials"]),i=Si(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const c=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},c),{id:Si(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return s}function sb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Tr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Tr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function ob(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Tr(new Uint8Array(i.authenticatorData)),clientDataJSON:Tr(new Uint8Array(i.clientDataJSON)),signature:Tr(new Uint8Array(i.signature)),userHandle:i.userHandle?Tr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function $h(){var t,e;return!!(Nt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function ab(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ta("Browser returned unexpected credential type",e)}:{data:null,error:new Ta("Empty credential response",e)}}catch(e){return{data:null,error:Z_({error:e,options:t})}}}async function lb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ta("Browser returned unexpected credential type",e)}:{data:null,error:new Ta("Empty credential response",e)}}catch(e){return{data:null,error:eb({error:e,options:t})}}}const ub={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},cb={userVerification:"preferred",hints:["security-key"]};function Na(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const c=r[s];e(c)?r[s]=Na(c,a):r[s]=Na(a)}else r[s]=a}return r}function db(t,e){return Na(ub,t,e||{})}function fb(t,e){return Na(cb,t,e||{})}class hb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:c};const d=i??nb.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:p}=a.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(a.webauthn.type){case"create":{const p=db(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:v,error:y}=await ab({publicKey:p,signal:d});return v?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}case"request":{const p=fb(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:v,error:y}=await lb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:p,signal:d}));return v?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:v}},error:null}:{data:null,error:y}}}}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new jr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn authentication")};try{if(!$h())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:c};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new jr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn registration")};try{if(!$h())return{data:null,error:new jr("Browser does not support WebAuthn",null)};const{data:a,error:c}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(v=>{var y;return(y=v.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:c};const{data:d,error:p}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new jr("Unexpected error in register",a)}}}}J_();const pb={url:u_,storageKey:c_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:d_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Lh(t,e,n){return await n()}const ti={};class Fs{get jwks(){var e,n;return(n=(e=ti[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ti[this.storageKey]=Object.assign(Object.assign({},ti[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ti[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ti[this.storageKey]=Object.assign(Object.assign({},ti[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fs.nextInstanceID,Fs.nextInstanceID+=1,this.instanceID>0&&Nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},pb),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new V_({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=kv(i.fetch),this.lock=i.lock||Lh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Nt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=G_:this.lock=Lh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hb(this)},this.persistSession?(i.storage?this.storage=i.storage:bv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Dh(this.memoryStorage)),Nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=E_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Nt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),g_(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?{error:n}:{error:new jr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Gt}),{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:v,password:y,options:_}=e;let j=null,z=null;this.flowType==="pkce"&&([j,z]=await Xr(this.storage,this.storageKey)),s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:y,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:j,code_challenge_method:z},xform:Gt})}else if("phone"in e){const{phone:v,password:y,options:_}=e;s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:y,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(i=_==null?void 0:_.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Gt})}else throw new qo("You must provide either an email or phone number and a password");const{data:a,error:c}=s;if(c||!a)return{data:{user:null,session:null},error:c};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:c}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Rh})}else if("phone"in e){const{phone:s,password:a,options:c}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Rh})}else throw new qo("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Yr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,c,d,p,v,y,_;let j,z;if("message"in e)j=e.message,z=e.signature;else{const{chain:B,wallet:H,statement:E,options:b}=e;let S;if(Nt())if(typeof H=="object")S=H;else{const ae=window;if("ethereum"in ae&&typeof ae.ethereum=="object"&&"request"in ae.ethereum&&typeof ae.ethereum.request=="function")S=ae.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=H}const $=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),V=await S.request({method:"eth_requestAccounts"}).then(ae=>ae).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!V||V.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=xv(V[0]);let L=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const ae=await S.request({method:"eth_chainId"});L=Q_(ae)}const G={domain:$.host,address:K,statement:E,uri:$.href,version:"1",chainId:L,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=b==null?void 0:b.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=b==null?void 0:b.signInWithEthereum)===null||v===void 0?void 0:v.resources};j=X_(G),z=await S.request({method:"personal_sign",params:[Y_(j),K]})}try{const{data:B,error:H}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:z},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Gt});if(H)throw H;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Yr}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:H})}catch(B){if(de(B))return{data:{user:null,session:null},error:B};throw B}}async signInWithSolana(e){var n,r,i,s,a,c,d,p,v,y,_,j;let z,B;if("message"in e)z=e.message,B=e.signature;else{const{chain:H,wallet:E,statement:b,options:S}=e;let $;if(Nt())if(typeof E=="object")$=E;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))$=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=E}const V=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in $&&$.signIn){const K=await $.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:V.host,uri:V.href}),b?{statement:b}:null));let L;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")L=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)L=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)z=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),B=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in $)||typeof $.signMessage!="function"||!("publicKey"in $)||typeof $!="object"||!$.publicKey||!("toBase58"in $.publicKey)||typeof $.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${V.host} wants you to sign in with your Solana account:`,$.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${V.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((d=S==null?void 0:S.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((p=S==null?void 0:S.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((y=(v=S==null?void 0:S.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||y===void 0)&&y.length?["Resources",...S.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const K=await $.signMessage(new TextEncoder().encode(z),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");B=K}}try{const{data:H,error:E}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:Tr(B)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(j=e.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:Gt});if(E)throw E;return!H||!H.session||!H.user?{data:{user:null,session:null},error:new Yr}:(H.session&&(await this._saveSession(H.session),await this._notifyAllSubscribers("SIGNED_IN",H.session)),{data:Object.assign({},H),error:E})}catch(H){if(de(H))return{data:{user:null,session:null},error:H};throw H}}async _exchangeCodeForSession(e){const n=await br(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gt});if(await Mn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Yr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(de(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,c=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gt}),{data:d,error:p}=c;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Yr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:c,options:d}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Xr(this.storage,this.storageKey));const{error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:c,options:d}=e,{data:p,error:v}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new qo("You must provide either an email or phone number.")}catch(c){if(de(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:c}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Gt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,p=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Xr(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:F_})}catch(s){if(de(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Fn;const{error:i}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:c}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:c}}throw new qo("You must provide either an email or phone number and a type")}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await br(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=mu()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,p,v)=>(!a&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,p,v))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hn}):await this._useSession(async n=>{var r,i,s;const{data:a,error:c}=n;if(c)throw c;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Hn})})}catch(n){if(de(n))return v_(n)&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Fn;const a=i.session;let c=null,d=null;this.flowType==="pkce"&&e.email!=null&&([c,d]=await Xr(this.storage,this.storageKey));const{data:p,error:v}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:d}),jwt:a.access_token,xform:Hn});if(v)throw v;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Fn;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=pu(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:c,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!c)return{data:{user:null,session:null},error:null};s=c}else{const{data:c,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(de(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:c}=n;if(c)throw c;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Fn;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Nt())throw new Ko("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ko(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ko("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jh("No code detected.");const{data:b,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const $=new URL(window.location.href);return $.searchParams.delete("code"),window.history.replaceState(window.history.state,"",$.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:c,expires_at:d,token_type:p}=e;if(!s||!c||!a||!p)throw new Ko("No session defined in URL");const v=Math.round(Date.now()/1e3),y=parseInt(c);let _=v+y;d&&(_=parseInt(d));const j=_-v;j*1e3<=ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${y}s`);const z=_-y;v-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,_,v):v-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,_,v);const{data:B,error:H}=await this._getUser(s);if(H)throw H;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:y,expires_at:_,refresh_token:a,token_type:p,user:B.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await br(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:c}=await this.admin.signOut(a,e);if(c&&!(m_(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return e!=="others"&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=x_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Xr(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(de(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,c,d,p,v;const{data:y,error:_}=s;if(_)throw _;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",j,{headers:this.headers,jwt:(v=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(i)throw i;return Nt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(de(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:c,token:d,access_token:p,nonce:v}=e,y=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:d,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Gt}),{data:_,error:j}=y;return j?{data:{user:null,session:null},error:j}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new Yr}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:j})}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await O_(async i=>(i>0&&await C_(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gt})),(i,s)=>{const a=200*Math.pow(2,i);return s&&hu(s)&&Date.now()+a-r<ri})}catch(r){if(this._debug(n,"error",r),de(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Nt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await br(this.storage,this.storageKey);if(i&&this.userStorage){let a=await br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ii(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:mu()}else if(i&&!i.user&&!i.user){const a=await br(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Mn(this.storage,this.storageKey+"-user"),await ii(this.storage,this.storageKey,i)):i.user=mu()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fu;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fu}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),hu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:c}=await this._getUser(i.access_token);!c&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Za;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Fn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(i,"error",s),de(s)){const a={data:null,error:s};return hu(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,n)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ii(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Nh(i);await ii(this.storage,this.storageKey,s)}else{const i=Nh(n);await ii(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Mn(this.storage,this.storageKey),await Mn(this.storage,this.storageKey+"-code-verifier"),await Mn(this.storage,this.storageKey+"-user"),this.userStorage&&await Mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ri);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ri}ms, refresh threshold is ${wc} ticks`),i<=wc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Sv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Xr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(c.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?sb(e.webauthn.credential_response):ob(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:d}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:d})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:rb(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:ib(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pu(i.access_token);let c=null;a.aal&&(c=a.aal);let d=c;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const v=a.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(c=>c.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+h_>i)return r;const{data:s,error:a}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:j,error:z}=await this.getSession();if(z||!j.session)return{data:null,error:z};r=j.session.access_token}const{header:i,payload:s,signature:a,raw:{header:c,payload:d}}=pu(r);n!=null&&n.allowExpired||D_(s.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:j}=await this.getUser(r);if(j)throw j;return{data:{claims:s,header:i,signature:a},error:null}}const v=$_(i.alg),y=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,y,a,k_(`${c}.${d}`)))throw new kc("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}Fs.nextInstanceID=0;const mb=Fs;class vb extends mb{constructor(e){super(e)}}var gb=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(v){try{p(r.next(v))}catch(y){a(y)}}function d(v){try{p(r.throw(v))}catch(y){a(y)}}function p(v){v.done?s(v.value):i(v.value).then(c,d)}p((r=r.apply(t,e||[])).next())})};class yb{constructor(e,n,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=n;const c=l_(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,p={db:Xw,realtime:e_,auth:Object.assign(Object.assign({},Zw),{storageKey:d}),global:Yw},v=a_(r??{},p);this.storageKey=(i=v.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=v.global.headers)!==null&&s!==void 0?s:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,v.global.fetch),this.fetch=i_(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new pw(new URL("rest/v1",c).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Gw(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new V0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return gb(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:c,lock:d,debug:p},v,y){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),v),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:c,lock:d,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Nw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wb=(t,e,n)=>new yb(t,e,n);function _b(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_b()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Aa=wb("https://dzazapfzfuonyuvslhgk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6YXphcGZ6ZnVvbnl1dnNsaGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDA3NzAsImV4cCI6MjA3NTYxNjc3MH0.wSVO93VzKwC3Tvwwh-1yCDb1gV0Kw5ava5iBGYfD_j0");var Cv={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Pt,function(){var n=function(o,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(u[h]=f[h])})(o,l)},r=function(){return(r=Object.assign||function(o){for(var l,u=1,f=arguments.length;u<f;u++)for(var h in l=arguments[u])Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h]);return o}).apply(this,arguments)};function i(o,l,u){for(var f,h=0,m=l.length;h<m;h++)!f&&h in l||((f=f||Array.prototype.slice.call(l,0,h))[h]=l[h]);return o.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Pt,a=Object.keys,c=Array.isArray;function d(o,l){return typeof l!="object"||a(l).forEach(function(u){o[u]=l[u]}),o}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var p=Object.getPrototypeOf,v={}.hasOwnProperty;function y(o,l){return v.call(o,l)}function _(o,l){typeof l=="function"&&(l=l(p(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(u){z(o,u,l[u])})}var j=Object.defineProperty;function z(o,l,u,f){j(o,l,d(u&&y(u,"get")&&typeof u.get=="function"?{get:u.get,set:u.set,configurable:!0}:{value:u,configurable:!0,writable:!0},f))}function B(o){return{from:function(l){return o.prototype=Object.create(l.prototype),z(o.prototype,"constructor",o),{extend:_.bind(null,o.prototype)}}}}var H=Object.getOwnPropertyDescriptor,E=[].slice;function b(o,l,u){return E.call(o,l,u)}function S(o,l){return l(o)}function $(o){if(!o)throw new Error("Assertion Failed")}function V(o){s.setImmediate?setImmediate(o):setTimeout(o,0)}function K(o,l){if(typeof l=="string"&&y(o,l))return o[l];if(!l)return o;if(typeof l!="string"){for(var u=[],f=0,h=l.length;f<h;++f){var m=K(o,l[f]);u.push(m)}return u}var w=l.indexOf(".");if(w!==-1){var k=o[l.substr(0,w)];return k==null?void 0:K(k,l.substr(w+1))}}function L(o,l,u){if(o&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof l!="string"&&"length"in l){$(typeof u!="string"&&"length"in u);for(var f=0,h=l.length;f<h;++f)L(o,l[f],u[f])}else{var m,w,k=l.indexOf(".");k!==-1?(m=l.substr(0,k),(w=l.substr(k+1))===""?u===void 0?c(o)&&!isNaN(parseInt(m))?o.splice(m,1):delete o[m]:o[m]=u:L(k=!(k=o[m])||!y(o,m)?o[m]={}:k,w,u)):u===void 0?c(o)&&!isNaN(parseInt(l))?o.splice(l,1):delete o[l]:o[l]=u}}function G(o){var l,u={};for(l in o)y(o,l)&&(u[l]=o[l]);return u}var ae=[].concat;function Y(o){return ae.apply([],o)}var cr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Y([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(l){return l+o+"Array"})}))).filter(function(o){return s[o]}),ye=new Set(cr.map(function(o){return s[o]})),st=null;function vt(o){return st=new WeakMap,o=function l(u){if(!u||typeof u!="object")return u;var f=st.get(u);if(f)return f;if(c(u)){f=[],st.set(u,f);for(var h=0,m=u.length;h<m;++h)f.push(l(u[h]))}else if(ye.has(u.constructor))f=u;else{var w,k=p(u);for(w in f=k===Object.prototype?{}:Object.create(k),st.set(u,f),u)y(u,w)&&(f[w]=l(u[w]))}return f}(o),st=null,o}var ot={}.toString;function rn(o){return ot.call(o).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ut=typeof Ce=="symbol"?function(o){var l;return o!=null&&(l=o[Ce])&&l.apply(o)}:function(){return null};function ie(o,l){return l=o.indexOf(l),0<=l&&o.splice(l,1),0<=l}var fe={};function he(o){var l,u,f,h;if(arguments.length===1){if(c(o))return o.slice();if(this===fe&&typeof o=="string")return[o];if(h=Ut(o)){for(u=[];!(f=h.next()).done;)u.push(f.value);return u}if(o==null)return[o];if(typeof(l=o.length)!="number")return[o];for(u=new Array(l);l--;)u[l]=o[l];return u}for(l=arguments.length,u=new Array(l);l--;)u[l]=arguments[l];return u}var je=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Mi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Mt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Mi),ze={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function at(o,l){this.name=o,this.message=l}function zt(o,l){return o+". Errors: "+Object.keys(l).map(function(u){return l[u].toString()}).filter(function(u,f,h){return h.indexOf(u)===f}).join(`
`)}function sn(o,l,u,f){this.failures=l,this.failedKeys=f,this.successCount=u,this.message=zt(o,l)}function lt(o,l){this.name="BulkError",this.failures=Object.keys(l).map(function(u){return l[u]}),this.failuresByPos=l,this.message=zt(o,this.failures)}B(at).from(Error).extend({toString:function(){return this.name+": "+this.message}}),B(sn).from(at),B(lt).from(at);var on=Mt.reduce(function(o,l){return o[l]=l+"Error",o},{}),el=at,ce=Mt.reduce(function(o,l){var u=l+"Error";function f(h,m){this.name=u,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=ze[l]||u,this.inner=null)}return B(f).from(el),o[l]=f,o},{});ce.Syntax=SyntaxError,ce.Type=TypeError,ce.Range=RangeError;var Ys=Mi.reduce(function(o,l){return o[l+"Error"]=ce[l],o},{}),U=Mt.reduce(function(o,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(o[l+"Error"]=ce[l]),o},{});function ne(){}function Te(o){return o}function an(o,l){return o==null||o===Te?l:function(u){return l(o(u))}}function gn(o,l){return function(){o.apply(this,arguments),l.apply(this,arguments)}}function tl(o,l){return o===ne?l:function(){var u=o.apply(this,arguments);u!==void 0&&(arguments[0]=u);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?gn(f,this.onsuccess):f),h&&(this.onerror=this.onerror?gn(h,this.onerror):h),m!==void 0?m:u}}function Ov(o,l){return o===ne?l:function(){o.apply(this,arguments);var u=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),u&&(this.onsuccess=this.onsuccess?gn(u,this.onsuccess):u),f&&(this.onerror=this.onerror?gn(f,this.onerror):f)}}function Pv(o,l){return o===ne?l:function(u){var f=o.apply(this,arguments);d(u,f);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,u=l.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?gn(h,this.onsuccess):h),m&&(this.onerror=this.onerror?gn(m,this.onerror):m),f===void 0?u===void 0?void 0:u:d(f,u)}}function Tv(o,l){return o===ne?l:function(){return l.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function nl(o,l){return o===ne?l:function(){var u=o.apply(this,arguments);if(u&&typeof u.then=="function"){for(var f=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return u.then(function(){return l.apply(f,m)})}return l.apply(this,arguments)}}U.ModifyError=sn,U.DexieError=at,U.BulkError=lt;var ln=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Sd(o){ln=o}var zi={},xd=100,cr=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,p(o),o];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,p(l),o]}(),Mi=cr[0],Mt=cr[1],cr=cr[2],Mt=Mt&&Mt.then,dr=Mi&&Mi.constructor,rl=!!cr,Bi=function(o,l){Fi.push([o,l]),Xs&&(queueMicrotask(Av),Xs=!1)},il=!0,Xs=!0,fr=[],Zs=[],sl=Te,An={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ne,pgp:!1,env:{},finalize:ne},ue=An,Fi=[],hr=0,eo=[];function se(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=ue;if(typeof o!="function"){if(o!==zi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&al(this,this._value))}this._state=null,this._value=null,++l.ref,function u(f,h){try{h(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var w=f._lib&&Br();m&&typeof m.then=="function"?u(f,function(k,C){m instanceof se?m._then(k,C):m.then(k,C)}):(f._state=!0,f._value=m,jd(f)),w&&Fr()}},al.bind(null,f))}catch(m){al(f,m)}}(this,o)}var ol={get:function(){var o=ue,l=io;function u(f,h){var m=this,w=!o.global&&(o!==ue||l!==io),k=w&&!In(),C=new se(function(P,N){ll(m,new Ed(Od(f,o,w,k),Od(h,o,w,k),P,N,o))});return this._consoleTask&&(C._consoleTask=this._consoleTask),C}return u.prototype=zi,u},set:function(o){z(this,"then",o&&o.prototype===zi?ol:{get:function(){return o},set:ol.set})}};function Ed(o,l,u,f,h){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof l=="function"?l:null,this.resolve=u,this.reject=f,this.psd=h}function al(o,l){var u,f;Zs.push(l),o._state===null&&(u=o._lib&&Br(),l=sl(l),o._state=!1,o._value=l,f=o,fr.some(function(h){return h._value===f._value})||fr.push(f),jd(o),u&&Fr())}function jd(o){var l=o._listeners;o._listeners=[];for(var u=0,f=l.length;u<f;++u)ll(o,l[u]);var h=o._PSD;--h.ref||h.finalize(),hr===0&&(++hr,Bi(function(){--hr==0&&ul()},[]))}function ll(o,l){if(o._state!==null){var u=o._state?l.onFulfilled:l.onRejected;if(u===null)return(o._state?l.resolve:l.reject)(o._value);++l.psd.ref,++hr,Bi(Nv,[u,o,l])}else o._listeners.push(l)}function Nv(o,l,u){try{var f,h=l._value;!l._state&&Zs.length&&(Zs=[]),f=ln&&l._consoleTask?l._consoleTask.run(function(){return o(h)}):o(h),l._state||Zs.indexOf(h)!==-1||function(m){for(var w=fr.length;w;)if(fr[--w]._value===m._value)return fr.splice(w,1)}(l),u.resolve(f)}catch(m){u.reject(m)}finally{--hr==0&&ul(),--u.psd.ref||u.psd.finalize()}}function Av(){pr(An,function(){Br()&&Fr()})}function Br(){var o=il;return Xs=il=!1,o}function Fr(){var o,l,u;do for(;0<Fi.length;)for(o=Fi,Fi=[],u=o.length,l=0;l<u;++l){var f=o[l];f[0].apply(null,f[1])}while(0<Fi.length);Xs=il=!0}function ul(){var o=fr;fr=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=eo.slice(0),u=l.length;u;)l[--u]()}function to(o){return new se(zi,!1,o)}function Ie(o,l){var u=ue;return function(){var f=Br(),h=ue;try{return Dn(u,!0),o.apply(this,arguments)}catch(m){l&&l(m)}finally{Dn(h,!1),f&&Fr()}}}_(se.prototype,{then:ol,_then:function(o,l){ll(this,new Ed(null,null,o,l,ue))},catch:function(o){if(arguments.length===1)return this.then(null,o);var l=o,u=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?u:to)(f)}):this.then(null,function(f){return(f&&f.name===l?u:to)(f)})},finally:function(o){return this.then(function(l){return se.resolve(o()).then(function(){return l})},function(l){return se.resolve(o()).then(function(){return to(l)})})},timeout:function(o,l){var u=this;return o<1/0?new se(function(f,h){var m=setTimeout(function(){return h(new ce.Timeout(l))},o);u.then(f,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&z(se.prototype,Symbol.toStringTag,"Dexie.Promise"),An.env=Cd(),_(se,{all:function(){var o=he.apply(null,arguments).map(so);return new se(function(l,u){o.length===0&&l([]);var f=o.length;o.forEach(function(h,m){return se.resolve(h).then(function(w){o[m]=w,--f||l(o)},u)})})},resolve:function(o){return o instanceof se?o:o&&typeof o.then=="function"?new se(function(l,u){o.then(l,u)}):new se(zi,!0,o)},reject:to,race:function(){var o=he.apply(null,arguments).map(so);return new se(function(l,u){o.map(function(f){return se.resolve(f).then(l,u)})})},PSD:{get:function(){return ue},set:function(o){return ue=o}},totalEchoes:{get:function(){return io}},newPSD:Rn,usePSD:pr,scheduler:{get:function(){return Bi},set:function(o){Bi=o}},rejectionMapper:{get:function(){return sl},set:function(o){sl=o}},follow:function(o,l){return new se(function(u,f){return Rn(function(h,m){var w=ue;w.unhandleds=[],w.onunhandled=m,w.finalize=gn(function(){var k,C=this;k=function(){C.unhandleds.length===0?h():m(C.unhandleds[0])},eo.push(function P(){k(),eo.splice(eo.indexOf(P),1)}),++hr,Bi(function(){--hr==0&&ul()},[])},w.finalize),o()},l,u,f)})}}),dr&&(dr.allSettled&&z(se,"allSettled",function(){var o=he.apply(null,arguments).map(so);return new se(function(l){o.length===0&&l([]);var u=o.length,f=new Array(u);o.forEach(function(h,m){return se.resolve(h).then(function(w){return f[m]={status:"fulfilled",value:w}},function(w){return f[m]={status:"rejected",reason:w}}).then(function(){return--u||l(f)})})})}),dr.any&&typeof AggregateError<"u"&&z(se,"any",function(){var o=he.apply(null,arguments).map(so);return new se(function(l,u){o.length===0&&u(new AggregateError([]));var f=o.length,h=new Array(f);o.forEach(function(m,w){return se.resolve(m).then(function(k){return l(k)},function(k){h[w]=k,--f||u(new AggregateError(h))})})})}),dr.withResolvers&&(se.withResolvers=dr.withResolvers));var Ye={awaits:0,echoes:0,id:0},Rv=0,no=[],ro=0,io=0,Iv=0;function Rn(o,l,u,f){var h=ue,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++Iv,An.env,m.env=rl?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},l&&d(m,l),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=pr(m,o,u,f),m.ref===0&&m.finalize(),f}function qr(){return Ye.id||(Ye.id=++Rv),++Ye.awaits,Ye.echoes+=xd,Ye.id}function In(){return!!Ye.awaits&&(--Ye.awaits==0&&(Ye.id=0),Ye.echoes=Ye.awaits*xd,!0)}function so(o){return Ye.echoes&&o&&o.constructor===dr?(qr(),o.then(function(l){return In(),l},function(l){return In(),Fe(l)})):o}function Dv(){var o=no[no.length-1];no.pop(),Dn(o,!1)}function Dn(o,l){var u,f=ue;(l?!Ye.echoes||ro++&&o===ue:!ro||--ro&&o===ue)||queueMicrotask(l?(function(h){++io,Ye.echoes&&--Ye.echoes!=0||(Ye.echoes=Ye.awaits=Ye.id=0),no.push(ue),Dn(h,!0)}).bind(null,o):Dv),o!==ue&&(ue=o,f===An&&(An.env=Cd()),rl&&(u=An.env.Promise,l=o.env,(f.global||o.global)&&(Object.defineProperty(s,"Promise",l.PromiseProp),u.all=l.all,u.race=l.race,u.resolve=l.resolve,u.reject=l.reject,l.allSettled&&(u.allSettled=l.allSettled),l.any&&(u.any=l.any))))}function Cd(){var o=s.Promise;return rl?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function pr(o,l,u,f,h){var m=ue;try{return Dn(o,!0),l(u,f,h)}finally{Dn(m,!1)}}function Od(o,l,u,f){return typeof o!="function"?o:function(){var h=ue;u&&qr(),Dn(l,!0);try{return o.apply(this,arguments)}finally{Dn(h,!1),f&&queueMicrotask(In)}}}function cl(o){Promise===dr&&Ye.echoes===0?ro===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Mt).indexOf("[native code]")===-1&&(qr=In=ne);var Fe=se.reject,mr="￿",yn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Pd="String expected.",Kr=[],oo="__dbnames",dl="readonly",fl="readwrite";function vr(o,l){return o?l?function(){return o.apply(this,arguments)&&l.apply(this,arguments)}:o:l}var Td={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ao(o){return typeof o!="string"||/\./.test(o)?function(l){return l}:function(l){return l[o]===void 0&&o in l&&delete(l=vt(l))[o],l}}function Nd(){throw ce.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function be(o,l){try{var u=Ad(o),f=Ad(l);if(u!==f)return u==="Array"?1:f==="Array"?-1:u==="binary"?1:f==="binary"?-1:u==="string"?1:f==="string"?-1:u==="Date"?1:f!=="Date"?NaN:-1;switch(u){case"number":case"Date":case"string":return l<o?1:o<l?-1:0;case"binary":return function(h,m){for(var w=h.length,k=m.length,C=w<k?w:k,P=0;P<C;++P)if(h[P]!==m[P])return h[P]<m[P]?-1:1;return w===k?0:w<k?-1:1}(Rd(o),Rd(l));case"Array":return function(h,m){for(var w=h.length,k=m.length,C=w<k?w:k,P=0;P<C;++P){var N=be(h[P],m[P]);if(N!==0)return N}return w===k?0:w<k?-1:1}(o,l)}}catch{}return NaN}function Ad(o){var l=typeof o;return l!="object"?l:ArrayBuffer.isView(o)?"binary":(o=rn(o),o==="ArrayBuffer"?"binary":o)}function Rd(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function lo(o,l,u){var f=o.schema.yProps;return f?(l&&0<u.numFailures&&(l=l.filter(function(h,m){return!u.failures[m]})),Promise.all(f.map(function(h){return h=h.updatesTable,l?o.db.table(h).where("k").anyOf(l).delete():o.db.table(h).clear()})).then(function(){return u})):u}var Id=(Ne.prototype._trans=function(o,l,u){var f=this._tx||ue.trans,h=this.name,m=ln&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function w(P,N,x){if(!x.schema[h])throw new ce.NotFound("Table "+h+" not part of transaction");return l(x.idbtrans,x)}var k=Br();try{var C=f&&f.db._novip===this.db._novip?f===ue.trans?f._promise(o,w,u):Rn(function(){return f._promise(o,w,u)},{trans:f,transless:ue.transless||ue}):function P(N,x,I,O){if(N.idbdb&&(N._state.openComplete||ue.letThrough||N._vip)){var T=N._createTransaction(x,I,N._dbSchema);try{T.create(),N._state.PR1398_maxLoop=3}catch(R){return R.name===on.InvalidState&&N.isOpen()&&0<--N._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),N.close({disableAutoOpen:!1}),N.open().then(function(){return P(N,x,I,O)})):Fe(R)}return T._promise(x,function(R,A){return Rn(function(){return ue.trans=T,O(R,A,T)})}).then(function(R){if(x==="readwrite")try{T.idbtrans.commit()}catch{}return x==="readonly"?R:T._completion.then(function(){return R})})}if(N._state.openComplete)return Fe(new ce.DatabaseClosed(N._state.dbOpenError));if(!N._state.isBeingOpened){if(!N._state.autoOpen)return Fe(new ce.DatabaseClosed);N.open().catch(ne)}return N._state.dbReadyPromise.then(function(){return P(N,x,I,O)})}(this.db,o,[this.name],w);return m&&(C._consoleTask=m,C=C.catch(function(P){return console.trace(P),Fe(P)})),C}finally{k&&Fr()}},Ne.prototype.get=function(o,l){var u=this;return o&&o.constructor===Object?this.where(o).first(l):o==null?Fe(new ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return u.core.get({trans:f,key:o}).then(function(h){return u.hook.reading.fire(h)})}).then(l)},Ne.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(c(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var l=a(o);if(l.length===1)return this.where(l[0]).equals(o[l[0]]);var u=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&l.every(function(P){return 0<=k.keyPath.indexOf(P)})){for(var C=0;C<l.length;++C)if(l.indexOf(k.keyPath[C])===-1)return!1;return!0}return!1}).sort(function(k,C){return k.keyPath.length-C.keyPath.length})[0];if(u&&this.db._maxKey!==mr){var m=u.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(C){return o[C]}))}!u&&ln&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function h(k,C){return be(k,C)===0}var w=l.reduce(function(x,C){var P=x[0],N=x[1],x=f[C],I=o[C];return[P||x,P||!x?vr(N,x&&x.multi?function(O){return O=K(O,C),c(O)&&O.some(function(T){return h(I,T)})}:function(O){return h(I,K(O,C))}):N]},[null,null]),m=w[0],w=w[1];return m?this.where(m.name).equals(o[m.keyPath]).filter(w):u?this.filter(w):this.where(l).equals("")},Ne.prototype.filter=function(o){return this.toCollection().and(o)},Ne.prototype.count=function(o){return this.toCollection().count(o)},Ne.prototype.offset=function(o){return this.toCollection().offset(o)},Ne.prototype.limit=function(o){return this.toCollection().limit(o)},Ne.prototype.each=function(o){return this.toCollection().each(o)},Ne.prototype.toArray=function(o){return this.toCollection().toArray(o)},Ne.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ne.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,c(o)?"[".concat(o.join("+"),"]"):o))},Ne.prototype.reverse=function(){return this.toCollection().reverse()},Ne.prototype.mapToClass=function(o){var l,u=this.db,f=this.name;function h(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Nd&&(function(C,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function N(){this.constructor=C}n(C,P),C.prototype=P===null?Object.create(P):(N.prototype=P.prototype,new N)}(h,l=o),Object.defineProperty(h.prototype,"db",{get:function(){return u},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},o=h);for(var m=new Set,w=o.prototype;w;w=p(w))Object.getOwnPropertyNames(w).forEach(function(C){return m.add(C)});function k(C){if(!C)return C;var P,N=Object.create(o.prototype);for(P in C)if(!m.has(P))try{N[P]=C[P]}catch{}return N}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),o},Ne.prototype.defineClass=function(){return this.mapToClass(function(o){d(this,o)})},Ne.prototype.add=function(o,l){var u=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,w=o;return m&&h&&(w=ao(m)(o)),this._trans("readwrite",function(k){return u.core.mutate({trans:k,type:"add",keys:l!=null?[l]:null,values:[w]})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(m)try{L(o,m,k)}catch{}return k})},Ne.prototype.update=function(o,l){return typeof o!="object"||c(o)?this.where(":id").equals(o).modify(l):(o=K(o,this.schema.primKey.keyPath),o===void 0?Fe(new ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(l))},Ne.prototype.put=function(o,l){var u=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,w=o;return m&&h&&(w=ao(m)(o)),this._trans("readwrite",function(k){return u.core.mutate({trans:k,type:"put",values:[w],keys:l!=null?[l]:null})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(m)try{L(o,m,k)}catch{}return k})},Ne.prototype.delete=function(o){var l=this;return this._trans("readwrite",function(u){return l.core.mutate({trans:u,type:"delete",keys:[o]}).then(function(f){return lo(l,[o],f)}).then(function(f){return f.numFailures?se.reject(f.failures[0]):void 0})})},Ne.prototype.clear=function(){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"deleteRange",range:Td}).then(function(u){return lo(o,null,u)})}).then(function(l){return l.numFailures?se.reject(l.failures[0]):void 0})},Ne.prototype.bulkGet=function(o){var l=this;return this._trans("readonly",function(u){return l.core.getMany({keys:o,trans:u}).then(function(f){return f.map(function(h){return l.hook.reading.fire(h)})})})},Ne.prototype.bulkAdd=function(o,l,u){var f=this,h=Array.isArray(l)?l:void 0,m=(u=u||(h?void 0:l))?u.allKeys:void 0;return this._trans("readwrite",function(w){var P=f.schema.primKey,k=P.auto,P=P.keyPath;if(P&&h)throw new ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new ce.InvalidArgument("Arguments objects and keys must have the same length");var C=o.length,P=P&&k?o.map(ao(P)):o;return f.core.mutate({trans:w,type:"add",keys:h,values:P,wantResults:m}).then(function(T){var x=T.numFailures,I=T.results,O=T.lastResult,T=T.failures;if(x===0)return m?I:O;throw new lt("".concat(f.name,".bulkAdd(): ").concat(x," of ").concat(C," operations failed"),T)})})},Ne.prototype.bulkPut=function(o,l,u){var f=this,h=Array.isArray(l)?l:void 0,m=(u=u||(h?void 0:l))?u.allKeys:void 0;return this._trans("readwrite",function(w){var P=f.schema.primKey,k=P.auto,P=P.keyPath;if(P&&h)throw new ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new ce.InvalidArgument("Arguments objects and keys must have the same length");var C=o.length,P=P&&k?o.map(ao(P)):o;return f.core.mutate({trans:w,type:"put",keys:h,values:P,wantResults:m}).then(function(T){var x=T.numFailures,I=T.results,O=T.lastResult,T=T.failures;if(x===0)return m?I:O;throw new lt("".concat(f.name,".bulkPut(): ").concat(x," of ").concat(C," operations failed"),T)})})},Ne.prototype.bulkUpdate=function(o){var l=this,u=this.core,f=o.map(function(w){return w.key}),h=o.map(function(w){return w.changes}),m=[];return this._trans("readwrite",function(w){return u.getMany({trans:w,keys:f,cache:"clone"}).then(function(k){var C=[],P=[];o.forEach(function(x,I){var O=x.key,T=x.changes,R=k[I];if(R){for(var A=0,D=Object.keys(T);A<D.length;A++){var M=D[A],F=T[M];if(M===l.schema.primKey.keyPath){if(be(F,O)!==0)throw new ce.Constraint("Cannot update primary key in bulkUpdate()")}else L(R,M,F)}m.push(I),C.push(O),P.push(R)}});var N=C.length;return u.mutate({trans:w,type:"put",keys:C,values:P,updates:{keys:f,changeSpecs:h}}).then(function(x){var I=x.numFailures,O=x.failures;if(I===0)return N;for(var T=0,R=Object.keys(O);T<R.length;T++){var A,D=R[T],M=m[Number(D)];M!=null&&(A=O[D],delete O[D],O[M]=A)}throw new lt("".concat(l.name,".bulkUpdate(): ").concat(I," of ").concat(N," operations failed"),O)})})})},Ne.prototype.bulkDelete=function(o){var l=this,u=o.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:o}).then(function(h){return lo(l,o,h)})}).then(function(w){var h=w.numFailures,m=w.lastResult,w=w.failures;if(h===0)return m;throw new lt("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(u," operations failed"),w)})},Ne);function Ne(){}function qi(o){function l(w,k){if(k){for(var C=arguments.length,P=new Array(C-1);--C;)P[C-1]=arguments[C];return u[w].subscribe.apply(null,P),o}if(typeof w=="string")return u[w]}var u={};l.addEventType=m;for(var f=1,h=arguments.length;f<h;++f)m(arguments[f]);return l;function m(w,k,C){if(typeof w!="object"){var P;k=k||Tv;var N={subscribers:[],fire:C=C||ne,subscribe:function(x){N.subscribers.indexOf(x)===-1&&(N.subscribers.push(x),N.fire=k(N.fire,x))},unsubscribe:function(x){N.subscribers=N.subscribers.filter(function(I){return I!==x}),N.fire=N.subscribers.reduce(k,C)}};return u[w]=l[w]=N}a(P=w).forEach(function(x){var I=P[x];if(c(I))m(x,P[x][0],P[x][1]);else{if(I!=="asap")throw new ce.InvalidArgument("Invalid event config");var O=m(x,Te,function(){for(var T=arguments.length,R=new Array(T);T--;)R[T]=arguments[T];O.subscribers.forEach(function(A){V(function(){A.apply(null,R)})})})}})}}function Ki(o,l){return B(l).from({prototype:o}),l}function Wr(o,l){return!(o.filter||o.algorithm||o.or)&&(l?o.justLimit:!o.replayFilter)}function hl(o,l){o.filter=vr(o.filter,l)}function pl(o,l,u){var f=o.replayFilter;o.replayFilter=f?function(){return vr(f(),l())}:l,o.justLimit=u&&!f}function uo(o,l){if(o.isPrimKey)return l.primaryKey;var u=l.getIndexByKeyPath(o.index);if(!u)throw new ce.Schema("KeyPath "+o.index+" on object store "+l.name+" is not indexed");return u}function Dd(o,l,u){var f=uo(o,l.schema);return l.openCursor({trans:u,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function co(o,l,u,f){var h=o.replayFilter?vr(o.filter,o.replayFilter()):o.filter;if(o.or){var m={},w=function(k,C,P){var N,x;h&&!h(C,P,function(I){return C.stop(I)},function(I){return C.fail(I)})||((x=""+(N=C.primaryKey))=="[object ArrayBuffer]"&&(x=""+new Uint8Array(N)),y(m,x)||(m[x]=!0,l(k,C,P)))};return Promise.all([o.or._iterate(w,u),$d(Dd(o,f,u),o.algorithm,w,!o.keysOnly&&o.valueMapper)])}return $d(Dd(o,f,u),vr(o.algorithm,h),l,!o.keysOnly&&o.valueMapper)}function $d(o,l,u,f){var h=Ie(f?function(m,w,k){return u(f(m),w,k)}:u);return o.then(function(m){if(m)return m.start(function(){var w=function(){return m.continue()};l&&!l(m,function(k){return w=k},function(k){m.stop(k),w=ne},function(k){m.fail(k),w=ne})||h(m.value,m,function(k){return w=k}),w()})})}var Wi=(Ld.prototype.execute=function(o){var l=this["@@propmod"];if(l.add!==void 0){var u=l.add;if(c(u))return i(i([],c(o)?o:[],!0),u).sort();if(typeof u=="number")return(Number(o)||0)+u;if(typeof u=="bigint")try{return BigInt(o)+u}catch{return BigInt(0)+u}throw new TypeError("Invalid term ".concat(u))}if(l.remove!==void 0){var f=l.remove;if(c(f))return c(o)?o.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return u=(u=l.replacePrefix)===null||u===void 0?void 0:u[0],u&&typeof o=="string"&&o.startsWith(u)?l.replacePrefix[1]+o.substring(u.length):o},Ld);function Ld(o){this["@@propmod"]=o}var $v=(xe.prototype._read=function(o,l){var u=this._ctx;return u.error?u.table._trans(null,Fe.bind(null,u.error)):u.table._trans("readonly",o).then(l)},xe.prototype._write=function(o){var l=this._ctx;return l.error?l.table._trans(null,Fe.bind(null,l.error)):l.table._trans("readwrite",o,"locked")},xe.prototype._addAlgorithm=function(o){var l=this._ctx;l.algorithm=vr(l.algorithm,o)},xe.prototype._iterate=function(o,l){return co(this._ctx,o,l,this._ctx.table.core)},xe.prototype.clone=function(o){var l=Object.create(this.constructor.prototype),u=Object.create(this._ctx);return o&&d(u,o),l._ctx=u,l},xe.prototype.raw=function(){return this._ctx.valueMapper=null,this},xe.prototype.each=function(o){var l=this._ctx;return this._read(function(u){return co(l,o,u,l.table.core)})},xe.prototype.count=function(o){var l=this;return this._read(function(u){var f=l._ctx,h=f.table.core;if(Wr(f,!0))return h.count({trans:u,query:{index:uo(f,h.schema),range:f.range}}).then(function(w){return Math.min(w,f.limit)});var m=0;return co(f,function(){return++m,!1},u,h).then(function(){return m})}).then(o)},xe.prototype.sortBy=function(o,l){var u=o.split(".").reverse(),f=u[0],h=u.length-1;function m(C,P){return P?m(C[u[P]],P-1):C[f]}var w=this._ctx.dir==="next"?1:-1;function k(C,P){return be(m(C,h),m(P,h))*w}return this.toArray(function(C){return C.sort(k)}).then(l)},xe.prototype.toArray=function(o){var l=this;return this._read(function(u){var f=l._ctx;if(f.dir==="next"&&Wr(f,!0)&&0<f.limit){var h=f.valueMapper,m=uo(f,f.table.core.schema);return f.table.core.query({trans:u,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(k){return k=k.result,h?k.map(h):k})}var w=[];return co(f,function(k){return w.push(k)},u,f.table.core).then(function(){return w})},o)},xe.prototype.offset=function(o){var l=this._ctx;return o<=0||(l.offset+=o,Wr(l)?pl(l,function(){var u=o;return function(f,h){return u===0||(u===1?--u:h(function(){f.advance(u),u=0}),!1)}}):pl(l,function(){var u=o;return function(){return--u<0}})),this},xe.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),pl(this._ctx,function(){var l=o;return function(u,f,h){return--l<=0&&f(h),0<=l}},!0),this},xe.prototype.until=function(o,l){return hl(this._ctx,function(u,f,h){return!o(u.value)||(f(h),l)}),this},xe.prototype.first=function(o){return this.limit(1).toArray(function(l){return l[0]}).then(o)},xe.prototype.last=function(o){return this.reverse().first(o)},xe.prototype.filter=function(o){var l;return hl(this._ctx,function(u){return o(u.value)}),(l=this._ctx).isMatch=vr(l.isMatch,o),this},xe.prototype.and=function(o){return this.filter(o)},xe.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},xe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xe.prototype.desc=function(){return this.reverse()},xe.prototype.eachKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,f){o(f.key,f)})},xe.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},xe.prototype.eachPrimaryKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(u,f){o(f.primaryKey,f)})},xe.prototype.keys=function(o){var l=this._ctx;l.keysOnly=!l.isMatch;var u=[];return this.each(function(f,h){u.push(h.key)}).then(function(){return u}).then(o)},xe.prototype.primaryKeys=function(o){var l=this._ctx;if(l.dir==="next"&&Wr(l,!0)&&0<l.limit)return this._read(function(f){var h=uo(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(f){return f.result}).then(o);l.keysOnly=!l.isMatch;var u=[];return this.each(function(f,h){u.push(h.primaryKey)}).then(function(){return u}).then(o)},xe.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},xe.prototype.firstKey=function(o){return this.limit(1).keys(function(l){return l[0]}).then(o)},xe.prototype.lastKey=function(o){return this.reverse().firstKey(o)},xe.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var l={};return hl(this._ctx,function(h){var f=h.primaryKey.toString(),h=y(l,f);return l[f]=!0,!h}),this},xe.prototype.modify=function(o){var l=this,u=this._ctx;return this._write(function(f){var h,m,w;w=typeof o=="function"?o:(h=a(o),m=h.length,function(D){for(var M=!1,F=0;F<m;++F){var q=h[F],J=o[q],ee=K(D,q);J instanceof Wi?(L(D,q,J.execute(ee)),M=!0):ee!==J&&(L(D,q,J),M=!0)}return M});var k=u.table.core,x=k.schema.primaryKey,C=x.outbound,P=x.extractKey,N=200,x=l.db._options.modifyChunkSize;x&&(N=typeof x=="object"?x[k.name]||x["*"]||200:x);function I(D,q){var F=q.failures,q=q.numFailures;T+=D-q;for(var J=0,ee=a(F);J<ee.length;J++){var X=ee[J];O.push(F[X])}}var O=[],T=0,R=[],A=o===Ud;return l.clone().primaryKeys().then(function(D){function M(q){var J=Math.min(N,D.length-q),ee=D.slice(q,q+J);return(A?Promise.resolve([]):k.getMany({trans:f,keys:ee,cache:"immutable"})).then(function(X){var Z=[],re=[],te=C?[]:null,oe=A?ee:[];if(!A)for(var ge=0;ge<J;++ge){var ke=X[ge],me={value:vt(ke),primKey:D[q+ge]};w.call(me,me.value,me)!==!1&&(me.value==null?oe.push(D[q+ge]):C||be(P(ke),P(me.value))===0?(re.push(me.value),C&&te.push(D[q+ge])):(oe.push(D[q+ge]),Z.push(me.value)))}return Promise.resolve(0<Z.length&&k.mutate({trans:f,type:"add",values:Z}).then(function(Me){for(var pe in Me.failures)oe.splice(parseInt(pe),1);I(Z.length,Me)})).then(function(){return(0<re.length||F&&typeof o=="object")&&k.mutate({trans:f,type:"put",keys:te,values:re,criteria:F,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<q}).then(function(Me){return I(re.length,Me)})}).then(function(){return(0<oe.length||F&&A)&&k.mutate({trans:f,type:"delete",keys:oe,criteria:F,isAdditionalChunk:0<q}).then(function(Me){return lo(u.table,oe,Me)}).then(function(Me){return I(oe.length,Me)})}).then(function(){return D.length>q+J&&M(q+N)})})}var F=Wr(u)&&u.limit===1/0&&(typeof o!="function"||A)&&{index:u.index,range:u.range};return M(0).then(function(){if(0<O.length)throw new sn("Error modifying one or more objects",O,T,R);return D.length})})})},xe.prototype.delete=function(){var o=this._ctx,l=o.range;return!Wr(o)||o.table.schema.yProps||!o.isPrimKey&&l.type!==3?this.modify(Ud):this._write(function(u){var f=o.table.core.schema.primaryKey,h=l;return o.table.core.count({trans:u,query:{index:f,range:h}}).then(function(m){return o.table.core.mutate({trans:u,type:"deleteRange",range:h}).then(function(C){var k=C.failures,C=C.numFailures;if(C)throw new sn("Could not delete some values",Object.keys(k).map(function(P){return k[P]}),m-C);return m-C})})})},xe);function xe(){}var Ud=function(o,l){return l.value=null};function Lv(o,l){return o<l?-1:o===l?0:1}function Uv(o,l){return l<o?-1:o===l?0:1}function Tt(o,l,u){return o=o instanceof Md?new o.Collection(o):o,o._ctx.error=new(u||TypeError)(l),o}function Vr(o){return new o.Collection(o,function(){return zd("")}).limit(0)}function fo(o,l,u,f){var h,m,w,k,C,P,N,x=u.length;if(!u.every(function(T){return typeof T=="string"}))return Tt(o,Pd);function I(T){h=T==="next"?function(A){return A.toUpperCase()}:function(A){return A.toLowerCase()},m=T==="next"?function(A){return A.toLowerCase()}:function(A){return A.toUpperCase()},w=T==="next"?Lv:Uv;var R=u.map(function(A){return{lower:m(A),upper:h(A)}}).sort(function(A,D){return w(A.lower,D.lower)});k=R.map(function(A){return A.upper}),C=R.map(function(A){return A.lower}),N=(P=T)==="next"?"":f}I("next"),o=new o.Collection(o,function(){return $n(k[0],C[x-1]+f)}),o._ondirectionchange=function(T){I(T)};var O=0;return o._addAlgorithm(function(T,R,A){var D=T.key;if(typeof D!="string")return!1;var M=m(D);if(l(M,C,O))return!0;for(var F=null,q=O;q<x;++q){var J=function(ee,X,Z,re,te,oe){for(var ge=Math.min(ee.length,re.length),ke=-1,me=0;me<ge;++me){var Me=X[me];if(Me!==re[me])return te(ee[me],Z[me])<0?ee.substr(0,me)+Z[me]+Z.substr(me+1):te(ee[me],re[me])<0?ee.substr(0,me)+re[me]+Z.substr(me+1):0<=ke?ee.substr(0,ke)+X[ke]+Z.substr(ke+1):null;te(ee[me],Me)<0&&(ke=me)}return ge<re.length&&oe==="next"?ee+Z.substr(ee.length):ge<ee.length&&oe==="prev"?ee.substr(0,Z.length):ke<0?null:ee.substr(0,ke)+re[ke]+Z.substr(ke+1)}(D,M,k[q],C[q],w,P);J===null&&F===null?O=q+1:(F===null||0<w(F,J))&&(F=J)}return R(F!==null?function(){T.continue(F+N)}:A),!1}),o}function $n(o,l,u,f){return{type:2,lower:o,upper:l,lowerOpen:u,upperOpen:f}}function zd(o){return{type:1,lower:o,upper:o}}var Md=(Object.defineProperty(Xe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Xe.prototype.between=function(o,l,u,f){u=u!==!1,f=f===!0;try{return 0<this._cmp(o,l)||this._cmp(o,l)===0&&(u||f)&&(!u||!f)?Vr(this):new this.Collection(this,function(){return $n(o,l,!u,!f)})}catch{return Tt(this,yn)}},Xe.prototype.equals=function(o){return o==null?Tt(this,yn):new this.Collection(this,function(){return zd(o)})},Xe.prototype.above=function(o){return o==null?Tt(this,yn):new this.Collection(this,function(){return $n(o,void 0,!0)})},Xe.prototype.aboveOrEqual=function(o){return o==null?Tt(this,yn):new this.Collection(this,function(){return $n(o,void 0,!1)})},Xe.prototype.below=function(o){return o==null?Tt(this,yn):new this.Collection(this,function(){return $n(void 0,o,!1,!0)})},Xe.prototype.belowOrEqual=function(o){return o==null?Tt(this,yn):new this.Collection(this,function(){return $n(void 0,o)})},Xe.prototype.startsWith=function(o){return typeof o!="string"?Tt(this,Pd):this.between(o,o+mr,!0,!0)},Xe.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):fo(this,function(l,u){return l.indexOf(u[0])===0},[o],mr)},Xe.prototype.equalsIgnoreCase=function(o){return fo(this,function(l,u){return l===u[0]},[o],"")},Xe.prototype.anyOfIgnoreCase=function(){var o=he.apply(fe,arguments);return o.length===0?Vr(this):fo(this,function(l,u){return u.indexOf(l)!==-1},o,"")},Xe.prototype.startsWithAnyOfIgnoreCase=function(){var o=he.apply(fe,arguments);return o.length===0?Vr(this):fo(this,function(l,u){return u.some(function(f){return l.indexOf(f)===0})},o,mr)},Xe.prototype.anyOf=function(){var o=this,l=he.apply(fe,arguments),u=this._cmp;try{l.sort(u)}catch{return Tt(this,yn)}if(l.length===0)return Vr(this);var f=new this.Collection(this,function(){return $n(l[0],l[l.length-1])});f._ondirectionchange=function(m){u=m==="next"?o._ascending:o._descending,l.sort(u)};var h=0;return f._addAlgorithm(function(m,w,k){for(var C=m.key;0<u(C,l[h]);)if(++h===l.length)return w(k),!1;return u(C,l[h])===0||(w(function(){m.continue(l[h])}),!1)}),f},Xe.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Xe.prototype.noneOf=function(){var o=he.apply(fe,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Tt(this,yn)}var l=o.reduce(function(u,f){return u?u.concat([[u[u.length-1][1],f]]):[[-1/0,f]]},null);return l.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},Xe.prototype.inAnyRange=function(D,l){var u=this,f=this._cmp,h=this._ascending,m=this._descending,w=this._min,k=this._max;if(D.length===0)return Vr(this);if(!D.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&h(M[0],M[1])<=0}))return Tt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ce.InvalidArgument);var C=!l||l.includeLowers!==!1,P=l&&l.includeUppers===!0,N,x=h;function I(M,F){return x(M[0],F[0])}try{(N=D.reduce(function(M,F){for(var q=0,J=M.length;q<J;++q){var ee=M[q];if(f(F[0],ee[1])<0&&0<f(F[1],ee[0])){ee[0]=w(ee[0],F[0]),ee[1]=k(ee[1],F[1]);break}}return q===J&&M.push(F),M},[])).sort(I)}catch{return Tt(this,yn)}var O=0,T=P?function(M){return 0<h(M,N[O][1])}:function(M){return 0<=h(M,N[O][1])},R=C?function(M){return 0<m(M,N[O][0])}:function(M){return 0<=m(M,N[O][0])},A=T,D=new this.Collection(this,function(){return $n(N[0][0],N[N.length-1][1],!C,!P)});return D._ondirectionchange=function(M){x=M==="next"?(A=T,h):(A=R,m),N.sort(I)},D._addAlgorithm(function(M,F,q){for(var J,ee=M.key;A(ee);)if(++O===N.length)return F(q),!1;return!T(J=ee)&&!R(J)||(u._cmp(ee,N[O][1])===0||u._cmp(ee,N[O][0])===0||F(function(){x===h?M.continue(N[O][0]):M.continue(N[O][1])}),!1)}),D},Xe.prototype.startsWithAnyOf=function(){var o=he.apply(fe,arguments);return o.every(function(l){return typeof l=="string"})?o.length===0?Vr(this):this.inAnyRange(o.map(function(l){return[l,l+mr]})):Tt(this,"startsWithAnyOf() only works with strings")},Xe);function Xe(){}function un(o){return Ie(function(l){return Vi(l),o(l.target.error),!1})}function Vi(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Hi="storagemutated",ml="x-storagemutated-1",Ln=qi(null,Hi),zv=(cn.prototype._lock=function(){return $(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},cn.prototype._unlock=function(){if($(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{pr(o[1],o[0])}catch{}}return this},cn.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},cn.prototype.create=function(o){var l=this;if(!this.mode)return this;var u=this.db.idbdb,f=this.db._state.dbOpenError;if($(!this.idbtrans),!o&&!u)switch(f&&f.name){case"DatabaseClosedError":throw new ce.DatabaseClosed(f);case"MissingAPIError":throw new ce.MissingAPI(f.message,f);default:throw new ce.OpenFailed(f)}if(!this.active)throw new ce.TransactionInactive;return $(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||u).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ie(function(h){Vi(h),l._reject(o.error)}),o.onabort=Ie(function(h){Vi(h),l.active&&l._reject(new ce.Abort(o.error)),l.active=!1,l.on("abort").fire(h)}),o.oncomplete=Ie(function(){l.active=!1,l._resolve(),"mutatedParts"in o&&Ln.storagemutated.fire(o.mutatedParts)}),this},cn.prototype._promise=function(o,l,u){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return Fe(new ce.ReadOnly("Transaction is readonly"));if(!this.active)return Fe(new ce.TransactionInactive);if(this._locked())return new se(function(m,w){f._blockedFuncs.push([function(){f._promise(o,l,u).then(m,w)},ue])});if(u)return Rn(function(){var m=new se(function(w,k){f._lock();var C=l(w,k,f);C&&C.then&&C.then(w,k)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var h=new se(function(m,w){var k=l(m,w,f);k&&k.then&&k.then(m,w)});return h._lib=!0,h},cn.prototype._root=function(){return this.parent?this.parent._root():this},cn.prototype.waitFor=function(o){var l,u=this._root(),f=se.resolve(o);u._waitingFor?u._waitingFor=u._waitingFor.then(function(){return f}):(u._waitingFor=f,u._waitingQueue=[],l=u.idbtrans.objectStore(u.storeNames[0]),function m(){for(++u._spinCount;u._waitingQueue.length;)u._waitingQueue.shift()();u._waitingFor&&(l.get(-1/0).onsuccess=m)}());var h=u._waitingFor;return new se(function(m,w){f.then(function(k){return u._waitingQueue.push(Ie(m.bind(null,k)))},function(k){return u._waitingQueue.push(Ie(w.bind(null,k)))}).finally(function(){u._waitingFor===h&&(u._waitingFor=null)})})},cn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ce.Abort))},cn.prototype.table=function(o){var l=this._memoizedTables||(this._memoizedTables={});if(y(l,o))return l[o];var u=this.schema[o];if(!u)throw new ce.NotFound("Table "+o+" not part of transaction");return u=new this.db.Table(o,u,this),u.core=this.db.core.table(o),l[o]=u},cn);function cn(){}function vl(o,l,u,f,h,m,w,k){return{name:o,keyPath:l,unique:u,multi:f,auto:h,compound:m,src:(u&&!w?"&":"")+(f?"*":"")+(h?"++":"")+Bd(l),type:k}}function Bd(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function gl(o,l,u){return{name:o,primKey:l,indexes:u,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},u.reduce(function(h,m,w){return w=f(m,w),w&&(h[w[0]]=w[1]),h},{}))};var f}var Gi=function(o){try{return o.only([[]]),Gi=function(){return[[]]},[[]]}catch{return Gi=function(){return mr},mr}};function yl(o){return o==null?function(){}:typeof o=="string"?(l=o).split(".").length===1?function(u){return u[l]}:function(u){return K(u,l)}:function(u){return K(u,o)};var l}function Fd(o){return[].slice.call(o)}var Mv=0;function Ji(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function Bv(o,l,C){function f(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=A.lower,T=A.upper,R=A.lowerOpen,A=A.upperOpen;return O===void 0?T===void 0?null:l.upperBound(T,!!A):T===void 0?l.lowerBound(O,!!R):l.bound(O,T,!!R,!!A)}function h(I){var O,T=I.name;return{name:T,schema:I,mutate:function(R){var A=R.trans,D=R.type,M=R.keys,F=R.values,q=R.range;return new Promise(function(J,ee){J=Ie(J);var X=A.objectStore(T),Z=X.keyPath==null,re=D==="put"||D==="add";if(!re&&D!=="delete"&&D!=="deleteRange")throw new Error("Invalid operation type: "+D);var te,oe=(M||F||{length:1}).length;if(M&&F&&M.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(oe===0)return J({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(gt){++Me,Vi(gt)}var ke=[],me=[],Me=0;if(D==="deleteRange"){if(q.type===4)return J({numFailures:Me,failures:me,results:[],lastResult:void 0});q.type===3?ke.push(te=X.clear()):ke.push(te=X.delete(f(q)))}else{var Z=re?Z?[F,M]:[F,null]:[M,null],pe=Z[0],ct=Z[1];if(re)for(var dt=0;dt<oe;++dt)ke.push(te=ct&&ct[dt]!==void 0?X[D](pe[dt],ct[dt]):X[D](pe[dt])),te.onerror=ge;else for(dt=0;dt<oe;++dt)ke.push(te=X[D](pe[dt])),te.onerror=ge}function xo(gt){gt=gt.target.result,ke.forEach(function(wr,$l){return wr.error!=null&&(me[$l]=wr.error)}),J({numFailures:Me,failures:me,results:D==="delete"?M:ke.map(function(wr){return wr.result}),lastResult:gt})}te.onerror=function(gt){ge(gt),xo(gt)},te.onsuccess=xo})},getMany:function(R){var A=R.trans,D=R.keys;return new Promise(function(M,F){M=Ie(M);for(var q,J=A.objectStore(T),ee=D.length,X=new Array(ee),Z=0,re=0,te=function(ke){ke=ke.target,X[ke._pos]=ke.result,++re===Z&&M(X)},oe=un(F),ge=0;ge<ee;++ge)D[ge]!=null&&((q=J.get(D[ge]))._pos=ge,q.onsuccess=te,q.onerror=oe,++Z);Z===0&&M(X)})},get:function(R){var A=R.trans,D=R.key;return new Promise(function(M,F){M=Ie(M);var q=A.objectStore(T).get(D);q.onsuccess=function(J){return M(J.target.result)},q.onerror=un(F)})},query:(O=P,function(R){return new Promise(function(A,D){A=Ie(A);var M,F,q,Z=R.trans,J=R.values,ee=R.limit,te=R.query,X=ee===1/0?void 0:ee,re=te.index,te=te.range,Z=Z.objectStore(T),re=re.isPrimaryKey?Z:Z.index(re.name),te=f(te);if(ee===0)return A({result:[]});O?((X=J?re.getAll(te,X):re.getAllKeys(te,X)).onsuccess=function(oe){return A({result:oe.target.result})},X.onerror=un(D)):(M=0,F=!J&&"openKeyCursor"in re?re.openKeyCursor(te):re.openCursor(te),q=[],F.onsuccess=function(oe){var ge=F.result;return ge?(q.push(J?ge.value:ge.primaryKey),++M===ee?A({result:q}):void ge.continue()):A({result:q})},F.onerror=un(D))})}),openCursor:function(R){var A=R.trans,D=R.values,M=R.query,F=R.reverse,q=R.unique;return new Promise(function(J,ee){J=Ie(J);var re=M.index,X=M.range,Z=A.objectStore(T),Z=re.isPrimaryKey?Z:Z.index(re.name),re=F?q?"prevunique":"prev":q?"nextunique":"next",te=!D&&"openKeyCursor"in Z?Z.openKeyCursor(f(X),re):Z.openCursor(f(X),re);te.onerror=un(ee),te.onsuccess=Ie(function(oe){var ge,ke,me,Me,pe=te.result;pe?(pe.___id=++Mv,pe.done=!1,ge=pe.continue.bind(pe),ke=(ke=pe.continuePrimaryKey)&&ke.bind(pe),me=pe.advance.bind(pe),Me=function(){throw new Error("Cursor not stopped")},pe.trans=A,pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=function(){throw new Error("Cursor not started")},pe.fail=Ie(ee),pe.next=function(){var ct=this,dt=1;return this.start(function(){return dt--?ct.continue():ct.stop()}).then(function(){return ct})},pe.start=function(ct){function dt(){if(te.result)try{ct()}catch(gt){pe.fail(gt)}else pe.done=!0,pe.start=function(){throw new Error("Cursor behind last entry")},pe.stop()}var xo=new Promise(function(gt,wr){gt=Ie(gt),te.onerror=un(wr),pe.fail=wr,pe.stop=function($l){pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=Me,gt($l)}});return te.onsuccess=Ie(function(gt){te.onsuccess=dt,dt()}),pe.continue=ge,pe.continuePrimaryKey=ke,pe.advance=me,dt(),xo},J(pe)):J(null)},ee)})},count:function(R){var A=R.query,D=R.trans,M=A.index,F=A.range;return new Promise(function(q,J){var ee=D.objectStore(T),X=M.isPrimaryKey?ee:ee.index(M.name),ee=f(F),X=ee?X.count(ee):X.count();X.onsuccess=Ie(function(Z){return q(Z.target.result)}),X.onerror=un(J)})}}}var m,w,k,N=(w=C,k=Fd((m=o).objectStoreNames),{schema:{name:m.name,tables:k.map(function(I){return w.objectStore(I)}).map(function(I){var O=I.keyPath,A=I.autoIncrement,T=c(O),R={},A={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O==null,compound:T,keyPath:O,autoIncrement:A,unique:!0,extractKey:yl(O)},indexes:Fd(I.indexNames).map(function(D){return I.index(D)}).map(function(q){var M=q.name,F=q.unique,J=q.multiEntry,q=q.keyPath,J={name:M,compound:c(q),keyPath:q,unique:F,multiEntry:J,extractKey:yl(q)};return R[Ji(q)]=J}),getIndexByKeyPath:function(D){return R[Ji(D)]}};return R[":id"]=A.primaryKey,O!=null&&(R[Ji(O)]=A.primaryKey),A})},hasGetAll:0<k.length&&"getAll"in w.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),C=N.schema,P=N.hasGetAll,N=C.tables.map(h),x={};return N.forEach(function(I){return x[I.name]=I}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(I){if(!x[I])throw new Error("Table '".concat(I,"' not found"));return x[I]},MIN_KEY:-1/0,MAX_KEY:Gi(l),schema:C}}function Fv(o,l,u,f){var h=u.IDBKeyRange;return u.indexedDB,{dbcore:(f=Bv(l,h,f),o.dbcore.reduce(function(m,w){return w=w.create,r(r({},m),w(m))},f))}}function ho(o,f){var u=f.db,f=Fv(o._middlewares,u,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(h){var m=h.name;o.core.schema.tables.some(function(w){return w.name===m})&&(h.core=o.core.table(m),o[m]instanceof o.Table&&(o[m].core=h.core))})}function po(o,l,u,f){u.forEach(function(h){var m=f[h];l.forEach(function(w){var k=function C(P,N){return H(P,N)||(P=p(P))&&C(P,N)}(w,h);(!k||"value"in k&&k.value===void 0)&&(w===o.Transaction.prototype||w instanceof o.Transaction?z(w,h,{get:function(){return this.table(h)},set:function(C){j(this,h,{value:C,writable:!0,configurable:!0,enumerable:!0})}}):w[h]=new o.Table(h,m))})})}function wl(o,l){l.forEach(function(u){for(var f in u)u[f]instanceof o.Table&&delete u[f]})}function qv(o,l){return o._cfg.version-l._cfg.version}function Kv(o,l,u,f){var h=o._dbSchema;u.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=gl("$meta",Kd("")[0],[]),o._storeNames.push("$meta"));var m=o._createTransaction("readwrite",o._storeNames,h);m.create(u),m._completion.catch(f);var w=m._reject.bind(m),k=ue.transless||ue;Rn(function(){return ue.trans=m,ue.transless=k,l!==0?(ho(o,u),P=l,((C=m).storeNames.includes("$meta")?C.table("$meta").get("version").then(function(N){return N??P}):se.resolve(P)).then(function(N){return I=N,O=m,T=u,R=[],N=(x=o)._versions,A=x._dbSchema=vo(0,x.idbdb,T),(N=N.filter(function(D){return D._cfg.version>=I})).length!==0?(N.forEach(function(D){R.push(function(){var M=A,F=D._cfg.dbschema;go(x,M,T),go(x,F,T),A=x._dbSchema=F;var q=_l(M,F);q.add.forEach(function(re){bl(T,re[0],re[1].primKey,re[1].indexes)}),q.change.forEach(function(re){if(re.recreate)throw new ce.Upgrade("Not yet support for changing primary key");var te=T.objectStore(re.name);re.add.forEach(function(oe){return mo(te,oe)}),re.change.forEach(function(oe){te.deleteIndex(oe.name),mo(te,oe)}),re.del.forEach(function(oe){return te.deleteIndex(oe)})});var J=D._cfg.contentUpgrade;if(J&&D._cfg.version>I){ho(x,T),O._memoizedTables={};var ee=G(F);q.del.forEach(function(re){ee[re]=M[re]}),wl(x,[x.Transaction.prototype]),po(x,[x.Transaction.prototype],a(ee),ee),O.schema=ee;var X,Z=je(J);return Z&&qr(),q=se.follow(function(){var re;(X=J(O))&&Z&&(re=In.bind(null,null),X.then(re,re))}),X&&typeof X.then=="function"?se.resolve(X):q.then(function(){return X})}}),R.push(function(M){var F,q,J=D._cfg.dbschema;F=J,q=M,[].slice.call(q.db.objectStoreNames).forEach(function(ee){return F[ee]==null&&q.db.deleteObjectStore(ee)}),wl(x,[x.Transaction.prototype]),po(x,[x.Transaction.prototype],x._storeNames,x._dbSchema),O.schema=x._dbSchema}),R.push(function(M){x.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(x.idbdb.version/10)===D._cfg.version?(x.idbdb.deleteObjectStore("$meta"),delete x._dbSchema.$meta,x._storeNames=x._storeNames.filter(function(F){return F!=="$meta"})):M.objectStore("$meta").put(D._cfg.version,"version"))})}),function D(){return R.length?se.resolve(R.shift()(O.idbtrans)).then(D):se.resolve()}().then(function(){qd(A,T)})):se.resolve();var x,I,O,T,R,A}).catch(w)):(a(h).forEach(function(N){bl(u,N,h[N].primKey,h[N].indexes)}),ho(o,u),void se.follow(function(){return o.on.populate.fire(m)}).catch(w));var C,P})}function Wv(o,l){qd(o._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var u=vo(0,o.idbdb,l);go(o,o._dbSchema,l);for(var f=0,h=_l(u,o._dbSchema).change;f<h.length;f++){var m=function(w){if(w.change.length||w.recreate)return console.warn("Unable to patch indexes of table ".concat(w.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=l.objectStore(w.name);w.add.forEach(function(C){ln&&console.debug("Dexie upgrade patch: Creating missing index ".concat(w.name,".").concat(C.src)),mo(k,C)})}(h[f]);if(typeof m=="object")return m.value}}function _l(o,l){var u,f={del:[],add:[],change:[]};for(u in o)l[u]||f.del.push(u);for(u in l){var h=o[u],m=l[u];if(h){var w={name:u,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)w.recreate=!0,f.change.push(w);else{var k=h.idxByName,C=m.idxByName,P=void 0;for(P in k)C[P]||w.del.push(P);for(P in C){var N=k[P],x=C[P];N?N.src!==x.src&&w.change.push(x):w.add.push(x)}(0<w.del.length||0<w.add.length||0<w.change.length)&&f.change.push(w)}}else f.add.push([u,m])}return f}function bl(o,l,u,f){var h=o.db.createObjectStore(l,u.keyPath?{keyPath:u.keyPath,autoIncrement:u.auto}:{autoIncrement:u.auto});return f.forEach(function(m){return mo(h,m)}),h}function qd(o,l){a(o).forEach(function(u){l.db.objectStoreNames.contains(u)||(ln&&console.debug("Dexie: Creating missing table",u),bl(l,u,o[u].primKey,o[u].indexes))})}function mo(o,l){o.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function vo(o,l,u){var f={};return b(l.objectStoreNames,0).forEach(function(h){for(var m=u.objectStore(h),w=vl(Bd(P=m.keyPath),P||"",!0,!1,!!m.autoIncrement,P&&typeof P!="string",!0),k=[],C=0;C<m.indexNames.length;++C){var N=m.index(m.indexNames[C]),P=N.keyPath,N=vl(N.name,P,!!N.unique,!!N.multiEntry,!1,P&&typeof P!="string",!1);k.push(N)}f[h]=gl(h,w,k)}),f}function go(o,l,u){for(var f=u.db.objectStoreNames,h=0;h<f.length;++h){var m=f[h],w=u.objectStore(m);o._hasGetAll="getAll"in w;for(var k=0;k<w.indexNames.length;++k){var C=w.indexNames[k],P=w.index(C).keyPath,N=typeof P=="string"?P:"["+b(P).join("+")+"]";!l[m]||(P=l[m].idxByName[N])&&(P.name=C,delete l[m].idxByName[N],l[m].idxByName[C]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Kd(o){return o.split(",").map(function(l,u){var m=l.split(":"),f=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return vl(h,m||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),c(m),u===0,f)})}var Vv=(Hr.prototype._createTableSchema=gl,Hr.prototype._parseIndexSyntax=Kd,Hr.prototype._parseStoresSpec=function(o,l){var u=this;a(o).forEach(function(f){if(o[f]!==null){var h=u._parseIndexSyntax(o[f]),m=h.shift();if(!m)throw new ce.Schema("Invalid schema for table "+f+": "+o[f]);if(m.unique=!0,m.multi)throw new ce.Schema("Primary key cannot be multiEntry*");h.forEach(function(w){if(w.auto)throw new ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!w.keyPath)throw new ce.Schema("Index must have a name and cannot be an empty string")}),h=u._createTableSchema(f,m,h),l[f]=h}})},Hr.prototype.stores=function(u){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,u):u;var u=l._versions,f={},h={};return u.forEach(function(m){d(f,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(f,h)}),l._dbSchema=h,wl(l,[l._allTables,l,l.Transaction.prototype]),po(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(h),h),l._storeNames=a(h),this},Hr.prototype.upgrade=function(o){return this._cfg.contentUpgrade=nl(this._cfg.contentUpgrade||ne,o),this},Hr);function Hr(){}function kl(o,l){var u=o._dbNamesDB;return u||(u=o._dbNamesDB=new wn(oo,{addons:[],indexedDB:o,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),u.table("dbnames")}function Sl(o){return o&&typeof o.databases=="function"}function xl(o){return Rn(function(){return ue.letThrough=!0,o()})}function El(o){return!("from"in o)}var ut=function(o,l){if(!this){var u=new ut;return o&&"d"in o&&d(u,o),u}d(this,arguments.length?{d:1,from:o,to:1<arguments.length?l:o}:{d:0})};function Qi(o,l,u){var f=be(l,u);if(!isNaN(f)){if(0<f)throw RangeError();if(El(o))return d(o,{from:l,to:u,d:1});var h=o.l,f=o.r;if(be(u,o.from)<0)return h?Qi(h,l,u):o.l={from:l,to:u,d:1,l:null,r:null},Vd(o);if(0<be(l,o.to))return f?Qi(f,l,u):o.r={from:l,to:u,d:1,l:null,r:null},Vd(o);be(l,o.from)<0&&(o.from=l,o.l=null,o.d=f?f.d+1:1),0<be(u,o.to)&&(o.to=u,o.r=null,o.d=o.l?o.l.d+1:1),u=!o.r,h&&!o.l&&Yi(o,h),f&&u&&Yi(o,f)}}function Yi(o,l){El(l)||function u(f,C){var m=C.from,w=C.to,k=C.l,C=C.r;Qi(f,m,w),k&&u(f,k),C&&u(f,C)}(o,l)}function Wd(o,l){var u=yo(l),f=u.next();if(f.done)return!1;for(var h=f.value,m=yo(o),w=m.next(h.from),k=w.value;!f.done&&!w.done;){if(be(k.from,h.to)<=0&&0<=be(k.to,h.from))return!0;be(h.from,k.from)<0?h=(f=u.next(k.from)).value:k=(w=m.next(h.from)).value}return!1}function yo(o){var l=El(o)?null:{s:0,n:o};return{next:function(u){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&be(u,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||be(u,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Vd(o){var l,u,f=(((l=o.r)===null||l===void 0?void 0:l.d)||0)-(((u=o.l)===null||u===void 0?void 0:u.d)||0),h=1<f?"r":f<-1?"l":"";h&&(l=h=="r"?"l":"r",u=r({},o),f=o[h],o.from=f.from,o.to=f.to,o[h]=f[h],u[h]=f[l],(o[l]=u).d=Hd(u)),o.d=Hd(o)}function Hd(u){var l=u.r,u=u.l;return(l?u?Math.max(l.d,u.d):l.d:u?u.d:0)+1}function wo(o,l){return a(l).forEach(function(u){o[u]?Yi(o[u],l[u]):o[u]=function f(h){var m,w,k={};for(m in h)y(h,m)&&(w=h[m],k[m]=!w||typeof w!="object"||ye.has(w.constructor)?w:f(w));return k}(l[u])}),o}function jl(o,l){return o.all||l.all||Object.keys(o).some(function(u){return l[u]&&Wd(l[u],o[u])})}_(ut.prototype,((Mt={add:function(o){return Yi(this,o),this},addKey:function(o){return Qi(this,o,o),this},addKeys:function(o){var l=this;return o.forEach(function(u){return Qi(l,u,u)}),this},hasKey:function(o){var l=yo(this).next(o).value;return l&&be(l.from,o)<=0&&0<=be(l.to,o)}})[Ce]=function(){return yo(this)},Mt));var gr={},Cl={},Ol=!1;function _o(o){wo(Cl,o),Ol||(Ol=!0,setTimeout(function(){Ol=!1,Pl(Cl,!(Cl={}))},0))}function Pl(o,l){l===void 0&&(l=!1);var u=new Set;if(o.all)for(var f=0,h=Object.values(gr);f<h.length;f++)Gd(w=h[f],o,u,l);else for(var m in o){var w,k=/^idb\:\/\/(.*)\/(.*)\//.exec(m);k&&(m=k[1],k=k[2],(w=gr["idb://".concat(m,"/").concat(k)])&&Gd(w,o,u,l))}u.forEach(function(C){return C()})}function Gd(o,l,u,f){for(var h=[],m=0,w=Object.entries(o.queries.query);m<w.length;m++){for(var k=w[m],C=k[0],P=[],N=0,x=k[1];N<x.length;N++){var I=x[N];jl(l,I.obsSet)?I.subscribers.forEach(function(A){return u.add(A)}):f&&P.push(I)}f&&h.push([C,P])}if(f)for(var O=0,T=h;O<T.length;O++){var R=T[O],C=R[0],P=R[1];o.queries.query[C]=P}}function Hv(o){var l=o._state,u=o._deps.indexedDB;if(l.isBeingOpened||o.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?Fe(l.dbOpenError):o});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,h=Math.round(10*o.verno),m=!1;function w(){if(l.openCanceller!==f)throw new ce.DatabaseClosed("db.open() was cancelled")}function k(){return new se(function(I,O){if(w(),!u)throw new ce.MissingAPI;var T=o.name,R=l.autoSchema||!h?u.open(T):u.open(T,h);if(!R)throw new ce.MissingAPI;R.onerror=un(O),R.onblocked=Ie(o._fireOnBlocked),R.onupgradeneeded=Ie(function(A){var D;N=R.transaction,l.autoSchema&&!o._options.allowEmptyDB?(R.onerror=Vi,N.abort(),R.result.close(),(D=u.deleteDatabase(T)).onsuccess=D.onerror=Ie(function(){O(new ce.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(N.onerror=un(O),A=A.oldVersion>Math.pow(2,62)?0:A.oldVersion,x=A<1,o.idbdb=R.result,m&&Wv(o,N),Kv(o,A/10,N,O))},O),R.onsuccess=Ie(function(){N=null;var A,D,M,F,q,J=o.idbdb=R.result,ee=b(J.objectStoreNames);if(0<ee.length)try{var X=J.transaction((F=ee).length===1?F[0]:F,"readonly");if(l.autoSchema)D=J,M=X,(A=o).verno=D.version/10,M=A._dbSchema=vo(0,D,M),A._storeNames=b(D.objectStoreNames,0),po(A,[A._allTables],a(M),M);else if(go(o,o._dbSchema,X),((q=_l(vo(0,(q=o).idbdb,X),q._dbSchema)).add.length||q.change.some(function(Z){return Z.add.length||Z.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),J.close(),h=J.version+1,m=!0,I(k());ho(o,X)}catch{}Kr.push(o),J.onversionchange=Ie(function(Z){l.vcFired=!0,o.on("versionchange").fire(Z)}),J.onclose=Ie(function(Z){o.on("close").fire(Z)}),x&&(q=o._deps,X=T,J=q.indexedDB,q=q.IDBKeyRange,Sl(J)||X===oo||kl(J,q).put({name:X}).catch(ne)),I()},O)}).catch(function(I){switch(I==null?void 0:I.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<h)return h=0,k()}return se.reject(I)})}var C,P=l.dbReadyResolve,N=null,x=!1;return se.race([f,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function O(){return indexedDB.databases().finally(I)}C=setInterval(O,100),O()}).finally(function(){return clearInterval(C)}):Promise.resolve()).then(k)]).then(function(){return w(),l.onReadyBeingFired=[],se.resolve(xl(function(){return o.on.ready.fire(o.vip)})).then(function I(){if(0<l.onReadyBeingFired.length){var O=l.onReadyBeingFired.reduce(nl,ne);return l.onReadyBeingFired=[],se.resolve(xl(function(){return O(o.vip)})).then(I)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(I){l.dbOpenError=I;try{N&&N.abort()}catch{}return f===l.openCanceller&&o._close(),Fe(I)}).finally(function(){l.openComplete=!0,P()}).then(function(){var I;return x&&(I={},o.tables.forEach(function(O){O.schema.indexes.forEach(function(T){T.name&&(I["idb://".concat(o.name,"/").concat(O.name,"/").concat(T.name)]=new ut(-1/0,[[[]]]))}),I["idb://".concat(o.name,"/").concat(O.name,"/")]=I["idb://".concat(o.name,"/").concat(O.name,"/:dels")]=new ut(-1/0,[[[]]])}),Ln(Hi).fire(I),Pl(I,!0)),o})}function Tl(o){function l(m){return o.next(m)}var u=h(l),f=h(function(m){return o.throw(m)});function h(m){return function(C){var k=m(C),C=k.value;return k.done?C:C&&typeof C.then=="function"?C.then(u,f):c(C)?Promise.all(C).then(u,f):u(C)}}return h(l)()}function bo(o,l,u){for(var f=c(o)?o.slice():[o],h=0;h<u;++h)f.push(l);return f}var Gv={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(l){var u=o.table(l),f=u.schema,h={},m=[];function w(x,I,O){var T=Ji(x),R=h[T]=h[T]||[],A=x==null?0:typeof x=="string"?1:x.length,D=0<I,D=r(r({},O),{name:D?"".concat(T,"(virtual-from:").concat(O.name,")"):O.name,lowLevelIndex:O,isVirtual:D,keyTail:I,keyLength:A,extractKey:yl(x),unique:!D&&O.unique});return R.push(D),D.isPrimaryKey||m.push(D),1<A&&w(A===2?x[0]:x.slice(0,A-1),I+1,O),R.sort(function(M,F){return M.keyTail-F.keyTail}),D}l=w(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[l];for(var k=0,C=f.indexes;k<C.length;k++){var P=C[k];w(P.keyPath,0,P)}function N(x){var I,O=x.query.index;return O.isVirtual?r(r({},x),{query:{index:O.lowLevelIndex,range:(I=x.query.range,O=O.keyTail,{type:I.type===1?2:I.type,lower:bo(I.lower,I.lowerOpen?o.MAX_KEY:o.MIN_KEY,O),lowerOpen:!0,upper:bo(I.upper,I.upperOpen?o.MIN_KEY:o.MAX_KEY,O),upperOpen:!0})}}):x}return r(r({},u),{schema:r(r({},f),{primaryKey:l,indexes:m,getIndexByKeyPath:function(x){return(x=h[Ji(x)])&&x[0]}}),count:function(x){return u.count(N(x))},query:function(x){return u.query(N(x))},openCursor:function(x){var I=x.query.index,O=I.keyTail,T=I.isVirtual,R=I.keyLength;return T?u.openCursor(N(x)).then(function(D){return D&&A(D)}):u.openCursor(x);function A(D){return Object.create(D,{continue:{value:function(M){M!=null?D.continue(bo(M,x.reverse?o.MAX_KEY:o.MIN_KEY,O)):x.unique?D.continue(D.key.slice(0,R).concat(x.reverse?o.MIN_KEY:o.MAX_KEY,O)):D.continue()}},continuePrimaryKey:{value:function(M,F){D.continuePrimaryKey(bo(M,o.MAX_KEY,O),F)}},primaryKey:{get:function(){return D.primaryKey}},key:{get:function(){var M=D.key;return R===1?M[0]:M.slice(0,R)}},value:{get:function(){return D.value}}})}}})}})}};function Nl(o,l,u,f){return u=u||{},f=f||"",a(o).forEach(function(h){var m,w,k;y(l,h)?(m=o[h],w=l[h],typeof m=="object"&&typeof w=="object"&&m&&w?(k=rn(m))!==rn(w)?u[f+h]=l[h]:k==="Object"?Nl(m,w,u,f+h+"."):m!==w&&(u[f+h]=l[h]):m!==w&&(u[f+h]=l[h])):u[f+h]=void 0}),a(l).forEach(function(h){y(o,h)||(u[f+h]=l[h])}),u}function Al(o,l){return l.type==="delete"?l.keys:l.keys||l.values.map(o.extractKey)}var Jv={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(l){var u=o.table(l),f=u.schema.primaryKey;return r(r({},u),{mutate:function(h){var m=ue.trans,w=m.table(l).hook,k=w.deleting,C=w.creating,P=w.updating;switch(h.type){case"add":if(C.fire===ne)break;return m._promise("readwrite",function(){return N(h)},!0);case"put":if(C.fire===ne&&P.fire===ne)break;return m._promise("readwrite",function(){return N(h)},!0);case"delete":if(k.fire===ne)break;return m._promise("readwrite",function(){return N(h)},!0);case"deleteRange":if(k.fire===ne)break;return m._promise("readwrite",function(){return function x(I,O,T){return u.query({trans:I,values:!1,query:{index:f,range:O},limit:T}).then(function(R){var A=R.result;return N({type:"delete",keys:A,trans:I}).then(function(D){return 0<D.numFailures?Promise.reject(D.failures[0]):A.length<T?{failures:[],numFailures:0,lastResult:void 0}:x(I,r(r({},O),{lower:A[A.length-1],lowerOpen:!0}),T)})})}(h.trans,h.range,1e4)},!0)}return u.mutate(h);function N(x){var I,O,T,R=ue.trans,A=x.keys||Al(f,x);if(!A)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?r(r({},x),{keys:A}):r({},x)).type!=="delete"&&(x.values=i([],x.values)),x.keys&&(x.keys=i([],x.keys)),I=u,T=A,((O=x).type==="add"?Promise.resolve([]):I.getMany({trans:O.trans,keys:T,cache:"immutable"})).then(function(D){var M=A.map(function(F,q){var J,ee,X,Z=D[q],re={onerror:null,onsuccess:null};return x.type==="delete"?k.fire.call(re,F,Z,R):x.type==="add"||Z===void 0?(J=C.fire.call(re,F,x.values[q],R),F==null&&J!=null&&(x.keys[q]=F=J,f.outbound||L(x.values[q],f.keyPath,F))):(J=Nl(Z,x.values[q]),(ee=P.fire.call(re,J,F,Z,R))&&(X=x.values[q],Object.keys(ee).forEach(function(te){y(X,te)?X[te]=ee[te]:L(X,te,ee[te])}))),re});return u.mutate(x).then(function(F){for(var q=F.failures,J=F.results,ee=F.numFailures,F=F.lastResult,X=0;X<A.length;++X){var Z=(J||A)[X],re=M[X];Z==null?re.onerror&&re.onerror(q[X]):re.onsuccess&&re.onsuccess(x.type==="put"&&D[X]?x.values[X]:Z)}return{failures:q,results:J,numFailures:ee,lastResult:F}}).catch(function(F){return M.forEach(function(q){return q.onerror&&q.onerror(F)}),Promise.reject(F)})})}}})}})}};function Jd(o,l,u){try{if(!l||l.keys.length<o.length)return null;for(var f=[],h=0,m=0;h<l.keys.length&&m<o.length;++h)be(l.keys[h],o[m])===0&&(f.push(u?vt(l.values[h]):l.values[h]),++m);return f.length===o.length?f:null}catch{return null}}var Qv={stack:"dbcore",level:-1,create:function(o){return{table:function(l){var u=o.table(l);return r(r({},u),{getMany:function(f){if(!f.cache)return u.getMany(f);var h=Jd(f.keys,f.trans._cache,f.cache==="clone");return h?se.resolve(h):u.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?vt(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),u.mutate(f)}})}}}};function Qd(o,l){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Yd(o,l){switch(o){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Yv={stack:"dbcore",level:0,name:"Observability",create:function(o){var l=o.schema.name,u=new ut(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(f,h,m){if(ue.subscr&&h!=="readonly")throw new ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return o.transaction(f,h,m)},table:function(f){var h=o.table(f),m=h.schema,w=m.primaryKey,x=m.indexes,k=w.extractKey,C=w.outbound,P=w.autoIncrement&&x.filter(function(O){return O.compound&&O.keyPath.includes(w.keyPath)}),N=r(r({},h),{mutate:function(O){function T(te){return te="idb://".concat(l,"/").concat(f,"/").concat(te),F[te]||(F[te]=new ut)}var R,A,D,M=O.trans,F=O.mutatedParts||(O.mutatedParts={}),q=T(""),J=T(":dels"),ee=O.type,re=O.type==="deleteRange"?[O.range]:O.type==="delete"?[O.keys]:O.values.length<50?[Al(w,O).filter(function(te){return te}),O.values]:[],X=re[0],Z=re[1],re=O.trans._cache;return c(X)?(q.addKeys(X),(re=ee==="delete"||X.length===Z.length?Jd(X,re):null)||J.addKeys(X),(re||Z)&&(R=T,A=re,D=Z,m.indexes.forEach(function(te){var oe=R(te.name||"");function ge(me){return me!=null?te.extractKey(me):null}function ke(me){return te.multiEntry&&c(me)?me.forEach(function(Me){return oe.addKey(Me)}):oe.addKey(me)}(A||D).forEach(function(me,ct){var pe=A&&ge(A[ct]),ct=D&&ge(D[ct]);be(pe,ct)!==0&&(pe!=null&&ke(pe),ct!=null&&ke(ct))})}))):X?(Z={from:(Z=X.lower)!==null&&Z!==void 0?Z:o.MIN_KEY,to:(Z=X.upper)!==null&&Z!==void 0?Z:o.MAX_KEY},J.add(Z),q.add(Z)):(q.add(u),J.add(u),m.indexes.forEach(function(te){return T(te.name).add(u)})),h.mutate(O).then(function(te){return!X||O.type!=="add"&&O.type!=="put"||(q.addKeys(te.results),P&&P.forEach(function(oe){for(var ge=O.values.map(function(pe){return oe.extractKey(pe)}),ke=oe.keyPath.findIndex(function(pe){return pe===w.keyPath}),me=0,Me=te.results.length;me<Me;++me)ge[me][ke]=te.results[me];T(oe.name).addKeys(ge)})),M.mutatedParts=wo(M.mutatedParts||{},F),te})}}),x=function(T){var R=T.query,T=R.index,R=R.range;return[T,new ut((T=R.lower)!==null&&T!==void 0?T:o.MIN_KEY,(R=R.upper)!==null&&R!==void 0?R:o.MAX_KEY)]},I={get:function(O){return[w,new ut(O.key)]},getMany:function(O){return[w,new ut().addKeys(O.keys)]},count:x,query:x,openCursor:x};return a(I).forEach(function(O){N[O]=function(T){var R=ue.subscr,A=!!R,D=Qd(ue,h)&&Yd(O,T)?T.obsSet={}:R;if(A){var M=function(Z){return Z="idb://".concat(l,"/").concat(f,"/").concat(Z),D[Z]||(D[Z]=new ut)},F=M(""),q=M(":dels"),R=I[O](T),A=R[0],R=R[1];if((O==="query"&&A.isPrimaryKey&&!T.values?q:M(A.name||"")).add(R),!A.isPrimaryKey){if(O!=="count"){var J=O==="query"&&C&&T.values&&h.query(r(r({},T),{values:!1}));return h[O].apply(this,arguments).then(function(Z){if(O==="query"){if(C&&T.values)return J.then(function(ge){return ge=ge.result,F.addKeys(ge),Z});var re=T.values?Z.result.map(k):Z.result;(T.values?F:q).addKeys(re)}else if(O==="openCursor"){var te=Z,oe=T.values;return te&&Object.create(te,{key:{get:function(){return q.addKey(te.primaryKey),te.key}},primaryKey:{get:function(){var ge=te.primaryKey;return q.addKey(ge),ge}},value:{get:function(){return oe&&F.addKey(te.primaryKey),te.value}}})}return Z})}q.add(u)}}return h[O].apply(this,arguments)}}),N}})}};function Xd(o,l,u){if(u.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return u.numFailures===f?null:(l=r({},l),c(l.keys)&&(l.keys=l.keys.filter(function(h,m){return!(m in u.failures)})),"values"in l&&c(l.values)&&(l.values=l.values.filter(function(h,m){return!(m in u.failures)})),l)}function Rl(o,l){return u=o,((f=l).lower===void 0||(f.lowerOpen?0<be(u,f.lower):0<=be(u,f.lower)))&&(o=o,(l=l).upper===void 0||(l.upperOpen?be(o,l.upper)<0:be(o,l.upper)<=0));var u,f}function Zd(o,l,I,f,h,m){if(!I||I.length===0)return o;var w=l.query.index,k=w.multiEntry,C=l.query.range,P=f.schema.primaryKey.extractKey,N=w.extractKey,x=(w.lowLevelIndex||w).extractKey,I=I.reduce(function(O,T){var R=O,A=[];if(T.type==="add"||T.type==="put")for(var D=new ut,M=T.values.length-1;0<=M;--M){var F,q=T.values[M],J=P(q);D.hasKey(J)||(F=N(q),(k&&c(F)?F.some(function(te){return Rl(te,C)}):Rl(F,C))&&(D.addKey(J),A.push(q)))}switch(T.type){case"add":var ee=new ut().addKeys(l.values?O.map(function(oe){return P(oe)}):O),R=O.concat(l.values?A.filter(function(oe){return oe=P(oe),!ee.hasKey(oe)&&(ee.addKey(oe),!0)}):A.map(function(oe){return P(oe)}).filter(function(oe){return!ee.hasKey(oe)&&(ee.addKey(oe),!0)}));break;case"put":var X=new ut().addKeys(T.values.map(function(oe){return P(oe)}));R=O.filter(function(oe){return!X.hasKey(l.values?P(oe):oe)}).concat(l.values?A:A.map(function(oe){return P(oe)}));break;case"delete":var Z=new ut().addKeys(T.keys);R=O.filter(function(oe){return!Z.hasKey(l.values?P(oe):oe)});break;case"deleteRange":var re=T.range;R=O.filter(function(oe){return!Rl(P(oe),re)})}return R},o);return I===o?o:(I.sort(function(O,T){return be(x(O),x(T))||be(P(O),P(T))}),l.limit&&l.limit<1/0&&(I.length>l.limit?I.length=l.limit:o.length===l.limit&&I.length<l.limit&&(h.dirty=!0)),m?Object.freeze(I):I)}function ef(o,l){return be(o.lower,l.lower)===0&&be(o.upper,l.upper)===0&&!!o.lowerOpen==!!l.lowerOpen&&!!o.upperOpen==!!l.upperOpen}function Xv(o,l){return function(u,f,h,m){if(u===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=be(u,f))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return f}(o.lower,l.lower,o.lowerOpen,l.lowerOpen)<=0&&0<=function(u,f,h,m){if(u===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=be(u,f))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return f}(o.upper,l.upper,o.upperOpen,l.upperOpen)}function Zv(o,l,u,f){o.subscribers.add(u),f.addEventListener("abort",function(){var h,m;o.subscribers.delete(u),o.subscribers.size===0&&(h=o,m=l,setTimeout(function(){h.subscribers.size===0&&ie(m,h)},3e3))})}var eg={stack:"dbcore",level:0,name:"Cache",create:function(o){var l=o.schema.name;return r(r({},o),{transaction:function(u,f,h){var m,w,k=o.transaction(u,f,h);return f==="readwrite"&&(w=(m=new AbortController).signal,h=function(C){return function(){if(m.abort(),f==="readwrite"){for(var P=new Set,N=0,x=u;N<x.length;N++){var I=x[N],O=gr["idb://".concat(l,"/").concat(I)];if(O){var T=o.table(I),R=O.optimisticOps.filter(function(oe){return oe.trans===k});if(k._explicit&&C&&k.mutatedParts)for(var A=0,D=Object.values(O.queries.query);A<D.length;A++)for(var M=0,F=(ee=D[A]).slice();M<F.length;M++)jl((X=F[M]).obsSet,k.mutatedParts)&&(ie(ee,X),X.subscribers.forEach(function(oe){return P.add(oe)}));else if(0<R.length){O.optimisticOps=O.optimisticOps.filter(function(oe){return oe.trans!==k});for(var q=0,J=Object.values(O.queries.query);q<J.length;q++)for(var ee,X,Z,re=0,te=(ee=J[q]).slice();re<te.length;re++)(X=te[re]).res!=null&&k.mutatedParts&&(C&&!X.dirty?(Z=Object.isFrozen(X.res),Z=Zd(X.res,X.req,R,T,X,Z),X.dirty?(ie(ee,X),X.subscribers.forEach(function(oe){return P.add(oe)})):Z!==X.res&&(X.res=Z,X.promise=se.resolve({result:Z}))):(X.dirty&&ie(ee,X),X.subscribers.forEach(function(oe){return P.add(oe)})))}}}P.forEach(function(oe){return oe()})}}},k.addEventListener("abort",h(!1),{signal:w}),k.addEventListener("error",h(!1),{signal:w}),k.addEventListener("complete",h(!0),{signal:w})),k},table:function(u){var f=o.table(u),h=f.schema.primaryKey;return r(r({},f),{mutate:function(m){var w=ue.trans;if(h.outbound||w.db._options.cache==="disabled"||w.explicit||w.idbtrans.mode!=="readwrite")return f.mutate(m);var k=gr["idb://".concat(l,"/").concat(u)];return k?(w=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Al(h,m).some(function(C){return C==null}))?(k.optimisticOps.push(m),m.mutatedParts&&_o(m.mutatedParts),w.then(function(C){0<C.numFailures&&(ie(k.optimisticOps,m),(C=Xd(0,m,C))&&k.optimisticOps.push(C),m.mutatedParts&&_o(m.mutatedParts))}),w.catch(function(){ie(k.optimisticOps,m),m.mutatedParts&&_o(m.mutatedParts)})):w.then(function(C){var P=Xd(0,r(r({},m),{values:m.values.map(function(N,x){var I;return C.failures[x]?N:(N=(I=h.keyPath)!==null&&I!==void 0&&I.includes(".")?vt(N):r({},N),L(N,h.keyPath,C.results[x]),N)})}),C);k.optimisticOps.push(P),queueMicrotask(function(){return m.mutatedParts&&_o(m.mutatedParts)})}),w):f.mutate(m)},query:function(m){if(!Qd(ue,f)||!Yd("query",m))return f.query(m);var w=((P=ue.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",x=ue,k=x.requery,C=x.signal,P=function(T,R,A,D){var M=gr["idb://".concat(T,"/").concat(R)];if(!M)return[];if(!(R=M.queries[A]))return[null,!1,M,null];var F=R[(D.query?D.query.index.name:null)||""];if(!F)return[null,!1,M,null];switch(A){case"query":var q=F.find(function(J){return J.req.limit===D.limit&&J.req.values===D.values&&ef(J.req.query.range,D.query.range)});return q?[q,!0,M,F]:[F.find(function(J){return("limit"in J.req?J.req.limit:1/0)>=D.limit&&(!D.values||J.req.values)&&Xv(J.req.query.range,D.query.range)}),!1,M,F];case"count":return q=F.find(function(J){return ef(J.req.query.range,D.query.range)}),[q,!!q,M,F]}}(l,u,"query",m),N=P[0],x=P[1],I=P[2],O=P[3];return N&&x?N.obsSet=m.obsSet:(x=f.query(m).then(function(T){var R=T.result;if(N&&(N.res=R),w){for(var A=0,D=R.length;A<D;++A)Object.freeze(R[A]);Object.freeze(R)}else T.result=vt(R);return T}).catch(function(T){return O&&N&&ie(O,N),Promise.reject(T)}),N={obsSet:m.obsSet,promise:x,subscribers:new Set,type:"query",req:m,dirty:!1},O?O.push(N):(O=[N],(I=I||(gr["idb://".concat(l,"/").concat(u)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=O)),Zv(N,O,k,C),N.promise.then(function(T){return{result:Zd(T.result,m,I==null?void 0:I.optimisticOps,f,N,w)}})}})}})}};function ko(o,l){return new Proxy(o,{get:function(u,f,h){return f==="db"?l:Reflect.get(u,f,h)}})}var wn=(qe.prototype.version=function(o){if(isNaN(o)||o<.1)throw new ce.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var l=this._versions,u=l.filter(function(f){return f._cfg.version===o})[0];return u||(u=new this.Version(o),l.push(u),l.sort(qv),u.stores({}),this._state.autoSchema=!1,u)},qe.prototype._whenReady=function(o){var l=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?o():new se(function(u,f){if(l._state.openComplete)return f(new ce.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new ce.DatabaseClosed);l.open().catch(ne)}l._state.dbReadyPromise.then(u,f)}).then(o)},qe.prototype.use=function(o){var l=o.stack,u=o.create,f=o.level,h=o.name;return h&&this.unuse({stack:l,name:h}),o=this._middlewares[l]||(this._middlewares[l]=[]),o.push({stack:l,create:u,level:f??10,name:h}),o.sort(function(m,w){return m.level-w.level}),this},qe.prototype.unuse=function(o){var l=o.stack,u=o.name,f=o.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return f?h.create!==f:!!u&&h.name!==u})),this},qe.prototype.open=function(){var o=this;return pr(An,function(){return Hv(o)})},qe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,l=Kr.indexOf(this);if(0<=l&&Kr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new se(function(u){o.dbReadyResolve=u}),o.openCanceller=new se(function(u,f){o.cancelOpen=f}))},qe.prototype.close=function(u){var l=(u===void 0?{disableAutoOpen:!0}:u).disableAutoOpen,u=this._state;l?(u.isBeingOpened&&u.cancelOpen(new ce.DatabaseClosed),this._close(),u.autoOpen=!1,u.dbOpenError=new ce.DatabaseClosed):(this._close(),u.autoOpen=this._options.autoOpen||u.isBeingOpened,u.openComplete=!1,u.dbOpenError=null)},qe.prototype.delete=function(o){var l=this;o===void 0&&(o={disableAutoOpen:!0});var u=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new se(function(h,m){function w(){l.close(o);var k=l._deps.indexedDB.deleteDatabase(l.name);k.onsuccess=Ie(function(){var C,P,N;C=l._deps,P=l.name,N=C.indexedDB,C=C.IDBKeyRange,Sl(N)||P===oo||kl(N,C).delete(P).catch(ne),h()}),k.onerror=un(m),k.onblocked=l._fireOnBlocked}if(u)throw new ce.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(w):w()})},qe.prototype.backendDB=function(){return this.idbdb},qe.prototype.isOpen=function(){return this.idbdb!==null},qe.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},qe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},qe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(qe.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(l){return o._allTables[l]})},enumerable:!1,configurable:!0}),qe.prototype.transaction=function(){var o=(function(l,u,f){var h=arguments.length;if(h<2)throw new ce.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return f=m.pop(),[l,Y(m),f]}).apply(this,arguments);return this._transaction.apply(this,o)},qe.prototype._transaction=function(o,l,u){var f=this,h=ue.trans;h&&h.db===this&&o.indexOf("!")===-1||(h=null);var m,w,k=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(w=l.map(function(P){if(P=P instanceof f.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),o=="r"||o===dl)m=dl;else{if(o!="rw"&&o!=fl)throw new ce.InvalidArgument("Invalid transaction mode: "+o);m=fl}if(h){if(h.mode===dl&&m===fl){if(!k)throw new ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&w.forEach(function(P){if(h&&h.storeNames.indexOf(P)===-1){if(!k)throw new ce.SubTransaction("Table "+P+" not included in parent transaction.");h=null}}),k&&h&&!h.active&&(h=null)}}catch(P){return h?h._promise(null,function(N,x){x(P)}):Fe(P)}var C=(function P(N,x,I,O,T){return se.resolve().then(function(){var R=ue.transless||ue,A=N._createTransaction(x,I,N._dbSchema,O);if(A.explicit=!0,R={trans:A,transless:R},O)A.idbtrans=O.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,N._state.PR1398_maxLoop=3}catch(F){return F.name===on.InvalidState&&N.isOpen()&&0<--N._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),N.close({disableAutoOpen:!1}),N.open().then(function(){return P(N,x,I,null,T)})):Fe(F)}var D,M=je(T);return M&&qr(),R=se.follow(function(){var F;(D=T.call(A,A))&&(M?(F=In.bind(null,null),D.then(F,F)):typeof D.next=="function"&&typeof D.throw=="function"&&(D=Tl(D)))},R),(D&&typeof D.then=="function"?se.resolve(D).then(function(F){return A.active?F:Fe(new ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):R.then(function(){return D})).then(function(F){return O&&A._resolve(),A._completion.then(function(){return F})}).catch(function(F){return A._reject(F),Fe(F)})})}).bind(null,this,m,w,h,u);return h?h._promise(m,C,"lock"):ue.trans?pr(ue.transless,function(){return f._whenReady(C)}):this._whenReady(C)},qe.prototype.table=function(o){if(!y(this._allTables,o))throw new ce.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},qe);function qe(o,l){var u=this;this._middlewares={},this.verno=0;var f=qe.dependencies;this._options=l=r({addons:qe.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,w,k,C,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ne,dbReadyPromise:null,cancelOpen:ne,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};P.dbReadyPromise=new se(function(x){P.dbReadyResolve=x}),P.openCanceller=new se(function(x,I){P.cancelOpen=I}),this._state=P,this.name=o,this.on=qi(this,"populate","blocked","versionchange","close",{ready:[nl,ne]}),this.once=function(x,I){var O=function(){for(var T=[],R=0;R<arguments.length;R++)T[R]=arguments[R];u.on(x).unsubscribe(O),I.apply(u,T)};return u.on(x,O)},this.on.ready.subscribe=S(this.on.ready.subscribe,function(x){return function(I,O){qe.vip(function(){var T,R=u._state;R.openComplete?(R.dbOpenError||se.resolve().then(I),O&&x(I)):R.onReadyBeingFired?(R.onReadyBeingFired.push(I),O&&x(I)):(x(I),T=u,O||x(function A(){T.on.ready.unsubscribe(I),T.on.ready.unsubscribe(A)}))})}}),this.Collection=(h=this,Ki($v.prototype,function(D,A){this.db=h;var O=Td,T=null;if(A)try{O=A()}catch(M){T=M}var R=D._ctx,A=R.table,D=A.hook.reading.fire;this._ctx={table:A,index:R.index,isPrimKey:!R.index||A.schema.primKey.keyPath&&R.index===A.schema.primKey.name,range:O,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:R.or,valueMapper:D!==Te?D:null}})),this.Table=(m=this,Ki(Id.prototype,function(x,I,O){this.db=m,this._tx=O,this.name=x,this.schema=I,this.hook=m._allTables[x]?m._allTables[x].hook:qi(null,{creating:[tl,ne],reading:[an,Te],updating:[Pv,ne],deleting:[Ov,ne]})})),this.Transaction=(w=this,Ki(zv.prototype,function(x,I,O,T,R){var A=this;x!=="readonly"&&I.forEach(function(D){D=(D=O[D])===null||D===void 0?void 0:D.yProps,D&&(I=I.concat(D.map(function(M){return M.updatesTable})))}),this.db=w,this.mode=x,this.storeNames=I,this.schema=O,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=qi(this,"complete","error","abort"),this.parent=R||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(D,M){A._resolve=D,A._reject=M}),this._completion.then(function(){A.active=!1,A.on.complete.fire()},function(D){var M=A.active;return A.active=!1,A.on.error.fire(D),A.parent?A.parent._reject(D):M&&A.idbtrans&&A.idbtrans.abort(),Fe(D)})})),this.Version=(k=this,Ki(Vv.prototype,function(x){this.db=k,this._cfg={version:x,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(C=this,Ki(Md.prototype,function(x,I,O){if(this.db=C,this._ctx={table:x,index:I===":id"?null:I,or:O},this._cmp=this._ascending=be,this._descending=function(T,R){return be(R,T)},this._max=function(T,R){return 0<be(T,R)?T:R},this._min=function(T,R){return be(T,R)<0?T:R},this._IDBKeyRange=C._deps.IDBKeyRange,!this._IDBKeyRange)throw new ce.MissingAPI})),this.on("versionchange",function(x){0<x.newVersion?console.warn("Another connection wants to upgrade database '".concat(u.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(u.name,"'. Closing db now to resume the delete request.")),u.close({disableAutoOpen:!1})}),this.on("blocked",function(x){!x.newVersion||x.newVersion<x.oldVersion?console.warn("Dexie.delete('".concat(u.name,"') was blocked")):console.warn("Upgrade '".concat(u.name,"' blocked by other connection holding version ").concat(x.oldVersion/10))}),this._maxKey=Gi(l.IDBKeyRange),this._createTransaction=function(x,I,O,T){return new u.Transaction(x,I,O,u._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(x){u.on("blocked").fire(x),Kr.filter(function(I){return I.name===u.name&&I!==u&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(x)})},this.use(Qv),this.use(eg),this.use(Yv),this.use(Gv),this.use(Jv);var N=new Proxy(this,{get:function(x,I,O){if(I==="_vip")return!0;if(I==="table")return function(R){return ko(u.table(R),N)};var T=Reflect.get(x,I,O);return T instanceof Id?ko(T,N):I==="tables"?T.map(function(R){return ko(R,N)}):I==="_createTransaction"?function(){return ko(T.apply(this,arguments),N)}:T}});this.vip=N,f.forEach(function(x){return x(u)})}var So,Mt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",tg=(Il.prototype.subscribe=function(o,l,u){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:l,complete:u})},Il.prototype[Mt]=function(){return this},Il);function Il(o){this._subscribe=o}try{So={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{So={indexedDB:null,IDBKeyRange:null}}function tf(o){var l,u=!1,f=new tg(function(h){var m=je(o),w,k=!1,C={},P={},N={get closed(){return k},unsubscribe:function(){k||(k=!0,w&&w.abort(),x&&Ln.storagemutated.unsubscribe(O))}};h.start&&h.start(N);var x=!1,I=function(){return cl(T)},O=function(R){wo(C,R),jl(P,C)&&I()},T=function(){var R,A,D;!k&&So.indexedDB&&(C={},R={},w&&w.abort(),w=new AbortController,D=function(M){var F=Br();try{m&&qr();var q=Rn(o,M);return q=m?q.finally(In):q}finally{F&&Fr()}}(A={subscr:R,signal:w.signal,requery:I,querier:o,trans:null}),Promise.resolve(D).then(function(M){u=!0,l=M,k||A.signal.aborted||(C={},function(F){for(var q in F)if(y(F,q))return;return 1}(P=R)||x||(Ln(Hi,O),x=!0),cl(function(){return!k&&h.next&&h.next(M)}))},function(M){u=!1,["DatabaseClosedError","AbortError"].includes(M==null?void 0:M.name)||k||cl(function(){k||h.error&&h.error(M)})}))};return setTimeout(I,0),N});return f.hasValue=function(){return u},f.getValue=function(){return l},f}var yr=wn;function Dl(o){var l=Un;try{Un=!0,Ln.storagemutated.fire(o),Pl(o,!0)}finally{Un=l}}_(yr,r(r({},U),{delete:function(o){return new yr(o,{addons:[]}).delete()},exists:function(o){return new yr(o,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return l=yr.dependencies,u=l.indexedDB,l=l.IDBKeyRange,(Sl(u)?Promise.resolve(u.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==oo})}):kl(u,l).toCollection().primaryKeys()).then(o)}catch{return Fe(new ce.MissingAPI)}var l,u},defineClass:function(){return function(o){d(this,o)}},ignoreTransaction:function(o){return ue.trans?pr(ue.transless,o):o()},vip:xl,async:function(o){return function(){try{var l=Tl(o.apply(this,arguments));return l&&typeof l.then=="function"?l:se.resolve(l)}catch(u){return Fe(u)}}},spawn:function(o,l,u){try{var f=Tl(o.apply(u,l||[]));return f&&typeof f.then=="function"?f:se.resolve(f)}catch(h){return Fe(h)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(o,l){return l=se.resolve(typeof o=="function"?yr.ignoreTransaction(o):o).timeout(l||6e4),ue.trans?ue.trans.waitFor(l):l},Promise:se,debug:{get:function(){return ln},set:function(o){Sd(o)}},derive:B,extend:d,props:_,override:S,Events:qi,on:Ln,liveQuery:tf,extendObservabilitySet:wo,getByKeyPath:K,setByKeyPath:L,delByKeyPath:function(o,l){typeof l=="string"?L(o,l,void 0):"length"in l&&[].map.call(l,function(u){L(o,u,void 0)})},shallowClone:G,deepClone:vt,getObjectDiff:Nl,cmp:be,asap:V,minKey:-1/0,addons:[],connections:Kr,errnames:on,dependencies:So,cache:gr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(o){return parseInt(o)}).reduce(function(o,l,u){return o+l/Math.pow(10,2*u)})})),yr.maxKey=Gi(yr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ln(Hi,function(o){Un||(o=new CustomEvent(ml,{detail:o}),Un=!0,dispatchEvent(o),Un=!1)}),addEventListener(ml,function(o){o=o.detail,Un||Dl(o)}));var Gr,Un=!1,nf=function(){};return typeof BroadcastChannel<"u"&&((nf=function(){(Gr=new BroadcastChannel(ml)).onmessage=function(o){return o.data&&Dl(o.data)}})(),typeof Gr.unref=="function"&&Gr.unref(),Ln(Hi,function(o){Un||Gr.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!wn.disableBfCache&&o.persisted){ln&&console.debug("Dexie: handling persisted pagehide"),Gr!=null&&Gr.close();for(var l=0,u=Kr;l<u.length;l++)u[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!wn.disableBfCache&&o.persisted&&(ln&&console.debug("Dexie: handling persisted pageshow"),nf(),Dl({all:new ut(-1/0,[[]])}))})),se.rejectionMapper=function(o,l){return!o||o instanceof at||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Ys[o.name]?o:(l=new Ys[o.name](l||o.message,o),"stack"in o&&z(l,"stack",{get:function(){return this.inner.stack}}),l)},Sd(ln),r(wn,Object.freeze({__proto__:null,Dexie:wn,liveQuery:tf,Entity:Nd,cmp:be,PropModification:Wi,replacePrefix:function(o,l){return new Wi({replacePrefix:[o,l]})},add:function(o){return new Wi({add:o})},remove:function(o){return new Wi({remove:o})},default:wn,RangeSet:ut,mergeRanges:Yi,rangesOverlap:Wd}),{default:wn}),wn})})(Cv);var bb=Cv.exports;const Sc=Bh(bb),Uh=Symbol.for("Dexie"),Ai=globalThis[Uh]||(globalThis[Uh]=Sc);if(Sc.semVer!==Ai.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Sc.semVer} and ${Ai.semVer}`);const{liveQuery:rk,mergeRanges:ik,rangesOverlap:sk,RangeSet:ok,cmp:ak,Entity:lk,PropModification:uk,replacePrefix:ck,add:dk,remove:fk,DexieYProvider:hk}=Ai;class kb extends Ai{constructor(){super("gestor-reparaciones"),this.version(1).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado"}),this.version(2).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"})}}const W=new kb;let Sb="idle";const xb=()=>Sb;function Eb({tab:t,onTab:e,children:n}){const[r,i]=we.useState(()=>localStorage.getItem("gr_dark")==="1"),[s,a]=we.useState(xb());return we.useEffect(()=>{const c=document.documentElement;r?(c.classList.add("dark"),localStorage.setItem("gr_dark","1")):(c.classList.remove("dark"),localStorage.setItem("gr_dark","0"))},[r]),g.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-[240px_1fr] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("aside",{className:"hidden lg:flex lg:flex-col gap-2 border-r border-neutral-200/70 dark:border-neutral-800 p-4",children:[g.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[g.jsx(gh,{className:"size-5"})," Gestor"]}),g.jsxs("nav",{className:"mt-4 grid gap-1",children:[g.jsx(Wo,{icon:ph,label:"Registro",active:t==="registro",onClick:()=>e("registro")}),g.jsx(Wo,{icon:ph,label:"Órdenes",active:t==="ordenes",onClick:()=>e("ordenes")}),g.jsx(Wo,{icon:D0,label:"Presupuesto",active:t==="presupuesto",onClick:()=>e("presupuesto")}),g.jsx(Wo,{icon:U0,label:"Reparación",active:t==="reparacion",onClick:()=>e("reparacion")})]}),g.jsx("div",{className:"mt-auto pt-4 border-t border-neutral-200/70 dark:border-neutral-800",children:g.jsxs("button",{className:"btn btn-ghost w-full",onClick:()=>i(c=>!c),children:[r?g.jsx(vh,{className:"size-4"}):g.jsx(mh,{className:"size-4"}),g.jsx("span",{className:"ml-2",children:r?"Modo claro":"Modo oscuro"})]})})]}),g.jsxs("div",{className:"flex flex-col min-h-screen",children:[g.jsx("header",{className:"sticky top-0 z-10 border-b border-neutral-200/70 dark:border-neutral-800 bg-white/80 dark:bg-neutral-950/70 backdrop-blur",children:g.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center gap-3",children:[g.jsx(gh,{className:"size-5 lg:hidden"}),g.jsx("h1",{className:"font-semibold",children:"Gestor de Reparaciones"}),g.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[g.jsx("span",{"data-sync-chip":!0,className:`tab ${s==="idle"?"tab-active":""}`,title:s,children:s==="idle"?"Sincronizado":s==="syncing"?"Sincronizando…":s==="offline"?"Offline":"Error"}),g.jsx("button",{className:`tab ${t==="registro"?"tab-active":""}`,onClick:()=>e("registro"),children:"Registro"}),g.jsx("button",{className:`tab ${t==="ordenes"?"tab-active":""}`,onClick:()=>e("ordenes"),children:"Órdenes"}),g.jsx("button",{className:`tab ${t==="presupuesto"?"tab-active":""}`,onClick:()=>e("presupuesto"),children:"Presupuesto"}),g.jsx("button",{className:`tab ${t==="reparacion"?"tab-active":""}`,onClick:()=>e("reparacion"),children:"Reparación"}),g.jsx("button",{title:"Tema",className:"btn btn-ghost",onClick:()=>i(c=>!c),children:r?g.jsx(vh,{className:"size-4"}):g.jsx(mh,{className:"size-4"})})]})]})}),g.jsx("main",{className:"max-w-6xl w-full mx-auto p-4",children:g.jsx("div",{className:"grid gap-4",children:n})})]})]})}function Wo({icon:t,label:e,active:n,onClick:r}){return g.jsxs("button",{onClick:r,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-900 ${n?"bg-neutral-100 dark:bg-neutral-900 font-medium":""}`,children:[g.jsx(t,{className:"size-4"})," ",g.jsx("span",{children:e})]})}const tt=[];for(let t=0;t<256;++t)tt.push((t+256).toString(16).slice(1));function jb(t,e=0){return(tt[t[e+0]]+tt[t[e+1]]+tt[t[e+2]]+tt[t[e+3]]+"-"+tt[t[e+4]]+tt[t[e+5]]+"-"+tt[t[e+6]]+tt[t[e+7]]+"-"+tt[t[e+8]]+tt[t[e+9]]+"-"+tt[t[e+10]]+tt[t[e+11]]+tt[t[e+12]]+tt[t[e+13]]+tt[t[e+14]]+tt[t[e+15]]).toLowerCase()}let gu;const Cb=new Uint8Array(16);function Ob(){if(!gu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gu=crypto.getRandomValues.bind(crypto)}return gu(Cb)}const Pb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zh={randomUUID:Pb};function Tb(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Ob();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jb(r)}function Zt(t,e,n){return zh.randomUUID&&!t?zh.randomUUID():Tb(t)}function kd(t=Date.now()){return"ORD-"+t}async function Nb(t){const e=new Date().toISOString(),n={id:Zt(),nombre:t.cliente.nombre,telefono:t.cliente.telefono,email:t.cliente.email,fecha_alta:e},r={id:Zt(),clienteId:n.id,categoria:t.equipo.categoria,marca:t.equipo.marca,modelo:t.equipo.modelo,numeroSerie:t.equipo.numeroSerie,descripcion:t.equipo.descripcion,fecha_recepcion:e},i={id:Zt(),codigo:kd(),equipoId:r.id,estado:"recepcion",creada:e,actualizada:e},s={id:Zt(),ordenId:i.id,tipo:"nota",texto:"Orden creada",fecha:e};return await W.transaction("rw",W.clientes,W.equipos,W.ordenes,W.eventos,async()=>{await W.clientes.add(n),await W.equipos.add(r),await W.ordenes.add(i),await W.eventos.add(s)}),{cliente:n,equipo:r,orden:i}}async function Ab(t){const e=new Date().toISOString(),n={id:Zt(),clienteId:t.clienteId,categoria:t.equipo.categoria,marca:t.equipo.marca,modelo:t.equipo.modelo,numeroSerie:t.equipo.numeroSerie,descripcion:t.equipo.descripcion,fecha_recepcion:e},r={id:Zt(),codigo:kd(),equipoId:n.id,estado:"recepcion",creada:e,actualizada:e},i={id:Zt(),ordenId:r.id,tipo:"nota",texto:"Orden creada para cliente existente",fecha:e};return await W.transaction("rw",W.equipos,W.ordenes,W.eventos,async()=>{await W.equipos.add(n),await W.ordenes.add(r),await W.eventos.add(i)}),{equipo:n,orden:r}}async function Rb(t){const e=new Date().toISOString(),n={id:Zt(),nombre:t.cliente.nombre,telefono:t.cliente.telefono,email:t.cliente.email,fecha_alta:e},r=t.equipos.map(a=>({id:Zt(),clienteId:n.id,categoria:a.categoria,marca:a.marca,modelo:a.modelo,numeroSerie:a.numeroSerie,descripcion:a.descripcion,fecha_recepcion:e})),i=r.map(a=>({id:Zt(),codigo:kd(),equipoId:a.id,estado:"recepcion",creada:e,actualizada:e})),s=i.map(a=>({id:Zt(),ordenId:a.id,tipo:"nota",texto:"Orden creada (alta múltiple)",fecha:e}));return await W.transaction("rw",W.clientes,W.equipos,W.ordenes,W.eventos,async()=>{await W.clientes.add(n),await W.equipos.bulkAdd(r),await W.ordenes.bulkAdd(i),await W.eventos.bulkAdd(s)}),{cliente:n,equipos:r,ordenes:i}}function Ib({onCreated:t}){const[e,n]=we.useState({nombre:"",telefono:"",email:""}),[r,i]=we.useState([{categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""}]),s=!!e.nombre&&!!e.telefono&&r.every(y=>y.marca&&y.modelo&&y.descripcion);function a(y,_){i(j=>j.map((z,B)=>B===y?{...z,..._}:z))}function c(){i(y=>[...y,{categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""}])}function d(y){i(_=>_.length>1?_.filter((j,z)=>z!==y):_)}async function p(){if(!s)return;if(r.length===1){const _=r[0],{orden:j}=await Nb({cliente:{nombre:e.nombre,telefono:e.telefono,email:e.email||void 0},equipo:{categoria:_.categoria,marca:_.marca,modelo:_.modelo,numeroSerie:_.numeroSerie||void 0,descripcion:_.descripcion}});t(j.id);return}const{resultados:y}=await Rb({cliente:{nombre:e.nombre,telefono:e.telefono,email:e.email||void 0},equipos:r.map(_=>({categoria:_.categoria,marca:_.marca,modelo:_.modelo,numeroSerie:_.numeroSerie||void 0,descripcion:_.descripcion}))});t(y[0].orden.id)}const v=["Móviles","Ordenadores","Consolas","Televisores","Placas","Robots","Baterías","Otros"];return g.jsx("section",{className:"grid gap-4",children:g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Registro cliente y aparatos"}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsx(Bn,{label:"Nombre*",children:g.jsx("input",{className:"input",value:e.nombre,onChange:y=>n({...e,nombre:y.target.value})})}),g.jsx(Bn,{label:"Teléfono*",children:g.jsx("input",{className:"input",value:e.telefono,onChange:y=>n({...e,telefono:y.target.value})})}),g.jsx(Bn,{label:"Email",children:g.jsx("input",{className:"input",value:e.email,onChange:y=>n({...e,email:y.target.value})})})]}),g.jsxs("div",{className:"grid gap-4",children:[r.map((y,_)=>g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsxs("div",{className:"font-medium",children:["Equipo #",_+1]}),r.length>1&&g.jsx("button",{className:"btn",onClick:()=>d(_),children:"Quitar"})]}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsx(Bn,{label:"Categoría",children:g.jsx("select",{className:"input",value:y.categoria,onChange:j=>a(_,{categoria:j.target.value}),children:v.map(j=>g.jsx("option",{value:j,children:j},j))})}),g.jsx(Bn,{label:"Marca*",children:g.jsx("input",{className:"input",value:y.marca,onChange:j=>a(_,{marca:j.target.value})})}),g.jsx(Bn,{label:"Modelo*",children:g.jsx("input",{className:"input",value:y.modelo,onChange:j=>a(_,{modelo:j.target.value})})}),g.jsx(Bn,{label:"Nº de serie",children:g.jsx("input",{className:"input",value:y.numeroSerie,onChange:j=>a(_,{numeroSerie:j.target.value})})})]}),g.jsx(Bn,{label:"Daño inicial*",children:g.jsx("textarea",{className:"input min-h-28",value:y.descripcion,onChange:j=>a(_,{descripcion:j.target.value})})})]})},_)),g.jsx("div",{children:g.jsx("button",{className:"btn",onClick:c,children:"Añadir otro equipo"})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",disabled:!s,onClick:p,children:"Crear orden(es)"}),g.jsx("button",{className:"btn",onClick:()=>{n({nombre:"",telefono:"",email:""}),i([{categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""}])},children:"Limpiar"})]})]})})})}function Bn({label:t,children:e}){return g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function Db(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=ni.useRef({hasResult:!1,result:i,error:null}),a=ni.useReducer(function(p){return p+1},0);a[0];var c=a[1],d=ni.useMemo(function(){var p=typeof t=="function"?t():t;if(!p||typeof p.subscribe!="function")throw t===p?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof p.hasValue!="function"||p.hasValue()))if(typeof p.getValue=="function")s.current.result=p.getValue(),s.current.hasResult=!0;else{var v=p.subscribe(function(y){s.current.result=y,s.current.hasResult=!0});typeof v=="function"?v():v.unsubscribe()}return p},r);if(ni.useDebugValue(s.current.result),ni.useEffect(function(){var p=d.subscribe(function(v){var y=s.current;(y.error!==null||y.result!==v)&&(y.error=null,y.result=v,y.hasResult=!0,c())},function(v){var y=s.current;y.error!==v&&(y.error=v,c())});return typeof p=="function"?p:p.unsubscribe.bind(p)},r),s.current.error)throw s.current.error;return s.current.result}function Sn(t,e,n){return Db(function(){return Ai.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Ai.DexieYProvider;e&&e.release(t)});async function Mh(t){const e=await W.ordenes.get(t);if(!e)return;const n=e.equipoId;await W.transaction("rw",W.ordenes,W.eventos,W.piezas,W.adjuntos,W.equipos,async()=>{await W.eventos.where("ordenId").equals(t).delete(),await W.piezas.where("ordenId").equals(t).delete(),await W.adjuntos.where("ordenId").equals(t).delete(),await W.ordenes.delete(t),await W.equipos.delete(n)})}async function $b(){if(!Aa)throw new Error("Supabase no configurado. Define VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY.");const t={clientes:await W.clientes.toArray(),equipos:await W.equipos.toArray(),ordenes:await W.ordenes.toArray(),eventos:await W.eventos.toArray(),piezas:await W.piezas.toArray(),adjuntos:await W.adjuntos.toArray()},{error:e}=await Aa.from("backups").insert({payload:t});if(e)throw e}async function Lb(){if(!Aa)throw new Error("Supabase no configurado. Define VITE_SUPABASE_URL y VITE_SUPABASE_ANON_KEY.");const{data:t,error:e}=await Aa.from("backups").select("created_at,payload").order("created_at",{ascending:!1}).limit(1).maybeSingle();if(e)throw e;if(!t)return!1;const n=t.payload||{};return await W.transaction("rw",W.clientes,W.equipos,W.ordenes,W.eventos,W.piezas,W.adjuntos,async()=>{await W.clientes.clear(),await W.equipos.clear(),await W.ordenes.clear(),await W.eventos.clear(),await W.piezas.clear(),await W.adjuntos.clear(),n.clientes&&await W.clientes.bulkAdd(n.clientes),n.equipos&&await W.equipos.bulkAdd(n.equipos),n.ordenes&&await W.ordenes.bulkAdd(n.ordenes),n.eventos&&await W.eventos.bulkAdd(n.eventos),n.piezas&&await W.piezas.bulkAdd(n.piezas),n.adjuntos&&await W.adjuntos.bulkAdd(n.adjuntos)}),!0}function Ub(t){const e=i=>`"${(i||"").replace(/"/g,'""')}"`;return[["ID","Codigo","Estado","Cliente","Telefono","Equipo","Creada","Actualizada"].join(",")].concat(t.map(i=>[i.id,i.codigo,i.estado,i.cliente,i.telefono,i.equipo,new Date(i.creada).toISOString(),new Date(i.actualizada).toISOString()].map(e).join(","))).join(`\r
`)}async function zb(){return new Promise(t=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r;const n=(r=e.files)==null?void 0:r[0];if(!n){t(null);return}try{const i=JSON.parse(await n.text());t(i)}catch{alert("El archivo seleccionado no es un JSON válido."),t(null)}},e.click()})}function Mb({onOpen:t}){const e=Sn(()=>W.clientes.toArray(),[]),n=Sn(()=>W.equipos.toArray(),[]),r=Sn(()=>W.ordenes.toArray(),[]),[i,s]=we.useState(""),[a,c]=we.useState("todos"),[d,p]=we.useState(""),[v,y]=we.useState(""),[_,j]=we.useState("act_desc"),[z,B]=we.useState({}),H=we.useMemo(()=>{if(!e||!n||!r)return[];const L=new Map(e.map(ae=>[ae.id,ae])),G=new Map(n.map(ae=>[ae.id,ae]));return r.map(ae=>{const Y=G.get(ae.equipoId),ye=Y?L.get(Y.clienteId):void 0;return{id:ae.id,codigo:ae.codigo,estado:ae.estado,clienteId:(ye==null?void 0:ye.id)||"",cliente:(ye==null?void 0:ye.nombre)||"",telefono:(ye==null?void 0:ye.telefono)||"",equipo:Y?`${Y.categoria} ${Y.marca} ${Y.modelo}`:"",creada:ae.creada,actualizada:ae.actualizada}})},[e,n,r]),E=we.useMemo(()=>{const L=i.trim().toLowerCase();let G=H;if(L&&(G=G.filter(Y=>Y.codigo.toLowerCase().includes(L)||Y.cliente.toLowerCase().includes(L)||Y.telefono.toLowerCase().includes(L)||Y.equipo.toLowerCase().includes(L)||Y.estado.toLowerCase().includes(L))),a!=="todos"&&(G=G.filter(Y=>Y.estado===a)),d){const Y=new Date(d);G=G.filter(ye=>new Date(ye.creada)>=Y)}if(v){const Y=new Date(v);Y.setHours(23,59,59,999),G=G.filter(ye=>new Date(ye.creada)<=Y)}const ae={creada_desc:(Y,ye)=>new Date(ye.creada).getTime()-new Date(Y.creada).getTime(),creada_asc:(Y,ye)=>new Date(Y.creada).getTime()-new Date(ye.creada).getTime(),act_desc:(Y,ye)=>new Date(ye.actualizada).getTime()-new Date(Y.actualizada).getTime(),act_asc:(Y,ye)=>new Date(Y.actualizada).getTime()-new Date(ye.actualizada).getTime()}[_];return[...G].sort(ae)},[H,i,a,d,v,_]),b=we.useMemo(()=>{const L=new Map;for(const G of E)L.has(G.clienteId)||L.set(G.clienteId,[]),L.get(G.clienteId).push(G);return L},[E]);async function S(){try{const L=Ub(E),G=new Blob([L],{type:"text/csv;charset=utf-8"}),ae=URL.createObjectURL(G),Y=document.createElement("a");Y.href=ae,Y.download="ordenes.csv",Y.click(),URL.revokeObjectURL(ae)}catch(L){alert("Error al exportar CSV: "+L.message)}}async function $(){const L=await zb();if(!L)return;const G=[W.piezas,W.adjuntos].filter(Boolean);try{await W.transaction("rw",W.clientes,W.equipos,W.ordenes,W.eventos,...G,async()=>{var ae,Y;await W.clientes.clear(),await W.equipos.clear(),await W.ordenes.clear(),await W.eventos.clear(),W.piezas&&await W.piezas.clear(),W.adjuntos&&await W.adjuntos.clear(),L.clientes&&await W.clientes.bulkAdd(L.clientes),L.equipos&&await W.equipos.bulkAdd(L.equipos),L.ordenes&&await W.ordenes.bulkAdd(L.ordenes),L.eventos&&await W.eventos.bulkAdd(L.eventos),L.piezas&&await((ae=W.piezas)==null?void 0:ae.bulkAdd(L.piezas)),L.adjuntos&&await((Y=W.adjuntos)==null?void 0:Y.bulkAdd(L.adjuntos))}),alert("Importación completada")}catch(ae){alert("Error en importación: "+((ae==null?void 0:ae.message)||ae))}}async function V(){try{await $b(),alert("Copia subida a Supabase")}catch(L){alert("Error al subir: "+((L==null?void 0:L.message)||L))}}async function K(){try{const L=await Lb();alert(L?"Datos descargados de Supabase":"No hay copias en Supabase")}catch(L){alert("Error al bajar: "+((L==null?void 0:L.message)||L))}}return g.jsxs("section",{className:"grid gap-3",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsxs("div",{className:"grid lg:grid-cols-5 gap-2",children:[g.jsx("input",{className:"input",placeholder:"Buscar por código, cliente, teléfono o equipo",value:i,onChange:L=>s(L.target.value)}),g.jsxs("select",{className:"input",value:a,onChange:L=>c(L.target.value),children:[g.jsx("option",{value:"todos",children:"Todos"}),g.jsx("option",{value:"recepcion",children:"recepcion"}),g.jsx("option",{value:"diagnostico",children:"diagnostico"}),g.jsx("option",{value:"reparacion",children:"reparacion"}),g.jsx("option",{value:"listo",children:"listo"}),g.jsx("option",{value:"entregado",children:"entregado"})]}),g.jsx("input",{className:"input",type:"date",value:d,onChange:L=>p(L.target.value)}),g.jsx("input",{className:"input",type:"date",value:v,onChange:L=>y(L.target.value)}),g.jsxs("select",{className:"input",value:_,onChange:L=>j(L.target.value),children:[g.jsx("option",{value:"act_desc",children:"Act. reciente"}),g.jsx("option",{value:"act_asc",children:"Act. antigua"}),g.jsx("option",{value:"creada_desc",children:"Creada reciente"}),g.jsx("option",{value:"creada_asc",children:"Creada antigua"})]})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("button",{className:"btn",onClick:S,children:"Exportar CSV"}),g.jsx("button",{className:"btn",onClick:$,children:"Importar JSON"}),g.jsx("button",{className:"btn",onClick:V,children:"Subir Supabase"}),g.jsx("button",{className:"btn",onClick:K,children:"Bajar Supabase"})]})]})}),g.jsx("div",{className:"card",children:g.jsx("div",{className:"card-body",children:g.jsxs("div",{className:"overflow-x-auto",children:[g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{className:"text-left opacity-70",children:g.jsxs("tr",{children:[g.jsx("th",{className:"py-2 pr-3",children:"Cliente"}),g.jsx("th",{className:"py-2 pr-3",children:"Teléfono"}),g.jsx("th",{className:"py-2 pr-3",children:"Resumen"}),g.jsx("th",{className:"py-2 pr-3",children:"Actualizada"}),g.jsx("th",{className:"py-2"})]})}),g.jsxs("tbody",{children:[Array.from(b.entries()).map(([L,G])=>{if(!G.length)return null;const ae=G[0],Y=Math.max(0,G.length-1),ye=!!z[L];return g.jsxs("tr",{className:"border-t border-neutral-200/70 dark:border-neutral-800",children:[g.jsx("td",{className:"py-2 pr-3",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("span",{className:"font-medium",children:ae.cliente||"(sin nombre)"}),Y>0&&g.jsxs("button",{className:"px-2 py-0.5 rounded-lg text-xs border border-neutral-300 dark:border-neutral-700",title:"Ver todos",onClick:()=>B(st=>({...st,[L]:!ye})),children:["+",Y]})]})}),g.jsx("td",{className:"py-2 pr-3",children:ae.telefono}),g.jsxs("td",{className:"py-2 pr-3",children:[ae.equipo," (",ae.codigo,")"]}),g.jsx("td",{className:"py-2 pr-3",children:new Date(ae.actualizada).toLocaleString()}),g.jsxs("td",{className:"py-2 flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>t(ae.id),children:"Abrir"}),g.jsx("button",{className:"btn",onClick:async()=>{confirm("¿Borrar esta orden?")&&await Mh(ae.id)},children:"Eliminar"})]})]},L)}),Array.from(b.entries()).map(([L,G])=>!!!z[L]||G.length<=1?null:G.slice(1).map(Y=>g.jsxs("tr",{className:"border-t border-neutral-200/70 dark:border-neutral-800 bg-neutral-50/60 dark:bg-neutral-900/40",children:[g.jsxs("td",{className:"py-2 pr-3 pl-8",children:["→"," ",Y.cliente]}),g.jsx("td",{className:"py-2 pr-3",children:Y.telefono}),g.jsxs("td",{className:"py-2 pr-3",children:[Y.equipo," (",Y.codigo,")"]}),g.jsx("td",{className:"py-2 pr-3",children:new Date(Y.actualizada).toLocaleString()}),g.jsxs("td",{className:"py-2 flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>t(Y.id),children:"Abrir"}),g.jsx("button",{className:"btn",onClick:async()=>{confirm("¿Borrar esta orden?")&&await Mh(Y.id)},children:"Eliminar"})]})]},Y.id))),E.length===0&&g.jsx("tr",{children:g.jsx("td",{className:"py-4 opacity-70",colSpan:5,children:"Sin resultados."})})]})]}),g.jsxs("div",{className:"mt-3 flex gap-2",children:[g.jsx("button",{className:"btn",onClick:S,children:"Exportar CSV"}),g.jsx("button",{className:"btn",onClick:$,children:"Importar JSON"}),g.jsx("button",{className:"btn",onClick:V,children:"Subir Supabase"}),g.jsx("button",{className:"btn",onClick:K,children:"Bajar Supabase"})]})]})})})]})}function yu({label:t,value:e,strong:n}){return g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),g.jsx("div",{className:`text-xl ${n?"font-bold":""}`,children:e.toFixed(2)})]})})}function wu({label:t,children:e}){return g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function Bb(){const[t,e]=we.useState(1),[n,r]=we.useState(25),[i,s]=we.useState(0),a=t*n,c=a+i,d=c;return g.jsx("section",{className:"grid gap-4",children:g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Presupuesto inicial"}),g.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[g.jsx(wu,{label:"Horas",children:g.jsx("input",{type:"number",className:"input",value:t,onChange:p=>e(parseFloat(p.target.value)||0)})}),g.jsx(wu,{label:"Tarifa €/h",children:g.jsx("input",{type:"number",className:"input",value:n,onChange:p=>r(parseFloat(p.target.value)||0)})}),g.jsx(wu,{label:"Piezas €",children:g.jsx("input",{type:"number",className:"input",value:i,onChange:p=>s(parseFloat(p.target.value)||0)})})]}),g.jsxs("div",{className:"grid sm:grid-cols-2 md:grid-cols-4 gap-3",children:[g.jsx(yu,{label:"Mano de obra",value:a}),g.jsx(yu,{label:"Subtotal",value:c}),g.jsx(yu,{label:"Total",value:d,strong:!0})]})]})})})}function Fb(t){if(t<1024)return t+" B";const e=1024,n=["KB","MB","GB","TB"];let r=-1,i=t;do i/=e,r++;while(i>=e&&r<n.length-1);return i.toFixed(1)+" "+n[r]}const qb=["Recepción: equipo recibido, sin accesorios.","Diagnóstico: fallo intermitente, se recomienda prueba de carga.","Presupuesto enviado al cliente.","Esperando piezas del proveedor.","Prueba funcional superada.","Listo para entregar."],Kb=["No enciende: verificar fuente, batería y placa principal.","Sobrecalentamiento: limpieza y pasta térmica.","Daño de pantalla: reemplazo LCD previsto.","Puertos dañados: sustitución conector."];function Wb({ordenId:t}){const[e,n]=we.useState(""),[r,i]=we.useState({nombre:"",cantidad:1,coste:0,estado:"pendiente"}),[s,a]=we.useState(1),[c,d]=we.useState(25),[p,v]=we.useState(!1),[y,_]=we.useState(!1),[j,z]=we.useState({categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""}),B=["Móviles","Ordenadores","Consolas","Televisores","Placas","Robots","Baterías","Otros"],[H,E]=we.useState(null),b=we.useRef(void 0);function S(U,ne){clearTimeout(b.current),E({msg:U,action:ne}),b.current=window.setTimeout(()=>E(null),6e3)}we.useEffect(()=>{const U=Number(localStorage.getItem("gr_tarifa")||"");return!Number.isNaN(U)&&U>0&&d(U),()=>clearTimeout(b.current)},[]);const $=Sn(()=>t?W.ordenes.get(t):void 0,[t]),V=Sn(async()=>{if(!t)return;const U=await W.ordenes.get(t);if(U)return W.equipos.get(U.equipoId)},[t,$==null?void 0:$.equipoId]),K=Sn(async()=>{if(V)return W.clientes.get(V.clienteId)},[V==null?void 0:V.clienteId]),L=Sn(()=>t?W.eventos.where("ordenId").equals(t).reverse().toArray():Promise.resolve([]),[t]),G=Sn(()=>t?W.piezas.where("ordenId").equals(t).toArray():Promise.resolve([]),[t]),ae=Sn(()=>t?W.adjuntos.where("ordenId").equals(t).reverse().toArray():Promise.resolve([]),[t]),Y=we.useMemo(()=>{const U=new Set,ne=[];for(const Te of ae||[]){const an=`${Te.nombre}|${Te.tam}|${Te.fecha}|${Te.tipo}`;U.has(an)||(U.add(an),ne.push(Te))}return ne},[ae]),ye=we.useMemo(()=>(G||[]).reduce((U,ne)=>U+ne.coste*ne.cantidad,0),[G]),st=s*c,vt=st+ye,[ot,rn]=we.useState({nombre:"",telefono:"",email:""}),[Ce,Ut]=we.useState({categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""});if(!t)return g.jsx("div",{className:"card",children:g.jsx("div",{className:"card-body",children:"Selecciona o crea una orden."})});function ie(){!K||!V||(rn({nombre:K.nombre||"",telefono:K.telefono||"",email:K.email||""}),Ut({categoria:V.categoria||"Otros",marca:V.marca||"",modelo:V.modelo||"",numeroSerie:V.numeroSerie||"",descripcion:V.descripcion||""}),v(!0))}async function fe(){!$||!K||!V||!ot.nombre.trim()||!ot.telefono.trim()||!Ce.marca.trim()||!Ce.modelo.trim()||!Ce.descripcion.trim()||(await W.transaction("rw",W.clientes,W.equipos,W.ordenes,W.eventos,async()=>{await W.clientes.update(K.id,{nombre:ot.nombre.trim(),telefono:ot.telefono.trim(),email:ot.email.trim()||void 0}),await W.equipos.update(V.id,{categoria:Ce.categoria,marca:Ce.marca.trim(),modelo:Ce.modelo.trim(),numeroSerie:Ce.numeroSerie.trim()||void 0,descripcion:Ce.descripcion.trim()}),await W.ordenes.update($.id,{actualizada:new Date().toISOString()}),await W.eventos.add({id:crypto.randomUUID(),ordenId:$.id,tipo:"nota",texto:"Datos de cliente/equipo actualizados",fecha:new Date().toISOString()})}),v(!1))}async function he(){e.trim()&&(await W.eventos.add({id:crypto.randomUUID(),ordenId:t,tipo:"nota",texto:e.trim(),fecha:new Date().toISOString()}),n(""))}async function je(){!r.nombre.trim()||r.cantidad<=0||(await W.piezas.add({id:crypto.randomUUID(),ordenId:t,nombre:r.nombre.trim(),cantidad:r.cantidad,coste:Number(r.coste)||0,estado:r.estado}),i({nombre:"",cantidad:1,coste:0,estado:"pendiente"}))}async function ze(U){const ne=await W.piezas.get(U);ne&&confirm("¿Borrar pieza?")&&(await W.piezas.delete(U),S("Pieza eliminada",async()=>{await W.piezas.add(ne)}))}async function at(U,ne){await W.piezas.update(U,ne)}async function zt(U){await W.ordenes.update(t,{estado:U,actualizada:new Date().toISOString()}),await W.eventos.add({id:crypto.randomUUID(),ordenId:t,tipo:"cambio_estado",texto:`Estado: ${U}`,fecha:new Date().toISOString()})}async function sn(){const U={clientes:await W.clientes.toArray(),equipos:await W.equipos.toArray(),ordenes:await W.ordenes.toArray(),eventos:await W.eventos.toArray(),piezas:await W.piezas.toArray(),adjuntos:await W.adjuntos.toArray()},ne=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),Te=URL.createObjectURL(ne),an=document.createElement("a");an.href=Te,an.download="bricofrank-backup.json",an.click(),URL.revokeObjectURL(Te)}async function lt(U){const ne=U.target.files;if(!(!ne||!ne.length)){for(const Te of Array.from(ne)){const an=crypto.randomUUID(),gn=await Te.arrayBuffer(),tl=new Blob([gn],{type:Te.type||"application/octet-stream"});await W.adjuntos.add({id:an,ordenId:t,nombre:Te.name,tipo:Te.type||"application/octet-stream",tam:Te.size,fecha:new Date().toISOString(),blob:tl})}U.target.value=""}}async function on(U){const ne=await W.adjuntos.get(U);ne&&confirm("¿Borrar adjunto?")&&(await W.adjuntos.delete(U),S("Adjunto eliminado",async()=>{await W.adjuntos.add(ne)}))}async function el(){if(!K)return;if(!j.marca.trim()||!j.modelo.trim()||!j.descripcion.trim()){alert("Rellena Marca, Modelo y Descripción");return}const{orden:U}=await Ab({clienteId:K.id,equipo:{categoria:j.categoria,marca:j.marca.trim(),modelo:j.modelo.trim(),numeroSerie:(j.numeroSerie||"").trim()||void 0,descripcion:j.descripcion.trim()}});z({categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""}),_(!1),S(`Orden creada: ${U.codigo}. Abre desde "Órdenes".`)}function ce(U){d(U),localStorage.setItem("gr_tarifa",String(U))}function Ys(U){a(ne=>Math.max(0,+(ne+U).toFixed(2)))}return g.jsxs("section",{className:"grid gap-4",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsx("div",{className:"grid gap-3",children:g.jsxs("div",{className:"grid lg:grid-cols-3 gap-3",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-1",children:[g.jsx("div",{className:"text-xs opacity-70",children:"Cliente"}),g.jsx("div",{className:"text-sm font-medium",children:(K==null?void 0:K.nombre)||"—"}),g.jsx("div",{className:"text-sm",children:(K==null?void 0:K.telefono)||"—"}),(K==null?void 0:K.email)&&g.jsx("div",{className:"text-xs opacity-70 break-all",children:K.email})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-1",children:[g.jsx("div",{className:"text-xs opacity-70",children:"Equipo"}),g.jsx("div",{className:"text-sm font-medium",children:V?`${V.categoria} ${V.marca} ${V.modelo}`:"—"}),(V==null?void 0:V.numeroSerie)&&g.jsxs("div",{className:"text-xs opacity-70",children:["N\\u00BA serie: ",V.numeroSerie]}),g.jsx("div",{className:"text-xs opacity-70 line-clamp-2",children:V==null?void 0:V.descripcion})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-1",children:[g.jsx("div",{className:"text-xs opacity-70",children:"Orden"}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("span",{className:"text-sm font-medium",children:["C\\u00F3digo: ",($==null?void 0:$.codigo)||"…"]}),g.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full border border-neutral-200/70 dark:border-neutral-800",children:$==null?void 0:$.estado})]}),g.jsxs("div",{className:"text-xs opacity-70",children:["Creada: ",$!=null&&$.creada?new Date($.creada).toLocaleString():"—"]}),g.jsxs("div",{className:"text-xs opacity-70",children:["Act.: ",$!=null&&$.actualizada?new Date($.actualizada).toLocaleString():"—"]})]})})]})}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("select",{className:"input ml-auto max-w-48",value:($==null?void 0:$.estado)||"recepcion",onChange:U=>zt(U.target.value),children:["recepcion","diagnostico","reparacion","listo","entregado"].map(U=>g.jsx("option",{value:U,children:U},U))}),g.jsx("button",{className:"btn",onClick:sn,children:"Exportar JSON"}),g.jsx("button",{className:"btn",onClick:()=>window.print(),children:"Imprimir"}),K&&g.jsx("button",{className:"btn btn-primary",onClick:()=>_(U=>!U),children:y?"Cancelar nuevo equipo":"Añadir otro equipo"}),!p&&g.jsx("button",{className:"btn",onClick:ie,children:"Editar datos"})]}),y&&g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsxs("div",{className:"font-medium",children:["Nuevo equipo para ",K==null?void 0:K.nombre]}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Categor\\u00EDa"}),g.jsx("select",{className:"input",value:j.categoria,onChange:U=>z({...j,categoria:U.target.value}),children:B.map(U=>g.jsx("option",{value:U,children:U},U))})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Marca*"}),g.jsx("input",{className:"input",value:j.marca,onChange:U=>z({...j,marca:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Modelo*"}),g.jsx("input",{className:"input",value:j.modelo,onChange:U=>z({...j,modelo:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"N\\u00BA de serie"}),g.jsx("input",{className:"input",value:j.numeroSerie,onChange:U=>z({...j,numeroSerie:U.target.value})})]})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Da\\u00F1o inicial*"}),g.jsx("textarea",{className:"input min-h-28",value:j.descripcion,onChange:U=>z({...j,descripcion:U.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",onClick:el,children:"Crear orden"}),g.jsx("button",{className:"btn",onClick:()=>{_(!1),z({categoria:"Otros",marca:"",modelo:"",numeroSerie:"",descripcion:""})},children:"Cancelar"})]})]})}),p&&g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsx("div",{className:"font-medium",children:"Editar cliente y equipo"}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Nombre*"}),g.jsx("input",{className:"input",value:ot.nombre,onChange:U=>rn({...ot,nombre:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Tel\\u00E9fono*"}),g.jsx("input",{className:"input",value:ot.telefono,onChange:U=>rn({...ot,telefono:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Email"}),g.jsx("input",{className:"input",value:ot.email,onChange:U=>rn({...ot,email:U.target.value})})]})]}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Categor\\u00EDa"}),g.jsx("select",{className:"input",value:Ce.categoria,onChange:U=>Ut({...Ce,categoria:U.target.value}),children:B.map(U=>g.jsx("option",{value:U,children:U},U))})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Marca*"}),g.jsx("input",{className:"input",value:Ce.marca,onChange:U=>Ut({...Ce,marca:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Modelo*"}),g.jsx("input",{className:"input",value:Ce.modelo,onChange:U=>Ut({...Ce,modelo:U.target.value})})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"N\\u00BA de serie"}),g.jsx("input",{className:"input",value:Ce.numeroSerie,onChange:U=>Ut({...Ce,numeroSerie:U.target.value})})]})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Da\\u00F1o inicial*"}),g.jsx("textarea",{className:"input min-h-28",value:Ce.descripcion,onChange:U=>Ut({...Ce,descripcion:U.target.value})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",onClick:fe,children:"Guardar"}),g.jsx("button",{className:"btn",onClick:()=>v(!1),children:"Cancelar"})]})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsx("div",{className:"font-medium",children:"Costes (sin IVA)"}),g.jsxs("div",{className:"grid sm:grid-cols-4 gap-2",children:[g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Horas"}),g.jsx("input",{className:"input",type:"number",value:s,onChange:U=>a(parseFloat(U.target.value)||0)})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsxs("span",{className:"text-sm",children:["Tarifa ","€","/h"]}),g.jsx("input",{className:"input",type:"number",value:c,onChange:U=>d(parseFloat(U.target.value)||0)})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Mano de obra"}),g.jsx("input",{className:"input",value:st.toFixed(2),readOnly:!0})]}),g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm",children:"Piezas"}),g.jsx("input",{className:"input",value:ye.toFixed(2),readOnly:!0})]})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsx("span",{className:"text-sm opacity-70",children:"Presets tarifa:"}),[20,25,30,35].map(U=>g.jsxs("button",{className:"btn",onClick:()=>{ce(U)},children:[U," ","€","/h"]},U)),g.jsx("span",{className:"ml-4 text-sm opacity-70",children:"Horas r\\u00E1pidas:"}),[.5,1,2].map(U=>g.jsxs("button",{className:"btn",onClick:()=>Ys(U),children:["+",U]},U)),g.jsx("button",{className:"btn",onClick:()=>a(0),children:"Reiniciar"})]}),g.jsxs("div",{className:"text-xl font-bold",children:["Total: ",vt.toFixed(2)," ","€"]})]})}),g.jsxs("div",{className:"grid lg:grid-cols-2 gap-3",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsx("div",{className:"font-medium",children:"Timeline"}),g.jsxs("div",{className:"grid sm:grid-cols-[1fr_auto] gap-2",children:[g.jsx("input",{className:"input",placeholder:"Nueva nota",value:e,onChange:U=>n(U.target.value)}),g.jsx("button",{className:"btn btn-primary",onClick:he,children:"A\\u00F1adir"})]}),g.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[g.jsxs("select",{className:"input",onChange:U=>{U.target.value&&(n(ne=>ne?ne.trim()+" "+U.target.value:U.target.value),U.target.selectedIndex=0)},children:[g.jsx("option",{value:"",children:"Plantillas de nota"}),qb.map((U,ne)=>g.jsx("option",{value:U,children:U},ne))]}),g.jsxs("select",{className:"input",onChange:U=>{U.target.value&&(n(ne=>ne?ne.trim()+" "+U.target.value:U.target.value),U.target.selectedIndex=0)},children:[g.jsx("option",{value:"",children:"Plantillas de diagn\\u00F3stico"}),Kb.map((U,ne)=>g.jsx("option",{value:U,children:U},ne))]})]}),L!=null&&L.length?g.jsx("ul",{className:"text-sm",children:L.map(U=>g.jsxs("li",{children:[new Date(U.fecha).toLocaleString()," ","—"," ",U.texto]},U.id))}):g.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Sin eventos."})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsx("div",{className:"font-medium",children:"Piezas"}),g.jsxs("div",{className:"grid sm:grid-cols-4 gap-2",children:[g.jsx("input",{className:"input",placeholder:"Nombre",value:r.nombre,onChange:U=>i({...r,nombre:U.target.value})}),g.jsx("input",{className:"input",type:"number",placeholder:"Cant.",value:r.cantidad,onChange:U=>i({...r,cantidad:Math.max(1,parseInt(U.target.value||"1",10))})}),g.jsx("input",{className:"input",type:"number",placeholder:"Coste",value:r.coste,onChange:U=>i({...r,coste:parseFloat(U.target.value)||0})}),g.jsx("select",{className:"input",value:r.estado,onChange:U=>i({...r,estado:U.target.value}),children:["pendiente","pedido","recibido","instalado"].map(U=>g.jsx("option",{value:U,children:U},U))})]}),g.jsx("div",{children:g.jsx("button",{className:"btn btn-primary",onClick:je,children:"A\\u00F1adir pieza"})}),G!=null&&G.length?g.jsx("ul",{className:"text-sm grid gap-2",children:G.map(U=>g.jsxs("li",{className:"grid gap-2 sm:grid-cols-[1fr_auto] items-center",children:[g.jsxs("div",{className:"grid sm:grid-cols-4 gap-2",children:[g.jsx("input",{className:"input",value:U.nombre,onChange:ne=>at(U.id,{nombre:ne.target.value})}),g.jsx("input",{className:"input",type:"number",value:U.cantidad,onChange:ne=>at(U.id,{cantidad:Math.max(1,parseInt(ne.target.value||"1",10))})}),g.jsx("input",{className:"input",type:"number",value:U.coste,onChange:ne=>at(U.id,{coste:parseFloat(ne.target.value)||0})}),g.jsx("select",{className:"input",value:U.estado,onChange:ne=>at(U.id,{estado:ne.target.value}),children:["pendiente","pedido","recibido","instalado"].map(ne=>g.jsx("option",{value:ne,children:ne},ne))})]}),g.jsxs("div",{className:"flex gap-2 justify-end",children:[g.jsxs("span",{className:"opacity-70",children:[(U.coste*U.cantidad).toFixed(2)," ","€"]}),g.jsx("button",{className:"btn",onClick:()=>ze(U.id),children:"Borrar"})]})]},U.id))}):g.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Sin piezas."})]})})]}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsx("div",{className:"font-medium",children:"Adjuntos y fotos"}),g.jsx("input",{type:"file",className:"input",multiple:!0,onChange:lt}),Y!=null&&Y.length?g.jsx("div",{className:"grid sm:grid-cols-3 md:grid-cols-4 gap-3",children:Y.map(U=>{const ne=/^image\//.test(U.tipo),Te=URL.createObjectURL(U.blob);return g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-2",children:[g.jsx("div",{className:"text-sm break-all",children:U.nombre}),g.jsxs("div",{className:"text-xs opacity-70",children:[Fb(U.tam)," ","•"," ",new Date(U.fecha).toLocaleString()]}),ne?g.jsx("a",{href:Te,target:"_blank",rel:"noreferrer",children:g.jsx("img",{src:Te,alt:U.nombre,className:"w-full h-32 object-cover rounded-lg border border-neutral-200/70 dark:border-neutral-800"})}):g.jsx("a",{href:Te,target:"_blank",rel:"noreferrer",className:"btn",children:"Descargar"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("a",{className:"btn",href:Te,download:U.nombre,children:"Guardar"}),g.jsx("button",{className:"btn",onClick:()=>on(U.id),children:"Borrar"})]})]})},U.id)})}):g.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Sin adjuntos."})]})})]})}),H&&g.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body flex items-center gap-2",children:[g.jsx("span",{children:H.msg}),H.action&&g.jsx("button",{className:"btn btn-primary",onClick:()=>{var U;(U=H.action)==null||U.call(H),E(null)},children:"Deshacer"}),g.jsx("button",{className:"btn",onClick:()=>E(null),children:"Cerrar"})]})})})]})}function Vb(){const[t,e]=we.useState("ordenes"),[n,r]=we.useState(void 0);return g.jsxs(Eb,{tab:t,onTab:i=>{e(i)},children:[t==="registro"&&g.jsx(Ib,{onCreated:i=>{r(i),e("reparacion")}}),t==="ordenes"&&g.jsx(Mb,{onOpen:i=>{r(i),e("reparacion")}}),t==="presupuesto"&&g.jsx(Bb,{}),t==="reparacion"&&(n?g.jsx(Wb,{ordenId:n}):g.jsx("div",{className:"card",children:g.jsx("div",{className:"card-body",children:"Selecciona una orden desde “Órdenes”."})}))]})}ev(document.getElementById("root")).render(g.jsx(ni.StrictMode,{children:g.jsx(Vb,{})}));
