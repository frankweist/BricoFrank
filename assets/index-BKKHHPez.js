(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function hg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var qh={exports:{}},Da={},Wh={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),pg=Symbol.for("react.portal"),mg=Symbol.for("react.fragment"),vg=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),yg=Symbol.for("react.provider"),wg=Symbol.for("react.context"),_g=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),kg=Symbol.for("react.memo"),xg=Symbol.for("react.lazy"),sf=Symbol.iterator;function Sg(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var Vh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hh=Object.assign,Gh={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=Gh,this.updater=n||Vh}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qh(){}Qh.prototype=Ai.prototype;function Sc(t,e,n){this.props=t,this.context=e,this.refs=Gh,this.updater=n||Vh}var Ec=Sc.prototype=new Qh;Ec.constructor=Sc;Hh(Ec,Ai.prototype);Ec.isPureReactComponent=!0;var of=Array.isArray,Jh=Object.prototype.hasOwnProperty,jc={current:null},Yh={key:!0,ref:!0,__self:!0,__source:!0};function Xh(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Jh.call(e,r)&&!Yh.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:qs,type:t,key:s,ref:a,props:i,_owner:jc.current}}function Eg(t,e){return{$$typeof:qs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cc(t){return typeof t=="object"&&t!==null&&t.$$typeof===qs}function jg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var af=/\/+/g;function Ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jg(""+t.key):e.toString(36)}function Go(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case qs:case pg:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ll(a,0):r,of(i)?(n="",t!=null&&(n=t.replace(af,"$&/")+"/"),Go(i,e,n,"",function(p){return p})):i!=null&&(Cc(i)&&(i=Eg(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(af,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",of(t))for(var u=0;u<t.length;u++){s=t[u];var d=r+Ll(s,u);a+=Go(s,e,n,d,i)}else if(d=Sg(t),typeof d=="function")for(t=d.call(t),u=0;!(s=t.next()).done;)s=s.value,d=r+Ll(s,u++),a+=Go(s,e,n,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Co(t,e,n){if(t==null)return t;var r=[],i=0;return Go(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Cg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gt={current:null},Qo={transition:null},Og={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:jc};function Zh(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Co,forEach:function(t,e,n){Co(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Co(t,function(){e++}),e},toArray:function(t){return Co(t,function(e){return e})||[]},only:function(t){if(!Cc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=Ai;ye.Fragment=mg;ye.Profiler=gg;ye.PureComponent=Sc;ye.StrictMode=vg;ye.Suspense=bg;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Og;ye.act=Zh;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Hh({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=jc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)Jh.call(e,d)&&!Yh.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];r.children=u}return{$$typeof:qs,type:t.type,key:i,ref:s,props:r,_owner:a}};ye.createContext=function(t){return t={$$typeof:wg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yg,_context:t},t.Consumer=t};ye.createElement=Xh;ye.createFactory=function(t){var e=Xh.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:_g,render:t}};ye.isValidElement=Cc;ye.lazy=function(t){return{$$typeof:xg,_payload:{_status:-1,_result:t},_init:Cg}};ye.memo=function(t,e){return{$$typeof:kg,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Qo.transition;Qo.transition={};try{t()}finally{Qo.transition=e}};ye.unstable_act=Zh;ye.useCallback=function(t,e){return gt.current.useCallback(t,e)};ye.useContext=function(t){return gt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return gt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return gt.current.useEffect(t,e)};ye.useId=function(){return gt.current.useId()};ye.useImperativeHandle=function(t,e,n){return gt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return gt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return gt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return gt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return gt.current.useReducer(t,e,n)};ye.useRef=function(t){return gt.current.useRef(t)};ye.useState=function(t){return gt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return gt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return gt.current.useTransition()};ye.version="18.3.1";Wh.exports=ye;var le=Wh.exports;const xr=Kh(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg=le,Tg=Symbol.for("react.element"),Ng=Symbol.for("react.fragment"),Rg=Object.prototype.hasOwnProperty,Ag=Pg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ig={key:!0,ref:!0,__self:!0,__source:!0};function ep(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Rg.call(e,r)&&!Ig.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Tg,type:t,key:s,ref:a,props:i,_owner:Ag.current}}Da.Fragment=Ng;Da.jsx=ep;Da.jsxs=ep;qh.exports=Da;var g=qh.exports,tp={exports:{}},Dt={},np={exports:{}},rp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,fe){var he=X.length;X.push(fe);e:for(;0<he;){var be=he-1>>>1,Ue=X[be];if(0<i(Ue,fe))X[be]=fe,X[he]=Ue,he=be;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var fe=X[0],he=X.pop();if(he!==fe){X[0]=he;e:for(var be=0,Ue=X.length,Wt=Ue>>>1;be<Wt;){var nn=2*(be+1)-1,jn=X[nn],_t=nn+1,Cn=X[_t];if(0>i(jn,he))_t<Ue&&0>i(Cn,jn)?(X[be]=Cn,X[_t]=he,be=_t):(X[be]=jn,X[nn]=he,be=nn);else if(_t<Ue&&0>i(Cn,he))X[be]=Cn,X[_t]=he,be=_t;else break e}}return fe}function i(X,fe){var he=X.sortIndex-fe.sortIndex;return he!==0?he:X.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],p=[],m=1,w=null,_=3,P=!1,L=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(X){for(var fe=n(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=X)r(p),fe.sortIndex=fe.expirationTime,e(d,fe);else break;fe=n(p)}}function M(X){if(N=!1,x(X),!L)if(n(d)!==null)L=!0,Fe(K);else{var fe=n(p);fe!==null&&Lt(M,fe.startTime-X)}}function K(X,fe){L=!1,N&&(N=!1,S(W),W=-1),P=!0;var he=_;try{for(x(fe),w=n(d);w!==null&&(!(w.expirationTime>fe)||X&&!Ce());){var be=w.callback;if(typeof be=="function"){w.callback=null,_=w.priorityLevel;var Ue=be(w.expirationTime<=fe);fe=t.unstable_now(),typeof Ue=="function"?w.callback=Ue:w===n(d)&&r(d),x(fe)}else r(d);w=n(d)}if(w!==null)var Wt=!0;else{var nn=n(p);nn!==null&&Lt(M,nn.startTime-fe),Wt=!1}return Wt}finally{w=null,_=he,P=!1}}var q=!1,V=null,W=-1,se=5,te=-1;function Ce(){return!(t.unstable_now()-te<se)}function Ge(){if(V!==null){var X=t.unstable_now();te=X;var fe=!0;try{fe=V(!0,X)}finally{fe?Qe():(q=!1,V=null)}}else q=!1}var Qe;if(typeof y=="function")Qe=function(){y(Ge)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Se=ce.port2;ce.port1.onmessage=Ge,Qe=function(){Se.postMessage(null)}}else Qe=function(){B(Ge,0)};function Fe(X){V=X,q||(q=!0,Qe())}function Lt(X,fe){W=B(function(){X(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){L||P||(L=!0,Fe(K))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(X){switch(_){case 1:case 2:case 3:var fe=3;break;default:fe=_}var he=_;_=fe;try{return X()}finally{_=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,fe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var he=_;_=X;try{return fe()}finally{_=he}},t.unstable_scheduleCallback=function(X,fe,he){var be=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?be+he:be):he=be,X){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=he+Ue,X={id:m++,callback:fe,priorityLevel:X,startTime:he,expirationTime:Ue,sortIndex:-1},he>be?(X.sortIndex=he,e(p,X),n(d)===null&&X===n(p)&&(N?(S(W),W=-1):N=!0,Lt(M,he-be))):(X.sortIndex=Ue,e(d,X),L||P||(L=!0,Fe(K))),X},t.unstable_shouldYield=Ce,t.unstable_wrapCallback=function(X){var fe=_;return function(){var he=_;_=fe;try{return X.apply(this,arguments)}finally{_=he}}}})(rp);np.exports=rp;var Dg=np.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g=le,It=Dg;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ip=new Set,Es={};function Ur(t,e){Si(t,e),Si(t+"Capture",e)}function Si(t,e){for(Es[t]=e,t=0;t<e.length;t++)ip.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=Object.prototype.hasOwnProperty,Lg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lf={},uf={};function Ug(t){return wu.call(uf,t)?!0:wu.call(lf,t)?!1:Lg.test(t)?uf[t]=!0:(lf[t]=!0,!1)}function Mg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zg(t,e,n,r){if(e===null||typeof e>"u"||Mg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Pc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Pc);ot[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Pc);ot[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Pc);ot[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tc(t,e,n,r){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zg(e,n,i,r)&&(n=null),r||i===null?Ug(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var En=$g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oo=Symbol.for("react.element"),si=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),Nc=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),op=Symbol.for("react.context"),Rc=Symbol.for("react.forward_ref"),bu=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),Ac=Symbol.for("react.memo"),Mn=Symbol.for("react.lazy"),ap=Symbol.for("react.offscreen"),cf=Symbol.iterator;function Xi(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,Ul;function as(t){if(Ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ul=e&&e[1]||""}return`
`+Ul+t}var Ml=!1;function zl(t,e){if(!t||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,u=s.length-1;1<=a&&0<=u&&i[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==s[u]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function Fg(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function xu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case si:return"Portal";case _u:return"Profiler";case Nc:return"StrictMode";case bu:return"Suspense";case ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case op:return(t.displayName||"Context")+".Consumer";case sp:return(t._context.displayName||"Context")+".Provider";case Rc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ac:return e=t.displayName||null,e!==null?e:xu(t.type)||"Memo";case Mn:e=t._payload,t=t._init;try{return xu(t(e))}catch{}}return null}function Bg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xu(e);case 8:return e===Nc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kg(t){var e=lp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Po(t){t._valueTracker||(t._valueTracker=Kg(t))}function up(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Su(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function df(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cp(t,e){e=e.checked,e!=null&&Tc(t,"checked",e,!1)}function Eu(t,e){cp(t,e);var n=tr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&ju(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ju(t,e,n){(e!=="number"||aa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function gi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(ls(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function dp(t,e){var n=tr(e.value),r=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ou(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var To,hp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=To.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function js(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qg=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){qg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fs[e]=fs[t]})});function pp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fs.hasOwnProperty(t)&&fs[t]?(""+e).trim():e+"px"}function mp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=pp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Wg=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pu(t,e){if(e){if(Wg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Tu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nu=null;function Ic(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ru=null,yi=null,wi=null;function mf(t){if(t=Hs(t)){if(typeof Ru!="function")throw Error(G(280));var e=t.stateNode;e&&(e=za(e),Ru(t.stateNode,t.type,e))}}function vp(t){yi?wi?wi.push(t):wi=[t]:yi=t}function gp(){if(yi){var t=yi,e=wi;if(wi=yi=null,mf(t),e)for(t=0;t<e.length;t++)mf(e[t])}}function yp(t,e){return t(e)}function wp(){}var Fl=!1;function _p(t,e,n){if(Fl)return t(e,n);Fl=!0;try{return yp(t,e,n)}finally{Fl=!1,(yi!==null||wi!==null)&&(wp(),gp())}}function Cs(t,e){var n=t.stateNode;if(n===null)return null;var r=za(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Au=!1;if(bn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Au=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Au=!1}function Vg(t,e,n,r,i,s,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(m){this.onError(m)}}var hs=!1,la=null,ua=!1,Iu=null,Hg={onError:function(t){hs=!0,la=t}};function Gg(t,e,n,r,i,s,a,u,d){hs=!1,la=null,Vg.apply(Hg,arguments)}function Qg(t,e,n,r,i,s,a,u,d){if(Gg.apply(this,arguments),hs){if(hs){var p=la;hs=!1,la=null}else throw Error(G(198));ua||(ua=!0,Iu=p)}}function Mr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function bp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vf(t){if(Mr(t)!==t)throw Error(G(188))}function Jg(t){var e=t.alternate;if(!e){if(e=Mr(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vf(i),t;if(s===r)return vf(i),e;s=s.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function kp(t){return t=Jg(t),t!==null?xp(t):null}function xp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xp(t);if(e!==null)return e;t=t.sibling}return null}var Sp=It.unstable_scheduleCallback,gf=It.unstable_cancelCallback,Yg=It.unstable_shouldYield,Xg=It.unstable_requestPaint,qe=It.unstable_now,Zg=It.unstable_getCurrentPriorityLevel,Dc=It.unstable_ImmediatePriority,Ep=It.unstable_UserBlockingPriority,ca=It.unstable_NormalPriority,ey=It.unstable_LowPriority,jp=It.unstable_IdlePriority,$a=null,dn=null;function ty(t){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot($a,t,void 0,(t.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:iy,ny=Math.log,ry=Math.LN2;function iy(t){return t>>>=0,t===0?32:31-(ny(t)/ry|0)|0}var No=64,Ro=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function da(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=us(u):(s&=a,s!==0&&(r=us(s)))}else a=n&~i,a!==0?r=us(a):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zt(e),i=1<<n,r|=t[n],e&=~i;return r}function sy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Zt(s),u=1<<a,d=i[a];d===-1?(!(u&n)||u&r)&&(i[a]=sy(u,e)):d<=e&&(t.expiredLanes|=u),s&=~u}}function Du(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cp(){var t=No;return No<<=1,!(No&4194240)&&(No=64),t}function Bl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ws(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zt(e),t[e]=n}function ay(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function $c(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function Op(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pp,Lc,Tp,Np,Rp,$u=!1,Ao=[],Hn=null,Gn=null,Qn=null,Os=new Map,Ps=new Map,Fn=[],ly="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(t,e){switch(t){case"focusin":case"focusout":Hn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Os.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(e.pointerId)}}function es(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hs(e),e!==null&&Lc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uy(t,e,n,r,i){switch(e){case"focusin":return Hn=es(Hn,t,e,n,r,i),!0;case"dragenter":return Gn=es(Gn,t,e,n,r,i),!0;case"mouseover":return Qn=es(Qn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Os.set(s,es(Os.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ps.set(s,es(Ps.get(s)||null,t,e,n,r,i)),!0}return!1}function Ap(t){var e=jr(t.target);if(e!==null){var n=Mr(e);if(n!==null){if(e=n.tag,e===13){if(e=bp(n),e!==null){t.blockedOn=e,Rp(t.priority,function(){Tp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nu=r,n.target.dispatchEvent(r),Nu=null}else return e=Hs(n),e!==null&&Lc(e),t.blockedOn=n,!1;e.shift()}return!0}function wf(t,e,n){Jo(t)&&n.delete(e)}function cy(){$u=!1,Hn!==null&&Jo(Hn)&&(Hn=null),Gn!==null&&Jo(Gn)&&(Gn=null),Qn!==null&&Jo(Qn)&&(Qn=null),Os.forEach(wf),Ps.forEach(wf)}function ts(t,e){t.blockedOn===e&&(t.blockedOn=null,$u||($u=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,cy)))}function Ts(t){function e(i){return ts(i,t)}if(0<Ao.length){ts(Ao[0],t);for(var n=1;n<Ao.length;n++){var r=Ao[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hn!==null&&ts(Hn,t),Gn!==null&&ts(Gn,t),Qn!==null&&ts(Qn,t),Os.forEach(e),Ps.forEach(e),n=0;n<Fn.length;n++)r=Fn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)Ap(n),n.blockedOn===null&&Fn.shift()}var _i=En.ReactCurrentBatchConfig,fa=!0;function dy(t,e,n,r){var i=Ee,s=_i.transition;_i.transition=null;try{Ee=1,Uc(t,e,n,r)}finally{Ee=i,_i.transition=s}}function fy(t,e,n,r){var i=Ee,s=_i.transition;_i.transition=null;try{Ee=4,Uc(t,e,n,r)}finally{Ee=i,_i.transition=s}}function Uc(t,e,n,r){if(fa){var i=Lu(t,e,n,r);if(i===null)Xl(t,e,r,ha,n),yf(t,r);else if(uy(i,t,e,n,r))r.stopPropagation();else if(yf(t,r),e&4&&-1<ly.indexOf(t)){for(;i!==null;){var s=Hs(i);if(s!==null&&Pp(s),s=Lu(t,e,n,r),s===null&&Xl(t,e,r,ha,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xl(t,e,r,null,n)}}var ha=null;function Lu(t,e,n,r){if(ha=null,t=Ic(r),t=jr(t),t!==null)if(e=Mr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=bp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ha=t,null}function Ip(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zg()){case Dc:return 1;case Ep:return 4;case ca:case ey:return 16;case jp:return 536870912;default:return 16}default:return 16}}var qn=null,Mc=null,Yo=null;function Dp(){if(Yo)return Yo;var t,e=Mc,n=e.length,r,i="value"in qn?qn.value:qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Yo=i.slice(t,1<r?1-r:void 0)}function Xo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Io(){return!0}function _f(){return!1}function $t(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Io:_f,this.isPropagationStopped=_f,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zc=$t(Ii),Vs=Le({},Ii,{view:0,detail:0}),hy=$t(Vs),Kl,ql,ns,La=Le({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(Kl=t.screenX-ns.screenX,ql=t.screenY-ns.screenY):ql=Kl=0,ns=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:ql}}),bf=$t(La),py=Le({},La,{dataTransfer:0}),my=$t(py),vy=Le({},Vs,{relatedTarget:0}),Wl=$t(vy),gy=Le({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=$t(gy),wy=Le({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_y=$t(wy),by=Le({},Ii,{data:0}),kf=$t(by),ky={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ey(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sy[t])?!!e[t]:!1}function Fc(){return Ey}var jy=Le({},Vs,{key:function(t){if(t.key){var e=ky[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(t){return t.type==="keypress"?Xo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Cy=$t(jy),Oy=Le({},La,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=$t(Oy),Py=Le({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),Ty=$t(Py),Ny=Le({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ry=$t(Ny),Ay=Le({},La,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=$t(Ay),Dy=[9,13,27,32],Bc=bn&&"CompositionEvent"in window,ps=null;bn&&"documentMode"in document&&(ps=document.documentMode);var $y=bn&&"TextEvent"in window&&!ps,$p=bn&&(!Bc||ps&&8<ps&&11>=ps),Sf=" ",Ef=!1;function Lp(t,e){switch(t){case"keyup":return Dy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Up(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function Ly(t,e){switch(t){case"compositionend":return Up(e);case"keypress":return e.which!==32?null:(Ef=!0,Sf);case"textInput":return t=e.data,t===Sf&&Ef?null:t;default:return null}}function Uy(t,e){if(ai)return t==="compositionend"||!Bc&&Lp(t,e)?(t=Dp(),Yo=Mc=qn=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $p&&e.locale!=="ko"?null:e.data;default:return null}}var My={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!My[t.type]:e==="textarea"}function Mp(t,e,n,r){vp(r),e=pa(e,"onChange"),0<e.length&&(n=new zc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ms=null,Ns=null;function zy(t){Jp(t,0)}function Ua(t){var e=ci(t);if(up(e))return t}function Fy(t,e){if(t==="change")return e}var zp=!1;if(bn){var Vl;if(bn){var Hl="oninput"in document;if(!Hl){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),Hl=typeof Cf.oninput=="function"}Vl=Hl}else Vl=!1;zp=Vl&&(!document.documentMode||9<document.documentMode)}function Of(){ms&&(ms.detachEvent("onpropertychange",Fp),Ns=ms=null)}function Fp(t){if(t.propertyName==="value"&&Ua(Ns)){var e=[];Mp(e,Ns,t,Ic(t)),_p(zy,e)}}function By(t,e,n){t==="focusin"?(Of(),ms=e,Ns=n,ms.attachEvent("onpropertychange",Fp)):t==="focusout"&&Of()}function Ky(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ua(Ns)}function qy(t,e){if(t==="click")return Ua(e)}function Wy(t,e){if(t==="input"||t==="change")return Ua(e)}function Vy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:Vy;function Rs(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wu.call(e,i)||!tn(t[i],e[i]))return!1}return!0}function Pf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tf(t,e){var n=Pf(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pf(n)}}function Bp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Kp(){for(var t=window,e=aa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=aa(t.document)}return e}function Kc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hy(t){var e=Kp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bp(n.ownerDocument.documentElement,n)){if(r!==null&&Kc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Tf(n,s);var a=Tf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Gy=bn&&"documentMode"in document&&11>=document.documentMode,li=null,Uu=null,vs=null,Mu=!1;function Nf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||li==null||li!==aa(r)||(r=li,"selectionStart"in r&&Kc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Rs(vs,r)||(vs=r,r=pa(Uu,"onSelect"),0<r.length&&(e=new zc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function Do(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},Gl={},qp={};bn&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Ma(t){if(Gl[t])return Gl[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in qp)return Gl[t]=e[n];return t}var Wp=Ma("animationend"),Vp=Ma("animationiteration"),Hp=Ma("animationstart"),Gp=Ma("transitionend"),Qp=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){Qp.set(t,e),Ur(e,[t])}for(var Ql=0;Ql<Rf.length;Ql++){var Jl=Rf[Ql],Qy=Jl.toLowerCase(),Jy=Jl[0].toUpperCase()+Jl.slice(1);rr(Qy,"on"+Jy)}rr(Wp,"onAnimationEnd");rr(Vp,"onAnimationIteration");rr(Hp,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(Gp,"onTransitionEnd");Si("onMouseEnter",["mouseout","mouseover"]);Si("onMouseLeave",["mouseout","mouseover"]);Si("onPointerEnter",["pointerout","pointerover"]);Si("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yy=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function Af(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Qg(r,e,void 0,t),t.currentTarget=null}function Jp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==s&&i.isPropagationStopped())break e;Af(i,u,p),s=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==s&&i.isPropagationStopped())break e;Af(i,u,p),s=d}}}if(ua)throw t=Iu,ua=!1,Iu=null,t}function Ne(t,e){var n=e[qu];n===void 0&&(n=e[qu]=new Set);var r=t+"__bubble";n.has(r)||(Yp(e,t,2,!1),n.add(r))}function Yl(t,e,n){var r=0;e&&(r|=4),Yp(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function As(t){if(!t[$o]){t[$o]=!0,ip.forEach(function(n){n!=="selectionchange"&&(Yy.has(n)||Yl(n,!1,t),Yl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Yl("selectionchange",!1,e))}}function Yp(t,e,n,r){switch(Ip(e)){case 1:var i=dy;break;case 4:i=fy;break;default:i=Uc}n=i.bind(null,e,n,t),i=void 0,!Au||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=jr(u),a===null)return;if(d=a.tag,d===5||d===6){r=s=a;continue e}u=u.parentNode}}r=r.return}_p(function(){var p=s,m=Ic(n),w=[];e:{var _=Qp.get(t);if(_!==void 0){var P=zc,L=t;switch(t){case"keypress":if(Xo(n)===0)break e;case"keydown":case"keyup":P=Cy;break;case"focusin":L="focus",P=Wl;break;case"focusout":L="blur",P=Wl;break;case"beforeblur":case"afterblur":P=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=my;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Ty;break;case Wp:case Vp:case Hp:P=yy;break;case Gp:P=Ry;break;case"scroll":P=hy;break;case"wheel":P=Iy;break;case"copy":case"cut":case"paste":P=_y;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=xf}var N=(e&4)!==0,B=!N&&t==="scroll",S=N?_!==null?_+"Capture":null:_;N=[];for(var y=p,x;y!==null;){x=y;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,S!==null&&(M=Cs(y,S),M!=null&&N.push(Is(y,M,x)))),B)break;y=y.return}0<N.length&&(_=new P(_,L,null,n,m),w.push({event:_,listeners:N}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",_&&n!==Nu&&(L=n.relatedTarget||n.fromElement)&&(jr(L)||L[kn]))break e;if((P||_)&&(_=m.window===m?m:(_=m.ownerDocument)?_.defaultView||_.parentWindow:window,P?(L=n.relatedTarget||n.toElement,P=p,L=L?jr(L):null,L!==null&&(B=Mr(L),L!==B||L.tag!==5&&L.tag!==6)&&(L=null)):(P=null,L=p),P!==L)){if(N=bf,M="onMouseLeave",S="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=xf,M="onPointerLeave",S="onPointerEnter",y="pointer"),B=P==null?_:ci(P),x=L==null?_:ci(L),_=new N(M,y+"leave",P,n,m),_.target=B,_.relatedTarget=x,M=null,jr(m)===p&&(N=new N(S,y+"enter",L,n,m),N.target=x,N.relatedTarget=B,M=N),B=M,P&&L)t:{for(N=P,S=L,y=0,x=N;x;x=Qr(x))y++;for(x=0,M=S;M;M=Qr(M))x++;for(;0<y-x;)N=Qr(N),y--;for(;0<x-y;)S=Qr(S),x--;for(;y--;){if(N===S||S!==null&&N===S.alternate)break t;N=Qr(N),S=Qr(S)}N=null}else N=null;P!==null&&If(w,_,P,N,!1),L!==null&&B!==null&&If(w,B,L,N,!0)}}e:{if(_=p?ci(p):window,P=_.nodeName&&_.nodeName.toLowerCase(),P==="select"||P==="input"&&_.type==="file")var K=Fy;else if(jf(_))if(zp)K=Wy;else{K=Ky;var q=By}else(P=_.nodeName)&&P.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(K=qy);if(K&&(K=K(t,p))){Mp(w,K,n,m);break e}q&&q(t,_,p),t==="focusout"&&(q=_._wrapperState)&&q.controlled&&_.type==="number"&&ju(_,"number",_.value)}switch(q=p?ci(p):window,t){case"focusin":(jf(q)||q.contentEditable==="true")&&(li=q,Uu=p,vs=null);break;case"focusout":vs=Uu=li=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,Nf(w,n,m);break;case"selectionchange":if(Gy)break;case"keydown":case"keyup":Nf(w,n,m)}var V;if(Bc)e:{switch(t){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else ai?Lp(t,n)&&(W="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(W="onCompositionStart");W&&($p&&n.locale!=="ko"&&(ai||W!=="onCompositionStart"?W==="onCompositionEnd"&&ai&&(V=Dp()):(qn=m,Mc="value"in qn?qn.value:qn.textContent,ai=!0)),q=pa(p,W),0<q.length&&(W=new kf(W,t,null,n,m),w.push({event:W,listeners:q}),V?W.data=V:(V=Up(n),V!==null&&(W.data=V)))),(V=$y?Ly(t,n):Uy(t,n))&&(p=pa(p,"onBeforeInput"),0<p.length&&(m=new kf("onBeforeInput","beforeinput",null,n,m),w.push({event:m,listeners:p}),m.data=V))}Jp(w,e)})}function Is(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cs(t,n),s!=null&&r.unshift(Is(t,s,i)),s=Cs(t,e),s!=null&&r.push(Is(t,s,i))),t=t.return}return r}function Qr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function If(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&p!==null&&(u=p,i?(d=Cs(n,s),d!=null&&a.unshift(Is(n,d,u))):i||(d=Cs(n,s),d!=null&&a.push(Is(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Xy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(Xy,`
`).replace(Zy,"")}function Lo(t,e,n){if(e=Df(e),Df(t)!==e&&n)throw Error(G(425))}function ma(){}var zu=null,Fu=null;function Bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ku=typeof setTimeout=="function"?setTimeout:void 0,e0=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,t0=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(t){return $f.resolve(null).then(t).catch(n0)}:Ku;function n0(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ts(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ts(e)}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Di=Math.random().toString(36).slice(2),cn="__reactFiber$"+Di,Ds="__reactProps$"+Di,kn="__reactContainer$"+Di,qu="__reactEvents$"+Di,r0="__reactListeners$"+Di,i0="__reactHandles$"+Di;function jr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lf(t);t!==null;){if(n=t[cn])return n;t=Lf(t)}return e}t=n,n=t.parentNode}return null}function Hs(t){return t=t[cn]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function za(t){return t[Ds]||null}var Wu=[],di=-1;function ir(t){return{current:t}}function Re(t){0>di||(t.current=Wu[di],Wu[di]=null,di--)}function Pe(t,e){di++,Wu[di]=t.current,t.current=e}var nr={},ht=ir(nr),Et=ir(!1),Ar=nr;function Ei(t,e){var n=t.type.contextTypes;if(!n)return nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function va(){Re(Et),Re(ht)}function Uf(t,e,n){if(ht.current!==nr)throw Error(G(168));Pe(ht,e),Pe(Et,n)}function Xp(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,Bg(t)||"Unknown",i));return Le({},n,r)}function ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,Ar=ht.current,Pe(ht,t),Pe(Et,Et.current),!0}function Mf(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=Xp(t,e,Ar),r.__reactInternalMemoizedMergedChildContext=t,Re(Et),Re(ht),Pe(ht,t)):Re(Et),Pe(Et,n)}var gn=null,Fa=!1,eu=!1;function Zp(t){gn===null?gn=[t]:gn.push(t)}function s0(t){Fa=!0,Zp(t)}function sr(){if(!eu&&gn!==null){eu=!0;var t=0,e=Ee;try{var n=gn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gn=null,Fa=!1}catch(i){throw gn!==null&&(gn=gn.slice(t+1)),Sp(Dc,sr),i}finally{Ee=e,eu=!1}}return null}var fi=[],hi=0,ya=null,wa=0,Mt=[],zt=0,Ir=null,yn=1,wn="";function _r(t,e){fi[hi++]=wa,fi[hi++]=ya,ya=t,wa=e}function em(t,e,n){Mt[zt++]=yn,Mt[zt++]=wn,Mt[zt++]=Ir,Ir=t;var r=yn;t=wn;var i=32-Zt(r)-1;r&=~(1<<i),n+=1;var s=32-Zt(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,yn=1<<32-Zt(e)+i|n<<i|r,wn=s+t}else yn=1<<s|n<<i|r,wn=t}function qc(t){t.return!==null&&(_r(t,1),em(t,1,0))}function Wc(t){for(;t===ya;)ya=fi[--hi],fi[hi]=null,wa=fi[--hi],fi[hi]=null;for(;t===Ir;)Ir=Mt[--zt],Mt[zt]=null,wn=Mt[--zt],Mt[zt]=null,yn=Mt[--zt],Mt[zt]=null}var At=null,Rt=null,Ie=!1,Yt=null;function tm(t,e){var n=Ft(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,Rt=Jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ir!==null?{id:yn,overflow:wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ft(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,Rt=null,!0):!1;default:return!1}}function Vu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Ie){var e=Rt;if(e){var n=e;if(!zf(t,e)){if(Vu(t))throw Error(G(418));e=Jn(n.nextSibling);var r=At;e&&zf(t,e)?tm(r,n):(t.flags=t.flags&-4097|2,Ie=!1,At=t)}}else{if(Vu(t))throw Error(G(418));t.flags=t.flags&-4097|2,Ie=!1,At=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Uo(t){if(t!==At)return!1;if(!Ie)return Ff(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bu(t.type,t.memoizedProps)),e&&(e=Rt)){if(Vu(t))throw nm(),Error(G(418));for(;e;)tm(t,e),e=Jn(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=At?Jn(t.stateNode.nextSibling):null;return!0}function nm(){for(var t=Rt;t;)t=Jn(t.nextSibling)}function ji(){Rt=At=null,Ie=!1}function Vc(t){Yt===null?Yt=[t]:Yt.push(t)}var o0=En.ReactCurrentBatchConfig;function rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=i.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Mo(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function rm(t){function e(S,y){if(t){var x=S.deletions;x===null?(S.deletions=[y],S.flags|=16):x.push(y)}}function n(S,y){if(!t)return null;for(;y!==null;)e(S,y),y=y.sibling;return null}function r(S,y){for(S=new Map;y!==null;)y.key!==null?S.set(y.key,y):S.set(y.index,y),y=y.sibling;return S}function i(S,y){return S=er(S,y),S.index=0,S.sibling=null,S}function s(S,y,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<y?(S.flags|=2,y):x):(S.flags|=2,y)):(S.flags|=1048576,y)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,y,x,M){return y===null||y.tag!==6?(y=au(x,S.mode,M),y.return=S,y):(y=i(y,x),y.return=S,y)}function d(S,y,x,M){var K=x.type;return K===oi?m(S,y,x.props.children,M,x.key):y!==null&&(y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Mn&&Bf(K)===y.type)?(M=i(y,x.props),M.ref=rs(S,y,x),M.return=S,M):(M=sa(x.type,x.key,x.props,null,S.mode,M),M.ref=rs(S,y,x),M.return=S,M)}function p(S,y,x,M){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=lu(x,S.mode,M),y.return=S,y):(y=i(y,x.children||[]),y.return=S,y)}function m(S,y,x,M,K){return y===null||y.tag!==7?(y=Nr(x,S.mode,M,K),y.return=S,y):(y=i(y,x),y.return=S,y)}function w(S,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=au(""+y,S.mode,x),y.return=S,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Oo:return x=sa(y.type,y.key,y.props,null,S.mode,x),x.ref=rs(S,null,y),x.return=S,x;case si:return y=lu(y,S.mode,x),y.return=S,y;case Mn:var M=y._init;return w(S,M(y._payload),x)}if(ls(y)||Xi(y))return y=Nr(y,S.mode,x,null),y.return=S,y;Mo(S,y)}return null}function _(S,y,x,M){var K=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return K!==null?null:u(S,y,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Oo:return x.key===K?d(S,y,x,M):null;case si:return x.key===K?p(S,y,x,M):null;case Mn:return K=x._init,_(S,y,K(x._payload),M)}if(ls(x)||Xi(x))return K!==null?null:m(S,y,x,M,null);Mo(S,x)}return null}function P(S,y,x,M,K){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(x)||null,u(y,S,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Oo:return S=S.get(M.key===null?x:M.key)||null,d(y,S,M,K);case si:return S=S.get(M.key===null?x:M.key)||null,p(y,S,M,K);case Mn:var q=M._init;return P(S,y,x,q(M._payload),K)}if(ls(M)||Xi(M))return S=S.get(x)||null,m(y,S,M,K,null);Mo(y,M)}return null}function L(S,y,x,M){for(var K=null,q=null,V=y,W=y=0,se=null;V!==null&&W<x.length;W++){V.index>W?(se=V,V=null):se=V.sibling;var te=_(S,V,x[W],M);if(te===null){V===null&&(V=se);break}t&&V&&te.alternate===null&&e(S,V),y=s(te,y,W),q===null?K=te:q.sibling=te,q=te,V=se}if(W===x.length)return n(S,V),Ie&&_r(S,W),K;if(V===null){for(;W<x.length;W++)V=w(S,x[W],M),V!==null&&(y=s(V,y,W),q===null?K=V:q.sibling=V,q=V);return Ie&&_r(S,W),K}for(V=r(S,V);W<x.length;W++)se=P(V,S,W,x[W],M),se!==null&&(t&&se.alternate!==null&&V.delete(se.key===null?W:se.key),y=s(se,y,W),q===null?K=se:q.sibling=se,q=se);return t&&V.forEach(function(Ce){return e(S,Ce)}),Ie&&_r(S,W),K}function N(S,y,x,M){var K=Xi(x);if(typeof K!="function")throw Error(G(150));if(x=K.call(x),x==null)throw Error(G(151));for(var q=K=null,V=y,W=y=0,se=null,te=x.next();V!==null&&!te.done;W++,te=x.next()){V.index>W?(se=V,V=null):se=V.sibling;var Ce=_(S,V,te.value,M);if(Ce===null){V===null&&(V=se);break}t&&V&&Ce.alternate===null&&e(S,V),y=s(Ce,y,W),q===null?K=Ce:q.sibling=Ce,q=Ce,V=se}if(te.done)return n(S,V),Ie&&_r(S,W),K;if(V===null){for(;!te.done;W++,te=x.next())te=w(S,te.value,M),te!==null&&(y=s(te,y,W),q===null?K=te:q.sibling=te,q=te);return Ie&&_r(S,W),K}for(V=r(S,V);!te.done;W++,te=x.next())te=P(V,S,W,te.value,M),te!==null&&(t&&te.alternate!==null&&V.delete(te.key===null?W:te.key),y=s(te,y,W),q===null?K=te:q.sibling=te,q=te);return t&&V.forEach(function(Ge){return e(S,Ge)}),Ie&&_r(S,W),K}function B(S,y,x,M){if(typeof x=="object"&&x!==null&&x.type===oi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Oo:e:{for(var K=x.key,q=y;q!==null;){if(q.key===K){if(K=x.type,K===oi){if(q.tag===7){n(S,q.sibling),y=i(q,x.props.children),y.return=S,S=y;break e}}else if(q.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Mn&&Bf(K)===q.type){n(S,q.sibling),y=i(q,x.props),y.ref=rs(S,q,x),y.return=S,S=y;break e}n(S,q);break}else e(S,q);q=q.sibling}x.type===oi?(y=Nr(x.props.children,S.mode,M,x.key),y.return=S,S=y):(M=sa(x.type,x.key,x.props,null,S.mode,M),M.ref=rs(S,y,x),M.return=S,S=M)}return a(S);case si:e:{for(q=x.key;y!==null;){if(y.key===q)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(S,y.sibling),y=i(y,x.children||[]),y.return=S,S=y;break e}else{n(S,y);break}else e(S,y);y=y.sibling}y=lu(x,S.mode,M),y.return=S,S=y}return a(S);case Mn:return q=x._init,B(S,y,q(x._payload),M)}if(ls(x))return L(S,y,x,M);if(Xi(x))return N(S,y,x,M);Mo(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(S,y.sibling),y=i(y,x),y.return=S,S=y):(n(S,y),y=au(x,S.mode,M),y.return=S,S=y),a(S)):n(S,y)}return B}var Ci=rm(!0),im=rm(!1),_a=ir(null),ba=null,pi=null,Hc=null;function Gc(){Hc=pi=ba=null}function Qc(t){var e=_a.current;Re(_a),t._currentValue=e}function Gu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){ba=t,Hc=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(Hc!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(ba===null)throw Error(G(308));pi=t,ba.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var Cr=null;function Jc(t){Cr===null?Cr=[t]:Cr.push(t)}function sm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Jc(e)):(n.next=i.next,i.next=n),e.interleaved=n,xn(t,r)}function xn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zn=!1;function Yc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _n(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xn(t,n)}return i=r.interleaved,i===null?(e.next=e,Jc(r)):(e.next=i.next,i.next=e),r.interleaved=e,xn(t,n)}function Zo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}function Kf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ka(t,e,n,r){var i=t.updateQueue;zn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?s=p:a.next=p,a=d;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=p:u.next=p,m.lastBaseUpdate=d))}if(s!==null){var w=i.baseState;a=0,m=p=d=null,u=s;do{var _=u.lane,P=u.eventTime;if((r&_)===_){m!==null&&(m=m.next={eventTime:P,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var L=t,N=u;switch(_=e,P=n,N.tag){case 1:if(L=N.payload,typeof L=="function"){w=L.call(P,w,_);break e}w=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=N.payload,_=typeof L=="function"?L.call(P,w,_):L,_==null)break e;w=Le({},w,_);break e;case 2:zn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[u]:_.push(u))}else P={eventTime:P,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(p=m=P,d=w):m=m.next=P,a|=_;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;_=u,u=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(m===null&&(d=w),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$r|=a,t.lanes=a,t.memoizedState=w}}function qf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var Gs={},fn=ir(Gs),$s=ir(Gs),Ls=ir(Gs);function Or(t){if(t===Gs)throw Error(G(174));return t}function Xc(t,e){switch(Pe(Ls,e),Pe($s,t),Pe(fn,Gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ou(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ou(e,t)}Re(fn),Pe(fn,e)}function Oi(){Re(fn),Re($s),Re(Ls)}function am(t){Or(Ls.current);var e=Or(fn.current),n=Ou(e,t.type);e!==n&&(Pe($s,t),Pe(fn,n))}function Zc(t){$s.current===t&&(Re(fn),Re($s))}var De=ir(0);function xa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tu=[];function ed(){for(var t=0;t<tu.length;t++)tu[t]._workInProgressVersionPrimary=null;tu.length=0}var ea=En.ReactCurrentDispatcher,nu=En.ReactCurrentBatchConfig,Dr=0,$e=null,Ye=null,tt=null,Sa=!1,gs=!1,Us=0,a0=0;function ct(){throw Error(G(321))}function td(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function nd(t,e,n,r,i,s){if(Dr=s,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ea.current=t===null||t.memoizedState===null?d0:f0,t=n(r,i),gs){s=0;do{if(gs=!1,Us=0,25<=s)throw Error(G(301));s+=1,tt=Ye=null,e.updateQueue=null,ea.current=h0,t=n(r,i)}while(gs)}if(ea.current=Ea,e=Ye!==null&&Ye.next!==null,Dr=0,tt=Ye=$e=null,Sa=!1,e)throw Error(G(300));return t}function rd(){var t=Us!==0;return Us=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?$e.memoizedState=tt=t:tt=tt.next=t,tt}function qt(){if(Ye===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=tt===null?$e.memoizedState:tt.next;if(e!==null)tt=e,Ye=t;else{if(t===null)throw Error(G(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},tt===null?$e.memoizedState=tt=t:tt=tt.next=t}return tt}function Ms(t,e){return typeof e=="function"?e(t):e}function ru(t){var e=qt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=a=null,d=null,p=s;do{var m=p.lane;if((Dr&m)===m)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var w={lane:m,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=w,a=r):d=d.next=w,$e.lanes|=m,$r|=m}p=p.next}while(p!==null&&p!==s);d===null?a=r:d.next=u,tn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,$e.lanes|=s,$r|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iu(t){var e=qt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);tn(s,e.memoizedState)||(St=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lm(){}function um(t,e){var n=$e,r=qt(),i=e(),s=!tn(r.memoizedState,i);if(s&&(r.memoizedState=i,St=!0),r=r.queue,id(fm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,zs(9,dm.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(G(349));Dr&30||cm(n,e,i)}return i}function cm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dm(t,e,n,r){e.value=n,e.getSnapshot=r,hm(e)&&pm(t)}function fm(t,e,n){return n(function(){hm(e)&&pm(t)})}function hm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function pm(t){var e=xn(t,1);e!==null&&en(e,t,1,-1)}function Wf(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=c0.bind(null,$e,t),[e.memoizedState,t]}function zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mm(){return qt().memoizedState}function ta(t,e,n,r){var i=ln();$e.flags|=t,i.memoizedState=zs(1|e,n,void 0,r===void 0?null:r)}function Ba(t,e,n,r){var i=qt();r=r===void 0?null:r;var s=void 0;if(Ye!==null){var a=Ye.memoizedState;if(s=a.destroy,r!==null&&td(r,a.deps)){i.memoizedState=zs(e,n,s,r);return}}$e.flags|=t,i.memoizedState=zs(1|e,n,s,r)}function Vf(t,e){return ta(8390656,8,t,e)}function id(t,e){return Ba(2048,8,t,e)}function vm(t,e){return Ba(4,2,t,e)}function gm(t,e){return Ba(4,4,t,e)}function ym(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wm(t,e,n){return n=n!=null?n.concat([t]):null,Ba(4,4,ym.bind(null,e,t),n)}function sd(){}function _m(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&td(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function bm(t,e){var n=qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&td(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function km(t,e,n){return Dr&21?(tn(n,e)||(n=Cp(),$e.lanes|=n,$r|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function l0(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=nu.transition;nu.transition={};try{t(!1),e()}finally{Ee=n,nu.transition=r}}function xm(){return qt().memoizedState}function u0(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sm(t))Em(e,n);else if(n=sm(t,e,n,r),n!==null){var i=vt();en(n,t,r,i),jm(n,e,r)}}function c0(t,e,n){var r=Zn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sm(t))Em(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(i.hasEagerState=!0,i.eagerState=u,tn(u,a)){var d=e.interleaved;d===null?(i.next=i,Jc(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=sm(t,e,i,r),n!==null&&(i=vt(),en(n,t,r,i),jm(n,e,r))}}function Sm(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function Em(t,e){gs=Sa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jm(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$c(t,n)}}var Ea={readContext:Kt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},d0={readContext:Kt,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:Vf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ta(4194308,4,ym.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ta(4194308,4,t,e)},useInsertionEffect:function(t,e){return ta(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u0.bind(null,$e,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:Wf,useDebugValue:sd,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=Wf(!1),e=t[0];return t=l0.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=$e,i=ln();if(Ie){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),nt===null)throw Error(G(349));Dr&30||cm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vf(fm.bind(null,r,s,t),[t]),r.flags|=2048,zs(9,dm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ln(),e=nt.identifierPrefix;if(Ie){var n=wn,r=yn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Us++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f0={readContext:Kt,useCallback:_m,useContext:Kt,useEffect:id,useImperativeHandle:wm,useInsertionEffect:vm,useLayoutEffect:gm,useMemo:bm,useReducer:ru,useRef:mm,useState:function(){return ru(Ms)},useDebugValue:sd,useDeferredValue:function(t){var e=qt();return km(e,Ye.memoizedState,t)},useTransition:function(){var t=ru(Ms)[0],e=qt().memoizedState;return[t,e]},useMutableSource:lm,useSyncExternalStore:um,useId:xm,unstable_isNewReconciler:!1},h0={readContext:Kt,useCallback:_m,useContext:Kt,useEffect:id,useImperativeHandle:wm,useInsertionEffect:vm,useLayoutEffect:gm,useMemo:bm,useReducer:iu,useRef:mm,useState:function(){return iu(Ms)},useDebugValue:sd,useDeferredValue:function(t){var e=qt();return Ye===null?e.memoizedState=t:km(e,Ye.memoizedState,t)},useTransition:function(){var t=iu(Ms)[0],e=qt().memoizedState;return[t,e]},useMutableSource:lm,useSyncExternalStore:um,useId:xm,unstable_isNewReconciler:!1};function Gt(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ka={isMounted:function(t){return(t=t._reactInternals)?Mr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),i=Zn(t),s=_n(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(en(e,t,i,r),Zo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),i=Zn(t),s=_n(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yn(t,s,i),e!==null&&(en(e,t,i,r),Zo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Zn(t),i=_n(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yn(t,i,r),e!==null&&(en(e,t,r,n),Zo(e,t,r))}};function Hf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Rs(n,r)||!Rs(i,s):!0}function Cm(t,e,n){var r=!1,i=nr,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(i=jt(e)?Ar:ht.current,r=e.contextTypes,s=(r=r!=null)?Ei(t,i):nr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ka,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Gf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ka.enqueueReplaceState(e,e.state,null)}function Ju(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Yc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Kt(s):(s=jt(e)?Ar:ht.current,i.context=Ei(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ka.enqueueReplaceState(i,i.state,null),ka(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=Fg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p0=typeof WeakMap=="function"?WeakMap:Map;function Om(t,e,n){n=_n(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ca||(Ca=!0,ac=r),Yu(t,e)},n}function Pm(t,e,n){n=_n(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yu(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Qf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=O0.bind(null,t,e,n),e.then(t,t))}function Jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_n(-1,1),e.tag=2,Yn(n,e,1))),n.lanes|=1),t)}var m0=En.ReactCurrentOwner,St=!1;function mt(t,e,n,r){e.child=t===null?im(e,null,n,r):Ci(e,t.child,n,r)}function Xf(t,e,n,r,i){n=n.render;var s=e.ref;return bi(e,i),r=nd(t,e,n,r,s,i),n=rd(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Ie&&n&&qc(e),e.flags|=1,mt(t,e,r,i),e.child)}function Zf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Tm(t,e,s,r,i)):(t=sa(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rs,n(a,r)&&t.ref===e.ref)return Sn(t,e,i)}return e.flags|=1,t=er(s,r),t.ref=e.ref,t.return=e,e.child=t}function Tm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Rs(s,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Sn(t,e,i)}return Xu(t,e,n,r,i)}function Nm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(vi,Nt),Nt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(vi,Nt),Nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(vi,Nt),Nt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(vi,Nt),Nt|=r;return mt(t,e,i,n),e.child}function Rm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xu(t,e,n,r,i){var s=jt(n)?Ar:ht.current;return s=Ei(e,s),bi(e,i),n=nd(t,e,n,r,s,i),r=rd(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sn(t,e,i)):(Ie&&r&&qc(e),e.flags|=1,mt(t,e,n,i),e.child)}function eh(t,e,n,r,i){if(jt(n)){var s=!0;ga(e)}else s=!1;if(bi(e,i),e.stateNode===null)na(t,e),Cm(e,n,r),Ju(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Kt(p):(p=jt(n)?Ar:ht.current,p=Ei(e,p));var m=n.getDerivedStateFromProps,w=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==p)&&Gf(e,a,r,p),zn=!1;var _=e.memoizedState;a.state=_,ka(e,r,a,i),d=e.memoizedState,u!==r||_!==d||Et.current||zn?(typeof m=="function"&&(Qu(e,n,m,r),d=e.memoizedState),(u=zn||Hf(e,n,u,r,_,d,p))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=p,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,om(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Gt(e.type,u),a.props=p,w=e.pendingProps,_=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Kt(d):(d=jt(n)?Ar:ht.current,d=Ei(e,d));var P=n.getDerivedStateFromProps;(m=typeof P=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==w||_!==d)&&Gf(e,a,r,d),zn=!1,_=e.memoizedState,a.state=_,ka(e,r,a,i);var L=e.memoizedState;u!==w||_!==L||Et.current||zn?(typeof P=="function"&&(Qu(e,n,P,r),L=e.memoizedState),(p=zn||Hf(e,n,p,r,_,L,d)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,L,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,L,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=L),a.props=r,a.state=L,a.context=d,r=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Zu(t,e,n,r,s,i)}function Zu(t,e,n,r,i,s){Rm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Mf(e,n,!1),Sn(t,e,s);r=e.stateNode,m0.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ci(e,t.child,null,s),e.child=Ci(e,null,u,s)):mt(t,e,u,s),e.memoizedState=r.state,i&&Mf(e,n,!0),e.child}function Am(t){var e=t.stateNode;e.pendingContext?Uf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uf(t,e.context,!1),Xc(t,e.containerInfo)}function th(t,e,n,r,i){return ji(),Vc(i),e.flags|=256,mt(t,e,n,r),e.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Im(t,e,n){var r=e.pendingProps,i=De.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(De,i&1),t===null)return Hu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Va(a,r,0,null),t=Nr(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tc(n),e.memoizedState=ec,t):od(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return v0(t,e,a,r,u,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=er(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=er(u,s):(s=Nr(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?tc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=ec,r}return s=t.child,t=s.sibling,r=er(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function od(t,e){return e=Va({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zo(t,e,n,r){return r!==null&&Vc(r),Ci(e,t.child,null,n),t=od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function v0(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=su(Error(G(422))),zo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Va({mode:"visible",children:r.children},i,0,null),s=Nr(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ci(e,t.child,null,a),e.child.memoizedState=tc(a),e.memoizedState=ec,s);if(!(e.mode&1))return zo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(G(419)),r=su(s,r,void 0),zo(t,e,a,r)}if(u=(a&t.childLanes)!==0,St||u){if(r=nt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xn(t,i),en(r,t,i,-1))}return fd(),r=su(Error(G(421))),zo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=P0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rt=Jn(i.nextSibling),At=e,Ie=!0,Yt=null,t!==null&&(Mt[zt++]=yn,Mt[zt++]=wn,Mt[zt++]=Ir,yn=t.id,wn=t.overflow,Ir=e),e=od(e,r.children),e.flags|=4096,e)}function nh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gu(t.return,e,n)}function ou(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Dm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nh(t,n,e);else if(t.tag===19)nh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ou(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ou(e,!0,n,null,s);break;case"together":ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function na(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$r|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g0(t,e,n){switch(e.tag){case 3:Am(e),ji();break;case 5:am(e);break;case 1:jt(e.type)&&ga(e);break;case 4:Xc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(_a,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?Im(t,e,n):(Pe(De,De.current&1),t=Sn(t,e,n),t!==null?t.sibling:null);Pe(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Dm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,Nm(t,e,n)}return Sn(t,e,n)}var $m,nc,Lm,Um;$m=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nc=function(){};Lm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Or(fn.current);var s=null;switch(n){case"input":i=Su(t,i),r=Su(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=Cu(t,i),r=Cu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ma)}Pu(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var u=i[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Es.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var d=r[p];if(u=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Es.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ne("scroll",t),s||u===d||(s=[])):(s=s||[]).push(p,d))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};Um=function(t,e,n,r){n!==r&&(e.flags|=4)};function is(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y0(t,e,n){var r=e.pendingProps;switch(Wc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return jt(e.type)&&va(),dt(e),null;case 3:return r=e.stateNode,Oi(),Re(Et),Re(ht),ed(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yt!==null&&(cc(Yt),Yt=null))),nc(t,e),dt(e),null;case 5:Zc(e);var i=Or(Ls.current);if(n=e.type,t!==null&&e.stateNode!=null)Lm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return dt(e),null}if(t=Or(fn.current),Uo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cn]=e,r[Ds]=s,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)Ne(cs[i],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":df(r,s),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ne("invalid",r);break;case"textarea":hf(r,s),Ne("invalid",r)}Pu(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,u,t),i=["children",""+u]):Es.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Po(r),ff(r,s,!0);break;case"textarea":Po(r),pf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ma)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[cn]=e,t[Ds]=r,$m(t,e,!1,!1),e.stateNode=t;e:{switch(a=Tu(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),i=r;break;case"iframe":case"object":case"embed":Ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)Ne(cs[i],t);i=r;break;case"source":Ne("error",t),i=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),i=r;break;case"details":Ne("toggle",t),i=r;break;case"input":df(t,r),i=Su(t,r),Ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":hf(t,r),i=Cu(t,r),Ne("invalid",t);break;default:i=r}Pu(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?mp(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&hp(t,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&js(t,d):typeof d=="number"&&js(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Es.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Ne("scroll",t):d!=null&&Tc(t,s,d,a))}switch(n){case"input":Po(t),ff(t,r,!1);break;case"textarea":Po(t),pf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+tr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?gi(t,!!r.multiple,s,!1):r.defaultValue!=null&&gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ma)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)Um(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Or(Ls.current),Or(fn.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(s=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Lo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return dt(e),null;case 13:if(Re(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&Rt!==null&&e.mode&1&&!(e.flags&128))nm(),ji(),e.flags|=98560,s=!1;else if(s=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(G(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(G(317));s[cn]=e}else ji(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else Yt!==null&&(cc(Yt),Yt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Xe===0&&(Xe=3):fd())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return Oi(),nc(t,e),t===null&&As(e.stateNode.containerInfo),dt(e),null;case 10:return Qc(e.type._context),dt(e),null;case 17:return jt(e.type)&&va(),dt(e),null;case 19:if(Re(De),s=e.memoizedState,s===null)return dt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)is(s,!1);else{if(Xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xa(t),a!==null){for(e.flags|=128,is(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&qe()>Ti&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304)}else{if(!r)if(t=xa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ie)return dt(e),null}else 2*qe()-s.renderingStartTime>Ti&&n!==1073741824&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qe(),e.sibling=null,n=De.current,Pe(De,r?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return dd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function w0(t,e){switch(Wc(e),e.tag){case 1:return jt(e.type)&&va(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Oi(),Re(Et),Re(ht),ed(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zc(e),null;case 13:if(Re(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));ji()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(De),null;case 4:return Oi(),null;case 10:return Qc(e.type._context),null;case 22:case 23:return dd(),null;case 24:return null;default:return null}}var Fo=!1,ft=!1,_0=typeof WeakSet=="function"?WeakSet:Set,ie=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function rc(t,e,n){try{n()}catch(r){ze(t,e,r)}}var rh=!1;function b0(t,e){if(zu=fa,t=Kp(),Kc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,m=0,w=t,_=null;t:for(;;){for(var P;w!==n||i!==0&&w.nodeType!==3||(u=a+i),w!==s||r!==0&&w.nodeType!==3||(d=a+r),w.nodeType===3&&(a+=w.nodeValue.length),(P=w.firstChild)!==null;)_=w,w=P;for(;;){if(w===t)break t;if(_===n&&++p===i&&(u=a),_===s&&++m===r&&(d=a),(P=w.nextSibling)!==null)break;w=_,_=w.parentNode}w=P}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:t,selectionRange:n},fa=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var N=L.memoizedProps,B=L.memoizedState,S=e.stateNode,y=S.getSnapshotBeforeUpdate(e.elementType===e.type?N:Gt(e.type,N),B);S.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(M){ze(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return L=rh,rh=!1,L}function ys(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rc(e,n,s)}i=i.next}while(i!==r)}}function qa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ic(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mm(t){var e=t.alternate;e!==null&&(t.alternate=null,Mm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[Ds],delete e[qu],delete e[r0],delete e[i0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zm(t){return t.tag===5||t.tag===3||t.tag===4}function ih(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ma));else if(r!==4&&(t=t.child,t!==null))for(sc(t,e,n),t=t.sibling;t!==null;)sc(t,e,n),t=t.sibling}function oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}var it=null,Qt=!1;function Dn(t,e,n){for(n=n.child;n!==null;)Fm(t,e,n),n=n.sibling}function Fm(t,e,n){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount($a,n)}catch{}switch(n.tag){case 5:ft||mi(n,e);case 6:var r=it,i=Qt;it=null,Dn(t,e,n),it=r,Qt=i,it!==null&&(Qt?(t=it,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):it.removeChild(n.stateNode));break;case 18:it!==null&&(Qt?(t=it,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),Ts(t)):Zl(it,n.stateNode));break;case 4:r=it,i=Qt,it=n.stateNode.containerInfo,Qt=!0,Dn(t,e,n),it=r,Qt=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&rc(n,e,a),i=i.next}while(i!==r)}Dn(t,e,n);break;case 1:if(!ft&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ze(n,e,u)}Dn(t,e,n);break;case 21:Dn(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Dn(t,e,n),ft=r):Dn(t,e,n);break;default:Dn(t,e,n)}}function sh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _0),e.forEach(function(r){var i=T0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Vt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:it=u.stateNode,Qt=!1;break e;case 3:it=u.stateNode.containerInfo,Qt=!0;break e;case 4:it=u.stateNode.containerInfo,Qt=!0;break e}u=u.return}if(it===null)throw Error(G(160));Fm(s,a,i),it=null,Qt=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){ze(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bm(e,t),e=e.sibling}function Bm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vt(e,t),an(t),r&4){try{ys(3,t,t.return),qa(3,t)}catch(N){ze(t,t.return,N)}try{ys(5,t,t.return)}catch(N){ze(t,t.return,N)}}break;case 1:Vt(e,t),an(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(Vt(e,t),an(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var i=t.stateNode;try{js(i,"")}catch(N){ze(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&cp(i,s),Tu(u,a);var p=Tu(u,s);for(a=0;a<d.length;a+=2){var m=d[a],w=d[a+1];m==="style"?mp(i,w):m==="dangerouslySetInnerHTML"?hp(i,w):m==="children"?js(i,w):Tc(i,m,w,p)}switch(u){case"input":Eu(i,s);break;case"textarea":dp(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var P=s.value;P!=null?gi(i,!!s.multiple,P,!1):_!==!!s.multiple&&(s.defaultValue!=null?gi(i,!!s.multiple,s.defaultValue,!0):gi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ds]=s}catch(N){ze(t,t.return,N)}}break;case 6:if(Vt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){ze(t,t.return,N)}}break;case 3:if(Vt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ts(e.containerInfo)}catch(N){ze(t,t.return,N)}break;case 4:Vt(e,t),an(t);break;case 13:Vt(e,t),an(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ud=qe())),r&4&&sh(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(p=ft)||m,Vt(e,t),ft=p):Vt(e,t),an(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!m&&t.mode&1)for(ie=t,m=t.child;m!==null;){for(w=ie=m;ie!==null;){switch(_=ie,P=_.child,_.tag){case 0:case 11:case 14:case 15:ys(4,_,_.return);break;case 1:mi(_,_.return);var L=_.stateNode;if(typeof L.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(N){ze(r,n,N)}}break;case 5:mi(_,_.return);break;case 22:if(_.memoizedState!==null){ah(w);continue}}P!==null?(P.return=_,ie=P):ah(w)}m=m.sibling}e:for(m=null,w=t;;){if(w.tag===5){if(m===null){m=w;try{i=w.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=w.stateNode,d=w.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=pp("display",a))}catch(N){ze(t,t.return,N)}}}else if(w.tag===6){if(m===null)try{w.stateNode.nodeValue=p?"":w.memoizedProps}catch(N){ze(t,t.return,N)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;m===w&&(m=null),w=w.return}m===w&&(m=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Vt(e,t),an(t),r&4&&sh(t);break;case 21:break;default:Vt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zm(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(js(i,""),r.flags&=-33);var s=ih(t);oc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=ih(t);sc(t,u,a);break;default:throw Error(G(161))}}catch(d){ze(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k0(t,e,n){ie=t,Km(t)}function Km(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Fo;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||ft;u=Fo;var p=ft;if(Fo=a,(ft=d)&&!p)for(ie=i;ie!==null;)a=ie,d=a.child,a.tag===22&&a.memoizedState!==null?lh(i):d!==null?(d.return=a,ie=d):lh(i);for(;s!==null;)ie=s,Km(s),s=s.sibling;ie=i,Fo=u,ft=p}oh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):oh(t)}}function oh(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||qa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qf(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qf(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var m=p.memoizedState;if(m!==null){var w=m.dehydrated;w!==null&&Ts(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ft||e.flags&512&&ic(e)}catch(_){ze(e,e.return,_)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function ah(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function lh(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qa(4,e)}catch(d){ze(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){ze(e,i,d)}}var s=e.return;try{ic(e)}catch(d){ze(e,s,d)}break;case 5:var a=e.return;try{ic(e)}catch(d){ze(e,a,d)}}}catch(d){ze(e,e.return,d)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var x0=Math.ceil,ja=En.ReactCurrentDispatcher,ad=En.ReactCurrentOwner,Bt=En.ReactCurrentBatchConfig,ke=0,nt=null,He=null,st=0,Nt=0,vi=ir(0),Xe=0,Fs=null,$r=0,Wa=0,ld=0,ws=null,kt=null,ud=0,Ti=1/0,mn=null,Ca=!1,ac=null,Xn=null,Bo=!1,Wn=null,Oa=0,_s=0,lc=null,ra=-1,ia=0;function vt(){return ke&6?qe():ra!==-1?ra:ra=qe()}function Zn(t){return t.mode&1?ke&2&&st!==0?st&-st:o0.transition!==null?(ia===0&&(ia=Cp()),ia):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:Ip(t.type)),t):1}function en(t,e,n,r){if(50<_s)throw _s=0,lc=null,Error(G(185));Ws(t,n,r),(!(ke&2)||t!==nt)&&(t===nt&&(!(ke&2)&&(Wa|=n),Xe===4&&Bn(t,st)),Ct(t,r),n===1&&ke===0&&!(e.mode&1)&&(Ti=qe()+500,Fa&&sr()))}function Ct(t,e){var n=t.callbackNode;oy(t,e);var r=da(t,t===nt?st:0);if(r===0)n!==null&&gf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gf(n),e===1)t.tag===0?s0(uh.bind(null,t)):Zp(uh.bind(null,t)),t0(function(){!(ke&6)&&sr()}),n=null;else{switch(Op(r)){case 1:n=Dc;break;case 4:n=Ep;break;case 16:n=ca;break;case 536870912:n=jp;break;default:n=ca}n=Ym(n,qm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qm(t,e){if(ra=-1,ia=0,ke&6)throw Error(G(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=da(t,t===nt?st:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pa(t,r);else{e=r;var i=ke;ke|=2;var s=Vm();(nt!==t||st!==e)&&(mn=null,Ti=qe()+500,Tr(t,e));do try{j0();break}catch(u){Wm(t,u)}while(!0);Gc(),ja.current=s,ke=i,He!==null?e=0:(nt=null,st=0,e=Xe)}if(e!==0){if(e===2&&(i=Du(t),i!==0&&(r=i,e=uc(t,i))),e===1)throw n=Fs,Tr(t,0),Bn(t,r),Ct(t,qe()),n;if(e===6)Bn(t,r);else{if(i=t.current.alternate,!(r&30)&&!S0(i)&&(e=Pa(t,r),e===2&&(s=Du(t),s!==0&&(r=s,e=uc(t,s))),e===1))throw n=Fs,Tr(t,0),Bn(t,r),Ct(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:br(t,kt,mn);break;case 3:if(Bn(t,r),(r&130023424)===r&&(e=ud+500-qe(),10<e)){if(da(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ku(br.bind(null,t,kt,mn),e);break}br(t,kt,mn);break;case 4:if(Bn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Zt(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){t.timeoutHandle=Ku(br.bind(null,t,kt,mn),r);break}br(t,kt,mn);break;case 5:br(t,kt,mn);break;default:throw Error(G(329))}}}return Ct(t,qe()),t.callbackNode===n?qm.bind(null,t):null}function uc(t,e){var n=ws;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=Pa(t,e),t!==2&&(e=kt,kt=n,e!==null&&cc(e)),t}function cc(t){kt===null?kt=t:kt.push.apply(kt,t)}function S0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bn(t,e){for(e&=~ld,e&=~Wa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zt(e),r=1<<n;t[n]=-1,e&=~r}}function uh(t){if(ke&6)throw Error(G(327));ki();var e=da(t,0);if(!(e&1))return Ct(t,qe()),null;var n=Pa(t,e);if(t.tag!==0&&n===2){var r=Du(t);r!==0&&(e=r,n=uc(t,r))}if(n===1)throw n=Fs,Tr(t,0),Bn(t,e),Ct(t,qe()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,br(t,kt,mn),Ct(t,qe()),null}function cd(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ti=qe()+500,Fa&&sr())}}function Lr(t){Wn!==null&&Wn.tag===0&&!(ke&6)&&ki();var e=ke;ke|=1;var n=Bt.transition,r=Ee;try{if(Bt.transition=null,Ee=1,t)return t()}finally{Ee=r,Bt.transition=n,ke=e,!(ke&6)&&sr()}}function dd(){Nt=vi.current,Re(vi)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e0(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(Wc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&va();break;case 3:Oi(),Re(Et),Re(ht),ed();break;case 5:Zc(r);break;case 4:Oi();break;case 13:Re(De);break;case 19:Re(De);break;case 10:Qc(r.type._context);break;case 22:case 23:dd()}n=n.return}if(nt=t,He=t=er(t.current,null),st=Nt=e,Xe=0,Fs=null,ld=Wa=$r=0,kt=ws=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Cr=null}return t}function Wm(t,e){do{var n=He;try{if(Gc(),ea.current=Ea,Sa){for(var r=$e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Sa=!1}if(Dr=0,tt=Ye=$e=null,gs=!1,Us=0,ad.current=null,n===null||n.return===null){Xe=1,Fs=e,He=null;break}e:{var s=t,a=n.return,u=n,d=e;if(e=st,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,m=u,w=m.tag;if(!(m.mode&1)&&(w===0||w===11||w===15)){var _=m.alternate;_?(m.updateQueue=_.updateQueue,m.memoizedState=_.memoizedState,m.lanes=_.lanes):(m.updateQueue=null,m.memoizedState=null)}var P=Jf(a);if(P!==null){P.flags&=-257,Yf(P,a,u,s,e),P.mode&1&&Qf(s,p,e),e=P,d=p;var L=e.updateQueue;if(L===null){var N=new Set;N.add(d),e.updateQueue=N}else L.add(d);break e}else{if(!(e&1)){Qf(s,p,e),fd();break e}d=Error(G(426))}}else if(Ie&&u.mode&1){var B=Jf(a);if(B!==null){!(B.flags&65536)&&(B.flags|=256),Yf(B,a,u,s,e),Vc(Pi(d,u));break e}}s=d=Pi(d,u),Xe!==4&&(Xe=2),ws===null?ws=[s]:ws.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Om(s,d,e);Kf(s,S);break e;case 1:u=d;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Xn===null||!Xn.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Pm(s,u,e);Kf(s,M);break e}}s=s.return}while(s!==null)}Gm(n)}catch(K){e=K,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function Vm(){var t=ja.current;return ja.current=Ea,t===null?Ea:t}function fd(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),nt===null||!($r&268435455)&&!(Wa&268435455)||Bn(nt,st)}function Pa(t,e){var n=ke;ke|=2;var r=Vm();(nt!==t||st!==e)&&(mn=null,Tr(t,e));do try{E0();break}catch(i){Wm(t,i)}while(!0);if(Gc(),ke=n,ja.current=r,He!==null)throw Error(G(261));return nt=null,st=0,Xe}function E0(){for(;He!==null;)Hm(He)}function j0(){for(;He!==null&&!Yg();)Hm(He)}function Hm(t){var e=Jm(t.alternate,t,Nt);t.memoizedProps=t.pendingProps,e===null?Gm(t):He=e,ad.current=null}function Gm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w0(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xe=6,He=null;return}}else if(n=y0(n,e,Nt),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Xe===0&&(Xe=5)}function br(t,e,n){var r=Ee,i=Bt.transition;try{Bt.transition=null,Ee=1,C0(t,e,n,r)}finally{Bt.transition=i,Ee=r}return null}function C0(t,e,n,r){do ki();while(Wn!==null);if(ke&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ay(t,s),t===nt&&(He=nt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bo||(Bo=!0,Ym(ca,function(){return ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Bt.transition,Bt.transition=null;var a=Ee;Ee=1;var u=ke;ke|=4,ad.current=null,b0(t,n),Bm(n,t),Hy(Fu),fa=!!zu,Fu=zu=null,t.current=n,k0(n),Xg(),ke=u,Ee=a,Bt.transition=s}else t.current=n;if(Bo&&(Bo=!1,Wn=t,Oa=i),s=t.pendingLanes,s===0&&(Xn=null),ty(n.stateNode),Ct(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ca)throw Ca=!1,t=ac,ac=null,t;return Oa&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===lc?_s++:(_s=0,lc=t):_s=0,sr(),null}function ki(){if(Wn!==null){var t=Op(Oa),e=Bt.transition,n=Ee;try{if(Bt.transition=null,Ee=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,Oa=0,ke&6)throw Error(G(331));var i=ke;for(ke|=4,ie=t.current;ie!==null;){var s=ie,a=s.child;if(ie.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(ie=p;ie!==null;){var m=ie;switch(m.tag){case 0:case 11:case 15:ys(8,m,s)}var w=m.child;if(w!==null)w.return=m,ie=w;else for(;ie!==null;){m=ie;var _=m.sibling,P=m.return;if(Mm(m),m===p){ie=null;break}if(_!==null){_.return=P,ie=_;break}ie=P}}}var L=s.alternate;if(L!==null){var N=L.child;if(N!==null){L.child=null;do{var B=N.sibling;N.sibling=null,N=B}while(N!==null)}}ie=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ie=a;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ys(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ie=S;break e}ie=s.return}}var y=t.current;for(ie=y;ie!==null;){a=ie;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ie=x;else e:for(a=y;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:qa(9,u)}}catch(K){ze(u,u.return,K)}if(u===a){ie=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,ie=M;break e}ie=u.return}}if(ke=i,sr(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot($a,t)}catch{}r=!0}return r}finally{Ee=n,Bt.transition=e}}return!1}function ch(t,e,n){e=Pi(n,e),e=Om(t,e,1),t=Yn(t,e,1),e=vt(),t!==null&&(Ws(t,1,e),Ct(t,e))}function ze(t,e,n){if(t.tag===3)ch(t,t,n);else for(;e!==null;){if(e.tag===3){ch(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=Pi(n,t),t=Pm(e,t,1),e=Yn(e,t,1),t=vt(),e!==null&&(Ws(e,1,t),Ct(e,t));break}}e=e.return}}function O0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(st&n)===n&&(Xe===4||Xe===3&&(st&130023424)===st&&500>qe()-ud?Tr(t,0):ld|=n),Ct(t,e)}function Qm(t,e){e===0&&(t.mode&1?(e=Ro,Ro<<=1,!(Ro&130023424)&&(Ro=4194304)):e=1);var n=vt();t=xn(t,e),t!==null&&(Ws(t,e,n),Ct(t,n))}function P0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qm(t,n)}function T0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),Qm(t,n)}var Jm;Jm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,g0(t,e,n);St=!!(t.flags&131072)}else St=!1,Ie&&e.flags&1048576&&em(e,wa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;na(t,e),t=e.pendingProps;var i=Ei(e,ht.current);bi(e,n),i=nd(null,e,r,t,i,n);var s=rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(s=!0,ga(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yc(e),i.updater=Ka,e.stateNode=i,i._reactInternals=e,Ju(e,r,t,n),e=Zu(null,e,r,!0,s,n)):(e.tag=0,Ie&&s&&qc(e),mt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(na(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=R0(r),t=Gt(r,t),i){case 0:e=Xu(null,e,r,t,n);break e;case 1:e=eh(null,e,r,t,n);break e;case 11:e=Xf(null,e,r,t,n);break e;case 14:e=Zf(null,e,r,Gt(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Xu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),eh(t,e,r,i,n);case 3:e:{if(Am(e),t===null)throw Error(G(387));r=e.pendingProps,s=e.memoizedState,i=s.element,om(t,e),ka(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pi(Error(G(423)),e),e=th(t,e,r,n,i);break e}else if(r!==i){i=Pi(Error(G(424)),e),e=th(t,e,r,n,i);break e}else for(Rt=Jn(e.stateNode.containerInfo.firstChild),At=e,Ie=!0,Yt=null,n=im(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ji(),r===i){e=Sn(t,e,n);break e}mt(t,e,r,n)}e=e.child}return e;case 5:return am(e),t===null&&Hu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Bu(r,i)?a=null:s!==null&&Bu(r,s)&&(e.flags|=32),Rm(t,e),mt(t,e,a,n),e.child;case 6:return t===null&&Hu(e),null;case 13:return Im(t,e,n);case 4:return Xc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):mt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),Xf(t,e,r,i,n);case 7:return mt(t,e,e.pendingProps,n),e.child;case 8:return mt(t,e,e.pendingProps.children,n),e.child;case 12:return mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Pe(_a,r._currentValue),r._currentValue=a,s!==null)if(tn(s.value,a)){if(s.children===i.children&&!Et.current){e=Sn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=_n(-1,n&-n),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var m=p.pending;m===null?d.next=d:(d.next=m.next,m.next=d),p.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Gu(s.return,n,e),u.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(G(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Gu(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}mt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bi(e,n),i=Kt(i),r=r(i),e.flags|=1,mt(t,e,r,n),e.child;case 14:return r=e.type,i=Gt(r,e.pendingProps),i=Gt(r.type,i),Zf(t,e,r,i,n);case 15:return Tm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gt(r,i),na(t,e),e.tag=1,jt(r)?(t=!0,ga(e)):t=!1,bi(e,n),Cm(e,r,i),Ju(e,r,i,n),Zu(null,e,r,!0,t,n);case 19:return Dm(t,e,n);case 22:return Nm(t,e,n)}throw Error(G(156,e.tag))};function Ym(t,e){return Sp(t,e)}function N0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ft(t,e,n,r){return new N0(t,e,n,r)}function hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R0(t){if(typeof t=="function")return hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rc)return 11;if(t===Ac)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=Ft(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sa(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")hd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case oi:return Nr(n.children,i,s,e);case Nc:a=8,i|=8;break;case _u:return t=Ft(12,n,e,i|2),t.elementType=_u,t.lanes=s,t;case bu:return t=Ft(13,n,e,i),t.elementType=bu,t.lanes=s,t;case ku:return t=Ft(19,n,e,i),t.elementType=ku,t.lanes=s,t;case ap:return Va(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sp:a=10;break e;case op:a=9;break e;case Rc:a=11;break e;case Ac:a=14;break e;case Mn:a=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Ft(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nr(t,e,n,r){return t=Ft(7,t,r,e),t.lanes=n,t}function Va(t,e,n,r){return t=Ft(22,t,r,e),t.elementType=ap,t.lanes=n,t.stateNode={isHidden:!1},t}function au(t,e,n){return t=Ft(6,t,null,e),t.lanes=n,t}function lu(t,e,n){return e=Ft(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function A0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pd(t,e,n,r,i,s,a,u,d){return t=new A0(t,e,n,u,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ft(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yc(s),t}function I0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:si,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Xm(t){if(!t)return nr;t=t._reactInternals;e:{if(Mr(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(jt(n))return Xp(t,n,e)}return e}function Zm(t,e,n,r,i,s,a,u,d){return t=pd(n,r,!0,t,i,s,a,u,d),t.context=Xm(null),n=t.current,r=vt(),i=Zn(n),s=_n(r,i),s.callback=e??null,Yn(n,s,i),t.current.lanes=i,Ws(t,i,r),Ct(t,r),t}function Ha(t,e,n,r){var i=e.current,s=vt(),a=Zn(i);return n=Xm(n),e.context===null?e.context=n:e.pendingContext=n,e=_n(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yn(i,e,a),t!==null&&(en(t,i,a,s),Zo(t,i,a)),a}function Ta(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function md(t,e){dh(t,e),(t=t.alternate)&&dh(t,e)}function D0(){return null}var ev=typeof reportError=="function"?reportError:function(t){console.error(t)};function vd(t){this._internalRoot=t}Ga.prototype.render=vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Ha(t,e,null,null)};Ga.prototype.unmount=vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lr(function(){Ha(null,t,null,null)}),e[kn]=null}};function Ga(t){this._internalRoot=t}Ga.prototype.unstable_scheduleHydration=function(t){if(t){var e=Np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&Ap(t)}};function gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fh(){}function $0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=Ta(a);s.call(p)}}var a=Zm(e,r,t,0,null,!1,!1,"",fh);return t._reactRootContainer=a,t[kn]=a.current,As(t.nodeType===8?t.parentNode:t),Lr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var p=Ta(d);u.call(p)}}var d=pd(t,0,!1,null,null,!1,!1,"",fh);return t._reactRootContainer=d,t[kn]=d.current,As(t.nodeType===8?t.parentNode:t),Lr(function(){Ha(e,d,n,r)}),d}function Ja(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var u=i;i=function(){var d=Ta(a);u.call(d)}}Ha(e,a,t,i)}else a=$0(n,e,t,i,r);return Ta(a)}Pp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&($c(e,n|1),Ct(e,qe()),!(ke&6)&&(Ti=qe()+500,sr()))}break;case 13:Lr(function(){var r=xn(t,1);if(r!==null){var i=vt();en(r,t,1,i)}}),md(t,1)}};Lc=function(t){if(t.tag===13){var e=xn(t,134217728);if(e!==null){var n=vt();en(e,t,134217728,n)}md(t,134217728)}};Tp=function(t){if(t.tag===13){var e=Zn(t),n=xn(t,e);if(n!==null){var r=vt();en(n,t,e,r)}md(t,e)}};Np=function(){return Ee};Rp=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Ru=function(t,e,n){switch(e){case"input":if(Eu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=za(r);if(!i)throw Error(G(90));up(r),Eu(r,i)}}}break;case"textarea":dp(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};yp=cd;wp=Lr;var L0={usingClientEntryPoint:!1,Events:[Hs,ci,za,vp,gp,cd]},ss={findFiberByHostInstance:jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},U0={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:En.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kp(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||D0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{$a=Ko.inject(U0),dn=Ko}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L0;Dt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gd(e))throw Error(G(200));return I0(t,e,null,n)};Dt.createRoot=function(t,e){if(!gd(t))throw Error(G(299));var n=!1,r="",i=ev;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pd(t,1,!1,null,null,n,!1,r,i),t[kn]=e.current,As(t.nodeType===8?t.parentNode:t),new vd(e)};Dt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=kp(e),t=t===null?null:t.stateNode,t};Dt.flushSync=function(t){return Lr(t)};Dt.hydrate=function(t,e,n){if(!Qa(e))throw Error(G(200));return Ja(null,t,e,!0,n)};Dt.hydrateRoot=function(t,e,n){if(!gd(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=ev;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Zm(e,null,t,1,n??null,i,!1,s,a),t[kn]=e.current,As(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ga(e)};Dt.render=function(t,e,n){if(!Qa(e))throw Error(G(200));return Ja(null,t,e,!1,n)};Dt.unmountComponentAtNode=function(t){if(!Qa(t))throw Error(G(40));return t._reactRootContainer?(Lr(function(){Ja(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};Dt.unstable_batchedUpdates=cd;Dt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qa(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Ja(t,e,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function tv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tv)}catch(t){console.error(t)}}tv(),tp.exports=Dt;var M0=tp.exports,nv,hh=M0;nv=hh.createRoot,hh.hydrateRoot;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ph=t=>{const e=F0(t);return e.charAt(0).toUpperCase()+e.slice(1)},rv=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),B0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=le.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...u},d)=>le.createElement("svg",{ref:d,...K0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:rv("lucide",i),...!s&&!B0(u)&&{"aria-hidden":"true"},...u},[...a.map(([p,m])=>le.createElement(p,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=(t,e)=>{const n=le.forwardRef(({className:r,...i},s)=>le.createElement(q0,{ref:s,iconNode:e,className:rv(`lucide-${z0(ph(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ph(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],V0=wt("book-open-text",W0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],G0=wt("calculator",H0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],J0=wt("chevron-down",Q0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],X0=wt("chevron-right",Y0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ew=wt("circle-check-big",Z0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],nw=wt("clipboard-list",tw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],iw=wt("clock",rw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ow=wt("download",sw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],lw=wt("hammer",aw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mh=wt("moon",uw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],vh=wt("package",cw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gh=wt("sun",dw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],iv=wt("trending-up",fw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],pw=wt("upload",hw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],vw=wt("wrench",mw),gw="modulepreload",yw=function(t,e){return new URL(t,e).href},yh={},Qs=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(n.map(p=>{if(p=yw(p,r),p in yh)return;yh[p]=!0;const m=p.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(!!r)for(let L=a.length-1;L>=0;L--){const N=a[L];if(N.href===p&&(!m||N.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${w}`))return;const P=document.createElement("link");if(P.rel=m?"stylesheet":gw,m||(P.as="script"),P.crossOrigin="",P.href=p,d&&P.setAttribute("nonce",d),document.head.appendChild(P),m)return new Promise((L,N)=>{P.addEventListener("load",L),P.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},ww=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>$i);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class yd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class wh extends yd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _h extends yd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class bh extends yd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dc||(dc={}));var _w=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class bw{constructor(e,{headers:n={},customFetch:r,region:i=dc.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=ww(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _w(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:u,signal:d}=r;let p={},{region:m}=r;m||(m=this.region);const w=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,w.searchParams.set("forceFunctionRegion",m));let _;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(p["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(p["Content-Type"]="application/json",_=JSON.stringify(u)));const P=yield this.fetch(w.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:_,signal:d}).catch(S=>{throw S.name==="AbortError"?S:new wh(S)}),L=P.headers.get("x-relay-error");if(L&&L==="true")throw new _h(P);if(!P.ok)throw new bh(P);let N=((i=P.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),B;return N==="application/json"?B=yield P.json():N==="application/octet-stream"?B=yield P.blob():N==="text/event-stream"?B=P:N==="multipart/form-data"?B=yield P.formData():B=yield P.text(),{data:B,error:null,response:P}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new wh(s)}:{data:null,error:s,response:s instanceof bh||s instanceof _h?s.context:void 0}}})}}var xt={},wd={},Ya={},Js={},Xa={},Za={},kw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=kw();const xw=Ni.fetch,sv=Ni.fetch.bind(Ni),ov=Ni.Headers,Sw=Ni.Request,Ew=Ni.Response,$i=Object.freeze(Object.defineProperty({__proto__:null,Headers:ov,Request:Sw,Response:Ew,default:sv,fetch:xw},Symbol.toStringTag,{value:"Module"})),jw=hg($i);var el={};Object.defineProperty(el,"__esModule",{value:!0});let Cw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};el.default=Cw;var av=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});const Ow=av(jw),Pw=av(el);let Tw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Ow.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,u,d,p;let m=null,w=null,_=null,P=s.status,L=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?w=y:w=JSON.parse(y))}const B=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(d=s.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");B&&S&&S.length>1&&(_=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(m={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,P=406,L="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const B=await s.text();try{m=JSON.parse(B),Array.isArray(m)&&s.status===404&&(w=[],m=null,P=200,L="OK")}catch{s.status===404&&B===""?(P=204,L="No Content"):m={message:B}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,P=200,L="OK"),m&&this.shouldThrowOnError)throw new Pw.default(m)}return{error:m,data:w,count:_,status:P,statusText:L}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,u,d;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=s==null?void 0:s.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Za.default=Tw;var Nw=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xa,"__esModule",{value:!0});const Rw=Nw(Za);let Aw=class extends Rw.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${p}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Xa.default=Aw;var Iw=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0});const Dw=Iw(Xa);let $w=class extends Dw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Js.default=$w;var Lw=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ya,"__esModule",{value:!0});const os=Lw(Js);let Uw=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,n){const{head:r=!1,count:i}=n??{},s=r?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new os.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(d.length>0){const p=[...new Set(d)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new os.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new os.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new os.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ya.default=Uw;var lv=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wd,"__esModule",{value:!0});const Mw=lv(Ya),zw=lv(Js);let Fw=class uv{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Mw.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new uv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let u;const d=new URL(`${this.url}/rpc/${e}`);let p;r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{d.searchParams.append(w,_)})):(u="POST",p=n);const m=new Headers(this.headers);return s&&m.set("Prefer",`count=${s}`),new zw.default({method:u,url:d,headers:m,schema:this.schemaName,body:p,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};wd.default=Fw;var Li=Ot&&Ot.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xt,"__esModule",{value:!0});xt.PostgrestError=xt.PostgrestBuilder=xt.PostgrestTransformBuilder=xt.PostgrestFilterBuilder=xt.PostgrestQueryBuilder=xt.PostgrestClient=void 0;const cv=Li(wd);xt.PostgrestClient=cv.default;const dv=Li(Ya);xt.PostgrestQueryBuilder=dv.default;const fv=Li(Js);xt.PostgrestFilterBuilder=fv.default;const hv=Li(Xa);xt.PostgrestTransformBuilder=hv.default;const pv=Li(Za);xt.PostgrestBuilder=pv.default;const mv=Li(el);xt.PostgrestError=mv.default;var Bw=xt.default={PostgrestClient:cv.default,PostgrestQueryBuilder:dv.default,PostgrestFilterBuilder:fv.default,PostgrestTransformBuilder:hv.default,PostgrestBuilder:pv.default,PostgrestError:mv.default};const{PostgrestClient:Kw,PostgrestQueryBuilder:Pk,PostgrestFilterBuilder:Tk,PostgrestTransformBuilder:Nk,PostgrestBuilder:Rk,PostgrestError:Ak}=Bw;class qw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ww="2.75.0",Vw=`realtime-js/${Ww}`,Hw="1.0.0",fc=1e4,Gw=1e3,Qw=100;var bs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bs||(bs={}));var Je;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Je||(Je={}));var Jt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Jt||(Jt={}));var hc;(function(t){t.websocket="websocket"})(hc||(hc={}));var Sr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Sr||(Sr={}));class Jw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+s));a=a+s;const p=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:u,event:d,payload:p}}}class vv{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Oe||(Oe={}));const kh=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=Yw(a,t,e,i),s),{}):{}},Yw=(t,e,n,r)=>{const i=e.find(u=>u.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?gv(s,a):pc(a)},gv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return t_(e,n)}switch(t){case Oe.bool:return Xw(e);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return Zw(e);case Oe.json:case Oe.jsonb:return e_(e);case Oe.timestamp:return n_(e);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return pc(e);default:return pc(e)}},pc=t=>t,Xw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Zw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},e_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},t_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(u=>gv(e,u))}return t},n_=t=>typeof t=="string"?t.replace(" ","T"):t,yv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class uu{constructor(e,n,r={},i=fc){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xh||(xh={}));class ks{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,i,s,a),this.pendingDiffs.forEach(d=>{this.state=ks.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ks.syncDiff(this.state,i,s,a),u())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(s,(p,m)=>{a[p]||(d[p]=m)}),this.map(a,(p,m)=>{const w=s[p];if(w){const _=m.map(B=>B.presence_ref),P=w.map(B=>B.presence_ref),L=m.filter(B=>P.indexOf(B.presence_ref)<0),N=w.filter(B=>_.indexOf(B.presence_ref)<0);L.length>0&&(u[p]=L),N.length>0&&(d[p]=N)}else u[p]=m}),this.syncDiff(s,{joins:u,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,d)=>{var p;const m=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(d),m.length>0){const w=e[u].map(P=>P.presence_ref),_=m.filter(P=>w.indexOf(P.presence_ref)<0);e[u].unshift(..._)}r(u,m,d)}),this.map(a,(u,d)=>{let p=e[u];if(!p)return;const m=d.map(w=>w.presence_ref);p=p.filter(w=>m.indexOf(w.presence_ref)<0),e[u]=p,i(u,p,d),p.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Sh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Sh||(Sh={}));var xs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xs||(xs={}));var vn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(vn||(vn={}));class _d{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Je.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,Jt.join,this.params,this.timeout),this.rejoinTimer=new vv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Je.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Je.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Je.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Jt.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new ks(this),this.broadcastEndpointURL=yv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Je.closed){const{config:{broadcast:a,presence:u,private:d}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(P=>P.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[xs.PRESENCE]&&this.bindings[xs.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,w={},_={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:m}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(P=>e==null?void 0:e(vn.CHANNEL_ERROR,P)),this._onClose(()=>e==null?void 0:e(vn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:P})=>{var L;if(this.socket.setAuth(),P===void 0){e==null||e(vn.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,B=(L=N==null?void 0:N.length)!==null&&L!==void 0?L:0,S=[];for(let y=0;y<B;y++){const x=N[y],{filter:{event:M,schema:K,table:q,filter:V}}=x,W=P&&P[y];if(W&&W.event===M&&W.schema===K&&W.table===q&&W.filter===V)S.push(Object.assign(Object.assign({},x),{id:W.id}));else{this.unsubscribe(),this.state=Je.errored,e==null||e(vn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(vn.SUBSCRIBED);return}}).receive("error",P=>{this.state=Je.errored,e==null||e(vn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Je.joined&&e===xs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,u,d;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Je.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Jt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new uu(this,Jt.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Je.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uu(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:p,join:m}=Jt;if(r&&[u,d,p,m].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,n,r);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(P=>{var L,N,B;return((L=P.filter)===null||L===void 0?void 0:L.event)==="*"||((B=(N=P.filter)===null||N===void 0?void 0:N.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===a}).map(P=>P.callback(_,r)):(s=this.bindings[a])===null||s===void 0||s.filter(P=>{var L,N,B,S,y,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in P){const M=P.id,K=(L=P.filter)===null||L===void 0?void 0:L.event;return M&&((N=n.ids)===null||N===void 0?void 0:N.includes(M))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((B=n.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const M=(y=(S=P==null?void 0:P.filter)===null||S===void 0?void 0:S.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return M==="*"||M===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===a}).map(P=>{if(typeof _=="object"&&"ids"in _){const L=_.data,{schema:N,table:B,commit_timestamp:S,type:y,errors:x}=L;_=Object.assign(Object.assign({},{schema:N,table:B,commit_timestamp:S,eventType:y,new:{},old:{},errors:x}),this._getPayloadRecords(L))}P.callback(_,r)})}_isClosed(){return this.state===Je.closed}_isJoined(){return this.state===Je.joined}_isJoining(){return this.state===Je.joining}_isLeaving(){return this.state===Je.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&_d.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Jt.close,{},e)}_onError(e){this._on(Jt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Je.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=kh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=kh(e.columns,e.old_record)),n}}const cu=()=>{},qo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},r_=[1e3,2e3,5e3,1e4],i_=1e4,s_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fc,this.transport=null,this.heartbeatIntervalMs=qo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cu,this.ref=0,this.reconnectTimer=null,this.logger=cu,this.conn=null,this.sendBuffer=[],this.serializer=new Jw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Qs(async()=>{const{default:u}=await Promise.resolve().then(()=>$i);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${hc.websocket}`,this.httpEndpoint=yv(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Hw}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bs.connecting:return Sr.Connecting;case bs.open:return Sr.Open;case bs.closing:return Sr.Closing;default:return Sr.Closed}}isConnected(){return this.connectionState()===Sr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new _d(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Gw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,u=a?`(${a})`:"",d=s.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),s),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Jt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([s_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Vw};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Jt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vv(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,u,d,p,m;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:fc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:qo.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:cu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:w=>r_[w-1]||i_,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(w,_)=>_(JSON.stringify(w)),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class bd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ve(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class a_ extends bd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mc extends bd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var l_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const wv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>$i);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},u_=()=>l_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Qs(()=>Promise.resolve().then(()=>$i),void 0,import.meta.url)).Response:Response}),vc=t=>{if(Array.isArray(t))return t.map(n=>vc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=vc(r)}),e},c_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var zr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),d_=(t,e,n)=>zr(void 0,void 0,void 0,function*(){const r=yield u_();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new a_(du(i),s,a))}).catch(i=>{e(new mc(du(i),i))}):e(new mc(du(t),t))}),f_=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(c_(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Ys(t,e,n,r,i,s){return zr(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,f_(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>d_(d,u,r))})})}function Na(t,e,n,r){return zr(this,void 0,void 0,function*(){return Ys(t,"GET",e,n,r)})}function un(t,e,n,r,i){return zr(this,void 0,void 0,function*(){return Ys(t,"POST",e,r,i,n)})}function gc(t,e,n,r,i){return zr(this,void 0,void 0,function*(){return Ys(t,"PUT",e,r,i,n)})}function h_(t,e,n,r){return zr(this,void 0,void 0,function*(){return Ys(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function _v(t,e,n,r,i){return zr(this,void 0,void 0,function*(){return Ys(t,"DELETE",e,r,i,n)})}var p_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class m_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return p_(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}var v_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class g_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new m_(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return v_(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}}var bt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const y_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Eh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class w_{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=wv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return bt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Eh),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const p=this._removeEmptyFolders(n),m=this._getFinalPath(p),w=yield(e=="PUT"?gc:un)(this.fetch,`${this.url}/object/${m}`,s,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ve(s))return{data:null,error:s};throw s}})}upload(e,n,r){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return bt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const p=Object.assign({upsert:Eh.upsert},i),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",p.cacheControl)):(d=r,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);const w=yield gc(this.fetch,u.toString(),d,{headers:m});return{data:{path:s,fullPath:w.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ve(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return bt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield un(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),u=a.searchParams.get("token");if(!u)throw new bd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}update(e,n,r){return bt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return bt(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}copy(e,n,r){return bt(this,void 0,void 0,function*(){try{return{data:{path:(yield un(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return bt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield un(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return bt(this,void 0,void 0,function*(){try{const i=yield un(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",u=this._getFinalPath(e),d=()=>Na(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new g_(d,this.shouldThrowOnError)}info(e){return bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Na(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}exists(e){return bt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield h_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r)&&r instanceof mc){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}remove(e){return bt(this,void 0,void 0,function*(){try{return{data:yield _v(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}list(e,n,r){return bt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},y_),n),{prefix:e||""});return{data:yield un(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}listV2(e,n){return bt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield un(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const __="2.75.0",b_={"X-Client-Info":`storage-js/${__}`};var Jr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class k_{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},b_),n),this.fetch=wv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Jr(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}})}getBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}createBucket(e){return Jr(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield un(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Jr(this,void 0,void 0,function*(){try{return{data:yield gc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield _v(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}})}}class x_ extends k_{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new w_(this.url,this.headers,e,this.fetch)}}const S_="2.75.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const E_={"X-Client-Info":`supabase-js-${ds}/${S_}`},j_={headers:E_},C_={schema:"public"},O_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},P_={};var T_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const N_=t=>{let e;return t?e=t:typeof fetch>"u"?e=sv:e=fetch,(...n)=>e(...n)},R_=()=>typeof Headers>"u"?ov:Headers,A_=(t,e,n)=>{const r=N_(n),i=R_();return(s,a)=>T_(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let p=new i(a==null?void 0:a.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},a),{headers:p}))})};var I_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};function D_(t){return t.endsWith("/")?t:t+"/"}function $_(t,e){var n,r;const{db:i,auth:s,realtime:a,global:u}=t,{db:d,auth:p,realtime:m,global:w}=e,_={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},p),s),realtime:Object.assign(Object.assign({},m),a),storage:{},global:Object.assign(Object.assign(Object.assign({},w),u),{headers:Object.assign(Object.assign({},(n=w==null?void 0:w.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>I_(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function L_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(D_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const bv="2.75.0",ri=30*1e3,yc=3,fu=yc*ri,U_="http://localhost:9999",M_="supabase.auth.token",z_={"X-Client-Info":`gotrue-js/${bv}`},wc="X-Supabase-Api-Version",kv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B_=10*60*1e3;class Bs extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class K_ extends Bs{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function q_(t){return de(t)&&t.name==="AuthApiError"}class Er extends Bs{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class or extends Bs{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Un extends or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W_(t){return de(t)&&t.name==="AuthSessionMissingError"}class Yr extends or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wo extends or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vo extends or{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function V_(t){return de(t)&&t.name==="AuthImplicitGrantRedirectError"}class jh extends or{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _c extends or{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hu(t){return de(t)&&t.name==="AuthRetryableFetchError"}class Ch extends or{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class bc extends or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ra="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oh=` 	
\r=`.split(""),H_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Oh.length;e+=1)t[Oh[e].charCodeAt(0)]=-2;for(let e=0;e<Ra.length;e+=1)t[Ra[e].charCodeAt(0)]=e;return t})();function Ph(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ra[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ra[r]),e.queuedBits-=6}}function xv(t,e,n){const r=H_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Th(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{J_(a,r,n)};for(let a=0;a<t.length;a+=1)xv(t.charCodeAt(a),i,s);return e.join("")}function G_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Q_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}G_(r,e)}}function J_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function xi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)xv(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Y_(t){const e=[];return Q_(t,n=>e.push(n)),new Uint8Array(e)}function Pr(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Ph(i,n,r)),Ph(null,n,r),e.join("")}function X_(t){return Math.round(Date.now()/1e3)+t}function Z_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",yr={tested:!1,writable:!1},Sv=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yr.tested)return yr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yr.tested=!0,yr.writable=!0}catch{yr.tested=!0,yr.writable=!1}return yr.writable};function eb(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Ev=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Qs(async()=>{const{default:r}=await Promise.resolve().then(()=>$i);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tb=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ii=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},wr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$n=async(t,e)=>{await t.removeItem(e)};class tl{constructor(){this.promise=new tl.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}tl.promiseConstructor=Promise;function pu(t){const e=t.split(".");if(e.length!==3)throw new bc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!F_.test(e[r]))throw new bc("JWT not in base64url format");return{header:JSON.parse(Th(e[0])),payload:JSON.parse(Th(e[1])),signature:xi(e[2]),raw:{header:e[0],payload:e[1]}}}async function nb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rb(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function ib(t){return("0"+t.toString(16)).substr(-2)}function sb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,ib).join("")}async function ob(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function ab(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ob(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xr(t,e,n=!1){const r=sb();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ii(t,`${e}-code-verifier`,i);const s=await ab(r);return[s,r===s?"plain":"s256"]}const lb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ub(t){const e=t.headers.get(wc);if(!e||!e.match(lb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function db(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zr(t){if(!fb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nh(t){return JSON.parse(JSON.stringify(t))}var hb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const kr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pb=[502,503,504];async function Rh(t){var e;if(!tb(t))throw new _c(kr(t),0);if(pb.includes(t.status))throw new _c(kr(t),t.status);let n;try{n=await t.json()}catch(s){throw new Er(kr(s),s)}let r;const i=ub(t);if(i&&i.getTime()>=kv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ch(kr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Un}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Ch(kr(n),t.status,n.weak_password.reasons);throw new K_(kr(n),t.status||500,r)}const mb=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ve(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[wc]||(s[wc]=kv["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await vb(t,e,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function vb(t,e,n,r,i,s){const a=mb(e,r,i,s);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new _c(kr(d),0)}if(u.ok||await Rh(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Rh(d)}}function Ht(t){var e;let n=null;wb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=X_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ah(t){const e=Ht(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Kn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function gb(t){return{data:t,error:null}}function yb(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=hb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function Ih(t){return t}function wb(t){return t.access_token&&t.refresh_token&&t.expires_in}const vu=["global","local","others"];var _b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class bb{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Ev(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=vu[0]){if(vu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vu.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Kn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=_b(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:yb,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Kn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},m=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ih});if(m.error)throw m.error;const w=await m.json(),_=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,P=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return P.length>0&&(P.forEach(L=>{const N=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(L.split(";")[1].split("=")[1]);p[`${B}Page`]=N}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(de(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Zr(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Kn})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Zr(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Kn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Zr(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Kn})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zr(e.userId);try{const{data:n,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Zr(e.userId),Zr(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},m=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ih});if(m.error)throw m.error;const w=await m.json(),_=(a=m.headers.get("x-total-count"))!==null&&a!==void 0?a:0,P=(d=(u=m.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return P.length>0&&(P.forEach(L=>{const N=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(L.split(";")[1].split("=")[1]);p[`${B}Page`]=N}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(de(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}}function Dh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ei={debug:!!(globalThis&&Sv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kb extends jv{}async function xb(t,e,n){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ei.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ei.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ei.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Sb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Cv(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Eb(t){return parseInt(t,16)}function jb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Cb(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:u,requestId:d,resources:p,scheme:m,uri:w,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const P=Cv(t.address),L=m?`${m}://${r}`:r,N=t.statement?`${t.statement}
`:"",B=`${L} wants you to sign in with your Ethereum account:
${P}

${N}`;let S=`URI: ${w}
Version: ${_}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),d&&(S+=`
Request ID: ${d}`),p){let y=`
Resources:`;for(const x of p){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);y+=`
- ${x}`}S+=y}return`${B}
${S}`}class We extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Aa extends We{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Ob({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new We({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new We({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new We({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new We({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new We({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new We({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Pv(a)){if(s.rp.id!==a)return new We({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new We({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Pb({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new We({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new We({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Pv(r)){if(n.rpId!==r)return new We({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new We({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new We({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new We({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Ov=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Tb{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Nb=new Tb;function Rb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Ov(t,["challenge","user","excludeCredentials"]),s=xi(e).buffer,a=Object.assign(Object.assign({},n),{id:xi(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const p=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:xi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function Ab(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Ov(t,["challenge","allowCredentials"]),i=xi(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},u),{id:xi(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function Ib(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Pr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Pr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Db(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Pr(new Uint8Array(i.authenticatorData)),clientDataJSON:Pr(new Uint8Array(i.clientDataJSON)),signature:Pr(new Uint8Array(i.signature)),userHandle:i.userHandle?Pr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Pv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function $h(){var t,e;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $b(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",e)}:{data:null,error:new Aa("Empty credential response",e)}}catch(e){return{data:null,error:Ob({error:e,options:t})}}}async function Lb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",e)}:{data:null,error:new Aa("Empty credential response",e)}}catch(e){return{data:null,error:Pb({error:e,options:t})}}}const Ub={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Mb={userVerification:"preferred",hints:["security-key"]};function Ia(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const u=r[s];e(u)?r[s]=Ia(u,a):r[s]=Ia(a)}else r[s]=a}return r}function zb(t,e){return Ia(Ub,t,e||{})}function Fb(t,e){return Ia(Mb,t,e||{})}class Bb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const d=i??Nb.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:p}=a.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(a.webauthn.type){case"create":{const p=zb(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:m,error:w}=await $b({publicKey:p,signal:d});return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:w}}case"request":{const p=Fb(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:m,error:w}=await Lb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:p,signal:d}));return m?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:m}},error:null}:{data:null,error:w}}}}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new Er("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn authentication")};try{if(!$h())return{data:null,error:new Er("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:u};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new Er("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn registration")};try{if(!$h())return{data:null,error:new Er("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(m=>{var w;return(w=m.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:u};const{data:d,error:p}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(a){return de(a)?{data:null,error:a}:{data:null,error:new Er("Unexpected error in register",a)}}}}Sb();const Kb={url:U_,storageKey:M_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:z_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Lh(t,e,n){return await n()}const ti={};class Ks{get jwks(){var e,n;return(n=(e=ti[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ti[this.storageKey]=Object.assign(Object.assign({},ti[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ti[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ti[this.storageKey]=Object.assign(Object.assign({},ti[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ks.nextInstanceID,Ks.nextInstanceID+=1,this.instanceID>0&&Tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Kb),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new bb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ev(i.fetch),this.lock=i.lock||Lh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Tt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=xb:this.lock=Lh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Bb(this)},this.persistSession?(i.storage?this.storage=i.storage:Sv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Dh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Dh(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=eb(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Tt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),V_(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?{error:n}:{error:new Er("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ht}),{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:m,password:w,options:_}=e;let P=null,L=null;this.flowType==="pkce"&&([P,L]=await Xr(this.storage,this.storageKey)),s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:m,password:w,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:P,code_challenge_method:L},xform:Ht})}else if("phone"in e){const{phone:m,password:w,options:_}=e;s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:w,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(i=_==null?void 0:_.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Ht})}else throw new Wo("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(de(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:u}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ah})}else if("phone"in e){const{phone:s,password:a,options:u}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ah})}else throw new Wo("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Yr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,u,d,p,m,w,_;let P,L;if("message"in e)P=e.message,L=e.signature;else{const{chain:N,wallet:B,statement:S,options:y}=e;let x;if(Tt())if(typeof B=="object")x=B;else{const se=window;if("ethereum"in se&&typeof se.ethereum=="object"&&"request"in se.ethereum&&typeof se.ethereum.request=="function")x=se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=B}const M=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),K=await x.request({method:"eth_requestAccounts"}).then(se=>se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!K||K.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=Cv(K[0]);let V=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!V){const se=await x.request({method:"eth_chainId"});V=Eb(se)}const W={domain:M.host,address:q,statement:S,uri:M.href,version:"1",chainId:V,nonce:(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=y==null?void 0:y.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=y==null?void 0:y.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=y==null?void 0:y.signInWithEthereum)===null||m===void 0?void 0:m.resources};P=Cb(W),L=await x.request({method:"personal_sign",params:[jb(P),q]})}try{const{data:N,error:B}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:L},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Ht});if(B)throw B;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new Yr}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:B})}catch(N){if(de(N))return{data:{user:null,session:null},error:N};throw N}}async signInWithSolana(e){var n,r,i,s,a,u,d,p,m,w,_,P;let L,N;if("message"in e)L=e.message,N=e.signature;else{const{chain:B,wallet:S,statement:y,options:x}=e;let M;if(Tt())if(typeof S=="object")M=S;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))M=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const K=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const q=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:K.host,uri:K.href}),y?{statement:y}:null));let V;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")V=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)V=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)L=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),N=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");L=[`${K.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${K.href}`,`Issued At: ${(i=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((p=x==null?void 0:x.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((w=(m=x==null?void 0:x.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||w===void 0)&&w.length?["Resources",...x.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const q=await M.signMessage(new TextEncoder().encode(L),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=q}}try{const{data:B,error:S}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:L,signature:Pr(N)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(P=e.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Ht});if(S)throw S;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new Yr}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:S})}catch(B){if(de(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(e){const n=await wr(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ht});if(await $n(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Yr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(de(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,u=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ht}),{data:d,error:p}=u;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Yr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:u,options:d}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Xr(this.storage,this.storageKey));const{error:w}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in e){const{phone:u,options:d}=e,{data:p,error:m}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m}}throw new Wo("You must provide either an email or phone number.")}catch(u){if(de(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ht});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,p=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Xr(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:gb})}catch(s){if(de(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Un;const{error:i}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:u}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Wo("You must provide either an email or phone number and a type")}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await wr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await wr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=mu()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,p,m)=>(!a&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,p,m))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Kn}):await this._useSession(async n=>{var r,i,s;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Un}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Kn})})}catch(n){if(de(n))return W_(n)&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Un;const a=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Xr(this.storage,this.storageKey));const{data:p,error:m}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:Kn});if(m)throw m;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Un;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=pu(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(de(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Un;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Tt())throw new Vo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new jh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jh("No code detected.");const{data:y,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:u,expires_at:d,token_type:p}=e;if(!s||!u||!a||!p)throw new Vo("No session defined in URL");const m=Math.round(Date.now()/1e3),w=parseInt(u);let _=m+w;d&&(_=parseInt(d));const P=_-m;P*1e3<=ri&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${w}s`);const L=_-w;m-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,_,m):m-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,_,m);const{data:N,error:B}=await this._getUser(s);if(B)throw B;const S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:w,expires_at:_,refresh_token:a,token_type:p,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await wr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(q_(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await $n(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Z_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Xr(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(de(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,u,d,p,m;const{data:w,error:_}=s;if(_)throw _;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",P,{headers:this.headers,jwt:(m=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(i)throw i;return Tt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(de(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:u,token:d,access_token:p,nonce:m}=e,w=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ht}),{data:_,error:P}=w;return P?{data:{user:null,session:null},error:P}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new Yr}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:P})}catch(i){if(de(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rb(async i=>(i>0&&await nb(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ht})),(i,s)=>{const a=200*Math.pow(2,i);return s&&hu(s)&&Date.now()+a-r<ri})}catch(r){if(this._debug(n,"error",r),de(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Tt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await wr(this.storage,this.storageKey);if(i&&this.userStorage){let a=await wr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ii(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:mu()}else if(i&&!i.user&&!i.user){const a=await wr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await $n(this.storage,this.storageKey+"-user"),await ii(this.storage,this.storageKey,i)):i.user=mu()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fu;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fu}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),hu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Un;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new tl;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Un;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),de(s)){const a={data:null,error:s};return hu(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ii(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Nh(i);await ii(this.storage,this.storageKey,s)}else{const i=Nh(n);await ii(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await $n(this.storage,this.storageKey),await $n(this.storage,this.storageKey+"-code-verifier"),await $n(this.storage,this.storageKey+"-user"),this.userStorage&&await $n(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ri);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ri);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ri}ms, refresh threshold is ${yc} ticks`),i<=yc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Xr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Ib(e.webauthn.credential_response):Db(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Rb(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Ab(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pu(i.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+B_>i)return r;const{data:s,error:a}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:P,error:L}=await this.getSession();if(L||!P.session)return{data:null,error:L};r=P.session.access_token}const{header:i,payload:s,signature:a,raw:{header:u,payload:d}}=pu(r);n!=null&&n.allowExpired||cb(s.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:P}=await this.getUser(r);if(P)throw P;return{data:{claims:s,header:i,signature:a},error:null}}const m=db(i.alg),w=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,w,a,Y_(`${u}.${d}`)))throw new bc("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}Ks.nextInstanceID=0;const qb=Ks;class Wb extends qb{constructor(e){super(e)}}var Vb=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(m){try{p(r.next(m))}catch(w){a(w)}}function d(m){try{p(r.throw(m))}catch(w){a(w)}}function p(m){m.done?s(m.value):i(m.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class Hb{constructor(e,n,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=n;const u=L_(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:C_,realtime:P_,auth:Object.assign(Object.assign({},O_),{storageKey:d}),global:j_},m=$_(r??{},p);this.storageKey=(i=m.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=m.global.headers)!==null&&s!==void 0?s:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=m.auth)!==null&&a!==void 0?a:{},this.headers,m.global.fetch),this.fetch=A_(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new Kw(new URL("rest/v1",u).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new x_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new bw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Vb(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:u,lock:d,debug:p},m,w){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),m),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:u,lock:d,debug:p,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new o_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gb=(t,e,n)=>new Hb(t,e,n);function Qb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Qb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Vn=Gb(`https://dzazapfzfuonyuvslhgk.supabase.co
`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6YXphcGZ6ZnVvbnl1dnNsaGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDA3NzAsImV4cCI6MjA3NTYxNjc3MH0.wSVO93VzKwC3Tvwwh-1yCDb1gV0Kw5ava5iBGYfD_j0
`);var Tv={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ot,function(){var n=function(o,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])})(o,l)},r=function(){return(r=Object.assign||function(o){for(var l,c=1,f=arguments.length;c<f;c++)for(var h in l=arguments[c])Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h]);return o}).apply(this,arguments)};function i(o,l,c){for(var f,h=0,v=l.length;h<v;h++)!f&&h in l||((f=f||Array.prototype.slice.call(l,0,h))[h]=l[h]);return o.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ot,a=Object.keys,u=Array.isArray;function d(o,l){return typeof l!="object"||a(l).forEach(function(c){o[c]=l[c]}),o}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var p=Object.getPrototypeOf,m={}.hasOwnProperty;function w(o,l){return m.call(o,l)}function _(o,l){typeof l=="function"&&(l=l(p(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(c){L(o,c,l[c])})}var P=Object.defineProperty;function L(o,l,c,f){P(o,l,d(c&&w(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},f))}function N(o){return{from:function(l){return o.prototype=Object.create(l.prototype),L(o.prototype,"constructor",o),{extend:_.bind(null,o.prototype)}}}}var B=Object.getOwnPropertyDescriptor,S=[].slice;function y(o,l,c){return S.call(o,l,c)}function x(o,l){return l(o)}function M(o){if(!o)throw new Error("Assertion Failed")}function K(o){s.setImmediate?setImmediate(o):setTimeout(o,0)}function q(o,l){if(typeof l=="string"&&w(o,l))return o[l];if(!l)return o;if(typeof l!="string"){for(var c=[],f=0,h=l.length;f<h;++f){var v=q(o,l[f]);c.push(v)}return c}var b=l.indexOf(".");if(b!==-1){var k=o[l.substr(0,b)];return k==null?void 0:q(k,l.substr(b+1))}}function V(o,l,c){if(o&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof l!="string"&&"length"in l){M(typeof c!="string"&&"length"in c);for(var f=0,h=l.length;f<h;++f)V(o,l[f],c[f])}else{var v,b,k=l.indexOf(".");k!==-1?(v=l.substr(0,k),(b=l.substr(k+1))===""?c===void 0?u(o)&&!isNaN(parseInt(v))?o.splice(v,1):delete o[v]:o[v]=c:V(k=!(k=o[v])||!w(o,v)?o[v]={}:k,b,c)):c===void 0?u(o)&&!isNaN(parseInt(l))?o.splice(l,1):delete o[l]:o[l]=c}}function W(o){var l,c={};for(l in o)w(o,l)&&(c[l]=o[l]);return c}var se=[].concat;function te(o){return se.apply([],o)}var lr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(te([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(l){return l+o+"Array"})}))).filter(function(o){return s[o]}),Ce=new Set(lr.map(function(o){return s[o]})),Ge=null;function Qe(o){return Ge=new WeakMap,o=function l(c){if(!c||typeof c!="object")return c;var f=Ge.get(c);if(f)return f;if(u(c)){f=[],Ge.set(c,f);for(var h=0,v=c.length;h<v;++h)f.push(l(c[h]))}else if(Ce.has(c.constructor))f=c;else{var b,k=p(c);for(b in f=k===Object.prototype?{}:Object.create(k),Ge.set(c,f),c)w(c,b)&&(f[b]=l(c[b]))}return f}(o),Ge=null,o}var ce={}.toString;function Se(o){return ce.call(o).slice(8,-1)}var Fe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Lt=typeof Fe=="symbol"?function(o){var l;return o!=null&&(l=o[Fe])&&l.apply(o)}:function(){return null};function X(o,l){return l=o.indexOf(l),0<=l&&o.splice(l,1),0<=l}var fe={};function he(o){var l,c,f,h;if(arguments.length===1){if(u(o))return o.slice();if(this===fe&&typeof o=="string")return[o];if(h=Lt(o)){for(c=[];!(f=h.next()).done;)c.push(f.value);return c}if(o==null)return[o];if(typeof(l=o.length)!="number")return[o];for(c=new Array(l);l--;)c[l]=o[l];return c}for(l=arguments.length,c=new Array(l);l--;)c[l]=arguments[l];return c}var be=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ut=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zi),Ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Wt(o,l){this.name=o,this.message=l}function nn(o,l){return o+". Errors: "+Object.keys(l).map(function(c){return l[c].toString()}).filter(function(c,f,h){return h.indexOf(c)===f}).join(`
`)}function jn(o,l,c,f){this.failures=l,this.failedKeys=f,this.successCount=c,this.message=nn(o,l)}function _t(o,l){this.name="BulkError",this.failures=Object.keys(l).map(function(c){return l[c]}),this.failuresByPos=l,this.message=nn(o,this.failures)}N(Wt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),N(jn).from(Wt),N(_t).from(Wt);var Cn=Ut.reduce(function(o,l){return o[l]=l+"Error",o},{}),$v=Wt,ue=Ut.reduce(function(o,l){var c=l+"Error";function f(h,v){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(v?`
 `+v:""),this.inner=v||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Ue[l]||c,this.inner=null)}return N(f).from($v),o[l]=f,o},{});ue.Syntax=SyntaxError,ue.Type=TypeError,ue.Range=RangeError;var xd=zi.reduce(function(o,l){return o[l+"Error"]=ue[l],o},{}),Zs=Ut.reduce(function(o,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(o[l+"Error"]=ue[l]),o},{});function je(){}function Ui(o){return o}function Lv(o,l){return o==null||o===Ui?l:function(c){return l(o(c))}}function ar(o,l){return function(){o.apply(this,arguments),l.apply(this,arguments)}}function Uv(o,l){return o===je?l:function(){var c=o.apply(this,arguments);c!==void 0&&(arguments[0]=c);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var v=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?ar(f,this.onsuccess):f),h&&(this.onerror=this.onerror?ar(h,this.onerror):h),v!==void 0?v:c}}function Mv(o,l){return o===je?l:function(){o.apply(this,arguments);var c=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?ar(c,this.onsuccess):c),f&&(this.onerror=this.onerror?ar(f,this.onerror):f)}}function zv(o,l){return o===je?l:function(c){var f=o.apply(this,arguments);d(c,f);var h=this.onsuccess,v=this.onerror;return this.onsuccess=null,this.onerror=null,c=l.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?ar(h,this.onsuccess):h),v&&(this.onerror=this.onerror?ar(v,this.onerror):v),f===void 0?c===void 0?void 0:c:d(f,c)}}function Fv(o,l){return o===je?l:function(){return l.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function nl(o,l){return o===je?l:function(){var c=o.apply(this,arguments);if(c&&typeof c.then=="function"){for(var f=this,h=arguments.length,v=new Array(h);h--;)v[h]=arguments[h];return c.then(function(){return l.apply(f,v)})}return l.apply(this,arguments)}}Zs.ModifyError=jn,Zs.DexieError=Wt,Zs.BulkError=_t;var rn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Sd(o){rn=o}var Mi={},Ed=100,lr=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,p(o),o];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,p(l),o]}(),zi=lr[0],Ut=lr[1],lr=lr[2],Ut=Ut&&Ut.then,ur=zi&&zi.constructor,rl=!!lr,Fi=function(o,l){Bi.push([o,l]),eo&&(queueMicrotask(Kv),eo=!1)},il=!0,eo=!0,cr=[],to=[],sl=Ui,On={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:je,pgp:!1,env:{},finalize:je},oe=On,Bi=[],dr=0,no=[];function ne(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=oe;if(typeof o!="function"){if(o!==Mi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&al(this,this._value))}this._state=null,this._value=null,++l.ref,function c(f,h){try{h(function(v){if(f._state===null){if(v===f)throw new TypeError("A promise cannot be resolved with itself.");var b=f._lib&&Fr();v&&typeof v.then=="function"?c(f,function(k,j){v instanceof ne?v._then(k,j):v.then(k,j)}):(f._state=!0,f._value=v,Cd(f)),b&&Br()}},al.bind(null,f))}catch(v){al(f,v)}}(this,o)}var ol={get:function(){var o=oe,l=oo;function c(f,h){var v=this,b=!o.global&&(o!==oe||l!==oo),k=b&&!Tn(),j=new ne(function(O,R){ll(v,new jd(Pd(f,o,b,k),Pd(h,o,b,k),O,R,o))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return c.prototype=Mi,c},set:function(o){L(this,"then",o&&o.prototype===Mi?ol:{get:function(){return o},set:ol.set})}};function jd(o,l,c,f,h){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof l=="function"?l:null,this.resolve=c,this.reject=f,this.psd=h}function al(o,l){var c,f;to.push(l),o._state===null&&(c=o._lib&&Fr(),l=sl(l),o._state=!1,o._value=l,f=o,cr.some(function(h){return h._value===f._value})||cr.push(f),Cd(o),c&&Br())}function Cd(o){var l=o._listeners;o._listeners=[];for(var c=0,f=l.length;c<f;++c)ll(o,l[c]);var h=o._PSD;--h.ref||h.finalize(),dr===0&&(++dr,Fi(function(){--dr==0&&ul()},[]))}function ll(o,l){if(o._state!==null){var c=o._state?l.onFulfilled:l.onRejected;if(c===null)return(o._state?l.resolve:l.reject)(o._value);++l.psd.ref,++dr,Fi(Bv,[c,o,l])}else o._listeners.push(l)}function Bv(o,l,c){try{var f,h=l._value;!l._state&&to.length&&(to=[]),f=rn&&l._consoleTask?l._consoleTask.run(function(){return o(h)}):o(h),l._state||to.indexOf(h)!==-1||function(v){for(var b=cr.length;b;)if(cr[--b]._value===v._value)return cr.splice(b,1)}(l),c.resolve(f)}catch(v){c.reject(v)}finally{--dr==0&&ul(),--c.psd.ref||c.psd.finalize()}}function Kv(){fr(On,function(){Fr()&&Br()})}function Fr(){var o=il;return eo=il=!1,o}function Br(){var o,l,c;do for(;0<Bi.length;)for(o=Bi,Bi=[],c=o.length,l=0;l<c;++l){var f=o[l];f[0].apply(null,f[1])}while(0<Bi.length);eo=il=!0}function ul(){var o=cr;cr=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=no.slice(0),c=l.length;c;)l[--c]()}function ro(o){return new ne(Mi,!1,o)}function Ae(o,l){var c=oe;return function(){var f=Fr(),h=oe;try{return Nn(c,!0),o.apply(this,arguments)}catch(v){l&&l(v)}finally{Nn(h,!1),f&&Br()}}}_(ne.prototype,{then:ol,_then:function(o,l){ll(this,new jd(null,null,o,l,oe))},catch:function(o){if(arguments.length===1)return this.then(null,o);var l=o,c=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?c:ro)(f)}):this.then(null,function(f){return(f&&f.name===l?c:ro)(f)})},finally:function(o){return this.then(function(l){return ne.resolve(o()).then(function(){return l})},function(l){return ne.resolve(o()).then(function(){return ro(l)})})},timeout:function(o,l){var c=this;return o<1/0?new ne(function(f,h){var v=setTimeout(function(){return h(new ue.Timeout(l))},o);c.then(f,h).finally(clearTimeout.bind(null,v))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),On.env=Od(),_(ne,{all:function(){var o=he.apply(null,arguments).map(ao);return new ne(function(l,c){o.length===0&&l([]);var f=o.length;o.forEach(function(h,v){return ne.resolve(h).then(function(b){o[v]=b,--f||l(o)},c)})})},resolve:function(o){return o instanceof ne?o:o&&typeof o.then=="function"?new ne(function(l,c){o.then(l,c)}):new ne(Mi,!0,o)},reject:ro,race:function(){var o=he.apply(null,arguments).map(ao);return new ne(function(l,c){o.map(function(f){return ne.resolve(f).then(l,c)})})},PSD:{get:function(){return oe},set:function(o){return oe=o}},totalEchoes:{get:function(){return oo}},newPSD:Pn,usePSD:fr,scheduler:{get:function(){return Fi},set:function(o){Fi=o}},rejectionMapper:{get:function(){return sl},set:function(o){sl=o}},follow:function(o,l){return new ne(function(c,f){return Pn(function(h,v){var b=oe;b.unhandleds=[],b.onunhandled=v,b.finalize=ar(function(){var k,j=this;k=function(){j.unhandleds.length===0?h():v(j.unhandleds[0])},no.push(function O(){k(),no.splice(no.indexOf(O),1)}),++dr,Fi(function(){--dr==0&&ul()},[])},b.finalize),o()},l,c,f)})}}),ur&&(ur.allSettled&&L(ne,"allSettled",function(){var o=he.apply(null,arguments).map(ao);return new ne(function(l){o.length===0&&l([]);var c=o.length,f=new Array(c);o.forEach(function(h,v){return ne.resolve(h).then(function(b){return f[v]={status:"fulfilled",value:b}},function(b){return f[v]={status:"rejected",reason:b}}).then(function(){return--c||l(f)})})})}),ur.any&&typeof AggregateError<"u"&&L(ne,"any",function(){var o=he.apply(null,arguments).map(ao);return new ne(function(l,c){o.length===0&&c(new AggregateError([]));var f=o.length,h=new Array(f);o.forEach(function(v,b){return ne.resolve(v).then(function(k){return l(k)},function(k){h[b]=k,--f||c(new AggregateError(h))})})})}),ur.withResolvers&&(ne.withResolvers=ur.withResolvers));var Ze={awaits:0,echoes:0,id:0},qv=0,io=[],so=0,oo=0,Wv=0;function Pn(o,l,c,f){var h=oe,v=Object.create(h);return v.parent=h,v.ref=0,v.global=!1,v.id=++Wv,On.env,v.env=rl?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},l&&d(v,l),++h.ref,v.finalize=function(){--this.parent.ref||this.parent.finalize()},f=fr(v,o,c,f),v.ref===0&&v.finalize(),f}function Kr(){return Ze.id||(Ze.id=++qv),++Ze.awaits,Ze.echoes+=Ed,Ze.id}function Tn(){return!!Ze.awaits&&(--Ze.awaits==0&&(Ze.id=0),Ze.echoes=Ze.awaits*Ed,!0)}function ao(o){return Ze.echoes&&o&&o.constructor===ur?(Kr(),o.then(function(l){return Tn(),l},function(l){return Tn(),Be(l)})):o}function Vv(){var o=io[io.length-1];io.pop(),Nn(o,!1)}function Nn(o,l){var c,f=oe;(l?!Ze.echoes||so++&&o===oe:!so||--so&&o===oe)||queueMicrotask(l?(function(h){++oo,Ze.echoes&&--Ze.echoes!=0||(Ze.echoes=Ze.awaits=Ze.id=0),io.push(oe),Nn(h,!0)}).bind(null,o):Vv),o!==oe&&(oe=o,f===On&&(On.env=Od()),rl&&(c=On.env.Promise,l=o.env,(f.global||o.global)&&(Object.defineProperty(s,"Promise",l.PromiseProp),c.all=l.all,c.race=l.race,c.resolve=l.resolve,c.reject=l.reject,l.allSettled&&(c.allSettled=l.allSettled),l.any&&(c.any=l.any))))}function Od(){var o=s.Promise;return rl?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function fr(o,l,c,f,h){var v=oe;try{return Nn(o,!0),l(c,f,h)}finally{Nn(v,!1)}}function Pd(o,l,c,f){return typeof o!="function"?o:function(){var h=oe;c&&Kr(),Nn(l,!0);try{return o.apply(this,arguments)}finally{Nn(h,!1),f&&queueMicrotask(Tn)}}}function cl(o){Promise===ur&&Ze.echoes===0?so===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Ut).indexOf("[native code]")===-1&&(Kr=Tn=je);var Be=ne.reject,hr="￿",hn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Td="String expected.",qr=[],lo="__dbnames",dl="readonly",fl="readwrite";function pr(o,l){return o?l?function(){return o.apply(this,arguments)&&l.apply(this,arguments)}:o:l}var Nd={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function uo(o){return typeof o!="string"||/\./.test(o)?function(l){return l}:function(l){return l[o]===void 0&&o in l&&delete(l=Qe(l))[o],l}}function Rd(){throw ue.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function we(o,l){try{var c=Ad(o),f=Ad(l);if(c!==f)return c==="Array"?1:f==="Array"?-1:c==="binary"?1:f==="binary"?-1:c==="string"?1:f==="string"?-1:c==="Date"?1:f!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return l<o?1:o<l?-1:0;case"binary":return function(h,v){for(var b=h.length,k=v.length,j=b<k?b:k,O=0;O<j;++O)if(h[O]!==v[O])return h[O]<v[O]?-1:1;return b===k?0:b<k?-1:1}(Id(o),Id(l));case"Array":return function(h,v){for(var b=h.length,k=v.length,j=b<k?b:k,O=0;O<j;++O){var R=we(h[O],v[O]);if(R!==0)return R}return b===k?0:b<k?-1:1}(o,l)}}catch{}return NaN}function Ad(o){var l=typeof o;return l!="object"?l:ArrayBuffer.isView(o)?"binary":(o=Se(o),o==="ArrayBuffer"?"binary":o)}function Id(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function co(o,l,c){var f=o.schema.yProps;return f?(l&&0<c.numFailures&&(l=l.filter(function(h,v){return!c.failures[v]})),Promise.all(f.map(function(h){return h=h.updatesTable,l?o.db.table(h).where("k").anyOf(l).delete():o.db.table(h).clear()})).then(function(){return c})):c}var Dd=(Te.prototype._trans=function(o,l,c){var f=this._tx||oe.trans,h=this.name,v=rn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function b(O,R,E){if(!E.schema[h])throw new ue.NotFound("Table "+h+" not part of transaction");return l(E.idbtrans,E)}var k=Fr();try{var j=f&&f.db._novip===this.db._novip?f===oe.trans?f._promise(o,b,c):Pn(function(){return f._promise(o,b,c)},{trans:f,transless:oe.transless||oe}):function O(R,E,D,C){if(R.idbdb&&(R._state.openComplete||oe.letThrough||R._vip)){var T=R._createTransaction(E,D,R._dbSchema);try{T.create(),R._state.PR1398_maxLoop=3}catch(I){return I.name===Cn.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return O(R,E,D,C)})):Be(I)}return T._promise(E,function(I,A){return Pn(function(){return oe.trans=T,C(I,A,T)})}).then(function(I){if(E==="readwrite")try{T.idbtrans.commit()}catch{}return E==="readonly"?I:T._completion.then(function(){return I})})}if(R._state.openComplete)return Be(new ue.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return Be(new ue.DatabaseClosed);R.open().catch(je)}return R._state.dbReadyPromise.then(function(){return O(R,E,D,C)})}(this.db,o,[this.name],b);return v&&(j._consoleTask=v,j=j.catch(function(O){return console.trace(O),Be(O)})),j}finally{k&&Br()}},Te.prototype.get=function(o,l){var c=this;return o&&o.constructor===Object?this.where(o).first(l):o==null?Be(new ue.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return c.core.get({trans:f,key:o}).then(function(h){return c.hook.reading.fire(h)})}).then(l)},Te.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(u(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var l=a(o);if(l.length===1)return this.where(l[0]).equals(o[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&l.every(function(O){return 0<=k.keyPath.indexOf(O)})){for(var j=0;j<l.length;++j)if(l.indexOf(k.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(k,j){return k.keyPath.length-j.keyPath.length})[0];if(c&&this.db._maxKey!==hr){var v=c.keyPath.slice(0,l.length);return this.where(v).equals(v.map(function(j){return o[j]}))}!c&&rn&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function h(k,j){return we(k,j)===0}var b=l.reduce(function(E,j){var O=E[0],R=E[1],E=f[j],D=o[j];return[O||E,O||!E?pr(R,E&&E.multi?function(C){return C=q(C,j),u(C)&&C.some(function(T){return h(D,T)})}:function(C){return h(D,q(C,j))}):R]},[null,null]),v=b[0],b=b[1];return v?this.where(v.name).equals(o[v.keyPath]).filter(b):c?this.filter(b):this.where(l).equals("")},Te.prototype.filter=function(o){return this.toCollection().and(o)},Te.prototype.count=function(o){return this.toCollection().count(o)},Te.prototype.offset=function(o){return this.toCollection().offset(o)},Te.prototype.limit=function(o){return this.toCollection().limit(o)},Te.prototype.each=function(o){return this.toCollection().each(o)},Te.prototype.toArray=function(o){return this.toCollection().toArray(o)},Te.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Te.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,u(o)?"[".concat(o.join("+"),"]"):o))},Te.prototype.reverse=function(){return this.toCollection().reverse()},Te.prototype.mapToClass=function(o){var l,c=this.db,f=this.name;function h(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Rd&&(function(j,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function R(){this.constructor=j}n(j,O),j.prototype=O===null?Object.create(O):(R.prototype=O.prototype,new R)}(h,l=o),Object.defineProperty(h.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},o=h);for(var v=new Set,b=o.prototype;b;b=p(b))Object.getOwnPropertyNames(b).forEach(function(j){return v.add(j)});function k(j){if(!j)return j;var O,R=Object.create(o.prototype);for(O in j)if(!v.has(O))try{R[O]=j[O]}catch{}return R}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),o},Te.prototype.defineClass=function(){return this.mapToClass(function(o){d(this,o)})},Te.prototype.add=function(o,l){var c=this,f=this.schema.primKey,h=f.auto,v=f.keyPath,b=o;return v&&h&&(b=uo(v)(o)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"add",keys:l!=null?[l]:null,values:[b]})}).then(function(k){return k.numFailures?ne.reject(k.failures[0]):k.lastResult}).then(function(k){if(v)try{V(o,v,k)}catch{}return k})},Te.prototype.update=function(o,l){return typeof o!="object"||u(o)?this.where(":id").equals(o).modify(l):(o=q(o,this.schema.primKey.keyPath),o===void 0?Be(new ue.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(l))},Te.prototype.put=function(o,l){var c=this,f=this.schema.primKey,h=f.auto,v=f.keyPath,b=o;return v&&h&&(b=uo(v)(o)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"put",values:[b],keys:l!=null?[l]:null})}).then(function(k){return k.numFailures?ne.reject(k.failures[0]):k.lastResult}).then(function(k){if(v)try{V(o,v,k)}catch{}return k})},Te.prototype.delete=function(o){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[o]}).then(function(f){return co(l,[o],f)}).then(function(f){return f.numFailures?ne.reject(f.failures[0]):void 0})})},Te.prototype.clear=function(){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"deleteRange",range:Nd}).then(function(c){return co(o,null,c)})}).then(function(l){return l.numFailures?ne.reject(l.failures[0]):void 0})},Te.prototype.bulkGet=function(o){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:o,trans:c}).then(function(f){return f.map(function(h){return l.hook.reading.fire(h)})})})},Te.prototype.bulkAdd=function(o,l,c){var f=this,h=Array.isArray(l)?l:void 0,v=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(b){var O=f.schema.primKey,k=O.auto,O=O.keyPath;if(O&&h)throw new ue.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,O=O&&k?o.map(uo(O)):o;return f.core.mutate({trans:b,type:"add",keys:h,values:O,wantResults:v}).then(function(T){var E=T.numFailures,D=T.results,C=T.lastResult,T=T.failures;if(E===0)return v?D:C;throw new _t("".concat(f.name,".bulkAdd(): ").concat(E," of ").concat(j," operations failed"),T)})})},Te.prototype.bulkPut=function(o,l,c){var f=this,h=Array.isArray(l)?l:void 0,v=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(b){var O=f.schema.primKey,k=O.auto,O=O.keyPath;if(O&&h)throw new ue.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new ue.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,O=O&&k?o.map(uo(O)):o;return f.core.mutate({trans:b,type:"put",keys:h,values:O,wantResults:v}).then(function(T){var E=T.numFailures,D=T.results,C=T.lastResult,T=T.failures;if(E===0)return v?D:C;throw new _t("".concat(f.name,".bulkPut(): ").concat(E," of ").concat(j," operations failed"),T)})})},Te.prototype.bulkUpdate=function(o){var l=this,c=this.core,f=o.map(function(b){return b.key}),h=o.map(function(b){return b.changes}),v=[];return this._trans("readwrite",function(b){return c.getMany({trans:b,keys:f,cache:"clone"}).then(function(k){var j=[],O=[];o.forEach(function(E,D){var C=E.key,T=E.changes,I=k[D];if(I){for(var A=0,$=Object.keys(T);A<$.length;A++){var U=$[A],z=T[U];if(U===l.schema.primKey.keyPath){if(we(z,C)!==0)throw new ue.Constraint("Cannot update primary key in bulkUpdate()")}else V(I,U,z)}v.push(D),j.push(C),O.push(I)}});var R=j.length;return c.mutate({trans:b,type:"put",keys:j,values:O,updates:{keys:f,changeSpecs:h}}).then(function(E){var D=E.numFailures,C=E.failures;if(D===0)return R;for(var T=0,I=Object.keys(C);T<I.length;T++){var A,$=I[T],U=v[Number($)];U!=null&&(A=C[$],delete C[$],C[U]=A)}throw new _t("".concat(l.name,".bulkUpdate(): ").concat(D," of ").concat(R," operations failed"),C)})})})},Te.prototype.bulkDelete=function(o){var l=this,c=o.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:o}).then(function(h){return co(l,o,h)})}).then(function(b){var h=b.numFailures,v=b.lastResult,b=b.failures;if(h===0)return v;throw new _t("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),b)})},Te);function Te(){}function Ki(o){function l(b,k){if(k){for(var j=arguments.length,O=new Array(j-1);--j;)O[j-1]=arguments[j];return c[b].subscribe.apply(null,O),o}if(typeof b=="string")return c[b]}var c={};l.addEventType=v;for(var f=1,h=arguments.length;f<h;++f)v(arguments[f]);return l;function v(b,k,j){if(typeof b!="object"){var O;k=k||Fv;var R={subscribers:[],fire:j=j||je,subscribe:function(E){R.subscribers.indexOf(E)===-1&&(R.subscribers.push(E),R.fire=k(R.fire,E))},unsubscribe:function(E){R.subscribers=R.subscribers.filter(function(D){return D!==E}),R.fire=R.subscribers.reduce(k,j)}};return c[b]=l[b]=R}a(O=b).forEach(function(E){var D=O[E];if(u(D))v(E,O[E][0],O[E][1]);else{if(D!=="asap")throw new ue.InvalidArgument("Invalid event config");var C=v(E,Ui,function(){for(var T=arguments.length,I=new Array(T);T--;)I[T]=arguments[T];C.subscribers.forEach(function(A){K(function(){A.apply(null,I)})})})}})}}function qi(o,l){return N(l).from({prototype:o}),l}function Wr(o,l){return!(o.filter||o.algorithm||o.or)&&(l?o.justLimit:!o.replayFilter)}function hl(o,l){o.filter=pr(o.filter,l)}function pl(o,l,c){var f=o.replayFilter;o.replayFilter=f?function(){return pr(f(),l())}:l,o.justLimit=c&&!f}function fo(o,l){if(o.isPrimKey)return l.primaryKey;var c=l.getIndexByKeyPath(o.index);if(!c)throw new ue.Schema("KeyPath "+o.index+" on object store "+l.name+" is not indexed");return c}function $d(o,l,c){var f=fo(o,l.schema);return l.openCursor({trans:c,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function ho(o,l,c,f){var h=o.replayFilter?pr(o.filter,o.replayFilter()):o.filter;if(o.or){var v={},b=function(k,j,O){var R,E;h&&!h(j,O,function(D){return j.stop(D)},function(D){return j.fail(D)})||((E=""+(R=j.primaryKey))=="[object ArrayBuffer]"&&(E=""+new Uint8Array(R)),w(v,E)||(v[E]=!0,l(k,j,O)))};return Promise.all([o.or._iterate(b,c),Ld($d(o,f,c),o.algorithm,b,!o.keysOnly&&o.valueMapper)])}return Ld($d(o,f,c),pr(o.algorithm,h),l,!o.keysOnly&&o.valueMapper)}function Ld(o,l,c,f){var h=Ae(f?function(v,b,k){return c(f(v),b,k)}:c);return o.then(function(v){if(v)return v.start(function(){var b=function(){return v.continue()};l&&!l(v,function(k){return b=k},function(k){v.stop(k),b=je},function(k){v.fail(k),b=je})||h(v.value,v,function(k){return b=k}),b()})})}var Wi=(Ud.prototype.execute=function(o){var l=this["@@propmod"];if(l.add!==void 0){var c=l.add;if(u(c))return i(i([],u(o)?o:[],!0),c).sort();if(typeof c=="number")return(Number(o)||0)+c;if(typeof c=="bigint")try{return BigInt(o)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(l.remove!==void 0){var f=l.remove;if(u(f))return u(o)?o.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=l.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof o=="string"&&o.startsWith(c)?l.replacePrefix[1]+o.substring(c.length):o},Ud);function Ud(o){this["@@propmod"]=o}var Hv=(xe.prototype._read=function(o,l){var c=this._ctx;return c.error?c.table._trans(null,Be.bind(null,c.error)):c.table._trans("readonly",o).then(l)},xe.prototype._write=function(o){var l=this._ctx;return l.error?l.table._trans(null,Be.bind(null,l.error)):l.table._trans("readwrite",o,"locked")},xe.prototype._addAlgorithm=function(o){var l=this._ctx;l.algorithm=pr(l.algorithm,o)},xe.prototype._iterate=function(o,l){return ho(this._ctx,o,l,this._ctx.table.core)},xe.prototype.clone=function(o){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return o&&d(c,o),l._ctx=c,l},xe.prototype.raw=function(){return this._ctx.valueMapper=null,this},xe.prototype.each=function(o){var l=this._ctx;return this._read(function(c){return ho(l,o,c,l.table.core)})},xe.prototype.count=function(o){var l=this;return this._read(function(c){var f=l._ctx,h=f.table.core;if(Wr(f,!0))return h.count({trans:c,query:{index:fo(f,h.schema),range:f.range}}).then(function(b){return Math.min(b,f.limit)});var v=0;return ho(f,function(){return++v,!1},c,h).then(function(){return v})}).then(o)},xe.prototype.sortBy=function(o,l){var c=o.split(".").reverse(),f=c[0],h=c.length-1;function v(j,O){return O?v(j[c[O]],O-1):j[f]}var b=this._ctx.dir==="next"?1:-1;function k(j,O){return we(v(j,h),v(O,h))*b}return this.toArray(function(j){return j.sort(k)}).then(l)},xe.prototype.toArray=function(o){var l=this;return this._read(function(c){var f=l._ctx;if(f.dir==="next"&&Wr(f,!0)&&0<f.limit){var h=f.valueMapper,v=fo(f,f.table.core.schema);return f.table.core.query({trans:c,limit:f.limit,values:!0,query:{index:v,range:f.range}}).then(function(k){return k=k.result,h?k.map(h):k})}var b=[];return ho(f,function(k){return b.push(k)},c,f.table.core).then(function(){return b})},o)},xe.prototype.offset=function(o){var l=this._ctx;return o<=0||(l.offset+=o,Wr(l)?pl(l,function(){var c=o;return function(f,h){return c===0||(c===1?--c:h(function(){f.advance(c),c=0}),!1)}}):pl(l,function(){var c=o;return function(){return--c<0}})),this},xe.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),pl(this._ctx,function(){var l=o;return function(c,f,h){return--l<=0&&f(h),0<=l}},!0),this},xe.prototype.until=function(o,l){return hl(this._ctx,function(c,f,h){return!o(c.value)||(f(h),l)}),this},xe.prototype.first=function(o){return this.limit(1).toArray(function(l){return l[0]}).then(o)},xe.prototype.last=function(o){return this.reverse().first(o)},xe.prototype.filter=function(o){var l;return hl(this._ctx,function(c){return o(c.value)}),(l=this._ctx).isMatch=pr(l.isMatch,o),this},xe.prototype.and=function(o){return this.filter(o)},xe.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},xe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},xe.prototype.desc=function(){return this.reverse()},xe.prototype.eachKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.key,f)})},xe.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},xe.prototype.eachPrimaryKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.primaryKey,f)})},xe.prototype.keys=function(o){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,h){c.push(h.key)}).then(function(){return c}).then(o)},xe.prototype.primaryKeys=function(o){var l=this._ctx;if(l.dir==="next"&&Wr(l,!0)&&0<l.limit)return this._read(function(f){var h=fo(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(f){return f.result}).then(o);l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,h){c.push(h.primaryKey)}).then(function(){return c}).then(o)},xe.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},xe.prototype.firstKey=function(o){return this.limit(1).keys(function(l){return l[0]}).then(o)},xe.prototype.lastKey=function(o){return this.reverse().firstKey(o)},xe.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var l={};return hl(this._ctx,function(h){var f=h.primaryKey.toString(),h=w(l,f);return l[f]=!0,!h}),this},xe.prototype.modify=function(o){var l=this,c=this._ctx;return this._write(function(f){var h,v,b;b=typeof o=="function"?o:(h=a(o),v=h.length,function($){for(var U=!1,z=0;z<v;++z){var F=h[z],H=o[F],Y=q($,F);H instanceof Wi?(V($,F,H.execute(Y)),U=!0):Y!==H&&(V($,F,H),U=!0)}return U});var k=c.table.core,E=k.schema.primaryKey,j=E.outbound,O=E.extractKey,R=200,E=l.db._options.modifyChunkSize;E&&(R=typeof E=="object"?E[k.name]||E["*"]||200:E);function D($,F){var z=F.failures,F=F.numFailures;T+=$-F;for(var H=0,Y=a(z);H<Y.length;H++){var Q=Y[H];C.push(z[Q])}}var C=[],T=0,I=[],A=o===Md;return l.clone().primaryKeys().then(function($){function U(F){var H=Math.min(R,$.length-F),Y=$.slice(F,F+H);return(A?Promise.resolve([]):k.getMany({trans:f,keys:Y,cache:"immutable"})).then(function(Q){var J=[],ee=[],Z=j?[]:null,re=A?Y:[];if(!A)for(var ge=0;ge<H;++ge){var _e=Q[ge],me={value:Qe(_e),primKey:$[F+ge]};b.call(me,me.value,me)!==!1&&(me.value==null?re.push($[F+ge]):j||we(O(_e),O(me.value))===0?(ee.push(me.value),j&&Z.push($[F+ge])):(re.push($[F+ge]),J.push(me.value)))}return Promise.resolve(0<J.length&&k.mutate({trans:f,type:"add",values:J}).then(function(Me){for(var pe in Me.failures)re.splice(parseInt(pe),1);D(J.length,Me)})).then(function(){return(0<ee.length||z&&typeof o=="object")&&k.mutate({trans:f,type:"put",keys:Z,values:ee,criteria:z,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<F}).then(function(Me){return D(ee.length,Me)})}).then(function(){return(0<re.length||z&&A)&&k.mutate({trans:f,type:"delete",keys:re,criteria:z,isAdditionalChunk:0<F}).then(function(Me){return co(c.table,re,Me)}).then(function(Me){return D(re.length,Me)})}).then(function(){return $.length>F+H&&U(F+R)})})}var z=Wr(c)&&c.limit===1/0&&(typeof o!="function"||A)&&{index:c.index,range:c.range};return U(0).then(function(){if(0<C.length)throw new jn("Error modifying one or more objects",C,T,I);return $.length})})})},xe.prototype.delete=function(){var o=this._ctx,l=o.range;return!Wr(o)||o.table.schema.yProps||!o.isPrimKey&&l.type!==3?this.modify(Md):this._write(function(c){var f=o.table.core.schema.primaryKey,h=l;return o.table.core.count({trans:c,query:{index:f,range:h}}).then(function(v){return o.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(j){var k=j.failures,j=j.numFailures;if(j)throw new jn("Could not delete some values",Object.keys(k).map(function(O){return k[O]}),v-j);return v-j})})})},xe);function xe(){}var Md=function(o,l){return l.value=null};function Gv(o,l){return o<l?-1:o===l?0:1}function Qv(o,l){return l<o?-1:o===l?0:1}function Pt(o,l,c){return o=o instanceof Fd?new o.Collection(o):o,o._ctx.error=new(c||TypeError)(l),o}function Vr(o){return new o.Collection(o,function(){return zd("")}).limit(0)}function po(o,l,c,f){var h,v,b,k,j,O,R,E=c.length;if(!c.every(function(T){return typeof T=="string"}))return Pt(o,Td);function D(T){h=T==="next"?function(A){return A.toUpperCase()}:function(A){return A.toLowerCase()},v=T==="next"?function(A){return A.toLowerCase()}:function(A){return A.toUpperCase()},b=T==="next"?Gv:Qv;var I=c.map(function(A){return{lower:v(A),upper:h(A)}}).sort(function(A,$){return b(A.lower,$.lower)});k=I.map(function(A){return A.upper}),j=I.map(function(A){return A.lower}),R=(O=T)==="next"?"":f}D("next"),o=new o.Collection(o,function(){return Rn(k[0],j[E-1]+f)}),o._ondirectionchange=function(T){D(T)};var C=0;return o._addAlgorithm(function(T,I,A){var $=T.key;if(typeof $!="string")return!1;var U=v($);if(l(U,j,C))return!0;for(var z=null,F=C;F<E;++F){var H=function(Y,Q,J,ee,Z,re){for(var ge=Math.min(Y.length,ee.length),_e=-1,me=0;me<ge;++me){var Me=Q[me];if(Me!==ee[me])return Z(Y[me],J[me])<0?Y.substr(0,me)+J[me]+J.substr(me+1):Z(Y[me],ee[me])<0?Y.substr(0,me)+ee[me]+J.substr(me+1):0<=_e?Y.substr(0,_e)+Q[_e]+J.substr(_e+1):null;Z(Y[me],Me)<0&&(_e=me)}return ge<ee.length&&re==="next"?Y+J.substr(Y.length):ge<Y.length&&re==="prev"?Y.substr(0,J.length):_e<0?null:Y.substr(0,_e)+ee[_e]+J.substr(_e+1)}($,U,k[F],j[F],b,O);H===null&&z===null?C=F+1:(z===null||0<b(z,H))&&(z=H)}return I(z!==null?function(){T.continue(z+R)}:A),!1}),o}function Rn(o,l,c,f){return{type:2,lower:o,upper:l,lowerOpen:c,upperOpen:f}}function zd(o){return{type:1,lower:o,upper:o}}var Fd=(Object.defineProperty(et.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),et.prototype.between=function(o,l,c,f){c=c!==!1,f=f===!0;try{return 0<this._cmp(o,l)||this._cmp(o,l)===0&&(c||f)&&(!c||!f)?Vr(this):new this.Collection(this,function(){return Rn(o,l,!c,!f)})}catch{return Pt(this,hn)}},et.prototype.equals=function(o){return o==null?Pt(this,hn):new this.Collection(this,function(){return zd(o)})},et.prototype.above=function(o){return o==null?Pt(this,hn):new this.Collection(this,function(){return Rn(o,void 0,!0)})},et.prototype.aboveOrEqual=function(o){return o==null?Pt(this,hn):new this.Collection(this,function(){return Rn(o,void 0,!1)})},et.prototype.below=function(o){return o==null?Pt(this,hn):new this.Collection(this,function(){return Rn(void 0,o,!1,!0)})},et.prototype.belowOrEqual=function(o){return o==null?Pt(this,hn):new this.Collection(this,function(){return Rn(void 0,o)})},et.prototype.startsWith=function(o){return typeof o!="string"?Pt(this,Td):this.between(o,o+hr,!0,!0)},et.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):po(this,function(l,c){return l.indexOf(c[0])===0},[o],hr)},et.prototype.equalsIgnoreCase=function(o){return po(this,function(l,c){return l===c[0]},[o],"")},et.prototype.anyOfIgnoreCase=function(){var o=he.apply(fe,arguments);return o.length===0?Vr(this):po(this,function(l,c){return c.indexOf(l)!==-1},o,"")},et.prototype.startsWithAnyOfIgnoreCase=function(){var o=he.apply(fe,arguments);return o.length===0?Vr(this):po(this,function(l,c){return c.some(function(f){return l.indexOf(f)===0})},o,hr)},et.prototype.anyOf=function(){var o=this,l=he.apply(fe,arguments),c=this._cmp;try{l.sort(c)}catch{return Pt(this,hn)}if(l.length===0)return Vr(this);var f=new this.Collection(this,function(){return Rn(l[0],l[l.length-1])});f._ondirectionchange=function(v){c=v==="next"?o._ascending:o._descending,l.sort(c)};var h=0;return f._addAlgorithm(function(v,b,k){for(var j=v.key;0<c(j,l[h]);)if(++h===l.length)return b(k),!1;return c(j,l[h])===0||(b(function(){v.continue(l[h])}),!1)}),f},et.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},et.prototype.noneOf=function(){var o=he.apply(fe,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Pt(this,hn)}var l=o.reduce(function(c,f){return c?c.concat([[c[c.length-1][1],f]]):[[-1/0,f]]},null);return l.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},et.prototype.inAnyRange=function($,l){var c=this,f=this._cmp,h=this._ascending,v=this._descending,b=this._min,k=this._max;if($.length===0)return Vr(this);if(!$.every(function(U){return U[0]!==void 0&&U[1]!==void 0&&h(U[0],U[1])<=0}))return Pt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ue.InvalidArgument);var j=!l||l.includeLowers!==!1,O=l&&l.includeUppers===!0,R,E=h;function D(U,z){return E(U[0],z[0])}try{(R=$.reduce(function(U,z){for(var F=0,H=U.length;F<H;++F){var Y=U[F];if(f(z[0],Y[1])<0&&0<f(z[1],Y[0])){Y[0]=b(Y[0],z[0]),Y[1]=k(Y[1],z[1]);break}}return F===H&&U.push(z),U},[])).sort(D)}catch{return Pt(this,hn)}var C=0,T=O?function(U){return 0<h(U,R[C][1])}:function(U){return 0<=h(U,R[C][1])},I=j?function(U){return 0<v(U,R[C][0])}:function(U){return 0<=v(U,R[C][0])},A=T,$=new this.Collection(this,function(){return Rn(R[0][0],R[R.length-1][1],!j,!O)});return $._ondirectionchange=function(U){E=U==="next"?(A=T,h):(A=I,v),R.sort(D)},$._addAlgorithm(function(U,z,F){for(var H,Y=U.key;A(Y);)if(++C===R.length)return z(F),!1;return!T(H=Y)&&!I(H)||(c._cmp(Y,R[C][1])===0||c._cmp(Y,R[C][0])===0||z(function(){E===h?U.continue(R[C][0]):U.continue(R[C][1])}),!1)}),$},et.prototype.startsWithAnyOf=function(){var o=he.apply(fe,arguments);return o.every(function(l){return typeof l=="string"})?o.length===0?Vr(this):this.inAnyRange(o.map(function(l){return[l,l+hr]})):Pt(this,"startsWithAnyOf() only works with strings")},et);function et(){}function sn(o){return Ae(function(l){return Vi(l),o(l.target.error),!1})}function Vi(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Hi="storagemutated",ml="x-storagemutated-1",An=Ki(null,Hi),Jv=(on.prototype._lock=function(){return M(!oe.global),++this._reculock,this._reculock!==1||oe.global||(oe.lockOwnerFor=this),this},on.prototype._unlock=function(){if(M(!oe.global),--this._reculock==0)for(oe.global||(oe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{fr(o[1],o[0])}catch{}}return this},on.prototype._locked=function(){return this._reculock&&oe.lockOwnerFor!==this},on.prototype.create=function(o){var l=this;if(!this.mode)return this;var c=this.db.idbdb,f=this.db._state.dbOpenError;if(M(!this.idbtrans),!o&&!c)switch(f&&f.name){case"DatabaseClosedError":throw new ue.DatabaseClosed(f);case"MissingAPIError":throw new ue.MissingAPI(f.message,f);default:throw new ue.OpenFailed(f)}if(!this.active)throw new ue.TransactionInactive;return M(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ae(function(h){Vi(h),l._reject(o.error)}),o.onabort=Ae(function(h){Vi(h),l.active&&l._reject(new ue.Abort(o.error)),l.active=!1,l.on("abort").fire(h)}),o.oncomplete=Ae(function(){l.active=!1,l._resolve(),"mutatedParts"in o&&An.storagemutated.fire(o.mutatedParts)}),this},on.prototype._promise=function(o,l,c){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return Be(new ue.ReadOnly("Transaction is readonly"));if(!this.active)return Be(new ue.TransactionInactive);if(this._locked())return new ne(function(v,b){f._blockedFuncs.push([function(){f._promise(o,l,c).then(v,b)},oe])});if(c)return Pn(function(){var v=new ne(function(b,k){f._lock();var j=l(b,k,f);j&&j.then&&j.then(b,k)});return v.finally(function(){return f._unlock()}),v._lib=!0,v});var h=new ne(function(v,b){var k=l(v,b,f);k&&k.then&&k.then(v,b)});return h._lib=!0,h},on.prototype._root=function(){return this.parent?this.parent._root():this},on.prototype.waitFor=function(o){var l,c=this._root(),f=ne.resolve(o);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return f}):(c._waitingFor=f,c._waitingQueue=[],l=c.idbtrans.objectStore(c.storeNames[0]),function v(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(l.get(-1/0).onsuccess=v)}());var h=c._waitingFor;return new ne(function(v,b){f.then(function(k){return c._waitingQueue.push(Ae(v.bind(null,k)))},function(k){return c._waitingQueue.push(Ae(b.bind(null,k)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},on.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ue.Abort))},on.prototype.table=function(o){var l=this._memoizedTables||(this._memoizedTables={});if(w(l,o))return l[o];var c=this.schema[o];if(!c)throw new ue.NotFound("Table "+o+" not part of transaction");return c=new this.db.Table(o,c,this),c.core=this.db.core.table(o),l[o]=c},on);function on(){}function vl(o,l,c,f,h,v,b,k){return{name:o,keyPath:l,unique:c,multi:f,auto:h,compound:v,src:(c&&!b?"&":"")+(f?"*":"")+(h?"++":"")+Bd(l),type:k}}function Bd(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function gl(o,l,c){return{name:o,primKey:l,indexes:c,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},c.reduce(function(h,v,b){return b=f(v,b),b&&(h[b[0]]=b[1]),h},{}))};var f}var Gi=function(o){try{return o.only([[]]),Gi=function(){return[[]]},[[]]}catch{return Gi=function(){return hr},hr}};function yl(o){return o==null?function(){}:typeof o=="string"?(l=o).split(".").length===1?function(c){return c[l]}:function(c){return q(c,l)}:function(c){return q(c,o)};var l}function Kd(o){return[].slice.call(o)}var Yv=0;function Qi(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function Xv(o,l,j){function f(A){if(A.type===3)return null;if(A.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=A.lower,T=A.upper,I=A.lowerOpen,A=A.upperOpen;return C===void 0?T===void 0?null:l.upperBound(T,!!A):T===void 0?l.lowerBound(C,!!I):l.bound(C,T,!!I,!!A)}function h(D){var C,T=D.name;return{name:T,schema:D,mutate:function(I){var A=I.trans,$=I.type,U=I.keys,z=I.values,F=I.range;return new Promise(function(H,Y){H=Ae(H);var Q=A.objectStore(T),J=Q.keyPath==null,ee=$==="put"||$==="add";if(!ee&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var Z,re=(U||z||{length:1}).length;if(U&&z&&U.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(re===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(pt){++Me,Vi(pt)}var _e=[],me=[],Me=0;if($==="deleteRange"){if(F.type===4)return H({numFailures:Me,failures:me,results:[],lastResult:void 0});F.type===3?_e.push(Z=Q.clear()):_e.push(Z=Q.delete(f(F)))}else{var J=ee?J?[z,U]:[z,null]:[U,null],pe=J[0],lt=J[1];if(ee)for(var ut=0;ut<re;++ut)_e.push(Z=lt&&lt[ut]!==void 0?Q[$](pe[ut],lt[ut]):Q[$](pe[ut])),Z.onerror=ge;else for(ut=0;ut<re;++ut)_e.push(Z=Q[$](pe[ut])),Z.onerror=ge}function jo(pt){pt=pt.target.result,_e.forEach(function(gr,$l){return gr.error!=null&&(me[$l]=gr.error)}),H({numFailures:Me,failures:me,results:$==="delete"?U:_e.map(function(gr){return gr.result}),lastResult:pt})}Z.onerror=function(pt){ge(pt),jo(pt)},Z.onsuccess=jo})},getMany:function(I){var A=I.trans,$=I.keys;return new Promise(function(U,z){U=Ae(U);for(var F,H=A.objectStore(T),Y=$.length,Q=new Array(Y),J=0,ee=0,Z=function(_e){_e=_e.target,Q[_e._pos]=_e.result,++ee===J&&U(Q)},re=sn(z),ge=0;ge<Y;++ge)$[ge]!=null&&((F=H.get($[ge]))._pos=ge,F.onsuccess=Z,F.onerror=re,++J);J===0&&U(Q)})},get:function(I){var A=I.trans,$=I.key;return new Promise(function(U,z){U=Ae(U);var F=A.objectStore(T).get($);F.onsuccess=function(H){return U(H.target.result)},F.onerror=sn(z)})},query:(C=O,function(I){return new Promise(function(A,$){A=Ae(A);var U,z,F,J=I.trans,H=I.values,Y=I.limit,Z=I.query,Q=Y===1/0?void 0:Y,ee=Z.index,Z=Z.range,J=J.objectStore(T),ee=ee.isPrimaryKey?J:J.index(ee.name),Z=f(Z);if(Y===0)return A({result:[]});C?((Q=H?ee.getAll(Z,Q):ee.getAllKeys(Z,Q)).onsuccess=function(re){return A({result:re.target.result})},Q.onerror=sn($)):(U=0,z=!H&&"openKeyCursor"in ee?ee.openKeyCursor(Z):ee.openCursor(Z),F=[],z.onsuccess=function(re){var ge=z.result;return ge?(F.push(H?ge.value:ge.primaryKey),++U===Y?A({result:F}):void ge.continue()):A({result:F})},z.onerror=sn($))})}),openCursor:function(I){var A=I.trans,$=I.values,U=I.query,z=I.reverse,F=I.unique;return new Promise(function(H,Y){H=Ae(H);var ee=U.index,Q=U.range,J=A.objectStore(T),J=ee.isPrimaryKey?J:J.index(ee.name),ee=z?F?"prevunique":"prev":F?"nextunique":"next",Z=!$&&"openKeyCursor"in J?J.openKeyCursor(f(Q),ee):J.openCursor(f(Q),ee);Z.onerror=sn(Y),Z.onsuccess=Ae(function(re){var ge,_e,me,Me,pe=Z.result;pe?(pe.___id=++Yv,pe.done=!1,ge=pe.continue.bind(pe),_e=(_e=pe.continuePrimaryKey)&&_e.bind(pe),me=pe.advance.bind(pe),Me=function(){throw new Error("Cursor not stopped")},pe.trans=A,pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=function(){throw new Error("Cursor not started")},pe.fail=Ae(Y),pe.next=function(){var lt=this,ut=1;return this.start(function(){return ut--?lt.continue():lt.stop()}).then(function(){return lt})},pe.start=function(lt){function ut(){if(Z.result)try{lt()}catch(pt){pe.fail(pt)}else pe.done=!0,pe.start=function(){throw new Error("Cursor behind last entry")},pe.stop()}var jo=new Promise(function(pt,gr){pt=Ae(pt),Z.onerror=sn(gr),pe.fail=gr,pe.stop=function($l){pe.stop=pe.continue=pe.continuePrimaryKey=pe.advance=Me,pt($l)}});return Z.onsuccess=Ae(function(pt){Z.onsuccess=ut,ut()}),pe.continue=ge,pe.continuePrimaryKey=_e,pe.advance=me,ut(),jo},H(pe)):H(null)},Y)})},count:function(I){var A=I.query,$=I.trans,U=A.index,z=A.range;return new Promise(function(F,H){var Y=$.objectStore(T),Q=U.isPrimaryKey?Y:Y.index(U.name),Y=f(z),Q=Y?Q.count(Y):Q.count();Q.onsuccess=Ae(function(J){return F(J.target.result)}),Q.onerror=sn(H)})}}}var v,b,k,R=(b=j,k=Kd((v=o).objectStoreNames),{schema:{name:v.name,tables:k.map(function(D){return b.objectStore(D)}).map(function(D){var C=D.keyPath,A=D.autoIncrement,T=u(C),I={},A={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:T,keyPath:C,autoIncrement:A,unique:!0,extractKey:yl(C)},indexes:Kd(D.indexNames).map(function($){return D.index($)}).map(function(F){var U=F.name,z=F.unique,H=F.multiEntry,F=F.keyPath,H={name:U,compound:u(F),keyPath:F,unique:z,multiEntry:H,extractKey:yl(F)};return I[Qi(F)]=H}),getIndexByKeyPath:function($){return I[Qi($)]}};return I[":id"]=A.primaryKey,C!=null&&(I[Qi(C)]=A.primaryKey),A})},hasGetAll:0<k.length&&"getAll"in b.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=R.schema,O=R.hasGetAll,R=j.tables.map(h),E={};return R.forEach(function(D){return E[D.name]=D}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(D){if(!E[D])throw new Error("Table '".concat(D,"' not found"));return E[D]},MIN_KEY:-1/0,MAX_KEY:Gi(l),schema:j}}function Zv(o,l,c,f){var h=c.IDBKeyRange;return c.indexedDB,{dbcore:(f=Xv(l,h,f),o.dbcore.reduce(function(v,b){return b=b.create,r(r({},v),b(v))},f))}}function mo(o,f){var c=f.db,f=Zv(o._middlewares,c,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(h){var v=h.name;o.core.schema.tables.some(function(b){return b.name===v})&&(h.core=o.core.table(v),o[v]instanceof o.Table&&(o[v].core=h.core))})}function vo(o,l,c,f){c.forEach(function(h){var v=f[h];l.forEach(function(b){var k=function j(O,R){return B(O,R)||(O=p(O))&&j(O,R)}(b,h);(!k||"value"in k&&k.value===void 0)&&(b===o.Transaction.prototype||b instanceof o.Transaction?L(b,h,{get:function(){return this.table(h)},set:function(j){P(this,h,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):b[h]=new o.Table(h,v))})})}function wl(o,l){l.forEach(function(c){for(var f in c)c[f]instanceof o.Table&&delete c[f]})}function eg(o,l){return o._cfg.version-l._cfg.version}function tg(o,l,c,f){var h=o._dbSchema;c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=gl("$meta",Wd("")[0],[]),o._storeNames.push("$meta"));var v=o._createTransaction("readwrite",o._storeNames,h);v.create(c),v._completion.catch(f);var b=v._reject.bind(v),k=oe.transless||oe;Pn(function(){return oe.trans=v,oe.transless=k,l!==0?(mo(o,c),O=l,((j=v).storeNames.includes("$meta")?j.table("$meta").get("version").then(function(R){return R??O}):ne.resolve(O)).then(function(R){return D=R,C=v,T=c,I=[],R=(E=o)._versions,A=E._dbSchema=yo(0,E.idbdb,T),(R=R.filter(function($){return $._cfg.version>=D})).length!==0?(R.forEach(function($){I.push(function(){var U=A,z=$._cfg.dbschema;wo(E,U,T),wo(E,z,T),A=E._dbSchema=z;var F=_l(U,z);F.add.forEach(function(ee){bl(T,ee[0],ee[1].primKey,ee[1].indexes)}),F.change.forEach(function(ee){if(ee.recreate)throw new ue.Upgrade("Not yet support for changing primary key");var Z=T.objectStore(ee.name);ee.add.forEach(function(re){return go(Z,re)}),ee.change.forEach(function(re){Z.deleteIndex(re.name),go(Z,re)}),ee.del.forEach(function(re){return Z.deleteIndex(re)})});var H=$._cfg.contentUpgrade;if(H&&$._cfg.version>D){mo(E,T),C._memoizedTables={};var Y=W(z);F.del.forEach(function(ee){Y[ee]=U[ee]}),wl(E,[E.Transaction.prototype]),vo(E,[E.Transaction.prototype],a(Y),Y),C.schema=Y;var Q,J=be(H);return J&&Kr(),F=ne.follow(function(){var ee;(Q=H(C))&&J&&(ee=Tn.bind(null,null),Q.then(ee,ee))}),Q&&typeof Q.then=="function"?ne.resolve(Q):F.then(function(){return Q})}}),I.push(function(U){var z,F,H=$._cfg.dbschema;z=H,F=U,[].slice.call(F.db.objectStoreNames).forEach(function(Y){return z[Y]==null&&F.db.deleteObjectStore(Y)}),wl(E,[E.Transaction.prototype]),vo(E,[E.Transaction.prototype],E._storeNames,E._dbSchema),C.schema=E._dbSchema}),I.push(function(U){E.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(E.idbdb.version/10)===$._cfg.version?(E.idbdb.deleteObjectStore("$meta"),delete E._dbSchema.$meta,E._storeNames=E._storeNames.filter(function(z){return z!=="$meta"})):U.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return I.length?ne.resolve(I.shift()(C.idbtrans)).then($):ne.resolve()}().then(function(){qd(A,T)})):ne.resolve();var E,D,C,T,I,A}).catch(b)):(a(h).forEach(function(R){bl(c,R,h[R].primKey,h[R].indexes)}),mo(o,c),void ne.follow(function(){return o.on.populate.fire(v)}).catch(b));var j,O})}function ng(o,l){qd(o._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var c=yo(0,o.idbdb,l);wo(o,o._dbSchema,l);for(var f=0,h=_l(c,o._dbSchema).change;f<h.length;f++){var v=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=l.objectStore(b.name);b.add.forEach(function(j){rn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(j.src)),go(k,j)})}(h[f]);if(typeof v=="object")return v.value}}function _l(o,l){var c,f={del:[],add:[],change:[]};for(c in o)l[c]||f.del.push(c);for(c in l){var h=o[c],v=l[c];if(h){var b={name:c,def:v,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(v.primKey.keyPath||"")||h.primKey.auto!==v.primKey.auto)b.recreate=!0,f.change.push(b);else{var k=h.idxByName,j=v.idxByName,O=void 0;for(O in k)j[O]||b.del.push(O);for(O in j){var R=k[O],E=j[O];R?R.src!==E.src&&b.change.push(E):b.add.push(E)}(0<b.del.length||0<b.add.length||0<b.change.length)&&f.change.push(b)}}else f.add.push([c,v])}return f}function bl(o,l,c,f){var h=o.db.createObjectStore(l,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return f.forEach(function(v){return go(h,v)}),h}function qd(o,l){a(o).forEach(function(c){l.db.objectStoreNames.contains(c)||(rn&&console.debug("Dexie: Creating missing table",c),bl(l,c,o[c].primKey,o[c].indexes))})}function go(o,l){o.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function yo(o,l,c){var f={};return y(l.objectStoreNames,0).forEach(function(h){for(var v=c.objectStore(h),b=vl(Bd(O=v.keyPath),O||"",!0,!1,!!v.autoIncrement,O&&typeof O!="string",!0),k=[],j=0;j<v.indexNames.length;++j){var R=v.index(v.indexNames[j]),O=R.keyPath,R=vl(R.name,O,!!R.unique,!!R.multiEntry,!1,O&&typeof O!="string",!1);k.push(R)}f[h]=gl(h,b,k)}),f}function wo(o,l,c){for(var f=c.db.objectStoreNames,h=0;h<f.length;++h){var v=f[h],b=c.objectStore(v);o._hasGetAll="getAll"in b;for(var k=0;k<b.indexNames.length;++k){var j=b.indexNames[k],O=b.index(j).keyPath,R=typeof O=="string"?O:"["+y(O).join("+")+"]";!l[v]||(O=l[v].idxByName[R])&&(O.name=j,delete l[v].idxByName[R],l[v].idxByName[j]=O)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Wd(o){return o.split(",").map(function(l,c){var v=l.split(":"),f=(h=v[1])===null||h===void 0?void 0:h.trim(),h=(l=v[0].trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return vl(h,v||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),u(v),c===0,f)})}var rg=(Hr.prototype._createTableSchema=gl,Hr.prototype._parseIndexSyntax=Wd,Hr.prototype._parseStoresSpec=function(o,l){var c=this;a(o).forEach(function(f){if(o[f]!==null){var h=c._parseIndexSyntax(o[f]),v=h.shift();if(!v)throw new ue.Schema("Invalid schema for table "+f+": "+o[f]);if(v.unique=!0,v.multi)throw new ue.Schema("Primary key cannot be multiEntry*");h.forEach(function(b){if(b.auto)throw new ue.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new ue.Schema("Index must have a name and cannot be an empty string")}),h=c._createTableSchema(f,v,h),l[f]=h}})},Hr.prototype.stores=function(c){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,c):c;var c=l._versions,f={},h={};return c.forEach(function(v){d(f,v._cfg.storesSource),h=v._cfg.dbschema={},v._parseStoresSpec(f,h)}),l._dbSchema=h,wl(l,[l._allTables,l,l.Transaction.prototype]),vo(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(h),h),l._storeNames=a(h),this},Hr.prototype.upgrade=function(o){return this._cfg.contentUpgrade=nl(this._cfg.contentUpgrade||je,o),this},Hr);function Hr(){}function kl(o,l){var c=o._dbNamesDB;return c||(c=o._dbNamesDB=new pn(lo,{addons:[],indexedDB:o,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function xl(o){return o&&typeof o.databases=="function"}function Sl(o){return Pn(function(){return oe.letThrough=!0,o()})}function El(o){return!("from"in o)}var at=function(o,l){if(!this){var c=new at;return o&&"d"in o&&d(c,o),c}d(this,arguments.length?{d:1,from:o,to:1<arguments.length?l:o}:{d:0})};function Ji(o,l,c){var f=we(l,c);if(!isNaN(f)){if(0<f)throw RangeError();if(El(o))return d(o,{from:l,to:c,d:1});var h=o.l,f=o.r;if(we(c,o.from)<0)return h?Ji(h,l,c):o.l={from:l,to:c,d:1,l:null,r:null},Hd(o);if(0<we(l,o.to))return f?Ji(f,l,c):o.r={from:l,to:c,d:1,l:null,r:null},Hd(o);we(l,o.from)<0&&(o.from=l,o.l=null,o.d=f?f.d+1:1),0<we(c,o.to)&&(o.to=c,o.r=null,o.d=o.l?o.l.d+1:1),c=!o.r,h&&!o.l&&Yi(o,h),f&&c&&Yi(o,f)}}function Yi(o,l){El(l)||function c(f,j){var v=j.from,b=j.to,k=j.l,j=j.r;Ji(f,v,b),k&&c(f,k),j&&c(f,j)}(o,l)}function Vd(o,l){var c=_o(l),f=c.next();if(f.done)return!1;for(var h=f.value,v=_o(o),b=v.next(h.from),k=b.value;!f.done&&!b.done;){if(we(k.from,h.to)<=0&&0<=we(k.to,h.from))return!0;we(h.from,k.from)<0?h=(f=c.next(k.from)).value:k=(b=v.next(h.from)).value}return!1}function _o(o){var l=El(o)?null:{s:0,n:o};return{next:function(c){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&we(c,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||we(c,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Hd(o){var l,c,f=(((l=o.r)===null||l===void 0?void 0:l.d)||0)-(((c=o.l)===null||c===void 0?void 0:c.d)||0),h=1<f?"r":f<-1?"l":"";h&&(l=h=="r"?"l":"r",c=r({},o),f=o[h],o.from=f.from,o.to=f.to,o[h]=f[h],c[h]=f[l],(o[l]=c).d=Gd(c)),o.d=Gd(o)}function Gd(c){var l=c.r,c=c.l;return(l?c?Math.max(l.d,c.d):l.d:c?c.d:0)+1}function bo(o,l){return a(l).forEach(function(c){o[c]?Yi(o[c],l[c]):o[c]=function f(h){var v,b,k={};for(v in h)w(h,v)&&(b=h[v],k[v]=!b||typeof b!="object"||Ce.has(b.constructor)?b:f(b));return k}(l[c])}),o}function jl(o,l){return o.all||l.all||Object.keys(o).some(function(c){return l[c]&&Vd(l[c],o[c])})}_(at.prototype,((Ut={add:function(o){return Yi(this,o),this},addKey:function(o){return Ji(this,o,o),this},addKeys:function(o){var l=this;return o.forEach(function(c){return Ji(l,c,c)}),this},hasKey:function(o){var l=_o(this).next(o).value;return l&&we(l.from,o)<=0&&0<=we(l.to,o)}})[Fe]=function(){return _o(this)},Ut));var mr={},Cl={},Ol=!1;function ko(o){bo(Cl,o),Ol||(Ol=!0,setTimeout(function(){Ol=!1,Pl(Cl,!(Cl={}))},0))}function Pl(o,l){l===void 0&&(l=!1);var c=new Set;if(o.all)for(var f=0,h=Object.values(mr);f<h.length;f++)Qd(b=h[f],o,c,l);else for(var v in o){var b,k=/^idb\:\/\/(.*)\/(.*)\//.exec(v);k&&(v=k[1],k=k[2],(b=mr["idb://".concat(v,"/").concat(k)])&&Qd(b,o,c,l))}c.forEach(function(j){return j()})}function Qd(o,l,c,f){for(var h=[],v=0,b=Object.entries(o.queries.query);v<b.length;v++){for(var k=b[v],j=k[0],O=[],R=0,E=k[1];R<E.length;R++){var D=E[R];jl(l,D.obsSet)?D.subscribers.forEach(function(A){return c.add(A)}):f&&O.push(D)}f&&h.push([j,O])}if(f)for(var C=0,T=h;C<T.length;C++){var I=T[C],j=I[0],O=I[1];o.queries.query[j]=O}}function ig(o){var l=o._state,c=o._deps.indexedDB;if(l.isBeingOpened||o.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?Be(l.dbOpenError):o});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,h=Math.round(10*o.verno),v=!1;function b(){if(l.openCanceller!==f)throw new ue.DatabaseClosed("db.open() was cancelled")}function k(){return new ne(function(D,C){if(b(),!c)throw new ue.MissingAPI;var T=o.name,I=l.autoSchema||!h?c.open(T):c.open(T,h);if(!I)throw new ue.MissingAPI;I.onerror=sn(C),I.onblocked=Ae(o._fireOnBlocked),I.onupgradeneeded=Ae(function(A){var $;R=I.transaction,l.autoSchema&&!o._options.allowEmptyDB?(I.onerror=Vi,R.abort(),I.result.close(),($=c.deleteDatabase(T)).onsuccess=$.onerror=Ae(function(){C(new ue.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(R.onerror=sn(C),A=A.oldVersion>Math.pow(2,62)?0:A.oldVersion,E=A<1,o.idbdb=I.result,v&&ng(o,R),tg(o,A/10,R,C))},C),I.onsuccess=Ae(function(){R=null;var A,$,U,z,F,H=o.idbdb=I.result,Y=y(H.objectStoreNames);if(0<Y.length)try{var Q=H.transaction((z=Y).length===1?z[0]:z,"readonly");if(l.autoSchema)$=H,U=Q,(A=o).verno=$.version/10,U=A._dbSchema=yo(0,$,U),A._storeNames=y($.objectStoreNames,0),vo(A,[A._allTables],a(U),U);else if(wo(o,o._dbSchema,Q),((F=_l(yo(0,(F=o).idbdb,Q),F._dbSchema)).add.length||F.change.some(function(J){return J.add.length||J.change.length}))&&!v)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),h=H.version+1,v=!0,D(k());mo(o,Q)}catch{}qr.push(o),H.onversionchange=Ae(function(J){l.vcFired=!0,o.on("versionchange").fire(J)}),H.onclose=Ae(function(J){o.on("close").fire(J)}),E&&(F=o._deps,Q=T,H=F.indexedDB,F=F.IDBKeyRange,xl(H)||Q===lo||kl(H,F).put({name:Q}).catch(je)),D()},C)}).catch(function(D){switch(D==null?void 0:D.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<h)return h=0,k()}return ne.reject(D)})}var j,O=l.dbReadyResolve,R=null,E=!1;return ne.race([f,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(D){function C(){return indexedDB.databases().finally(D)}j=setInterval(C,100),C()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(k)]).then(function(){return b(),l.onReadyBeingFired=[],ne.resolve(Sl(function(){return o.on.ready.fire(o.vip)})).then(function D(){if(0<l.onReadyBeingFired.length){var C=l.onReadyBeingFired.reduce(nl,je);return l.onReadyBeingFired=[],ne.resolve(Sl(function(){return C(o.vip)})).then(D)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(D){l.dbOpenError=D;try{R&&R.abort()}catch{}return f===l.openCanceller&&o._close(),Be(D)}).finally(function(){l.openComplete=!0,O()}).then(function(){var D;return E&&(D={},o.tables.forEach(function(C){C.schema.indexes.forEach(function(T){T.name&&(D["idb://".concat(o.name,"/").concat(C.name,"/").concat(T.name)]=new at(-1/0,[[[]]]))}),D["idb://".concat(o.name,"/").concat(C.name,"/")]=D["idb://".concat(o.name,"/").concat(C.name,"/:dels")]=new at(-1/0,[[[]]])}),An(Hi).fire(D),Pl(D,!0)),o})}function Tl(o){function l(v){return o.next(v)}var c=h(l),f=h(function(v){return o.throw(v)});function h(v){return function(j){var k=v(j),j=k.value;return k.done?j:j&&typeof j.then=="function"?j.then(c,f):u(j)?Promise.all(j).then(c,f):c(j)}}return h(l)()}function xo(o,l,c){for(var f=u(o)?o.slice():[o],h=0;h<c;++h)f.push(l);return f}var sg={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema,h={},v=[];function b(E,D,C){var T=Qi(E),I=h[T]=h[T]||[],A=E==null?0:typeof E=="string"?1:E.length,$=0<D,$=r(r({},C),{name:$?"".concat(T,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:$,keyTail:D,keyLength:A,extractKey:yl(E),unique:!$&&C.unique});return I.push($),$.isPrimaryKey||v.push($),1<A&&b(A===2?E[0]:E.slice(0,A-1),D+1,C),I.sort(function(U,z){return U.keyTail-z.keyTail}),$}l=b(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[l];for(var k=0,j=f.indexes;k<j.length;k++){var O=j[k];b(O.keyPath,0,O)}function R(E){var D,C=E.query.index;return C.isVirtual?r(r({},E),{query:{index:C.lowLevelIndex,range:(D=E.query.range,C=C.keyTail,{type:D.type===1?2:D.type,lower:xo(D.lower,D.lowerOpen?o.MAX_KEY:o.MIN_KEY,C),lowerOpen:!0,upper:xo(D.upper,D.upperOpen?o.MIN_KEY:o.MAX_KEY,C),upperOpen:!0})}}):E}return r(r({},c),{schema:r(r({},f),{primaryKey:l,indexes:v,getIndexByKeyPath:function(E){return(E=h[Qi(E)])&&E[0]}}),count:function(E){return c.count(R(E))},query:function(E){return c.query(R(E))},openCursor:function(E){var D=E.query.index,C=D.keyTail,T=D.isVirtual,I=D.keyLength;return T?c.openCursor(R(E)).then(function($){return $&&A($)}):c.openCursor(E);function A($){return Object.create($,{continue:{value:function(U){U!=null?$.continue(xo(U,E.reverse?o.MAX_KEY:o.MIN_KEY,C)):E.unique?$.continue($.key.slice(0,I).concat(E.reverse?o.MIN_KEY:o.MAX_KEY,C)):$.continue()}},continuePrimaryKey:{value:function(U,z){$.continuePrimaryKey(xo(U,o.MAX_KEY,C),z)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var U=$.key;return I===1?U[0]:U.slice(0,I)}},value:{get:function(){return $.value}}})}}})}})}};function Nl(o,l,c,f){return c=c||{},f=f||"",a(o).forEach(function(h){var v,b,k;w(l,h)?(v=o[h],b=l[h],typeof v=="object"&&typeof b=="object"&&v&&b?(k=Se(v))!==Se(b)?c[f+h]=l[h]:k==="Object"?Nl(v,b,c,f+h+"."):v!==b&&(c[f+h]=l[h]):v!==b&&(c[f+h]=l[h])):c[f+h]=void 0}),a(l).forEach(function(h){w(o,h)||(c[f+h]=l[h])}),c}function Rl(o,l){return l.type==="delete"?l.keys:l.keys||l.values.map(o.extractKey)}var og={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema.primaryKey;return r(r({},c),{mutate:function(h){var v=oe.trans,b=v.table(l).hook,k=b.deleting,j=b.creating,O=b.updating;switch(h.type){case"add":if(j.fire===je)break;return v._promise("readwrite",function(){return R(h)},!0);case"put":if(j.fire===je&&O.fire===je)break;return v._promise("readwrite",function(){return R(h)},!0);case"delete":if(k.fire===je)break;return v._promise("readwrite",function(){return R(h)},!0);case"deleteRange":if(k.fire===je)break;return v._promise("readwrite",function(){return function E(D,C,T){return c.query({trans:D,values:!1,query:{index:f,range:C},limit:T}).then(function(I){var A=I.result;return R({type:"delete",keys:A,trans:D}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):A.length<T?{failures:[],numFailures:0,lastResult:void 0}:E(D,r(r({},C),{lower:A[A.length-1],lowerOpen:!0}),T)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function R(E){var D,C,T,I=oe.trans,A=E.keys||Rl(f,E);if(!A)throw new Error("Keys missing");return(E=E.type==="add"||E.type==="put"?r(r({},E),{keys:A}):r({},E)).type!=="delete"&&(E.values=i([],E.values)),E.keys&&(E.keys=i([],E.keys)),D=c,T=A,((C=E).type==="add"?Promise.resolve([]):D.getMany({trans:C.trans,keys:T,cache:"immutable"})).then(function($){var U=A.map(function(z,F){var H,Y,Q,J=$[F],ee={onerror:null,onsuccess:null};return E.type==="delete"?k.fire.call(ee,z,J,I):E.type==="add"||J===void 0?(H=j.fire.call(ee,z,E.values[F],I),z==null&&H!=null&&(E.keys[F]=z=H,f.outbound||V(E.values[F],f.keyPath,z))):(H=Nl(J,E.values[F]),(Y=O.fire.call(ee,H,z,J,I))&&(Q=E.values[F],Object.keys(Y).forEach(function(Z){w(Q,Z)?Q[Z]=Y[Z]:V(Q,Z,Y[Z])}))),ee});return c.mutate(E).then(function(z){for(var F=z.failures,H=z.results,Y=z.numFailures,z=z.lastResult,Q=0;Q<A.length;++Q){var J=(H||A)[Q],ee=U[Q];J==null?ee.onerror&&ee.onerror(F[Q]):ee.onsuccess&&ee.onsuccess(E.type==="put"&&$[Q]?E.values[Q]:J)}return{failures:F,results:H,numFailures:Y,lastResult:z}}).catch(function(z){return U.forEach(function(F){return F.onerror&&F.onerror(z)}),Promise.reject(z)})})}}})}})}};function Jd(o,l,c){try{if(!l||l.keys.length<o.length)return null;for(var f=[],h=0,v=0;h<l.keys.length&&v<o.length;++h)we(l.keys[h],o[v])===0&&(f.push(c?Qe(l.values[h]):l.values[h]),++v);return f.length===o.length?f:null}catch{return null}}var ag={stack:"dbcore",level:-1,create:function(o){return{table:function(l){var c=o.table(l);return r(r({},c),{getMany:function(f){if(!f.cache)return c.getMany(f);var h=Jd(f.keys,f.trans._cache,f.cache==="clone");return h?ne.resolve(h):c.getMany(f).then(function(v){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Qe(v):v},v})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),c.mutate(f)}})}}}};function Yd(o,l){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Xd(o,l){switch(o){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lg={stack:"dbcore",level:0,name:"Observability",create:function(o){var l=o.schema.name,c=new at(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(f,h,v){if(oe.subscr&&h!=="readonly")throw new ue.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(oe.querier));return o.transaction(f,h,v)},table:function(f){var h=o.table(f),v=h.schema,b=v.primaryKey,E=v.indexes,k=b.extractKey,j=b.outbound,O=b.autoIncrement&&E.filter(function(C){return C.compound&&C.keyPath.includes(b.keyPath)}),R=r(r({},h),{mutate:function(C){function T(Z){return Z="idb://".concat(l,"/").concat(f,"/").concat(Z),z[Z]||(z[Z]=new at)}var I,A,$,U=C.trans,z=C.mutatedParts||(C.mutatedParts={}),F=T(""),H=T(":dels"),Y=C.type,ee=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[Rl(b,C).filter(function(Z){return Z}),C.values]:[],Q=ee[0],J=ee[1],ee=C.trans._cache;return u(Q)?(F.addKeys(Q),(ee=Y==="delete"||Q.length===J.length?Jd(Q,ee):null)||H.addKeys(Q),(ee||J)&&(I=T,A=ee,$=J,v.indexes.forEach(function(Z){var re=I(Z.name||"");function ge(me){return me!=null?Z.extractKey(me):null}function _e(me){return Z.multiEntry&&u(me)?me.forEach(function(Me){return re.addKey(Me)}):re.addKey(me)}(A||$).forEach(function(me,lt){var pe=A&&ge(A[lt]),lt=$&&ge($[lt]);we(pe,lt)!==0&&(pe!=null&&_e(pe),lt!=null&&_e(lt))})}))):Q?(J={from:(J=Q.lower)!==null&&J!==void 0?J:o.MIN_KEY,to:(J=Q.upper)!==null&&J!==void 0?J:o.MAX_KEY},H.add(J),F.add(J)):(F.add(c),H.add(c),v.indexes.forEach(function(Z){return T(Z.name).add(c)})),h.mutate(C).then(function(Z){return!Q||C.type!=="add"&&C.type!=="put"||(F.addKeys(Z.results),O&&O.forEach(function(re){for(var ge=C.values.map(function(pe){return re.extractKey(pe)}),_e=re.keyPath.findIndex(function(pe){return pe===b.keyPath}),me=0,Me=Z.results.length;me<Me;++me)ge[me][_e]=Z.results[me];T(re.name).addKeys(ge)})),U.mutatedParts=bo(U.mutatedParts||{},z),Z})}}),E=function(T){var I=T.query,T=I.index,I=I.range;return[T,new at((T=I.lower)!==null&&T!==void 0?T:o.MIN_KEY,(I=I.upper)!==null&&I!==void 0?I:o.MAX_KEY)]},D={get:function(C){return[b,new at(C.key)]},getMany:function(C){return[b,new at().addKeys(C.keys)]},count:E,query:E,openCursor:E};return a(D).forEach(function(C){R[C]=function(T){var I=oe.subscr,A=!!I,$=Yd(oe,h)&&Xd(C,T)?T.obsSet={}:I;if(A){var U=function(J){return J="idb://".concat(l,"/").concat(f,"/").concat(J),$[J]||($[J]=new at)},z=U(""),F=U(":dels"),I=D[C](T),A=I[0],I=I[1];if((C==="query"&&A.isPrimaryKey&&!T.values?F:U(A.name||"")).add(I),!A.isPrimaryKey){if(C!=="count"){var H=C==="query"&&j&&T.values&&h.query(r(r({},T),{values:!1}));return h[C].apply(this,arguments).then(function(J){if(C==="query"){if(j&&T.values)return H.then(function(ge){return ge=ge.result,z.addKeys(ge),J});var ee=T.values?J.result.map(k):J.result;(T.values?z:F).addKeys(ee)}else if(C==="openCursor"){var Z=J,re=T.values;return Z&&Object.create(Z,{key:{get:function(){return F.addKey(Z.primaryKey),Z.key}},primaryKey:{get:function(){var ge=Z.primaryKey;return F.addKey(ge),ge}},value:{get:function(){return re&&z.addKey(Z.primaryKey),Z.value}}})}return J})}F.add(c)}}return h[C].apply(this,arguments)}}),R}})}};function Zd(o,l,c){if(c.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return c.numFailures===f?null:(l=r({},l),u(l.keys)&&(l.keys=l.keys.filter(function(h,v){return!(v in c.failures)})),"values"in l&&u(l.values)&&(l.values=l.values.filter(function(h,v){return!(v in c.failures)})),l)}function Al(o,l){return c=o,((f=l).lower===void 0||(f.lowerOpen?0<we(c,f.lower):0<=we(c,f.lower)))&&(o=o,(l=l).upper===void 0||(l.upperOpen?we(o,l.upper)<0:we(o,l.upper)<=0));var c,f}function ef(o,l,D,f,h,v){if(!D||D.length===0)return o;var b=l.query.index,k=b.multiEntry,j=l.query.range,O=f.schema.primaryKey.extractKey,R=b.extractKey,E=(b.lowLevelIndex||b).extractKey,D=D.reduce(function(C,T){var I=C,A=[];if(T.type==="add"||T.type==="put")for(var $=new at,U=T.values.length-1;0<=U;--U){var z,F=T.values[U],H=O(F);$.hasKey(H)||(z=R(F),(k&&u(z)?z.some(function(Z){return Al(Z,j)}):Al(z,j))&&($.addKey(H),A.push(F)))}switch(T.type){case"add":var Y=new at().addKeys(l.values?C.map(function(re){return O(re)}):C),I=C.concat(l.values?A.filter(function(re){return re=O(re),!Y.hasKey(re)&&(Y.addKey(re),!0)}):A.map(function(re){return O(re)}).filter(function(re){return!Y.hasKey(re)&&(Y.addKey(re),!0)}));break;case"put":var Q=new at().addKeys(T.values.map(function(re){return O(re)}));I=C.filter(function(re){return!Q.hasKey(l.values?O(re):re)}).concat(l.values?A:A.map(function(re){return O(re)}));break;case"delete":var J=new at().addKeys(T.keys);I=C.filter(function(re){return!J.hasKey(l.values?O(re):re)});break;case"deleteRange":var ee=T.range;I=C.filter(function(re){return!Al(O(re),ee)})}return I},o);return D===o?o:(D.sort(function(C,T){return we(E(C),E(T))||we(O(C),O(T))}),l.limit&&l.limit<1/0&&(D.length>l.limit?D.length=l.limit:o.length===l.limit&&D.length<l.limit&&(h.dirty=!0)),v?Object.freeze(D):D)}function tf(o,l){return we(o.lower,l.lower)===0&&we(o.upper,l.upper)===0&&!!o.lowerOpen==!!l.lowerOpen&&!!o.upperOpen==!!l.upperOpen}function ug(o,l){return function(c,f,h,v){if(c===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=we(c,f))===0){if(h&&v)return 0;if(h)return 1;if(v)return-1}return f}(o.lower,l.lower,o.lowerOpen,l.lowerOpen)<=0&&0<=function(c,f,h,v){if(c===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=we(c,f))===0){if(h&&v)return 0;if(h)return-1;if(v)return 1}return f}(o.upper,l.upper,o.upperOpen,l.upperOpen)}function cg(o,l,c,f){o.subscribers.add(c),f.addEventListener("abort",function(){var h,v;o.subscribers.delete(c),o.subscribers.size===0&&(h=o,v=l,setTimeout(function(){h.subscribers.size===0&&X(v,h)},3e3))})}var dg={stack:"dbcore",level:0,name:"Cache",create:function(o){var l=o.schema.name;return r(r({},o),{transaction:function(c,f,h){var v,b,k=o.transaction(c,f,h);return f==="readwrite"&&(b=(v=new AbortController).signal,h=function(j){return function(){if(v.abort(),f==="readwrite"){for(var O=new Set,R=0,E=c;R<E.length;R++){var D=E[R],C=mr["idb://".concat(l,"/").concat(D)];if(C){var T=o.table(D),I=C.optimisticOps.filter(function(re){return re.trans===k});if(k._explicit&&j&&k.mutatedParts)for(var A=0,$=Object.values(C.queries.query);A<$.length;A++)for(var U=0,z=(Y=$[A]).slice();U<z.length;U++)jl((Q=z[U]).obsSet,k.mutatedParts)&&(X(Y,Q),Q.subscribers.forEach(function(re){return O.add(re)}));else if(0<I.length){C.optimisticOps=C.optimisticOps.filter(function(re){return re.trans!==k});for(var F=0,H=Object.values(C.queries.query);F<H.length;F++)for(var Y,Q,J,ee=0,Z=(Y=H[F]).slice();ee<Z.length;ee++)(Q=Z[ee]).res!=null&&k.mutatedParts&&(j&&!Q.dirty?(J=Object.isFrozen(Q.res),J=ef(Q.res,Q.req,I,T,Q,J),Q.dirty?(X(Y,Q),Q.subscribers.forEach(function(re){return O.add(re)})):J!==Q.res&&(Q.res=J,Q.promise=ne.resolve({result:J}))):(Q.dirty&&X(Y,Q),Q.subscribers.forEach(function(re){return O.add(re)})))}}}O.forEach(function(re){return re()})}}},k.addEventListener("abort",h(!1),{signal:b}),k.addEventListener("error",h(!1),{signal:b}),k.addEventListener("complete",h(!0),{signal:b})),k},table:function(c){var f=o.table(c),h=f.schema.primaryKey;return r(r({},f),{mutate:function(v){var b=oe.trans;if(h.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return f.mutate(v);var k=mr["idb://".concat(l,"/").concat(c)];return k?(b=f.mutate(v),v.type!=="add"&&v.type!=="put"||!(50<=v.values.length||Rl(h,v).some(function(j){return j==null}))?(k.optimisticOps.push(v),v.mutatedParts&&ko(v.mutatedParts),b.then(function(j){0<j.numFailures&&(X(k.optimisticOps,v),(j=Zd(0,v,j))&&k.optimisticOps.push(j),v.mutatedParts&&ko(v.mutatedParts))}),b.catch(function(){X(k.optimisticOps,v),v.mutatedParts&&ko(v.mutatedParts)})):b.then(function(j){var O=Zd(0,r(r({},v),{values:v.values.map(function(R,E){var D;return j.failures[E]?R:(R=(D=h.keyPath)!==null&&D!==void 0&&D.includes(".")?Qe(R):r({},R),V(R,h.keyPath,j.results[E]),R)})}),j);k.optimisticOps.push(O),queueMicrotask(function(){return v.mutatedParts&&ko(v.mutatedParts)})}),b):f.mutate(v)},query:function(v){if(!Yd(oe,f)||!Xd("query",v))return f.query(v);var b=((O=oe.trans)===null||O===void 0?void 0:O.db._options.cache)==="immutable",E=oe,k=E.requery,j=E.signal,O=function(T,I,A,$){var U=mr["idb://".concat(T,"/").concat(I)];if(!U)return[];if(!(I=U.queries[A]))return[null,!1,U,null];var z=I[($.query?$.query.index.name:null)||""];if(!z)return[null,!1,U,null];switch(A){case"query":var F=z.find(function(H){return H.req.limit===$.limit&&H.req.values===$.values&&tf(H.req.query.range,$.query.range)});return F?[F,!0,U,z]:[z.find(function(H){return("limit"in H.req?H.req.limit:1/0)>=$.limit&&(!$.values||H.req.values)&&ug(H.req.query.range,$.query.range)}),!1,U,z];case"count":return F=z.find(function(H){return tf(H.req.query.range,$.query.range)}),[F,!!F,U,z]}}(l,c,"query",v),R=O[0],E=O[1],D=O[2],C=O[3];return R&&E?R.obsSet=v.obsSet:(E=f.query(v).then(function(T){var I=T.result;if(R&&(R.res=I),b){for(var A=0,$=I.length;A<$;++A)Object.freeze(I[A]);Object.freeze(I)}else T.result=Qe(I);return T}).catch(function(T){return C&&R&&X(C,R),Promise.reject(T)}),R={obsSet:v.obsSet,promise:E,subscribers:new Set,type:"query",req:v,dirty:!1},C?C.push(R):(C=[R],(D=D||(mr["idb://".concat(l,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[v.query.index.name||""]=C)),cg(R,C,k,j),R.promise.then(function(T){return{result:ef(T.result,v,D==null?void 0:D.optimisticOps,f,R,b)}})}})}})}};function So(o,l){return new Proxy(o,{get:function(c,f,h){return f==="db"?l:Reflect.get(c,f,h)}})}var pn=(Ke.prototype.version=function(o){if(isNaN(o)||o<.1)throw new ue.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new ue.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var l=this._versions,c=l.filter(function(f){return f._cfg.version===o})[0];return c||(c=new this.Version(o),l.push(c),l.sort(eg),c.stores({}),this._state.autoSchema=!1,c)},Ke.prototype._whenReady=function(o){var l=this;return this.idbdb&&(this._state.openComplete||oe.letThrough||this._vip)?o():new ne(function(c,f){if(l._state.openComplete)return f(new ue.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new ue.DatabaseClosed);l.open().catch(je)}l._state.dbReadyPromise.then(c,f)}).then(o)},Ke.prototype.use=function(o){var l=o.stack,c=o.create,f=o.level,h=o.name;return h&&this.unuse({stack:l,name:h}),o=this._middlewares[l]||(this._middlewares[l]=[]),o.push({stack:l,create:c,level:f??10,name:h}),o.sort(function(v,b){return v.level-b.level}),this},Ke.prototype.unuse=function(o){var l=o.stack,c=o.name,f=o.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return f?h.create!==f:!!c&&h.name!==c})),this},Ke.prototype.open=function(){var o=this;return fr(On,function(){return ig(o)})},Ke.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,l=qr.indexOf(this);if(0<=l&&qr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new ne(function(c){o.dbReadyResolve=c}),o.openCanceller=new ne(function(c,f){o.cancelOpen=f}))},Ke.prototype.close=function(c){var l=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;l?(c.isBeingOpened&&c.cancelOpen(new ue.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new ue.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Ke.prototype.delete=function(o){var l=this;o===void 0&&(o={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ne(function(h,v){function b(){l.close(o);var k=l._deps.indexedDB.deleteDatabase(l.name);k.onsuccess=Ae(function(){var j,O,R;j=l._deps,O=l.name,R=j.indexedDB,j=j.IDBKeyRange,xl(R)||O===lo||kl(R,j).delete(O).catch(je),h()}),k.onerror=sn(v),k.onblocked=l._fireOnBlocked}if(c)throw new ue.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(b):b()})},Ke.prototype.backendDB=function(){return this.idbdb},Ke.prototype.isOpen=function(){return this.idbdb!==null},Ke.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Ke.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ke.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ke.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(l){return o._allTables[l]})},enumerable:!1,configurable:!0}),Ke.prototype.transaction=function(){var o=(function(l,c,f){var h=arguments.length;if(h<2)throw new ue.InvalidArgument("Too few arguments");for(var v=new Array(h-1);--h;)v[h-1]=arguments[h];return f=v.pop(),[l,te(v),f]}).apply(this,arguments);return this._transaction.apply(this,o)},Ke.prototype._transaction=function(o,l,c){var f=this,h=oe.trans;h&&h.db===this&&o.indexOf("!")===-1||(h=null);var v,b,k=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(b=l.map(function(O){if(O=O instanceof f.Table?O.name:O,typeof O!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return O}),o=="r"||o===dl)v=dl;else{if(o!="rw"&&o!=fl)throw new ue.InvalidArgument("Invalid transaction mode: "+o);v=fl}if(h){if(h.mode===dl&&v===fl){if(!k)throw new ue.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&b.forEach(function(O){if(h&&h.storeNames.indexOf(O)===-1){if(!k)throw new ue.SubTransaction("Table "+O+" not included in parent transaction.");h=null}}),k&&h&&!h.active&&(h=null)}}catch(O){return h?h._promise(null,function(R,E){E(O)}):Be(O)}var j=(function O(R,E,D,C,T){return ne.resolve().then(function(){var I=oe.transless||oe,A=R._createTransaction(E,D,R._dbSchema,C);if(A.explicit=!0,I={trans:A,transless:I},C)A.idbtrans=C.idbtrans;else try{A.create(),A.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(z){return z.name===Cn.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return O(R,E,D,null,T)})):Be(z)}var $,U=be(T);return U&&Kr(),I=ne.follow(function(){var z;($=T.call(A,A))&&(U?(z=Tn.bind(null,null),$.then(z,z)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Tl($)))},I),($&&typeof $.then=="function"?ne.resolve($).then(function(z){return A.active?z:Be(new ue.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return $})).then(function(z){return C&&A._resolve(),A._completion.then(function(){return z})}).catch(function(z){return A._reject(z),Be(z)})})}).bind(null,this,v,b,h,c);return h?h._promise(v,j,"lock"):oe.trans?fr(oe.transless,function(){return f._whenReady(j)}):this._whenReady(j)},Ke.prototype.table=function(o){if(!w(this._allTables,o))throw new ue.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Ke);function Ke(o,l){var c=this;this._middlewares={},this.verno=0;var f=Ke.dependencies;this._options=l=r({addons:Ke.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,v,b,k,j,O={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:je,dbReadyPromise:null,cancelOpen:je,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};O.dbReadyPromise=new ne(function(E){O.dbReadyResolve=E}),O.openCanceller=new ne(function(E,D){O.cancelOpen=D}),this._state=O,this.name=o,this.on=Ki(this,"populate","blocked","versionchange","close",{ready:[nl,je]}),this.once=function(E,D){var C=function(){for(var T=[],I=0;I<arguments.length;I++)T[I]=arguments[I];c.on(E).unsubscribe(C),D.apply(c,T)};return c.on(E,C)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(E){return function(D,C){Ke.vip(function(){var T,I=c._state;I.openComplete?(I.dbOpenError||ne.resolve().then(D),C&&E(D)):I.onReadyBeingFired?(I.onReadyBeingFired.push(D),C&&E(D)):(E(D),T=c,C||E(function A(){T.on.ready.unsubscribe(D),T.on.ready.unsubscribe(A)}))})}}),this.Collection=(h=this,qi(Hv.prototype,function($,A){this.db=h;var C=Nd,T=null;if(A)try{C=A()}catch(U){T=U}var I=$._ctx,A=I.table,$=A.hook.reading.fire;this._ctx={table:A,index:I.index,isPrimKey:!I.index||A.schema.primKey.keyPath&&I.index===A.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:I.or,valueMapper:$!==Ui?$:null}})),this.Table=(v=this,qi(Dd.prototype,function(E,D,C){this.db=v,this._tx=C,this.name=E,this.schema=D,this.hook=v._allTables[E]?v._allTables[E].hook:Ki(null,{creating:[Uv,je],reading:[Lv,Ui],updating:[zv,je],deleting:[Mv,je]})})),this.Transaction=(b=this,qi(Jv.prototype,function(E,D,C,T,I){var A=this;E!=="readonly"&&D.forEach(function($){$=($=C[$])===null||$===void 0?void 0:$.yProps,$&&(D=D.concat($.map(function(U){return U.updatesTable})))}),this.db=b,this.mode=E,this.storeNames=D,this.schema=C,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=Ki(this,"complete","error","abort"),this.parent=I||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function($,U){A._resolve=$,A._reject=U}),this._completion.then(function(){A.active=!1,A.on.complete.fire()},function($){var U=A.active;return A.active=!1,A.on.error.fire($),A.parent?A.parent._reject($):U&&A.idbtrans&&A.idbtrans.abort(),Be($)})})),this.Version=(k=this,qi(rg.prototype,function(E){this.db=k,this._cfg={version:E,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,qi(Fd.prototype,function(E,D,C){if(this.db=j,this._ctx={table:E,index:D===":id"?null:D,or:C},this._cmp=this._ascending=we,this._descending=function(T,I){return we(I,T)},this._max=function(T,I){return 0<we(T,I)?T:I},this._min=function(T,I){return we(T,I)<0?T:I},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new ue.MissingAPI})),this.on("versionchange",function(E){0<E.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(E){!E.newVersion||E.newVersion<E.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(E.oldVersion/10))}),this._maxKey=Gi(l.IDBKeyRange),this._createTransaction=function(E,D,C,T){return new c.Transaction(E,D,C,c._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(E){c.on("blocked").fire(E),qr.filter(function(D){return D.name===c.name&&D!==c&&!D._state.vcFired}).map(function(D){return D.on("versionchange").fire(E)})},this.use(ag),this.use(dg),this.use(lg),this.use(sg),this.use(og);var R=new Proxy(this,{get:function(E,D,C){if(D==="_vip")return!0;if(D==="table")return function(I){return So(c.table(I),R)};var T=Reflect.get(E,D,C);return T instanceof Dd?So(T,R):D==="tables"?T.map(function(I){return So(I,R)}):D==="_createTransaction"?function(){return So(T.apply(this,arguments),R)}:T}});this.vip=R,f.forEach(function(E){return E(c)})}var Eo,Ut=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",fg=(Il.prototype.subscribe=function(o,l,c){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:l,complete:c})},Il.prototype[Ut]=function(){return this},Il);function Il(o){this._subscribe=o}try{Eo={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Eo={indexedDB:null,IDBKeyRange:null}}function nf(o){var l,c=!1,f=new fg(function(h){var v=be(o),b,k=!1,j={},O={},R={get closed(){return k},unsubscribe:function(){k||(k=!0,b&&b.abort(),E&&An.storagemutated.unsubscribe(C))}};h.start&&h.start(R);var E=!1,D=function(){return cl(T)},C=function(I){bo(j,I),jl(O,j)&&D()},T=function(){var I,A,$;!k&&Eo.indexedDB&&(j={},I={},b&&b.abort(),b=new AbortController,$=function(U){var z=Fr();try{v&&Kr();var F=Pn(o,U);return F=v?F.finally(Tn):F}finally{z&&Br()}}(A={subscr:I,signal:b.signal,requery:D,querier:o,trans:null}),Promise.resolve($).then(function(U){c=!0,l=U,k||A.signal.aborted||(j={},function(z){for(var F in z)if(w(z,F))return;return 1}(O=I)||E||(An(Hi,C),E=!0),cl(function(){return!k&&h.next&&h.next(U)}))},function(U){c=!1,["DatabaseClosedError","AbortError"].includes(U==null?void 0:U.name)||k||cl(function(){k||h.error&&h.error(U)})}))};return setTimeout(D,0),R});return f.hasValue=function(){return c},f.getValue=function(){return l},f}var vr=pn;function Dl(o){var l=In;try{In=!0,An.storagemutated.fire(o),Pl(o,!0)}finally{In=l}}_(vr,r(r({},Zs),{delete:function(o){return new vr(o,{addons:[]}).delete()},exists:function(o){return new vr(o,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return l=vr.dependencies,c=l.indexedDB,l=l.IDBKeyRange,(xl(c)?Promise.resolve(c.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==lo})}):kl(c,l).toCollection().primaryKeys()).then(o)}catch{return Be(new ue.MissingAPI)}var l,c},defineClass:function(){return function(o){d(this,o)}},ignoreTransaction:function(o){return oe.trans?fr(oe.transless,o):o()},vip:Sl,async:function(o){return function(){try{var l=Tl(o.apply(this,arguments));return l&&typeof l.then=="function"?l:ne.resolve(l)}catch(c){return Be(c)}}},spawn:function(o,l,c){try{var f=Tl(o.apply(c,l||[]));return f&&typeof f.then=="function"?f:ne.resolve(f)}catch(h){return Be(h)}},currentTransaction:{get:function(){return oe.trans||null}},waitFor:function(o,l){return l=ne.resolve(typeof o=="function"?vr.ignoreTransaction(o):o).timeout(l||6e4),oe.trans?oe.trans.waitFor(l):l},Promise:ne,debug:{get:function(){return rn},set:function(o){Sd(o)}},derive:N,extend:d,props:_,override:x,Events:Ki,on:An,liveQuery:nf,extendObservabilitySet:bo,getByKeyPath:q,setByKeyPath:V,delByKeyPath:function(o,l){typeof l=="string"?V(o,l,void 0):"length"in l&&[].map.call(l,function(c){V(o,c,void 0)})},shallowClone:W,deepClone:Qe,getObjectDiff:Nl,cmp:we,asap:K,minKey:-1/0,addons:[],connections:qr,errnames:Cn,dependencies:Eo,cache:mr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(o){return parseInt(o)}).reduce(function(o,l,c){return o+l/Math.pow(10,2*c)})})),vr.maxKey=Gi(vr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(An(Hi,function(o){In||(o=new CustomEvent(ml,{detail:o}),In=!0,dispatchEvent(o),In=!1)}),addEventListener(ml,function(o){o=o.detail,In||Dl(o)}));var Gr,In=!1,rf=function(){};return typeof BroadcastChannel<"u"&&((rf=function(){(Gr=new BroadcastChannel(ml)).onmessage=function(o){return o.data&&Dl(o.data)}})(),typeof Gr.unref=="function"&&Gr.unref(),An(Hi,function(o){In||Gr.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!pn.disableBfCache&&o.persisted){rn&&console.debug("Dexie: handling persisted pagehide"),Gr!=null&&Gr.close();for(var l=0,c=qr;l<c.length;l++)c[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!pn.disableBfCache&&o.persisted&&(rn&&console.debug("Dexie: handling persisted pageshow"),rf(),Dl({all:new at(-1/0,[[]])}))})),ne.rejectionMapper=function(o,l){return!o||o instanceof Wt||o instanceof TypeError||o instanceof SyntaxError||!o.name||!xd[o.name]?o:(l=new xd[o.name](l||o.message,o),"stack"in o&&L(l,"stack",{get:function(){return this.inner.stack}}),l)},Sd(rn),r(pn,Object.freeze({__proto__:null,Dexie:pn,liveQuery:nf,Entity:Rd,cmp:we,PropModification:Wi,replacePrefix:function(o,l){return new Wi({replacePrefix:[o,l]})},add:function(o){return new Wi({add:o})},remove:function(o){return new Wi({remove:o})},default:pn,RangeSet:at,mergeRanges:Yi,rangesOverlap:Vd}),{default:pn}),pn})})(Tv);var Jb=Tv.exports;const kc=Kh(Jb),Uh=Symbol.for("Dexie"),Ri=globalThis[Uh]||(globalThis[Uh]=kc);if(kc.semVer!==Ri.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${kc.semVer} and ${Ri.semVer}`);const{liveQuery:Ik,mergeRanges:Dk,rangesOverlap:$k,RangeSet:Lk,cmp:Uk,Entity:Mk,PropModification:zk,replacePrefix:Fk,add:Bk,remove:Kk,DexieYProvider:qk}=Ri;class Yb extends Ri{constructor(){super("gestor-reparaciones"),this.version(1).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado"}),this.version(2).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"}),this.version(3).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada, cliente, telefono, equipo",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"})}}const ae=new Yb,xc="2f647c2d-8b01-447a-8959-1e35520937a6";let Nv="idle";function Ss(t,e){const n="sync-toast";let r=document.getElementById(n);r||(r=document.createElement("div"),r.id=n,r.style.position="fixed",r.style.bottom="8px",r.style.right="8px",r.style.zIndex="9999",r.style.padding="6px 10px",r.style.borderRadius="8px",r.style.fontSize="12px",r.style.background="#1e293b",r.style.color="white",r.style.opacity="0.9",document.body.appendChild(r));const i=t==="push"?"Subida (Push)":t==="pull"?"Descarga (Pull)":"Sin cambios";r.textContent=`Última sincronización: ${e.toLocaleString()} [${i}]`}function Xb(){return Nv}const oa=[];function Zb(t){return oa.push(t),()=>{const e=oa.indexOf(t);e!==-1&&oa.splice(e,1)}}function Xt(t){Nv=t,oa.forEach(e=>e(t))}async function Rv(){Xt("syncing"),console.log("⚙️ Sincronización manual forzada...");try{await ek(),await tk(!0),Xt("ok")}catch(t){throw console.error("❌ Error en sincronización forzada:",t),Xt("error"),t}}async function ek(){try{Xt("syncing"),console.log("📤 Evaluando si es necesario subir a Supabase...");const t=await ae.clientes.toArray(),e=await ae.equipos.toArray(),n=await ae.ordenes.toArray(),r=await ae.adjuntos.toArray(),i=new Date(Math.max(...n.map(m=>new Date(m.actualizada||m.creada||0).getTime()),Date.now())),{data:s,error:a}=await Vn.from("backups").select("fecha").eq("id",xc).single();if(a&&a.code!=="PGRST116")throw a;const u=s!=null&&s.fecha?new Date(s.fecha):null;if(u&&u>i){console.warn("⛔ Evitado: datos locales más antiguos que los del servidor."),Ss("skip",new Date),Xt("ok");return}console.log("✅ Subiendo backup más reciente a Supabase...");const d={clientes:t,equipos:e,ordenes:n,adjuntos:r,fecha:new Date().toISOString()},{error:p}=await Vn.from("backups").upsert([{id:xc,fecha:new Date().toISOString(),payload:d}],{onConflict:"id"});if(p)throw p;console.log("✅ Backup subido correctamente."),Ss("push",new Date),Xt("ok")}catch(t){console.error("❌ Error en syncPush:",t.message),Xt("error")}}async function tk(t=!1){try{Xt("syncing"),console.log("⬇️ Descargando backup desde Supabase...");const{data:e,error:n}=await Vn.from("backups").select("payload, fecha").eq("id",xc).single();if(n&&n.code!=="PGRST116")throw n;const r=e==null?void 0:e.payload,i=e!=null&&e.fecha?new Date(e.fecha):null;if(!r){console.log("⚠️ No se encontró backup válido en Supabase. Se mantienen los datos locales."),Ss("skip",new Date),Xt("ok");return}const s=await ae.ordenes.count(),a=await ae.ordenes.orderBy("actualizada").last(),u=i&&i>new Date((a==null?void 0:a.actualizada)||0);if(s===0||t||u){console.log(`🔄 Restaurando backup remoto. Causa: ${s===0?"Local vacío":t?"Forzado":"Remoto más reciente"}`);const{clientes:d,equipos:p,ordenes:m,adjuntos:w}=r;await ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.adjuntos,async()=>{await ae.clientes.clear(),await ae.equipos.clear(),await ae.ordenes.clear(),await ae.adjuntos.clear(),await ae.clientes.bulkAdd(d||[]),await ae.equipos.bulkAdd(p||[]),await ae.ordenes.bulkAdd(m||[]),await ae.adjuntos.bulkAdd(w||[])}),console.log("✅ Datos restaurados desde Supabase."),Ss("pull",new Date)}else console.log("Datos locales más recientes o iguales. No se realiza pull."),Ss("skip",new Date);Xt("ok")}catch(e){console.error("❌ Error en syncPull:",e.message),Xt("error")}}window.forceSync=Rv;const Mh=[{tab:"registro",label:"Registro",icon:V0},{tab:"ordenes",label:"Órdenes",icon:nw},{tab:"presupuesto",label:"Presupuesto",icon:G0},{tab:"reparacion",label:"Reparación",icon:vw},{tab:"historial",label:"Historial",icon:lw},{tab:"informes",label:"Informes",icon:iv}];function nk({tab:t,onTab:e,children:n}){const[r,i]=le.useState(()=>localStorage.getItem("gr_dark")==="1"),[s,a]=le.useState(Xb());return le.useEffect(()=>{Zb(d=>a(d))},[]),le.useEffect(()=>{const u=document.documentElement;localStorage.setItem("gr_dark",r?"1":"0"),r?u.classList.add("dark"):u.classList.remove("dark")},[r]),g.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-[240px_1fr] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[g.jsxs("aside",{className:"hidden lg:flex lg:flex-col gap-2 border-r border-neutral-200 dark:border-neutral-800 p-4 sticky top-0 h-screen",children:[g.jsx("h1",{className:"text-xl font-bold p-2 mb-4",children:"Gestor de Reparaciones"}),Mh.map(u=>g.jsx(rk,{icon:u.icon,label:u.label,active:t===u.tab,onClick:()=>e(u.tab)},u.tab)),g.jsxs("div",{className:"mt-auto pt-4 border-t border-neutral-200 dark:border-neutral-800 flex flex-col gap-2",children:[g.jsxs("p",{className:"text-xs opacity-70",children:["Sincronización: ",s]}),g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("p",{className:"text-sm font-semibold",children:"Tema"}),g.jsx("button",{title:"Tema",className:"btn btn-ghost",onClick:()=>i(u=>!u),children:r?g.jsx(gh,{className:"size-5"}):g.jsx(mh,{className:"size-5"})})]})]})]}),g.jsxs("div",{className:"flex flex-col h-screen overflow-y-auto",children:[g.jsxs("header",{className:"sticky top-0 z-10 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800",children:[g.jsx("div",{className:"max-w-6xl mx-auto p-2 lg:p-0",children:g.jsxs("div",{className:"flex gap-2 p-2 overflow-x-auto lg:hidden justify-between",children:[Mh.map(u=>g.jsx("button",{className:`tab ${t===u.tab?"tab-active":""}`,onClick:()=>e(u.tab),children:u.label},u.tab)),g.jsx("button",{title:"Tema",className:"btn btn-ghost flex-shrink-0",onClick:()=>i(u=>!u),children:r?g.jsx(gh,{className:"size-4"}):g.jsx(mh,{className:"size-4"})})]})}),g.jsxs("div",{className:"lg:hidden p-2 text-center text-xs opacity-70 border-t border-neutral-200 dark:border-neutral-800",children:["Sincronización: ",s]})]}),g.jsx("main",{className:"max-w-6xl w-full mx-auto p-4 overflow-y-auto flex-grow",children:g.jsx("div",{className:"grid gap-4",children:n})})]})]})}function rk({icon:t,label:e,active:n,onClick:r}){return g.jsxs("button",{onClick:r,className:`flex items-center gap-2 rounded-lg px-3 py-2 transition-colors duration-150 ${n?"bg-primary-100 text-primary-700 dark:bg-primary-800 dark:text-primary-100":"text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-800"}`,children:[g.jsx(t,{className:"size-5"}),g.jsx("span",{children:e})]})}function ik(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=xr.useRef({hasResult:!1,result:i,error:null}),a=xr.useReducer(function(p){return p+1},0);a[0];var u=a[1],d=xr.useMemo(function(){var p=typeof t=="function"?t():t;if(!p||typeof p.subscribe!="function")throw t===p?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof p.hasValue!="function"||p.hasValue()))if(typeof p.getValue=="function")s.current.result=p.getValue(),s.current.hasResult=!0;else{var m=p.subscribe(function(w){s.current.result=w,s.current.hasResult=!0});typeof m=="function"?m():m.unsubscribe()}return p},r);if(xr.useDebugValue(s.current.result),xr.useEffect(function(){var p=d.subscribe(function(m){var w=s.current;(w.error!==null||w.result!==m)&&(w.error=null,w.result=m,w.hasResult=!0,u())},function(m){var w=s.current;w.error!==m&&(w.error=m,u())});return typeof p=="function"?p:p.unsubscribe.bind(p)},r),s.current.error)throw s.current.error;return s.current.result}function Xs(t,e,n){return ik(function(){return Ri.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Ri.DexieYProvider;e&&e.release(t)});function sk(t,e,n){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}async function ok(){return new Promise(t=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r;const n=(r=e.files)==null?void 0:r[0];if(!n)return t(null);try{const i=JSON.parse(await n.text());t(i)}catch{t(null)}},e.click()})}function ak({onOpen:t}){const[e,n]=le.useState(""),[r,i]=le.useState("todos"),[s,a]=le.useState(""),[u,d]=le.useState(""),[p,m]=le.useState("act_desc"),[w,_]=le.useState(null),[P,L]=le.useState(!1),N=Xs(async()=>{const K=await ae.ordenes.toArray(),q=await ae.clientes.toArray(),V=await ae.equipos.toArray();return K.map(W=>{const se=q.find(Fe=>Fe.id===W.clienteId),te=V.find(Fe=>Fe.id===W.equipoId),Ce=typeof W.cliente=="object"?W.cliente.nombre:W.cliente||(se==null?void 0:se.nombre)||"—",Ge=typeof W.cliente=="object"?W.cliente.telefono:W.telefono||(se==null?void 0:se.telefono)||"—",Qe=typeof W.equipo=="object"?W.equipo.aparato||(te==null?void 0:te.aparato)||"—":(te==null?void 0:te.aparato)||W.equipo||"—",ce=typeof W.equipo=="object"?W.equipo.marca||(te==null?void 0:te.marca)||"—":(te==null?void 0:te.marca)||"—",Se=typeof W.equipo=="object"?W.equipo.modelo||(te==null?void 0:te.modelo)||"—":(te==null?void 0:te.modelo)||"—";return{...W,cliente:Ce,telefono:Ge,aparato:Qe,marca:ce,modelo:Se}})},[]),B=le.useMemo(()=>{if(!N)return[];const K={};N.forEach(W=>{const se=typeof W.cliente=="string"?W.cliente:"—",te=typeof W.telefono=="string"?W.telefono:"—",Ce=`${se}-${te}`,Ge={id:W.id,codigo:W.codigo,estado:W.estado,cliente:se,telefono:te,aparato:W.aparato,marca:W.marca,modelo:W.modelo,creada:W.creada,actualizada:W.actualizada};K[Ce]||(K[Ce]={clienteKey:Ce,nombre:se,telefono:te,totalOrdenes:0,ordenes:[]}),K[Ce].ordenes.push(Ge),K[Ce].totalOrdenes++});const q=e.trim().toLowerCase(),V={creada_desc:(W,se)=>new Date(se.creada).getTime()-new Date(W.creada).getTime(),creada_asc:(W,se)=>new Date(W.creada).getTime()-new Date(se.creada).getTime(),act_desc:(W,se)=>new Date(se.actualizada).getTime()-new Date(W.actualizada).getTime(),act_asc:(W,se)=>new Date(W.actualizada).getTime()-new Date(se.actualizada).getTime()}[p];return Object.values(K).map(W=>{const se=W.ordenes.filter(te=>{const Ce=r==="todos"||te.estado===r,Ge=!s||new Date(te.creada).getTime()>=new Date(s).getTime(),Qe=!u||new Date(te.creada).getTime()<new Date(u).getTime()+864e5,ce=!q||te.cliente.toLowerCase().includes(q)||te.telefono.includes(q)||te.aparato.toLowerCase().includes(q)||te.codigo.toLowerCase().includes(q);return Ce&&Ge&&Qe&&ce}).sort(V);return{...W,ordenes:se,totalOrdenes:se.length}}).filter(W=>W.totalOrdenes>0)},[N,e,r,s,u,p]);async function S(K){window.confirm("¿Eliminar esta orden definitivamente?")&&await ae.ordenes.delete(K)}async function y(){if(!N)return;const K=JSON.stringify(N,null,2);sk(K,`ordenes_backup_${new Date().toISOString().split("T")[0]}.json`,"application/json")}async function x(){if(!window.confirm("⚠️ Esto reemplazará todas las tablas locales. ¿Continuar?"))return;const K=await ok();if(!K||typeof K!="object")return alert("Archivo no válido.");await ae.transaction("rw",ae.tables,async()=>{for(const q of ae.tables){const V=q.name,W=K[V];Array.isArray(W)&&(await q.clear(),await q.bulkAdd(W))}}),alert("✅ Importación completada. Recarga la página."),window.location.reload()}async function M(){L(!0),await Rv(),L(!1)}return g.jsxs("section",{className:"grid gap-4",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsxs("div",{className:"grid sm:grid-cols-4 gap-3",children:[g.jsxs("label",{className:"sm:col-span-2",children:[g.jsx("span",{className:"text-sm text-neutral-500",children:"Buscar (Cliente, Teléfono, Equipo)"}),g.jsx("input",{className:"input w-full",value:e,onChange:K=>n(K.target.value),placeholder:"Escribe para filtrar..."})]}),g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500",children:"Estado"}),g.jsxs("select",{className:"input w-full",value:r,onChange:K=>i(K.target.value),children:[g.jsx("option",{value:"todos",children:"Todos"}),g.jsx("option",{value:"recepcion",children:"Recepción"}),g.jsx("option",{value:"diagnostico",children:"Diagnóstico"}),g.jsx("option",{value:"presupuesto",children:"Presupuesto"}),g.jsx("option",{value:"reparacion",children:"Reparación"}),g.jsx("option",{value:"listo",children:"Listo"}),g.jsx("option",{value:"entregado",children:"Entregado"})]})]}),g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500",children:"Ordenar por"}),g.jsxs("select",{className:"input w-full",value:p,onChange:K=>m(K.target.value),children:[g.jsx("option",{value:"act_desc",children:"Actualizada ↓"}),g.jsx("option",{value:"act_asc",children:"Actualizada ↑"}),g.jsx("option",{value:"creada_desc",children:"Creada ↓"}),g.jsx("option",{value:"creada_asc",children:"Creada ↑"})]})]}),g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500",children:"Desde"}),g.jsx("input",{type:"date",className:"input w-full",value:s,onChange:K=>a(K.target.value)})]}),g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500",children:"Hasta"}),g.jsx("input",{type:"date",className:"input w-full",value:u,onChange:K=>d(K.target.value)})]})]}),g.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[g.jsxs("button",{className:"btn",onClick:y,children:[g.jsx(ow,{className:"size-4 mr-1"})," Exportar JSON"]}),g.jsxs("button",{className:"btn",onClick:x,children:[g.jsx(pw,{className:"size-4 mr-1"})," Importar JSON"]}),g.jsx("button",{className:"btn btn-secondary",onClick:M,disabled:P,children:P?"Sincronizando...":"Sincronizar"})]})]})}),g.jsx("div",{className:"card overflow-x-auto",children:g.jsxs("table",{className:"table-auto w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[g.jsx("th",{className:"p-2 text-left w-10"}),g.jsx("th",{className:"p-2 text-left",children:"Cliente"}),g.jsx("th",{className:"p-2 text-left",children:"Teléfono"}),g.jsx("th",{className:"p-2 text-left",children:"Órdenes"}),g.jsx("th",{className:"p-2 text-left",children:"Última Act."}),g.jsx("th",{className:"p-2 text-left",children:"Acciones"})]})}),g.jsxs("tbody",{children:[B.map(K=>g.jsxs(xr.Fragment,{children:[g.jsxs("tr",{className:"bg-neutral-50 dark:bg-neutral-700 font-semibold cursor-pointer border-y hover:bg-neutral-100 dark:hover:bg-neutral-600",onClick:()=>_(w===K.clienteKey?null:K.clienteKey),children:[g.jsx("td",{className:"py-2 px-3",children:w===K.clienteKey?g.jsx(J0,{className:"size-4"}):g.jsx(X0,{className:"size-4"})}),g.jsx("td",{className:"py-2 pr-3",children:K.nombre}),g.jsx("td",{className:"py-2 pr-3",children:K.telefono}),g.jsxs("td",{className:"py-2 pr-3",children:[K.totalOrdenes," órdenes"]}),g.jsx("td",{className:"py-2 pr-3",children:new Date(K.ordenes[0].actualizada).toLocaleString()}),g.jsx("td",{className:"py-2 pr-3",children:g.jsx("button",{className:"btn btn-sm btn-secondary",onClick:q=>{q.stopPropagation(),t(K.ordenes[0].id)},children:"Abrir"})})]}),w===K.clienteKey&&g.jsx("tr",{children:g.jsx("td",{colSpan:6,className:"p-0",children:g.jsxs("table",{className:"w-full text-sm",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-neutral-50 dark:bg-neutral-800 text-xs text-neutral-500 border-b",children:[g.jsx("th",{className:"py-2 pl-8 text-left",children:"Código"}),g.jsx("th",{className:"py-2 text-left",children:"Equipo"}),g.jsx("th",{className:"py-2 text-left",children:"Estado"}),g.jsx("th",{className:"py-2 text-left",children:"Creada"}),g.jsx("th",{className:"py-2 text-left",children:"Actualizada"}),g.jsx("th",{className:"py-2 text-left w-20",children:"Acción"})]})}),g.jsx("tbody",{children:K.ordenes.map(q=>g.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[g.jsx("td",{className:"py-2 pl-8",children:q.codigo}),g.jsxs("td",{className:"py-2 leading-tight",children:[g.jsxs("div",{children:[g.jsx("b",{children:"Aparato:"})," ",q.aparato]}),g.jsxs("div",{children:[g.jsx("b",{children:"Marca:"})," ",q.marca]}),g.jsxs("div",{children:[g.jsx("b",{children:"Modelo:"})," ",q.modelo]})]}),g.jsx("td",{className:"py-2",children:q.estado}),g.jsx("td",{className:"py-2",children:new Date(q.creada).toLocaleString()}),g.jsx("td",{className:"py-2",children:new Date(q.actualizada).toLocaleString()}),g.jsxs("td",{className:"py-2 flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>t(q.id),children:"Abrir"}),g.jsx("button",{className:"btn btn-danger",onClick:()=>S(q.id),children:"Eliminar"})]})]},q.id))})]})})})]},K.clienteKey)),B.length===0&&g.jsx("tr",{children:g.jsx("td",{className:"py-4 opacity-70 px-4",colSpan:6,children:"No se encontraron órdenes que coincidan con los filtros."})})]})]})})]})}const rt=[];for(let t=0;t<256;++t)rt.push((t+256).toString(16).slice(1));function lk(t,e=0){return(rt[t[e+0]]+rt[t[e+1]]+rt[t[e+2]]+rt[t[e+3]]+"-"+rt[t[e+4]]+rt[t[e+5]]+"-"+rt[t[e+6]]+rt[t[e+7]]+"-"+rt[t[e+8]]+rt[t[e+9]]+"-"+rt[t[e+10]]+rt[t[e+11]]+rt[t[e+12]]+rt[t[e+13]]+rt[t[e+14]]+rt[t[e+15]]).toLowerCase()}let gu;const uk=new Uint8Array(16);function ck(){if(!gu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");gu=crypto.getRandomValues.bind(crypto)}return gu(uk)}const dk=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zh={randomUUID:dk};function fk(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??ck();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,lk(r)}function Rr(t,e,n){return zh.randomUUID&&!t?zh.randomUUID():fk(t)}function Av(t=Date.now()){return"ORD-"+t}async function Iv(t){const e=new Date().toISOString();let n;if(t.id){if(await ae.clientes.update(t.id,{nombre:t.nombre,telefono:t.telefono,email:t.email||null}),n=await ae.clientes.get(t.id),!n)throw new Error(`Error: Cliente con ID ${t.id} no encontrado para actualizar.`)}else n={id:Rr(),nombre:t.nombre,telefono:t.telefono,email:t.email||null,fecha_alta:e},await ae.clientes.add(n);return n}async function hk(t){const e=new Date().toISOString();return ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.eventos,async()=>{const n=await Iv(t.cliente),r={id:Rr(),clienteId:n.id,categoria:t.equipo.categoria,marca:t.equipo.marca,modelo:t.equipo.modelo,numeroSerie:t.equipo.numeroSerie,descripcion:t.equipo.descripcion,fecha_recepcion:e},i={id:Rr(),codigo:Av(),equipoId:r.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${r.marca} ${r.modelo}`},s={id:Rr(),ordenId:i.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e};return await ae.equipos.add(r),await ae.ordenes.add(i),await ae.eventos.add(s),{cliente:n,equipo:r,orden:i}})}async function pk(t){const e=new Date().toISOString();return ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.eventos,async()=>{const n=await Iv(t.cliente),r=t.equipos.map(u=>({id:Rr(),clienteId:n.id,categoria:u.categoria,marca:u.marca,modelo:u.modelo,numeroSerie:u.numeroSerie,descripcion:u.descripcion,fecha_recepcion:e})),i=r.map(u=>({id:Rr(),codigo:Av(),equipoId:u.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${u.marca} ${u.modelo}`})),s=i.map(u=>({id:Rr(),ordenId:u.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e}));return await ae.equipos.bulkAdd(r),await ae.ordenes.bulkAdd(i),await ae.eventos.bulkAdd(s),{resultados:i.map((u,d)=>({cliente:n,equipo:r[d],orden:u}))}})}function Ln({label:t,children:e}){return g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function mk({onCreated:t}){const[e,n]=le.useState({nombre:"",telefono:"",email:""}),[r,i]=le.useState([{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}]),[s,a]=le.useState([]),u=Xs(()=>ae.clientes.toArray(),[])||[];function d(N){if(n({...e,nombre:N}),N.length>2){const B=u.filter(S=>S.nombre.toLowerCase().includes(N.toLowerCase()));a(B)}else a([])}function p(N){n({nombre:N.nombre,telefono:N.telefono,email:N.email||""}),a([])}const m=!!e.nombre&&!!e.telefono&&r.every(N=>N.marca&&N.modelo&&N.descripcion&&N.aparato);function w(N,B){i(S=>S.map((y,x)=>x===N?{...y,...B}:y))}function _(){i(N=>[...N,{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}])}function P(N){i(B=>B.length>1?B.filter((S,y)=>y!==N):B)}async function L(){if(!m)return;const N={nombre:e.nombre,telefono:e.telefono,email:e.email||void 0};if(r.length===1){const{id:B}=await hk({cliente:N,equipo:r[0]});t(B)}else{const{ids:B}=await pk({cliente:N,equipos:r});B.length>0&&t(B[0])}}return g.jsx("section",{className:"grid gap-4",children:g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Datos del Cliente"}),g.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[g.jsxs("div",{className:"relative",children:[g.jsx(Ln,{label:"Nombre completo*",children:g.jsx("input",{className:"input",value:e.nombre,onChange:N=>d(N.target.value)})}),s.length>0&&g.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-b-lg shadow-lg max-h-48 overflow-y-auto",children:s.map(N=>g.jsxs("button",{className:"w-full text-left p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 text-sm border-b dark:border-neutral-700",onClick:()=>p(N),children:[N.nombre," (",N.telefono,")"]},N.id))})]}),g.jsx(Ln,{label:"Teléfono*",children:g.jsx("input",{type:"tel",className:"input",value:e.telefono,onChange:N=>n({...e,telefono:N.target.value})})}),g.jsx(Ln,{label:"Email",children:g.jsx("input",{type:"email",className:"input",value:e.email,onChange:N=>n({...e,email:N.target.value})})})]}),g.jsx("hr",{className:"my-2"}),g.jsxs("h2",{className:"text-lg font-semibold",children:["Datos del Equipo (",r.length,")"]}),g.jsxs("div",{className:"grid gap-4",children:[r.map((N,B)=>g.jsx("div",{className:"card border-primary-500/50 border shadow-lg",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("h3",{className:"text-md font-semibold",children:["Equipo ",B+1]}),r.length>1&&g.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>P(B),children:"Eliminar Equipo"})]}),g.jsxs("div",{className:"grid sm:grid-cols-4 gap-3",children:[g.jsx(Ln,{label:"Aparato*",children:g.jsx("input",{className:"input",value:N.aparato,onChange:S=>w(B,{aparato:S.target.value}),placeholder:"Ejemplo: Sierra, Portátil, Móvil..."})}),g.jsx(Ln,{label:"Marca*",children:g.jsx("input",{className:"input",value:N.marca,onChange:S=>w(B,{marca:S.target.value})})}),g.jsx(Ln,{label:"Modelo*",children:g.jsx("input",{className:"input",value:N.modelo,onChange:S=>w(B,{modelo:S.target.value})})}),g.jsx(Ln,{label:"Nº de serie",children:g.jsx("input",{className:"input",value:N.numeroSerie,onChange:S=>w(B,{numeroSerie:S.target.value})})})]}),g.jsx(Ln,{label:"Daño inicial*",children:g.jsx("textarea",{className:"input min-h-28",value:N.descripcion,onChange:S=>w(B,{descripcion:S.target.value})})})]})},B)),g.jsx("div",{children:g.jsx("button",{className:"btn",onClick:_,children:"Añadir otro equipo"})})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{className:"btn btn-primary",disabled:!m,onClick:L,children:"Crear orden(es)"}),g.jsx("button",{className:"btn",onClick:()=>{n({nombre:"",telefono:"",email:""}),i([{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}])},children:"Limpiar"})]})]})})})}function vk({orden:t,onNavigateToBudget:e}){const n=t.horasReparacion??0,r=t.tarifa??25,a=(t.piezas||[]).reduce((d,p)=>d+(p.precio||0),0)*1.15,u=n*r;return g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-3",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Resumen de Presupuesto"}),g.jsxs("div",{className:"grid sm:grid-cols-4 gap-3 items-end",children:[g.jsxs("div",{className:"text-sm",children:["Horas: ",g.jsx("b",{children:n})]}),g.jsxs("div",{className:"text-sm",children:["Mano de Obra: ",g.jsxs("b",{children:[u.toFixed(2)," €"]})]}),g.jsxs("div",{className:"text-sm",children:["Coste Piezas (+15%): ",g.jsxs("b",{children:[a.toFixed(2)," €"]})]}),g.jsxs("div",{className:"text-lg font-bold p-2 bg-indigo-100 text-indigo-800 rounded-lg",children:["Total:"," ",(t.presupuestoAprox??u+a).toFixed(2)," €"]})]}),g.jsx("button",{className:"btn btn-primary w-full mt-2",onClick:e,children:"📝 Ir a Presupuesto"})]})})}const gk=[{id:"recepcion",label:"Recepción"},{id:"diagnostico",label:"Diagnóstico"},{id:"presupuesto",label:"Presupuesto"},{id:"reparacion",label:"Reparación"},{id:"listo",label:"Listo"},{id:"entregado",label:"Entregado"}];function yk({ordenId:t,onNavigateToBudget:e}){const[n,r]=le.useState(null),[i,s]=le.useState([]),[a,u]=le.useState(null),[d,p]=le.useState(""),[m,w]=le.useState(null),_=Xs(()=>t?ae.ordenes.get(t):Promise.resolve(void 0),[t]);le.useEffect(()=>{_&&_.equipoId&&ae.equipos.get(_.equipoId).then(y=>{y&&w(y)})},[_]),le.useEffect(()=>{_&&p(_.trabajoRealizado||"")},[_]),le.useEffect(()=>{t&&(async()=>{const{data:y}=await Vn.storage.from("adjuntos").list(t);s(y||[])})()},[t]),le.useEffect(()=>{if(!_||d===(_.trabajoRealizado||""))return;const y=setTimeout(async()=>{await ae.ordenes.update(t,{trabajoRealizado:d,actualizada:new Date().toISOString()}),r("Guardado automático.")},1e3);return()=>clearTimeout(y)},[d,_,t]);async function P(y){await ae.ordenes.update(t,{estado:y,actualizada:new Date().toISOString()}),r(`Estado actualizado: ${y}`)}async function L(){a!=null&&a.length&&(await Promise.all(a.map(y=>Vn.storage.from("adjuntos").upload(`${t}/${y.name}`,y))),await ae.ordenes.update(t,{archivos:[...(_==null?void 0:_.archivos)||[],...a.map(y=>y.name)]}),r(`Subidos ${a.length} archivo(s).`),u(null))}async function N(y){await Vn.storage.from("adjuntos").remove([`${t}/${y}`]);const x=((_==null?void 0:_.archivos)||[]).filter(M=>M!==y);await ae.ordenes.update(t,{archivos:x}),r(`Adjunto eliminado: ${y}`)}if(!_)return g.jsx("p",{className:"text-sm opacity-70",children:"Cargando detalles..."});const B=typeof _.cliente=="object"?_.cliente:{nombre:_.cliente||"—",telefono:_.telefono||"—"},S=typeof _.equipo=="object"?{aparato:_.equipo.aparato||(m==null?void 0:m.aparato)||"—",marca:_.equipo.marca||(m==null?void 0:m.marca)||"—",modelo:_.equipo.modelo||(m==null?void 0:m.modelo)||"—",numeroSerie:_.equipo.numeroSerie||(m==null?void 0:m.numeroSerie)||"—",descripcion:_.equipo.descripcion||(m==null?void 0:m.descripcion)||"—"}:{aparato:_.equipo||(m==null?void 0:m.aparato)||"—",marca:(m==null?void 0:m.marca)||"—",modelo:(m==null?void 0:m.modelo)||"—",numeroSerie:(m==null?void 0:m.numeroSerie)||"—",descripcion:(m==null?void 0:m.descripcion)||"—"};return g.jsxs("section",{className:"grid gap-4",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid sm:grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Cliente"}),g.jsxs("p",{children:[g.jsx("b",{children:"Nombre:"})," ",B.nombre]}),g.jsxs("p",{children:[g.jsx("b",{children:"Teléfono:"})," ",B.telefono]}),"email"in B&&B.email&&g.jsxs("p",{children:[g.jsx("b",{children:"Email:"})," ",B.email]}),g.jsxs("p",{children:[g.jsx("b",{children:"Creada:"})," ",new Date(_.creada).toLocaleString()]})]}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Equipo"}),g.jsxs("p",{children:[g.jsx("b",{children:"Aparato:"})," ",S.aparato]}),g.jsxs("p",{children:[g.jsx("b",{children:"Marca:"})," ",S.marca]}),g.jsxs("p",{children:[g.jsx("b",{children:"Modelo:"})," ",S.modelo]}),g.jsxs("p",{children:[g.jsx("b",{children:"Nº de serie:"})," ",S.numeroSerie]}),g.jsxs("p",{children:[g.jsx("b",{children:"Descripción:"})," ",S.descripcion]})]})]})}),g.jsx(vk,{orden:_,onNavigateToBudget:e}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Estado actual: ",g.jsx("b",{children:_.estado})]}),g.jsx("select",{className:"input",value:_.estado,onChange:y=>P(y.target.value),children:gk.map(y=>g.jsx("option",{value:y.id,children:y.label},y.id))})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Trabajo realizado"}),g.jsx("textarea",{className:"input min-h-32",value:d,onChange:y=>p(y.target.value)})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Adjuntos"}),g.jsx("input",{type:"file",multiple:!0,onChange:y=>u(y.target.files?Array.from(y.target.files):null)}),g.jsx("button",{className:"btn btn-primary mt-2",onClick:L,children:"Subir"}),i.length>0&&g.jsx("div",{className:"mt-4 grid sm:grid-cols-3 gap-2",children:i.map(y=>g.jsxs("div",{className:"border p-2 rounded",children:[g.jsx("a",{href:Vn.storage.from("adjuntos").getPublicUrl(`${t}/${y.name}`).data.publicUrl,target:"_blank",rel:"noreferrer",className:"block text-blue-600 text-sm truncate",children:y.name}),g.jsx("button",{className:"btn btn-sm btn-danger mt-1",onClick:()=>N(y.name),children:"Borrar"})]},y.name))})]})}),n&&g.jsxs("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-neutral-800 border p-3 rounded shadow",children:[n,g.jsx("button",{className:"ml-2 btn btn-sm",onClick:()=>r(null),children:"Cerrar"})]})]})}const kd=new Date,Fh=t=>t.toISOString().split("T")[0],Dv=new Date(kd);Dv.setDate(kd.getDate()-1);const Bh=["recepcion","diagnostico","presupuesto","reparacion","listo","entregado"];function wk(){const[t,e]=le.useState(Fh(Dv)),[n,r]=le.useState(Fh(kd)),i=Xs(()=>ae.ordenes.toArray(),[],[]),s=le.useMemo(()=>{if(!i)return[];const d=new Date(t).getTime(),p=new Date(n);p.setDate(p.getDate()+1);const m=p.getTime();return i.filter(w=>{const _=new Date(w.creada).getTime();return _>=d&&_<m})},[i,t,n]),a=le.useMemo(()=>{const d=Bh.reduce((_,P)=>({..._,[P]:0}),{});let p=0,m=0;const w=s.filter(_=>_.estado==="entregado");for(const _ of s)d[_.estado]!==void 0&&d[_.estado]++,_.estado==="entregado"&&p++;for(const _ of w)_.presupuestoAprox&&_.presupuestoAprox>0&&(m+=_.presupuestoAprox);return{totalOrdenes:s.length,totalEntregadas:p,conteoPorEstado:d,ingresosEstimados:m}},[s]);function u({title:d,value:p,Icon:m,isSmall:w=!1}){return g.jsxs("div",{className:`p-4 rounded-lg shadow border border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800 ${w?"":"col-span-1"}`,children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:d}),g.jsx(m,{className:"size-5 text-primary-500"})]}),g.jsx("p",{className:`mt-1 ${w?"text-lg":"text-3xl font-bold"}`,children:p})]})}return g.jsxs("div",{className:"grid gap-4",children:[g.jsx("h1",{className:"text-2xl font-bold",children:"Informes y Estadísticas"}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rango de Fecha de Creación"}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Desde (Creada)"}),g.jsx("input",{type:"date",className:"input w-full",value:t,onChange:d=>e(d.target.value)})]}),g.jsxs("label",{children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Hasta (Creada)"}),g.jsx("input",{type:"date",className:"input w-full",value:n,onChange:d=>r(d.target.value)})]})]}),g.jsxs("p",{className:"text-sm opacity-70 mt-3",children:["Mostrando datos de ",s.length," órdenes creadas entre ",t," y ",n,"."]})]})}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.jsx(u,{title:"Órdenes Totales",value:a.totalOrdenes,Icon:vh}),g.jsx(u,{title:"Órdenes Entregadas",value:a.totalEntregadas,Icon:ew}),g.jsx(u,{title:"Órdenes Pendientes",value:a.totalOrdenes-a.totalEntregadas,Icon:iw}),g.jsx(u,{title:"Ingresos (Est. Entregadas)",value:`${a.ingresosEstimados.toFixed(2)} €`,Icon:iv})]}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Órdenes por Estado (Total en el Periodo)"}),g.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Bh.map(d=>g.jsx(u,{title:d.charAt(0).toUpperCase()+d.slice(1),value:a.conteoPorEstado[d],Icon:vh,isSmall:!0},d))})]})})]})}function Ho({label:t,value:e,strong:n}){return g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),g.jsx("div",{className:`text-xl ${n?"font-bold":""}`,children:e.toFixed(2)})]})})}function ni({label:t,children:e}){return g.jsxs("label",{className:"grid gap-1",children:[g.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}const yu=(t="",e="")=>{let n=1;const r=e.toLowerCase(),i=t.toLowerCase();return i.includes("móvil")?n=1.5:i.includes("ordenador")?n=2:(i.includes("placa")||r.includes("líquido"))&&(n=3),(r.includes("pantalla")||r.includes("batería"))&&(n+=.5),(r.includes("componente")||r.includes("soldadura"))&&(n+=1),Math.max(.5,Math.round(n*2)/2)};function _k({ordenId:t}){const e=Xs(()=>t?ae.ordenes.get(t):Promise.resolve(void 0),[t]),[n,r]=le.useState([{nombre:"",precio:0}]),[i,s]=le.useState(0),[a,u]=le.useState(""),[d,p]=le.useState(""),[m,w]=le.useState(25),[_,P]=le.useState(null),L=1.15,N=.8,B=le.useCallback(async ce=>{if(t)try{await ae.ordenes.update(t,{piezas:ce.piezas,horasReparacion:ce.horasReparacion,precioNuevo:ce.precioNuevo,precioSegundaMano:ce.precioSegundaMano,tarifa:ce.tarifa,presupuestoAprox:ce.presupuestoAprox,actualizada:new Date().toISOString()})}catch(Se){console.error("Error guardando presupuesto:",Se)}},[t]);le.useEffect(()=>{if(e){const ce=e.piezas&&e.piezas.length>0?e.piezas:[{nombre:"",precio:0}];r(ce),w(e.tarifa||25),u(e.precioNuevo??""),p(e.precioSegundaMano??""),P(e.presupuestoAprox??null),e.horasReparacion?s(e.horasReparacion):e.equipo&&s(yu(e.equipo.categoria,e.equipo.descripcion))}else r([{nombre:"",precio:0}]),s(0),u(""),p(""),w(25),P(null)},[e]),le.useEffect(()=>{if(!e||i===0)return;const ce={piezas:n.filter(Se=>Se.nombre||Se.precio>0),horasReparacion:i,precioNuevo:a===""?null:Number(a),precioSegundaMano:d===""?null:Number(d),tarifa:m,presupuestoAprox:_};B(ce)},[n,i,a,d,m,_,e,B]);const S=()=>r(ce=>[...ce,{nombre:"",precio:0}]),y=ce=>r(Se=>Se.length>1?Se.filter((Fe,Lt)=>Lt!==ce):Se),x=(ce,Se)=>{r(Fe=>Fe.map((Lt,X)=>X===ce?{...Lt,...Se}:Lt))},M=le.useCallback(()=>{if(e!=null&&e.equipo){const{categoria:ce,descripcion:Se}=e.equipo,Fe=yu(ce,Se);s(Fe)}},[e]),K=()=>{if(!e||!e.equipo||i<=0){P(null);return}const ce=i*m,Lt=n.filter(be=>be.nombre||be.precio>0).reduce((be,Ue)=>be+Ue.precio,0)*L;let X=ce+Lt;const fe=Number(d)||0;if(fe>0){const be=fe*N;X>be&&(X=be)}const he=Math.round(X*100)/100;P(he)};if(!t)return g.jsx("div",{className:"card",children:g.jsx("div",{className:"card-body",children:'Selecciona una orden desde **"Órdenes"** para presupuestar.'})});if(!e)return g.jsxs("p",{className:"text-sm opacity-70",children:["Cargando detalles de la orden (ID: ",t,")..."]});if(!e.cliente||!e.equipo)return g.jsxs("p",{className:"text-sm text-red-500",children:["No se encontraron detalles completos (cliente/equipo) para la orden ",t,"."]});const{cliente:q,equipo:V}=e,W=n.filter(ce=>ce.nombre||ce.precio>0).reduce((ce,Se)=>ce+Se.precio,0),se=W*L,te=i*m,Ce=te+se,Ge=n.filter(ce=>ce.nombre||ce.precio>0),Qe=i<=0||!Ge.every(ce=>ce.nombre&&ce.precio>=0);return g.jsxs("section",{className:"grid gap-4",children:[g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid sm:grid-cols-2 gap-4",children:[g.jsxs("div",{className:"grid gap-2",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Cliente"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Nombre:"})," ",q.nombre]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Teléfono:"})," ",q.telefono]})]}),g.jsxs("div",{className:"grid gap-2",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Equipo"}),g.jsxs("p",{children:[g.jsx("strong",{children:"Aparato:"})," ",V.categoria]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Marca/Modelo:"})," ",V.marca," ",V.modelo]}),g.jsxs("p",{children:[g.jsx("strong",{children:"Daño:"})," ",V.descripcion]})]})]})}),g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body grid gap-4",children:[g.jsxs("h2",{className:"text-lg font-semibold",children:["Cálculo de Presupuesto para: ",V.categoria]}),g.jsx("hr",{className:"my-2"}),g.jsxs("div",{className:"grid sm:grid-cols-4 gap-3 items-end",children:[g.jsx(ni,{label:"Tarifa €/h",children:g.jsx("input",{type:"number",className:"input",value:m,onChange:ce=>w(parseFloat(ce.target.value)||0)})}),g.jsx(ni,{label:"Horas de Reparación (Manual)*",children:g.jsx("input",{type:"number",step:"0.5",min:"0",className:"input",value:i||"",onChange:ce=>s(Number(ce.target.value)||0)})}),g.jsx("div",{className:"col-span-2",children:g.jsxs("button",{className:"btn w-full",onClick:M,children:["Generar Horas Estimadas (",yu(V.categoria,V.descripcion),"h)"]})}),g.jsxs("div",{className:"sm:col-span-4 text-xs opacity-70",children:["Costo de mano de obra calculado: **",te.toFixed(2)," €**"]})]}),g.jsx("hr",{className:"my-2"}),g.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[g.jsx(ni,{label:"Precio del aparato nuevo (€)",children:g.jsx("input",{type:"number",min:"0",className:"input",value:a,onChange:ce=>u(ce.target.value===""?"":Number(ce.target.value))})}),g.jsx(ni,{label:`Precio de segunda mano (Tope: ${Math.round(N*100)}% del valor - €)`,children:g.jsx("input",{type:"number",min:"0",className:"input",value:d,onChange:ce=>p(ce.target.value===""?"":Number(ce.target.value))})})]}),g.jsx("hr",{className:"my-2"}),g.jsxs("h3",{className:"text-md font-semibold mt-2",children:["Piezas necesarias (Margen ",Math.round(L*100-100),"%)"]}),n.map((ce,Se)=>g.jsxs("div",{className:"grid sm:grid-cols-[2fr_1fr_auto] gap-3 items-end",children:[g.jsx(ni,{label:`Pieza ${Se+1} - Nombre*`,children:g.jsx("input",{className:"input",value:ce.nombre,onChange:Fe=>x(Se,{nombre:Fe.target.value})})}),g.jsx(ni,{label:"Precio sin IVA (€)*",children:g.jsx("input",{type:"number",min:"0",step:"0.01",className:"input",value:ce.precio||"",onChange:Fe=>x(Se,{precio:Number(Fe.target.value)})})}),n.length>0?g.jsx("button",{className:"btn",onClick:()=>y(Se),children:"Quitar"}):g.jsx("div",{className:"h-10 w-16"})]},Se)),g.jsx("div",{children:g.jsx("button",{className:"btn",onClick:S,children:"➕ Añadir otra pieza"})}),g.jsxs("div",{className:"grid sm:grid-cols-3 md:grid-cols-4 gap-3 mt-4",children:[g.jsx(Ho,{label:"Costo Piezas (s/ IVA)",value:W}),g.jsx(Ho,{label:"Costo Piezas (c/ Margen)",value:se}),g.jsx(Ho,{label:"Mano de Obra",value:te}),g.jsx(Ho,{label:"Subtotal (Piezas + M.O.)",value:Ce,strong:!0})]}),g.jsx("hr",{className:"my-2"}),g.jsxs("div",{className:"flex gap-4 items-center justify-between mt-4",children:[g.jsx("button",{className:"btn btn-primary",onClick:K,disabled:Qe,children:"Calcular Presupuesto Aproximado"}),_!==null&&g.jsxs("div",{className:"text-xl font-bold p-3 bg-indigo-100 text-indigo-800 rounded-lg shadow-lg",children:["Total Presupuesto: ",_.toFixed(2)," €",d&&_===Number(d)*N&&g.jsx("p",{className:"text-xs font-normal mt-1 text-indigo-600",children:"(Limitado por tope de Segunda Mano)"})]})]})]})})]})}function bk(){const[t,e]=le.useState([]),[n,r]=le.useState(!0);return le.useEffect(()=>{(async()=>{const{data:s,error:a}=await Vn.from("presupuestos").select("*").order("id",{ascending:!1});a?alert("Error al obtener presupuestos: "+a.message):e(s),r(!1)})()},[]),n?g.jsx("p",{className:"p-4",children:"Cargando presupuestos..."}):g.jsxs("section",{className:"p-4 grid gap-4",children:[g.jsx("h2",{className:"text-xl font-bold",children:"Presupuestos guardados"}),g.jsxs("table",{className:"table-auto w-full border border-neutral-200",children:[g.jsx("thead",{children:g.jsxs("tr",{className:"bg-neutral-100",children:[g.jsx("th",{className:"p-2 text-left",children:"ID"}),g.jsx("th",{className:"p-2 text-left",children:"Horas"}),g.jsx("th",{className:"p-2 text-left",children:"Tarifa"}),g.jsx("th",{className:"p-2 text-left",children:"Piezas"}),g.jsx("th",{className:"p-2 text-left",children:"Mano de Obra"}),g.jsx("th",{className:"p-2 text-left",children:"Total"})]})}),g.jsx("tbody",{children:t.map(i=>g.jsxs("tr",{className:"border-t",children:[g.jsx("td",{className:"p-2",children:i.id}),g.jsx("td",{className:"p-2",children:i.horas}),g.jsx("td",{className:"p-2",children:i.tarifa}),g.jsx("td",{className:"p-2",children:i.piezas}),g.jsx("td",{className:"p-2",children:i.mano_obra.toFixed(2)}),g.jsx("td",{className:"p-2 font-semibold",children:i.total.toFixed(2)})]},i.id))})]})]})}function kk(){return g.jsx("section",{className:"grid gap-4",children:g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:[g.jsx("h2",{className:"text-lg font-semibold",children:"Historial de Reparaciones (Órdenes Entregadas)"}),g.jsx("p",{className:"text-sm opacity-70",children:'Aquí se mostrará el listado de todas las órdenes en estado **"Entregado"** y se permitirá su búsqueda y exportación.'}),g.jsx("p",{className:"text-sm opacity-70 mt-2",children:"Pendiente de implementar."})]})})})}function xk(){const[t,e]=le.useState("ordenes"),[n,r]=le.useState(null),i=le.useCallback(d=>{r(d),e("reparacion")},[]),s=le.useCallback(d=>{r(d),e("reparacion")},[]),a=le.useCallback(()=>{r(null),e("ordenes")},[]),u=le.useCallback(()=>{e("presupuesto")},[]);return g.jsxs(nk,{tab:t,onTab:e,children:[t==="registro"&&g.jsx(mk,{onCreated:i}),t==="ordenes"&&g.jsx(ak,{onOpen:s}),t==="reparacion"&&g.jsx("div",{className:"grid grid-cols-1 gap-4",children:n?g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn btn-secondary w-fit mb-2",onClick:a,children:"← Volver a Órdenes"}),g.jsx(yk,{ordenId:n,onNavigateToBudget:u})]}):g.jsx("div",{className:"card",children:g.jsxs("div",{className:"card-body",children:["Selecciona una orden desde ",g.jsx("b",{children:"Órdenes"})," para ver los detalles."]})})}),t==="informes"&&g.jsx(wk,{}),t==="presupuesto"&&g.jsx(_k,{}),t==="listapresupuestos"&&g.jsx(bk,{}),t==="historial"&&g.jsx(kk,{})]})}nv(document.getElementById("root")).render(g.jsx(xr.StrictMode,{children:g.jsx(xk,{})}));
