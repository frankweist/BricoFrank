(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Hh={exports:{}},Ia={},Gh={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=Symbol.for("react.element"),vv=Symbol.for("react.portal"),yv=Symbol.for("react.fragment"),wv=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),bv=Symbol.for("react.provider"),xv=Symbol.for("react.context"),kv=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Ev=Symbol.for("react.memo"),jv=Symbol.for("react.lazy"),sf=Symbol.iterator;function Cv(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var Qh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jh=Object.assign,Yh={};function Li(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Qh}Li.prototype.isReactComponent={};Li.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Li.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xh(){}Xh.prototype=Li.prototype;function Ec(t,e,n){this.props=t,this.context=e,this.refs=Yh,this.updater=n||Qh}var jc=Ec.prototype=new Xh;jc.constructor=Ec;Jh(jc,Li.prototype);jc.isPureReactComponent=!0;var of=Array.isArray,Zh=Object.prototype.hasOwnProperty,Cc={current:null},ep={key:!0,ref:!0,__self:!0,__source:!0};function tp(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Zh.call(e,r)&&!ep.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Vs,type:t,key:s,ref:a,props:i,_owner:Cc.current}}function Nv(t,e){return{$$typeof:Vs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vs}function Ov(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var af=/\/+/g;function Ll(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ov(""+t.key):e.toString(36)}function Ho(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Vs:case vv:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Ll(a,0):r,of(i)?(n="",t!=null&&(n=t.replace(af,"$&/")+"/"),Ho(i,e,n,"",function(p){return p})):i!=null&&(Nc(i)&&(i=Nv(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(af,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",of(t))for(var u=0;u<t.length;u++){s=t[u];var d=r+Ll(s,u);a+=Ho(s,e,n,d,i)}else if(d=Cv(t),typeof d=="function")for(t=d.call(t),u=0;!(s=t.next()).done;)s=s.value,d=r+Ll(s,u++),a+=Ho(s,e,n,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Co(t,e,n){if(t==null)return t;var r=[],i=0;return Ho(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Tv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},Go={transition:null},Pv={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:Go,ReactCurrentOwner:Cc};function np(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Co,forEach:function(t,e,n){Co(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Co(t,function(){e++}),e},toArray:function(t){return Co(t,function(e){return e})||[]},only:function(t){if(!Nc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=Li;_e.Fragment=yv;_e.Profiler=_v;_e.PureComponent=Ec;_e.StrictMode=wv;_e.Suspense=Sv;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;_e.act=np;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Jh({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Cc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)Zh.call(e,d)&&!ep.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];r.children=u}return{$$typeof:Vs,type:t.type,key:i,ref:s,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:xv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bv,_context:t},t.Consumer=t};_e.createElement=tp;_e.createFactory=function(t){var e=tp.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:kv,render:t}};_e.isValidElement=Nc;_e.lazy=function(t){return{$$typeof:jv,_payload:{_status:-1,_result:t},_init:Tv}};_e.memo=function(t,e){return{$$typeof:Ev,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Go.transition;Go.transition={};try{t()}finally{Go.transition=e}};_e.unstable_act=np;_e.useCallback=function(t,e){return _t.current.useCallback(t,e)};_e.useContext=function(t){return _t.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};_e.useEffect=function(t,e){return _t.current.useEffect(t,e)};_e.useId=function(){return _t.current.useId()};_e.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return _t.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};_e.useRef=function(t){return _t.current.useRef(t)};_e.useState=function(t){return _t.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return _t.current.useTransition()};_e.version="18.3.1";Gh.exports=_e;var Y=Gh.exports;const Vn=Vh(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Y,Av=Symbol.for("react.element"),Iv=Symbol.for("react.fragment"),Dv=Object.prototype.hasOwnProperty,$v=Rv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lv={key:!0,ref:!0,__self:!0,__source:!0};function rp(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Dv.call(e,r)&&!Lv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Av,type:t,key:s,ref:a,props:i,_owner:$v.current}}Ia.Fragment=Iv;Ia.jsx=rp;Ia.jsxs=rp;Hh.exports=Ia;var h=Hh.exports,ip={exports:{}},zt={},sp={exports:{}},op={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,de){var fe=te.length;te.push(de);e:for(;0<fe;){var Ne=fe-1>>>1,Fe=te[Ne];if(0<i(Fe,de))te[Ne]=de,te[fe]=Fe,fe=Ne;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var de=te[0],fe=te.pop();if(fe!==de){te[0]=fe;e:for(var Ne=0,Fe=te.length,Pt=Fe>>>1;Ne<Pt;){var Bt=2*(Ne+1)-1,ln=te[Bt],ut=Bt+1,un=te[ut];if(0>i(ln,fe))ut<Fe&&0>i(un,ln)?(te[Ne]=un,te[ut]=fe,Ne=ut):(te[Ne]=ln,te[Bt]=fe,Ne=Bt);else if(ut<Fe&&0>i(un,fe))te[Ne]=un,te[ut]=fe,Ne=ut;else break e}}return de}function i(te,de){var fe=te.sortIndex-de.sortIndex;return fe!==0?fe:te.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],p=[],g=1,y=null,_=3,C=!1,T=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(te){for(var de=n(p);de!==null;){if(de.callback===null)r(p);else if(de.startTime<=te)r(p),de.sortIndex=de.expirationTime,e(d,de);else break;de=n(p)}}function M(te){if(j=!1,x(te),!T)if(n(d)!==null)T=!0,lt(H);else{var de=n(p);de!==null&&an(M,de.startTime-te)}}function H(te,de){T=!1,j&&(j=!1,S(ee),ee=-1),C=!0;var fe=_;try{for(x(de),y=n(d);y!==null&&(!(y.expirationTime>de)||te&&!ie());){var Ne=y.callback;if(typeof Ne=="function"){y.callback=null,_=y.priorityLevel;var Fe=Ne(y.expirationTime<=de);de=t.unstable_now(),typeof Fe=="function"?y.callback=Fe:y===n(d)&&r(d),x(de)}else r(d);y=n(d)}if(y!==null)var Pt=!0;else{var Bt=n(p);Bt!==null&&an(M,Bt.startTime-de),Pt=!1}return Pt}finally{y=null,_=fe,C=!1}}var V=!1,F=null,ee=-1,ye=5,W=-1;function ie(){return!(t.unstable_now()-W<ye)}function pe(){if(F!==null){var te=t.unstable_now();W=te;var de=!0;try{de=F(!0,te)}finally{de?ce():(V=!1,F=null)}}else V=!1}var ce;if(typeof b=="function")ce=function(){b(pe)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,Re=je.port2;je.port1.onmessage=pe,ce=function(){Re.postMessage(null)}}else ce=function(){A(pe,0)};function lt(te){F=te,V||(V=!0,ce())}function an(te,de){ee=A(function(){te(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){T||C||(T=!0,lt(H))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ye=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(te){switch(_){case 1:case 2:case 3:var de=3;break;default:de=_}var fe=_;_=de;try{return te()}finally{_=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,de){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var fe=_;_=te;try{return de()}finally{_=fe}},t.unstable_scheduleCallback=function(te,de,fe){var Ne=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,te){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=fe+Fe,te={id:g++,callback:de,priorityLevel:te,startTime:fe,expirationTime:Fe,sortIndex:-1},fe>Ne?(te.sortIndex=fe,e(p,te),n(d)===null&&te===n(p)&&(j?(S(ee),ee=-1):j=!0,an(M,fe-Ne))):(te.sortIndex=Fe,e(d,te),T||C||(T=!0,lt(H))),te},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(te){var de=_;return function(){var fe=_;_=de;try{return te.apply(this,arguments)}finally{_=fe}}}})(op);sp.exports=op;var Uv=sp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv=Y,Mt=Uv;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ap=new Set,Cs={};function Br(t,e){Ni(t,e),Ni(t+"Capture",e)}function Ni(t,e){for(Cs[t]=e,t=0;t<e.length;t++)ap.add(e[t])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wu=Object.prototype.hasOwnProperty,zv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lf={},uf={};function Fv(t){return wu.call(uf,t)?!0:wu.call(lf,t)?!1:zv.test(t)?uf[t]=!0:(lf[t]=!0,!1)}function Bv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Kv(t,e,n,r){if(e===null||typeof e>"u"||Bv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oc=/[\-:]([a-z])/g;function Tc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oc,Tc);at[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oc,Tc);at[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oc,Tc);at[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pc(t,e,n,r){var i=at.hasOwnProperty(e)?at[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Kv(e,n,i,r)&&(n=null),r||i===null?Fv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rn=Mv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,No=Symbol.for("react.element"),ui=Symbol.for("react.portal"),ci=Symbol.for("react.fragment"),Rc=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),lp=Symbol.for("react.provider"),up=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),bu=Symbol.for("react.suspense"),xu=Symbol.for("react.suspense_list"),Ic=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),cp=Symbol.for("react.offscreen"),cf=Symbol.iterator;function ts(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Ul;function cs(t){if(Ul===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ul=e&&e[1]||""}return`
`+Ul+t}var Ml=!1;function zl(t,e){if(!t||Ml)return"";Ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,u=s.length-1;1<=a&&0<=u&&i[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==s[u]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Ml=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?cs(t):""}function qv(t){switch(t.tag){case 5:return cs(t.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function ku(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ci:return"Fragment";case ui:return"Portal";case _u:return"Profiler";case Rc:return"StrictMode";case bu:return"Suspense";case xu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case up:return(t.displayName||"Context")+".Consumer";case lp:return(t._context.displayName||"Context")+".Provider";case Ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ic:return e=t.displayName||null,e!==null?e:ku(t.type)||"Memo";case qn:e=t._payload,t=t._init;try{return ku(t(e))}catch{}}return null}function Wv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ku(e);case 8:return e===Rc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vv(t){var e=dp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oo(t){t._valueTracker||(t._valueTracker=Vv(t))}function fp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function oa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Su(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function df(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hp(t,e){e=e.checked,e!=null&&Pc(t,"checked",e,!1)}function Eu(t,e){hp(t,e);var n=or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ju(t,e.type,n):e.hasOwnProperty("defaultValue")&&ju(t,e.type,or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ff(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ju(t,e,n){(e!=="number"||oa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ds=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Q(92));if(ds(n)){if(1<n.length)throw Error(Q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:or(n)}}function pp(t,e){var n=or(e.value),r=or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function pf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function mp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?mp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var To,gp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(To=To||document.createElement("div"),To.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=To.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ns(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hv=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(t){Hv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ms[e]=ms[t]})});function vp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ms.hasOwnProperty(t)&&ms[t]?(""+e).trim():e+"px"}function yp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Gv=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ou(t,e){if(e){if(Gv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Tu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pu=null;function Dc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ru=null,xi=null,ki=null;function mf(t){if(t=Qs(t)){if(typeof Ru!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=Ma(e),Ru(t.stateNode,t.type,e))}}function wp(t){xi?ki?ki.push(t):ki=[t]:xi=t}function _p(){if(xi){var t=xi,e=ki;if(ki=xi=null,mf(t),e)for(t=0;t<e.length;t++)mf(e[t])}}function bp(t,e){return t(e)}function xp(){}var Fl=!1;function kp(t,e,n){if(Fl)return t(e,n);Fl=!0;try{return bp(t,e,n)}finally{Fl=!1,(xi!==null||ki!==null)&&(xp(),_p())}}function Os(t,e){var n=t.stateNode;if(n===null)return null;var r=Ma(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Q(231,e,typeof n));return n}var Au=!1;if(Nn)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){Au=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{Au=!1}function Qv(t,e,n,r,i,s,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(g){this.onError(g)}}var gs=!1,aa=null,la=!1,Iu=null,Jv={onError:function(t){gs=!0,aa=t}};function Yv(t,e,n,r,i,s,a,u,d){gs=!1,aa=null,Qv.apply(Jv,arguments)}function Xv(t,e,n,r,i,s,a,u,d){if(Yv.apply(this,arguments),gs){if(gs){var p=aa;gs=!1,aa=null}else throw Error(Q(198));la||(la=!0,Iu=p)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gf(t){if(Kr(t)!==t)throw Error(Q(188))}function Zv(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gf(i),t;if(s===r)return gf(i),e;s=s.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?t:e}function Ep(t){return t=Zv(t),t!==null?jp(t):null}function jp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jp(t);if(e!==null)return e;t=t.sibling}return null}var Cp=Mt.unstable_scheduleCallback,vf=Mt.unstable_cancelCallback,ey=Mt.unstable_shouldYield,ty=Mt.unstable_requestPaint,He=Mt.unstable_now,ny=Mt.unstable_getCurrentPriorityLevel,$c=Mt.unstable_ImmediatePriority,Np=Mt.unstable_UserBlockingPriority,ua=Mt.unstable_NormalPriority,ry=Mt.unstable_LowPriority,Op=Mt.unstable_IdlePriority,Da=null,yn=null;function iy(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Da,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:ay,sy=Math.log,oy=Math.LN2;function ay(t){return t>>>=0,t===0?32:31-(sy(t)/oy|0)|0}var Po=64,Ro=4194304;function fs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ca(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=fs(u):(s&=a,s!==0&&(r=fs(s)))}else a=n&~i,a!==0?r=fs(a):s!==0&&(r=fs(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),i=1<<n,r|=t[n],e&=~i;return r}function ly(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-rn(s),u=1<<a,d=i[a];d===-1?(!(u&n)||u&r)&&(i[a]=ly(u,e)):d<=e&&(t.expiredLanes|=u),s&=~u}}function Du(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tp(){var t=Po;return Po<<=1,!(Po&4194240)&&(Po=64),t}function Bl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function cy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-rn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Lc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function Pp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Rp,Uc,Ap,Ip,Dp,$u=!1,Ao=[],Xn=null,Zn=null,er=null,Ts=new Map,Ps=new Map,Hn=[],dy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yf(t,e){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Zn=null;break;case"mouseover":case"mouseout":er=null;break;case"pointerover":case"pointerout":Ts.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(e.pointerId)}}function rs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Qs(e),e!==null&&Uc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function fy(t,e,n,r,i){switch(e){case"focusin":return Xn=rs(Xn,t,e,n,r,i),!0;case"dragenter":return Zn=rs(Zn,t,e,n,r,i),!0;case"mouseover":return er=rs(er,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ts.set(s,rs(Ts.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ps.set(s,rs(Ps.get(s)||null,t,e,n,r,i)),!0}return!1}function $p(t){var e=Pr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=Sp(n),e!==null){t.blockedOn=e,Dp(t.priority,function(){Ap(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pu=r,n.target.dispatchEvent(r),Pu=null}else return e=Qs(n),e!==null&&Uc(e),t.blockedOn=n,!1;e.shift()}return!0}function wf(t,e,n){Qo(t)&&n.delete(e)}function hy(){$u=!1,Xn!==null&&Qo(Xn)&&(Xn=null),Zn!==null&&Qo(Zn)&&(Zn=null),er!==null&&Qo(er)&&(er=null),Ts.forEach(wf),Ps.forEach(wf)}function is(t,e){t.blockedOn===e&&(t.blockedOn=null,$u||($u=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,hy)))}function Rs(t){function e(i){return is(i,t)}if(0<Ao.length){is(Ao[0],t);for(var n=1;n<Ao.length;n++){var r=Ao[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xn!==null&&is(Xn,t),Zn!==null&&is(Zn,t),er!==null&&is(er,t),Ts.forEach(e),Ps.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)$p(n),n.blockedOn===null&&Hn.shift()}var Si=Rn.ReactCurrentBatchConfig,da=!0;function py(t,e,n,r){var i=Ce,s=Si.transition;Si.transition=null;try{Ce=1,Mc(t,e,n,r)}finally{Ce=i,Si.transition=s}}function my(t,e,n,r){var i=Ce,s=Si.transition;Si.transition=null;try{Ce=4,Mc(t,e,n,r)}finally{Ce=i,Si.transition=s}}function Mc(t,e,n,r){if(da){var i=Lu(t,e,n,r);if(i===null)Xl(t,e,r,fa,n),yf(t,r);else if(fy(i,t,e,n,r))r.stopPropagation();else if(yf(t,r),e&4&&-1<dy.indexOf(t)){for(;i!==null;){var s=Qs(i);if(s!==null&&Rp(s),s=Lu(t,e,n,r),s===null&&Xl(t,e,r,fa,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Xl(t,e,r,null,n)}}var fa=null;function Lu(t,e,n,r){if(fa=null,t=Dc(r),t=Pr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fa=t,null}function Lp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ny()){case $c:return 1;case Np:return 4;case ua:case ry:return 16;case Op:return 536870912;default:return 16}default:return 16}}var Jn=null,zc=null,Jo=null;function Up(){if(Jo)return Jo;var t,e=zc,n=e.length,r,i="value"in Jn?Jn.value:Jn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Jo=i.slice(t,1<r?1-r:void 0)}function Yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Io(){return!0}function _f(){return!1}function Ft(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Io:_f,this.isPropagationStopped=_f,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Io)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Io)},persist:function(){},isPersistent:Io}),e}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=Ft(Ui),Gs=ze({},Ui,{view:0,detail:0}),gy=Ft(Gs),Kl,ql,ss,$a=ze({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ss&&(ss&&t.type==="mousemove"?(Kl=t.screenX-ss.screenX,ql=t.screenY-ss.screenY):ql=Kl=0,ss=t),Kl)},movementY:function(t){return"movementY"in t?t.movementY:ql}}),bf=Ft($a),vy=ze({},$a,{dataTransfer:0}),yy=Ft(vy),wy=ze({},Gs,{relatedTarget:0}),Wl=Ft(wy),_y=ze({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),by=Ft(_y),xy=ze({},Ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ky=Ft(xy),Sy=ze({},Ui,{data:0}),xf=Ft(Sy),Ey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ny(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cy[t])?!!e[t]:!1}function Bc(){return Ny}var Oy=ze({},Gs,{key:function(t){if(t.key){var e=Ey[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(t){return t.type==="keypress"?Yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ty=Ft(Oy),Py=ze({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kf=Ft(Py),Ry=ze({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),Ay=Ft(Ry),Iy=ze({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dy=Ft(Iy),$y=ze({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ly=Ft($y),Uy=[9,13,27,32],Kc=Nn&&"CompositionEvent"in window,vs=null;Nn&&"documentMode"in document&&(vs=document.documentMode);var My=Nn&&"TextEvent"in window&&!vs,Mp=Nn&&(!Kc||vs&&8<vs&&11>=vs),Sf=" ",Ef=!1;function zp(t,e){switch(t){case"keyup":return Uy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function zy(t,e){switch(t){case"compositionend":return Fp(e);case"keypress":return e.which!==32?null:(Ef=!0,Sf);case"textInput":return t=e.data,t===Sf&&Ef?null:t;default:return null}}function Fy(t,e){if(di)return t==="compositionend"||!Kc&&zp(t,e)?(t=Up(),Jo=zc=Jn=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mp&&e.locale!=="ko"?null:e.data;default:return null}}var By={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!By[t.type]:e==="textarea"}function Bp(t,e,n,r){wp(r),e=ha(e,"onChange"),0<e.length&&(n=new Fc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ys=null,As=null;function Ky(t){Zp(t,0)}function La(t){var e=pi(t);if(fp(e))return t}function qy(t,e){if(t==="change")return e}var Kp=!1;if(Nn){var Vl;if(Nn){var Hl="oninput"in document;if(!Hl){var Cf=document.createElement("div");Cf.setAttribute("oninput","return;"),Hl=typeof Cf.oninput=="function"}Vl=Hl}else Vl=!1;Kp=Vl&&(!document.documentMode||9<document.documentMode)}function Nf(){ys&&(ys.detachEvent("onpropertychange",qp),As=ys=null)}function qp(t){if(t.propertyName==="value"&&La(As)){var e=[];Bp(e,As,t,Dc(t)),kp(Ky,e)}}function Wy(t,e,n){t==="focusin"?(Nf(),ys=e,As=n,ys.attachEvent("onpropertychange",qp)):t==="focusout"&&Nf()}function Vy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return La(As)}function Hy(t,e){if(t==="click")return La(e)}function Gy(t,e){if(t==="input"||t==="change")return La(e)}function Qy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:Qy;function Is(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wu.call(e,i)||!on(t[i],e[i]))return!1}return!0}function Of(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tf(t,e){var n=Of(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Of(n)}}function Wp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Wp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vp(){for(var t=window,e=oa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=oa(t.document)}return e}function qc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jy(t){var e=Vp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Wp(n.ownerDocument.documentElement,n)){if(r!==null&&qc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Tf(n,s);var a=Tf(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yy=Nn&&"documentMode"in document&&11>=document.documentMode,fi=null,Uu=null,ws=null,Mu=!1;function Pf(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Mu||fi==null||fi!==oa(r)||(r=fi,"selectionStart"in r&&qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ws&&Is(ws,r)||(ws=r,r=ha(Uu,"onSelect"),0<r.length&&(e=new Fc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Do(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hi={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},Gl={},Hp={};Nn&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete hi.animationend.animation,delete hi.animationiteration.animation,delete hi.animationstart.animation),"TransitionEvent"in window||delete hi.transitionend.transition);function Ua(t){if(Gl[t])return Gl[t];if(!hi[t])return t;var e=hi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hp)return Gl[t]=e[n];return t}var Gp=Ua("animationend"),Qp=Ua("animationiteration"),Jp=Ua("animationstart"),Yp=Ua("transitionend"),Xp=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ur(t,e){Xp.set(t,e),Br(e,[t])}for(var Ql=0;Ql<Rf.length;Ql++){var Jl=Rf[Ql],Xy=Jl.toLowerCase(),Zy=Jl[0].toUpperCase()+Jl.slice(1);ur(Xy,"on"+Zy)}ur(Gp,"onAnimationEnd");ur(Qp,"onAnimationIteration");ur(Jp,"onAnimationStart");ur("dblclick","onDoubleClick");ur("focusin","onFocus");ur("focusout","onBlur");ur(Yp,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e0=new Set("cancel close invalid load scroll toggle".split(" ").concat(hs));function Af(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Xv(r,e,void 0,t),t.currentTarget=null}function Zp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==s&&i.isPropagationStopped())break e;Af(i,u,p),s=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==s&&i.isPropagationStopped())break e;Af(i,u,p),s=d}}}if(la)throw t=Iu,la=!1,Iu=null,t}function Ie(t,e){var n=e[qu];n===void 0&&(n=e[qu]=new Set);var r=t+"__bubble";n.has(r)||(em(e,t,2,!1),n.add(r))}function Yl(t,e,n){var r=0;e&&(r|=4),em(n,t,r,e)}var $o="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[$o]){t[$o]=!0,ap.forEach(function(n){n!=="selectionchange"&&(e0.has(n)||Yl(n,!1,t),Yl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$o]||(e[$o]=!0,Yl("selectionchange",!1,e))}}function em(t,e,n,r){switch(Lp(e)){case 1:var i=py;break;case 4:i=my;break;default:i=Mc}n=i.bind(null,e,n,t),i=void 0,!Au||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Pr(u),a===null)return;if(d=a.tag,d===5||d===6){r=s=a;continue e}u=u.parentNode}}r=r.return}kp(function(){var p=s,g=Dc(n),y=[];e:{var _=Xp.get(t);if(_!==void 0){var C=Fc,T=t;switch(t){case"keypress":if(Yo(n)===0)break e;case"keydown":case"keyup":C=Ty;break;case"focusin":T="focus",C=Wl;break;case"focusout":T="blur",C=Wl;break;case"beforeblur":case"afterblur":C=Wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=bf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Ay;break;case Gp:case Qp:case Jp:C=by;break;case Yp:C=Dy;break;case"scroll":C=gy;break;case"wheel":C=Ly;break;case"copy":case"cut":case"paste":C=ky;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=kf}var j=(e&4)!==0,A=!j&&t==="scroll",S=j?_!==null?_+"Capture":null:_;j=[];for(var b=p,x;b!==null;){x=b;var M=x.stateNode;if(x.tag===5&&M!==null&&(x=M,S!==null&&(M=Os(b,S),M!=null&&j.push($s(b,M,x)))),A)break;b=b.return}0<j.length&&(_=new C(_,T,null,n,g),y.push({event:_,listeners:j}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",_&&n!==Pu&&(T=n.relatedTarget||n.fromElement)&&(Pr(T)||T[On]))break e;if((C||_)&&(_=g.window===g?g:(_=g.ownerDocument)?_.defaultView||_.parentWindow:window,C?(T=n.relatedTarget||n.toElement,C=p,T=T?Pr(T):null,T!==null&&(A=Kr(T),T!==A||T.tag!==5&&T.tag!==6)&&(T=null)):(C=null,T=p),C!==T)){if(j=bf,M="onMouseLeave",S="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(j=kf,M="onPointerLeave",S="onPointerEnter",b="pointer"),A=C==null?_:pi(C),x=T==null?_:pi(T),_=new j(M,b+"leave",C,n,g),_.target=A,_.relatedTarget=x,M=null,Pr(g)===p&&(j=new j(S,b+"enter",T,n,g),j.target=x,j.relatedTarget=A,M=j),A=M,C&&T)t:{for(j=C,S=T,b=0,x=j;x;x=Zr(x))b++;for(x=0,M=S;M;M=Zr(M))x++;for(;0<b-x;)j=Zr(j),b--;for(;0<x-b;)S=Zr(S),x--;for(;b--;){if(j===S||S!==null&&j===S.alternate)break t;j=Zr(j),S=Zr(S)}j=null}else j=null;C!==null&&If(y,_,C,j,!1),T!==null&&A!==null&&If(y,A,T,j,!0)}}e:{if(_=p?pi(p):window,C=_.nodeName&&_.nodeName.toLowerCase(),C==="select"||C==="input"&&_.type==="file")var H=qy;else if(jf(_))if(Kp)H=Gy;else{H=Vy;var V=Wy}else(C=_.nodeName)&&C.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(H=Hy);if(H&&(H=H(t,p))){Bp(y,H,n,g);break e}V&&V(t,_,p),t==="focusout"&&(V=_._wrapperState)&&V.controlled&&_.type==="number"&&ju(_,"number",_.value)}switch(V=p?pi(p):window,t){case"focusin":(jf(V)||V.contentEditable==="true")&&(fi=V,Uu=p,ws=null);break;case"focusout":ws=Uu=fi=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,Pf(y,n,g);break;case"selectionchange":if(Yy)break;case"keydown":case"keyup":Pf(y,n,g)}var F;if(Kc)e:{switch(t){case"compositionstart":var ee="onCompositionStart";break e;case"compositionend":ee="onCompositionEnd";break e;case"compositionupdate":ee="onCompositionUpdate";break e}ee=void 0}else di?zp(t,n)&&(ee="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ee="onCompositionStart");ee&&(Mp&&n.locale!=="ko"&&(di||ee!=="onCompositionStart"?ee==="onCompositionEnd"&&di&&(F=Up()):(Jn=g,zc="value"in Jn?Jn.value:Jn.textContent,di=!0)),V=ha(p,ee),0<V.length&&(ee=new xf(ee,t,null,n,g),y.push({event:ee,listeners:V}),F?ee.data=F:(F=Fp(n),F!==null&&(ee.data=F)))),(F=My?zy(t,n):Fy(t,n))&&(p=ha(p,"onBeforeInput"),0<p.length&&(g=new xf("onBeforeInput","beforeinput",null,n,g),y.push({event:g,listeners:p}),g.data=F))}Zp(y,e)})}function $s(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ha(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Os(t,n),s!=null&&r.unshift($s(t,s,i)),s=Os(t,e),s!=null&&r.push($s(t,s,i))),t=t.return}return r}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function If(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&p!==null&&(u=p,i?(d=Os(n,s),d!=null&&a.unshift($s(n,d,u))):i||(d=Os(n,s),d!=null&&a.push($s(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var t0=/\r\n?/g,n0=/\u0000|\uFFFD/g;function Df(t){return(typeof t=="string"?t:""+t).replace(t0,`
`).replace(n0,"")}function Lo(t,e,n){if(e=Df(e),Df(t)!==e&&n)throw Error(Q(425))}function pa(){}var zu=null,Fu=null;function Bu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ku=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,$f=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof $f<"u"?function(t){return $f.resolve(null).then(t).catch(s0)}:Ku;function s0(t){setTimeout(function(){throw t})}function Zl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Rs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Rs(e)}function tr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mi=Math.random().toString(36).slice(2),gn="__reactFiber$"+Mi,Ls="__reactProps$"+Mi,On="__reactContainer$"+Mi,qu="__reactEvents$"+Mi,o0="__reactListeners$"+Mi,a0="__reactHandles$"+Mi;function Pr(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Lf(t);t!==null;){if(n=t[gn])return n;t=Lf(t)}return e}t=n,n=t.parentNode}return null}function Qs(t){return t=t[gn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function Ma(t){return t[Ls]||null}var Wu=[],mi=-1;function cr(t){return{current:t}}function De(t){0>mi||(t.current=Wu[mi],Wu[mi]=null,mi--)}function Pe(t,e){mi++,Wu[mi]=t.current,t.current=e}var ar={},gt=cr(ar),Ct=cr(!1),Lr=ar;function Oi(t,e){var n=t.type.contextTypes;if(!n)return ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function ma(){De(Ct),De(gt)}function Uf(t,e,n){if(gt.current!==ar)throw Error(Q(168));Pe(gt,e),Pe(Ct,n)}function tm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,Wv(t)||"Unknown",i));return ze({},n,r)}function ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Lr=gt.current,Pe(gt,t),Pe(Ct,Ct.current),!0}function Mf(t,e,n){var r=t.stateNode;if(!r)throw Error(Q(169));n?(t=tm(t,e,Lr),r.__reactInternalMemoizedMergedChildContext=t,De(Ct),De(gt),Pe(gt,t)):De(Ct),Pe(Ct,n)}var Sn=null,za=!1,eu=!1;function nm(t){Sn===null?Sn=[t]:Sn.push(t)}function l0(t){za=!0,nm(t)}function dr(){if(!eu&&Sn!==null){eu=!0;var t=0,e=Ce;try{var n=Sn;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,za=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),Cp($c,dr),i}finally{Ce=e,eu=!1}}return null}var gi=[],vi=0,va=null,ya=0,qt=[],Wt=0,Ur=null,En=1,jn="";function jr(t,e){gi[vi++]=ya,gi[vi++]=va,va=t,ya=e}function rm(t,e,n){qt[Wt++]=En,qt[Wt++]=jn,qt[Wt++]=Ur,Ur=t;var r=En;t=jn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var s=32-rn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,En=1<<32-rn(e)+i|n<<i|r,jn=s+t}else En=1<<s|n<<i|r,jn=t}function Wc(t){t.return!==null&&(jr(t,1),rm(t,1,0))}function Vc(t){for(;t===va;)va=gi[--vi],gi[vi]=null,ya=gi[--vi],gi[vi]=null;for(;t===Ur;)Ur=qt[--Wt],qt[Wt]=null,jn=qt[--Wt],qt[Wt]=null,En=qt[--Wt],qt[Wt]=null}var Lt=null,$t=null,Le=!1,nn=null;function im(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,$t=tr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ur!==null?{id:En,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,$t=null,!0):!1;default:return!1}}function Vu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Le){var e=$t;if(e){var n=e;if(!zf(t,e)){if(Vu(t))throw Error(Q(418));e=tr(n.nextSibling);var r=Lt;e&&zf(t,e)?im(r,n):(t.flags=t.flags&-4097|2,Le=!1,Lt=t)}}else{if(Vu(t))throw Error(Q(418));t.flags=t.flags&-4097|2,Le=!1,Lt=t}}}function Ff(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Uo(t){if(t!==Lt)return!1;if(!Le)return Ff(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Bu(t.type,t.memoizedProps)),e&&(e=$t)){if(Vu(t))throw sm(),Error(Q(418));for(;e;)im(t,e),e=tr(e.nextSibling)}if(Ff(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=tr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Lt?tr(t.stateNode.nextSibling):null;return!0}function sm(){for(var t=$t;t;)t=tr(t.nextSibling)}function Ti(){$t=Lt=null,Le=!1}function Hc(t){nn===null?nn=[t]:nn.push(t)}var u0=Rn.ReactCurrentBatchConfig;function os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=i.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,t))}return t}function Mo(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function om(t){function e(S,b){if(t){var x=S.deletions;x===null?(S.deletions=[b],S.flags|=16):x.push(b)}}function n(S,b){if(!t)return null;for(;b!==null;)e(S,b),b=b.sibling;return null}function r(S,b){for(S=new Map;b!==null;)b.key!==null?S.set(b.key,b):S.set(b.index,b),b=b.sibling;return S}function i(S,b){return S=sr(S,b),S.index=0,S.sibling=null,S}function s(S,b,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<b?(S.flags|=2,b):x):(S.flags|=2,b)):(S.flags|=1048576,b)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,b,x,M){return b===null||b.tag!==6?(b=au(x,S.mode,M),b.return=S,b):(b=i(b,x),b.return=S,b)}function d(S,b,x,M){var H=x.type;return H===ci?g(S,b,x.props.children,M,x.key):b!==null&&(b.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===qn&&Bf(H)===b.type)?(M=i(b,x.props),M.ref=os(S,b,x),M.return=S,M):(M=ia(x.type,x.key,x.props,null,S.mode,M),M.ref=os(S,b,x),M.return=S,M)}function p(S,b,x,M){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=lu(x,S.mode,M),b.return=S,b):(b=i(b,x.children||[]),b.return=S,b)}function g(S,b,x,M,H){return b===null||b.tag!==7?(b=$r(x,S.mode,M,H),b.return=S,b):(b=i(b,x),b.return=S,b)}function y(S,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=au(""+b,S.mode,x),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case No:return x=ia(b.type,b.key,b.props,null,S.mode,x),x.ref=os(S,null,b),x.return=S,x;case ui:return b=lu(b,S.mode,x),b.return=S,b;case qn:var M=b._init;return y(S,M(b._payload),x)}if(ds(b)||ts(b))return b=$r(b,S.mode,x,null),b.return=S,b;Mo(S,b)}return null}function _(S,b,x,M){var H=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return H!==null?null:u(S,b,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case No:return x.key===H?d(S,b,x,M):null;case ui:return x.key===H?p(S,b,x,M):null;case qn:return H=x._init,_(S,b,H(x._payload),M)}if(ds(x)||ts(x))return H!==null?null:g(S,b,x,M,null);Mo(S,x)}return null}function C(S,b,x,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(x)||null,u(b,S,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case No:return S=S.get(M.key===null?x:M.key)||null,d(b,S,M,H);case ui:return S=S.get(M.key===null?x:M.key)||null,p(b,S,M,H);case qn:var V=M._init;return C(S,b,x,V(M._payload),H)}if(ds(M)||ts(M))return S=S.get(x)||null,g(b,S,M,H,null);Mo(b,M)}return null}function T(S,b,x,M){for(var H=null,V=null,F=b,ee=b=0,ye=null;F!==null&&ee<x.length;ee++){F.index>ee?(ye=F,F=null):ye=F.sibling;var W=_(S,F,x[ee],M);if(W===null){F===null&&(F=ye);break}t&&F&&W.alternate===null&&e(S,F),b=s(W,b,ee),V===null?H=W:V.sibling=W,V=W,F=ye}if(ee===x.length)return n(S,F),Le&&jr(S,ee),H;if(F===null){for(;ee<x.length;ee++)F=y(S,x[ee],M),F!==null&&(b=s(F,b,ee),V===null?H=F:V.sibling=F,V=F);return Le&&jr(S,ee),H}for(F=r(S,F);ee<x.length;ee++)ye=C(F,S,ee,x[ee],M),ye!==null&&(t&&ye.alternate!==null&&F.delete(ye.key===null?ee:ye.key),b=s(ye,b,ee),V===null?H=ye:V.sibling=ye,V=ye);return t&&F.forEach(function(ie){return e(S,ie)}),Le&&jr(S,ee),H}function j(S,b,x,M){var H=ts(x);if(typeof H!="function")throw Error(Q(150));if(x=H.call(x),x==null)throw Error(Q(151));for(var V=H=null,F=b,ee=b=0,ye=null,W=x.next();F!==null&&!W.done;ee++,W=x.next()){F.index>ee?(ye=F,F=null):ye=F.sibling;var ie=_(S,F,W.value,M);if(ie===null){F===null&&(F=ye);break}t&&F&&ie.alternate===null&&e(S,F),b=s(ie,b,ee),V===null?H=ie:V.sibling=ie,V=ie,F=ye}if(W.done)return n(S,F),Le&&jr(S,ee),H;if(F===null){for(;!W.done;ee++,W=x.next())W=y(S,W.value,M),W!==null&&(b=s(W,b,ee),V===null?H=W:V.sibling=W,V=W);return Le&&jr(S,ee),H}for(F=r(S,F);!W.done;ee++,W=x.next())W=C(F,S,ee,W.value,M),W!==null&&(t&&W.alternate!==null&&F.delete(W.key===null?ee:W.key),b=s(W,b,ee),V===null?H=W:V.sibling=W,V=W);return t&&F.forEach(function(pe){return e(S,pe)}),Le&&jr(S,ee),H}function A(S,b,x,M){if(typeof x=="object"&&x!==null&&x.type===ci&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case No:e:{for(var H=x.key,V=b;V!==null;){if(V.key===H){if(H=x.type,H===ci){if(V.tag===7){n(S,V.sibling),b=i(V,x.props.children),b.return=S,S=b;break e}}else if(V.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===qn&&Bf(H)===V.type){n(S,V.sibling),b=i(V,x.props),b.ref=os(S,V,x),b.return=S,S=b;break e}n(S,V);break}else e(S,V);V=V.sibling}x.type===ci?(b=$r(x.props.children,S.mode,M,x.key),b.return=S,S=b):(M=ia(x.type,x.key,x.props,null,S.mode,M),M.ref=os(S,b,x),M.return=S,S=M)}return a(S);case ui:e:{for(V=x.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(S,b.sibling),b=i(b,x.children||[]),b.return=S,S=b;break e}else{n(S,b);break}else e(S,b);b=b.sibling}b=lu(x,S.mode,M),b.return=S,S=b}return a(S);case qn:return V=x._init,A(S,b,V(x._payload),M)}if(ds(x))return T(S,b,x,M);if(ts(x))return j(S,b,x,M);Mo(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(S,b.sibling),b=i(b,x),b.return=S,S=b):(n(S,b),b=au(x,S.mode,M),b.return=S,S=b),a(S)):n(S,b)}return A}var Pi=om(!0),am=om(!1),wa=cr(null),_a=null,yi=null,Gc=null;function Qc(){Gc=yi=_a=null}function Jc(t){var e=wa.current;De(wa),t._currentValue=e}function Gu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ei(t,e){_a=t,Gc=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Gc!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(_a===null)throw Error(Q(308));yi=t,_a.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var Rr=null;function Yc(t){Rr===null?Rr=[t]:Rr.push(t)}function lm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yc(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tn(t,r)}function Tn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Xc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function um(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tn(t,n)}return i=r.interleaved,i===null?(e.next=e,Yc(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tn(t,n)}function Xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lc(t,n)}}function Kf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ba(t,e,n,r){var i=t.updateQueue;Wn=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?s=p:a.next=p,a=d;var g=t.alternate;g!==null&&(g=g.updateQueue,u=g.lastBaseUpdate,u!==a&&(u===null?g.firstBaseUpdate=p:u.next=p,g.lastBaseUpdate=d))}if(s!==null){var y=i.baseState;a=0,g=p=d=null,u=s;do{var _=u.lane,C=u.eventTime;if((r&_)===_){g!==null&&(g=g.next={eventTime:C,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,j=u;switch(_=e,C=n,j.tag){case 1:if(T=j.payload,typeof T=="function"){y=T.call(C,y,_);break e}y=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=j.payload,_=typeof T=="function"?T.call(C,y,_):T,_==null)break e;y=ze({},y,_);break e;case 2:Wn=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,_=i.effects,_===null?i.effects=[u]:_.push(u))}else C={eventTime:C,lane:_,tag:u.tag,payload:u.payload,callback:u.callback,next:null},g===null?(p=g=C,d=y):g=g.next=C,a|=_;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;_=u,u=_.next,_.next=null,i.lastBaseUpdate=_,i.shared.pending=null}}while(!0);if(g===null&&(d=y),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=g,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zr|=a,t.lanes=a,t.memoizedState=y}}function qf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var Js={},wn=cr(Js),Us=cr(Js),Ms=cr(Js);function Ar(t){if(t===Js)throw Error(Q(174));return t}function Zc(t,e){switch(Pe(Ms,e),Pe(Us,t),Pe(wn,Js),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Nu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Nu(e,t)}De(wn),Pe(wn,e)}function Ri(){De(wn),De(Us),De(Ms)}function cm(t){Ar(Ms.current);var e=Ar(wn.current),n=Nu(e,t.type);e!==n&&(Pe(Us,t),Pe(wn,n))}function ed(t){Us.current===t&&(De(wn),De(Us))}var Ue=cr(0);function xa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var tu=[];function td(){for(var t=0;t<tu.length;t++)tu[t]._workInProgressVersionPrimary=null;tu.length=0}var Zo=Rn.ReactCurrentDispatcher,nu=Rn.ReactCurrentBatchConfig,Mr=0,Me=null,Xe=null,nt=null,ka=!1,_s=!1,zs=0,c0=0;function ht(){throw Error(Q(321))}function nd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function rd(t,e,n,r,i,s){if(Mr=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zo.current=t===null||t.memoizedState===null?p0:m0,t=n(r,i),_s){s=0;do{if(_s=!1,zs=0,25<=s)throw Error(Q(301));s+=1,nt=Xe=null,e.updateQueue=null,Zo.current=g0,t=n(r,i)}while(_s)}if(Zo.current=Sa,e=Xe!==null&&Xe.next!==null,Mr=0,nt=Xe=Me=null,ka=!1,e)throw Error(Q(300));return t}function id(){var t=zs!==0;return zs=0,t}function pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nt===null?Me.memoizedState=nt=t:nt=nt.next=t,nt}function Jt(){if(Xe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=nt===null?Me.memoizedState:nt.next;if(e!==null)nt=e,Xe=t;else{if(t===null)throw Error(Q(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},nt===null?Me.memoizedState=nt=t:nt=nt.next=t}return nt}function Fs(t,e){return typeof e=="function"?e(t):e}function ru(t){var e=Jt(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=Xe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=a=null,d=null,p=s;do{var g=p.lane;if((Mr&g)===g)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var y={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=y,a=r):d=d.next=y,Me.lanes|=g,zr|=g}p=p.next}while(p!==null&&p!==s);d===null?a=r:d.next=u,on(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,zr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iu(t){var e=Jt(),n=e.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);on(s,e.memoizedState)||(jt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dm(){}function fm(t,e){var n=Me,r=Jt(),i=e(),s=!on(r.memoizedState,i);if(s&&(r.memoizedState=i,jt=!0),r=r.queue,sd(mm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||nt!==null&&nt.memoizedState.tag&1){if(n.flags|=2048,Bs(9,pm.bind(null,n,r,i,e),void 0,null),rt===null)throw Error(Q(349));Mr&30||hm(n,e,i)}return i}function hm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pm(t,e,n,r){e.value=n,e.getSnapshot=r,gm(e)&&vm(t)}function mm(t,e,n){return n(function(){gm(e)&&vm(t)})}function gm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function vm(t){var e=Tn(t,1);e!==null&&sn(e,t,1,-1)}function Wf(t){var e=pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fs,lastRenderedState:t},e.queue=t,t=t.dispatch=h0.bind(null,Me,t),[e.memoizedState,t]}function Bs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ym(){return Jt().memoizedState}function ea(t,e,n,r){var i=pn();Me.flags|=t,i.memoizedState=Bs(1|e,n,void 0,r===void 0?null:r)}function Fa(t,e,n,r){var i=Jt();r=r===void 0?null:r;var s=void 0;if(Xe!==null){var a=Xe.memoizedState;if(s=a.destroy,r!==null&&nd(r,a.deps)){i.memoizedState=Bs(e,n,s,r);return}}Me.flags|=t,i.memoizedState=Bs(1|e,n,s,r)}function Vf(t,e){return ea(8390656,8,t,e)}function sd(t,e){return Fa(2048,8,t,e)}function wm(t,e){return Fa(4,2,t,e)}function _m(t,e){return Fa(4,4,t,e)}function bm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xm(t,e,n){return n=n!=null?n.concat([t]):null,Fa(4,4,bm.bind(null,e,t),n)}function od(){}function km(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Sm(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Em(t,e,n){return Mr&21?(on(n,e)||(n=Tp(),Me.lanes|=n,zr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function d0(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=nu.transition;nu.transition={};try{t(!1),e()}finally{Ce=n,nu.transition=r}}function jm(){return Jt().memoizedState}function f0(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cm(t))Nm(e,n);else if(n=lm(t,e,n,r),n!==null){var i=wt();sn(n,t,r,i),Om(n,e,r)}}function h0(t,e,n){var r=ir(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cm(t))Nm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(i.hasEagerState=!0,i.eagerState=u,on(u,a)){var d=e.interleaved;d===null?(i.next=i,Yc(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=lm(t,e,i,r),n!==null&&(i=wt(),sn(n,t,r,i),Om(n,e,r))}}function Cm(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Nm(t,e){_s=ka=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Om(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lc(t,n)}}var Sa={readContext:Qt,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},p0={readContext:Qt,useCallback:function(t,e){return pn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:Vf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ea(4194308,4,bm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ea(4194308,4,t,e)},useInsertionEffect:function(t,e){return ea(4,2,t,e)},useMemo:function(t,e){var n=pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=f0.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=pn();return t={current:t},e.memoizedState=t},useState:Wf,useDebugValue:od,useDeferredValue:function(t){return pn().memoizedState=t},useTransition:function(){var t=Wf(!1),e=t[0];return t=d0.bind(null,t[1]),pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=pn();if(Le){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=e(),rt===null)throw Error(Q(349));Mr&30||hm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Vf(mm.bind(null,r,s,t),[t]),r.flags|=2048,Bs(9,pm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pn(),e=rt.identifierPrefix;if(Le){var n=jn,r=En;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=zs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},m0={readContext:Qt,useCallback:km,useContext:Qt,useEffect:sd,useImperativeHandle:xm,useInsertionEffect:wm,useLayoutEffect:_m,useMemo:Sm,useReducer:ru,useRef:ym,useState:function(){return ru(Fs)},useDebugValue:od,useDeferredValue:function(t){var e=Jt();return Em(e,Xe.memoizedState,t)},useTransition:function(){var t=ru(Fs)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:fm,useId:jm,unstable_isNewReconciler:!1},g0={readContext:Qt,useCallback:km,useContext:Qt,useEffect:sd,useImperativeHandle:xm,useInsertionEffect:wm,useLayoutEffect:_m,useMemo:Sm,useReducer:iu,useRef:ym,useState:function(){return iu(Fs)},useDebugValue:od,useDeferredValue:function(t){var e=Jt();return Xe===null?e.memoizedState=t:Em(e,Xe.memoizedState,t)},useTransition:function(){var t=iu(Fs)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:dm,useSyncExternalStore:fm,useId:jm,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=ir(t),s=Cn(r,i);s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(sn(e,t,i,r),Xo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=ir(t),s=Cn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=nr(t,s,i),e!==null&&(sn(e,t,i,r),Xo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=ir(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=nr(t,i,r),e!==null&&(sn(e,t,r,n),Xo(e,t,r))}};function Hf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Is(n,r)||!Is(i,s):!0}function Tm(t,e,n){var r=!1,i=ar,s=e.contextType;return typeof s=="object"&&s!==null?s=Qt(s):(i=Nt(e)?Lr:gt.current,r=e.contextTypes,s=(r=r!=null)?Oi(t,i):ar),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Gf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function Ju(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qt(s):(s=Nt(e)?Lr:gt.current,i.context=Oi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ba.enqueueReplaceState(i,i.state,null),ba(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ai(t,e){try{var n="",r=e;do n+=qv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function su(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var v0=typeof WeakMap=="function"?WeakMap:Map;function Pm(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ja||(ja=!0,ac=r),Yu(t,e)},n}function Rm(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Yu(t,e),typeof r!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Qf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new v0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=P0.bind(null,t,e,n),e.then(t,t))}function Jf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,nr(n,e,1))),n.lanes|=1),t)}var y0=Rn.ReactCurrentOwner,jt=!1;function yt(t,e,n,r){e.child=t===null?am(e,null,n,r):Pi(e,t.child,n,r)}function Xf(t,e,n,r,i){n=n.render;var s=e.ref;return Ei(e,i),r=rd(t,e,n,r,s,i),n=id(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Le&&n&&Wc(e),e.flags|=1,yt(t,e,r,i),e.child)}function Zf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!pd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Am(t,e,s,r,i)):(t=ia(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(a,r)&&t.ref===e.ref)return Pn(t,e,i)}return e.flags|=1,t=sr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Am(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Is(s,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,Pn(t,e,i)}return Xu(t,e,n,r,i)}function Im(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(_i,Dt),Dt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(_i,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Pe(_i,Dt),Dt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Pe(_i,Dt),Dt|=r;return yt(t,e,i,n),e.child}function Dm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xu(t,e,n,r,i){var s=Nt(n)?Lr:gt.current;return s=Oi(e,s),Ei(e,i),n=rd(t,e,n,r,s,i),r=id(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pn(t,e,i)):(Le&&r&&Wc(e),e.flags|=1,yt(t,e,n,i),e.child)}function eh(t,e,n,r,i){if(Nt(n)){var s=!0;ga(e)}else s=!1;if(Ei(e,i),e.stateNode===null)ta(t,e),Tm(e,n,r),Ju(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Qt(p):(p=Nt(n)?Lr:gt.current,p=Oi(e,p));var g=n.getDerivedStateFromProps,y=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==p)&&Gf(e,a,r,p),Wn=!1;var _=e.memoizedState;a.state=_,ba(e,r,a,i),d=e.memoizedState,u!==r||_!==d||Ct.current||Wn?(typeof g=="function"&&(Qu(e,n,g,r),d=e.memoizedState),(u=Wn||Hf(e,n,u,r,_,d,p))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=p,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,um(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Zt(e.type,u),a.props=p,y=e.pendingProps,_=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Qt(d):(d=Nt(n)?Lr:gt.current,d=Oi(e,d));var C=n.getDerivedStateFromProps;(g=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==y||_!==d)&&Gf(e,a,r,d),Wn=!1,_=e.memoizedState,a.state=_,ba(e,r,a,i);var T=e.memoizedState;u!==y||_!==T||Ct.current||Wn?(typeof C=="function"&&(Qu(e,n,C,r),T=e.memoizedState),(p=Wn||Hf(e,n,p,r,_,T,d)||!1)?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,T,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,T,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),a.props=r,a.state=T,a.context=d,r=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return Zu(t,e,n,r,s,i)}function Zu(t,e,n,r,i,s){Dm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Mf(e,n,!1),Pn(t,e,s);r=e.stateNode,y0.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Pi(e,t.child,null,s),e.child=Pi(e,null,u,s)):yt(t,e,u,s),e.memoizedState=r.state,i&&Mf(e,n,!0),e.child}function $m(t){var e=t.stateNode;e.pendingContext?Uf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uf(t,e.context,!1),Zc(t,e.containerInfo)}function th(t,e,n,r,i){return Ti(),Hc(i),e.flags|=256,yt(t,e,n,r),e.child}var ec={dehydrated:null,treeContext:null,retryLane:0};function tc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lm(t,e,n){var r=e.pendingProps,i=Ue.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(Ue,i&1),t===null)return Hu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Wa(a,r,0,null),t=$r(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=tc(n),e.memoizedState=ec,t):ad(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return w0(t,e,a,r,u,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=sr(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=sr(u,s):(s=$r(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?tc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=ec,r}return s=t.child,t=s.sibling,r=sr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ad(t,e){return e=Wa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zo(t,e,n,r){return r!==null&&Hc(r),Pi(e,t.child,null,n),t=ad(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w0(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=su(Error(Q(422))),zo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Wa({mode:"visible",children:r.children},i,0,null),s=$r(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Pi(e,t.child,null,a),e.child.memoizedState=tc(a),e.memoizedState=ec,s);if(!(e.mode&1))return zo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(Q(419)),r=su(s,r,void 0),zo(t,e,a,r)}if(u=(a&t.childLanes)!==0,jt||u){if(r=rt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tn(t,i),sn(r,t,i,-1))}return hd(),r=su(Error(Q(421))),zo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=R0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$t=tr(i.nextSibling),Lt=e,Le=!0,nn=null,t!==null&&(qt[Wt++]=En,qt[Wt++]=jn,qt[Wt++]=Ur,En=t.id,jn=t.overflow,Ur=e),e=ad(e,r.children),e.flags|=4096,e)}function nh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gu(t.return,e,n)}function ou(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Um(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yt(t,e,r.children,n),r=Ue.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nh(t,n,e);else if(t.tag===19)nh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Ue,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ou(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ou(e,!0,n,null,s);break;case"together":ou(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ta(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,n=sr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=sr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _0(t,e,n){switch(e.tag){case 3:$m(e),Ti();break;case 5:cm(e);break;case 1:Nt(e.type)&&ga(e);break;case 4:Zc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Pe(wa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?Lm(t,e,n):(Pe(Ue,Ue.current&1),t=Pn(t,e,n),t!==null?t.sibling:null);Pe(Ue,Ue.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Um(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(Ue,Ue.current),r)break;return null;case 22:case 23:return e.lanes=0,Im(t,e,n)}return Pn(t,e,n)}var Mm,nc,zm,Fm;Mm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};nc=function(){};zm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ar(wn.current);var s=null;switch(n){case"input":i=Su(t,i),r=Su(t,r),s=[];break;case"select":i=ze({},i,{value:void 0}),r=ze({},r,{value:void 0}),s=[];break;case"textarea":i=Cu(t,i),r=Cu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=pa)}Ou(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var u=i[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Cs.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var d=r[p];if(u=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ie("scroll",t),s||u===d||(s=[])):(s=s||[]).push(p,d))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};Fm=function(t,e,n,r){n!==r&&(e.flags|=4)};function as(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function b0(t,e,n){var r=e.pendingProps;switch(Vc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Nt(e.type)&&ma(),pt(e),null;case 3:return r=e.stateNode,Ri(),De(Ct),De(gt),td(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Uo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,nn!==null&&(cc(nn),nn=null))),nc(t,e),pt(e),null;case 5:ed(e);var i=Ar(Ms.current);if(n=e.type,t!==null&&e.stateNode!=null)zm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return pt(e),null}if(t=Ar(wn.current),Uo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gn]=e,r[Ls]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<hs.length;i++)Ie(hs[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":df(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":hf(r,s),Ie("invalid",r)}Ou(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Lo(r.textContent,u,t),i=["children",""+u]):Cs.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Oo(r),ff(r,s,!0);break;case"textarea":Oo(r),pf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=pa)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=mp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[gn]=e,t[Ls]=r,Mm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Tu(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<hs.length;i++)Ie(hs[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":df(t,r),i=Su(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ze({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":hf(t,r),i=Cu(t,r),Ie("invalid",t);break;default:i=r}Ou(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?yp(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&gp(t,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Ns(t,d):typeof d=="number"&&Ns(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cs.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Ie("scroll",t):d!=null&&Pc(t,s,d,a))}switch(n){case"input":Oo(t),ff(t,r,!1);break;case"textarea":Oo(t),pf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+or(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bi(t,!!r.multiple,s,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=pa)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)Fm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(n=Ar(Ms.current),Ar(wn.current),Uo(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(s=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Lo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return pt(e),null;case 13:if(De(Ue),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&$t!==null&&e.mode&1&&!(e.flags&128))sm(),Ti(),e.flags|=98560,s=!1;else if(s=Uo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[gn]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),s=!1}else nn!==null&&(cc(nn),nn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?Ze===0&&(Ze=3):hd())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Ri(),nc(t,e),t===null&&Ds(e.stateNode.containerInfo),pt(e),null;case 10:return Jc(e.type._context),pt(e),null;case 17:return Nt(e.type)&&ma(),pt(e),null;case 19:if(De(Ue),s=e.memoizedState,s===null)return pt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)as(s,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=xa(t),a!==null){for(e.flags|=128,as(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Ue,Ue.current&1|2),e.child}t=t.sibling}s.tail!==null&&He()>Ii&&(e.flags|=128,r=!0,as(s,!1),e.lanes=4194304)}else{if(!r)if(t=xa(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),as(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Le)return pt(e),null}else 2*He()-s.renderingStartTime>Ii&&n!==1073741824&&(e.flags|=128,r=!0,as(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=He(),e.sibling=null,n=Ue.current,Pe(Ue,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return fd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function x0(t,e){switch(Vc(e),e.tag){case 1:return Nt(e.type)&&ma(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),De(Ct),De(gt),td(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ed(e),null;case 13:if(De(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Ue),null;case 4:return Ri(),null;case 10:return Jc(e.type._context),null;case 22:case 23:return fd(),null;case 24:return null;default:return null}}var Fo=!1,mt=!1,k0=typeof WeakSet=="function"?WeakSet:Set,le=null;function wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function rc(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var rh=!1;function S0(t,e){if(zu=da,t=Vp(),qc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,g=0,y=t,_=null;t:for(;;){for(var C;y!==n||i!==0&&y.nodeType!==3||(u=a+i),y!==s||r!==0&&y.nodeType!==3||(d=a+r),y.nodeType===3&&(a+=y.nodeValue.length),(C=y.firstChild)!==null;)_=y,y=C;for(;;){if(y===t)break t;if(_===n&&++p===i&&(u=a),_===s&&++g===r&&(d=a),(C=y.nextSibling)!==null)break;y=_,_=y.parentNode}y=C}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fu={focusedElem:t,selectionRange:n},da=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var j=T.memoizedProps,A=T.memoizedState,S=e.stateNode,b=S.getSnapshotBeforeUpdate(e.elementType===e.type?j:Zt(e.type,j),A);S.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(M){Ke(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return T=rh,rh=!1,T}function bs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&rc(e,n,s)}i=i.next}while(i!==r)}}function Ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ic(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Bm(t){var e=t.alternate;e!==null&&(t.alternate=null,Bm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[Ls],delete e[qu],delete e[o0],delete e[a0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Km(t){return t.tag===5||t.tag===3||t.tag===4}function ih(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Km(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=pa));else if(r!==4&&(t=t.child,t!==null))for(sc(t,e,n),t=t.sibling;t!==null;)sc(t,e,n),t=t.sibling}function oc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(oc(t,e,n),t=t.sibling;t!==null;)oc(t,e,n),t=t.sibling}var st=null,en=!1;function zn(t,e,n){for(n=n.child;n!==null;)qm(t,e,n),n=n.sibling}function qm(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Da,n)}catch{}switch(n.tag){case 5:mt||wi(n,e);case 6:var r=st,i=en;st=null,zn(t,e,n),st=r,en=i,st!==null&&(en?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(en?(t=st,n=n.stateNode,t.nodeType===8?Zl(t.parentNode,n):t.nodeType===1&&Zl(t,n),Rs(t)):Zl(st,n.stateNode));break;case 4:r=st,i=en,st=n.stateNode.containerInfo,en=!0,zn(t,e,n),st=r,en=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&rc(n,e,a),i=i.next}while(i!==r)}zn(t,e,n);break;case 1:if(!mt&&(wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ke(n,e,u)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,zn(t,e,n),mt=r):zn(t,e,n);break;default:zn(t,e,n)}}function sh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new k0),e.forEach(function(r){var i=A0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:st=u.stateNode,en=!1;break e;case 3:st=u.stateNode.containerInfo,en=!0;break e;case 4:st=u.stateNode.containerInfo,en=!0;break e}u=u.return}if(st===null)throw Error(Q(160));qm(s,a,i),st=null,en=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){Ke(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wm(e,t),e=e.sibling}function Wm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yt(e,t),hn(t),r&4){try{bs(3,t,t.return),Ka(3,t)}catch(j){Ke(t,t.return,j)}try{bs(5,t,t.return)}catch(j){Ke(t,t.return,j)}}break;case 1:Yt(e,t),hn(t),r&512&&n!==null&&wi(n,n.return);break;case 5:if(Yt(e,t),hn(t),r&512&&n!==null&&wi(n,n.return),t.flags&32){var i=t.stateNode;try{Ns(i,"")}catch(j){Ke(t,t.return,j)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&hp(i,s),Tu(u,a);var p=Tu(u,s);for(a=0;a<d.length;a+=2){var g=d[a],y=d[a+1];g==="style"?yp(i,y):g==="dangerouslySetInnerHTML"?gp(i,y):g==="children"?Ns(i,y):Pc(i,g,y,p)}switch(u){case"input":Eu(i,s);break;case"textarea":pp(i,s);break;case"select":var _=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var C=s.value;C!=null?bi(i,!!s.multiple,C,!1):_!==!!s.multiple&&(s.defaultValue!=null?bi(i,!!s.multiple,s.defaultValue,!0):bi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ls]=s}catch(j){Ke(t,t.return,j)}}break;case 6:if(Yt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(j){Ke(t,t.return,j)}}break;case 3:if(Yt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Rs(e.containerInfo)}catch(j){Ke(t,t.return,j)}break;case 4:Yt(e,t),hn(t);break;case 13:Yt(e,t),hn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(cd=He())),r&4&&sh(t);break;case 22:if(g=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(p=mt)||g,Yt(e,t),mt=p):Yt(e,t),hn(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!g&&t.mode&1)for(le=t,g=t.child;g!==null;){for(y=le=g;le!==null;){switch(_=le,C=_.child,_.tag){case 0:case 11:case 14:case 15:bs(4,_,_.return);break;case 1:wi(_,_.return);var T=_.stateNode;if(typeof T.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(j){Ke(r,n,j)}}break;case 5:wi(_,_.return);break;case 22:if(_.memoizedState!==null){ah(y);continue}}C!==null?(C.return=_,le=C):ah(y)}g=g.sibling}e:for(g=null,y=t;;){if(y.tag===5){if(g===null){g=y;try{i=y.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=y.stateNode,d=y.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=vp("display",a))}catch(j){Ke(t,t.return,j)}}}else if(y.tag===6){if(g===null)try{y.stateNode.nodeValue=p?"":y.memoizedProps}catch(j){Ke(t,t.return,j)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===t)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===t)break e;for(;y.sibling===null;){if(y.return===null||y.return===t)break e;g===y&&(g=null),y=y.return}g===y&&(g=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Yt(e,t),hn(t),r&4&&sh(t);break;case 21:break;default:Yt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Km(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ns(i,""),r.flags&=-33);var s=ih(t);oc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=ih(t);sc(t,u,a);break;default:throw Error(Q(161))}}catch(d){Ke(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E0(t,e,n){le=t,Vm(t)}function Vm(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Fo;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||mt;u=Fo;var p=mt;if(Fo=a,(mt=d)&&!p)for(le=i;le!==null;)a=le,d=a.child,a.tag===22&&a.memoizedState!==null?lh(i):d!==null?(d.return=a,le=d):lh(i);for(;s!==null;)le=s,Vm(s),s=s.sibling;le=i,Fo=u,mt=p}oh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,le=s):oh(t)}}function oh(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Ka(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qf(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qf(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var y=g.dehydrated;y!==null&&Rs(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}mt||e.flags&512&&ic(e)}catch(_){Ke(e,e.return,_)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function ah(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function lh(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ka(4,e)}catch(d){Ke(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){Ke(e,i,d)}}var s=e.return;try{ic(e)}catch(d){Ke(e,s,d)}break;case 5:var a=e.return;try{ic(e)}catch(d){Ke(e,a,d)}}}catch(d){Ke(e,e.return,d)}if(e===t){le=null;break}var u=e.sibling;if(u!==null){u.return=e.return,le=u;break}le=e.return}}var j0=Math.ceil,Ea=Rn.ReactCurrentDispatcher,ld=Rn.ReactCurrentOwner,Gt=Rn.ReactCurrentBatchConfig,Se=0,rt=null,Je=null,ot=0,Dt=0,_i=cr(0),Ze=0,Ks=null,zr=0,qa=0,ud=0,xs=null,St=null,cd=0,Ii=1/0,xn=null,ja=!1,ac=null,rr=null,Bo=!1,Yn=null,Ca=0,ks=0,lc=null,na=-1,ra=0;function wt(){return Se&6?He():na!==-1?na:na=He()}function ir(t){return t.mode&1?Se&2&&ot!==0?ot&-ot:u0.transition!==null?(ra===0&&(ra=Tp()),ra):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Lp(t.type)),t):1}function sn(t,e,n,r){if(50<ks)throw ks=0,lc=null,Error(Q(185));Hs(t,n,r),(!(Se&2)||t!==rt)&&(t===rt&&(!(Se&2)&&(qa|=n),Ze===4&&Gn(t,ot)),Ot(t,r),n===1&&Se===0&&!(e.mode&1)&&(Ii=He()+500,za&&dr()))}function Ot(t,e){var n=t.callbackNode;uy(t,e);var r=ca(t,t===rt?ot:0);if(r===0)n!==null&&vf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vf(n),e===1)t.tag===0?l0(uh.bind(null,t)):nm(uh.bind(null,t)),i0(function(){!(Se&6)&&dr()}),n=null;else{switch(Pp(r)){case 1:n=$c;break;case 4:n=Np;break;case 16:n=ua;break;case 536870912:n=Op;break;default:n=ua}n=eg(n,Hm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Hm(t,e){if(na=-1,ra=0,Se&6)throw Error(Q(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=ca(t,t===rt?ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Na(t,r);else{e=r;var i=Se;Se|=2;var s=Qm();(rt!==t||ot!==e)&&(xn=null,Ii=He()+500,Dr(t,e));do try{O0();break}catch(u){Gm(t,u)}while(!0);Qc(),Ea.current=s,Se=i,Je!==null?e=0:(rt=null,ot=0,e=Ze)}if(e!==0){if(e===2&&(i=Du(t),i!==0&&(r=i,e=uc(t,i))),e===1)throw n=Ks,Dr(t,0),Gn(t,r),Ot(t,He()),n;if(e===6)Gn(t,r);else{if(i=t.current.alternate,!(r&30)&&!C0(i)&&(e=Na(t,r),e===2&&(s=Du(t),s!==0&&(r=s,e=uc(t,s))),e===1))throw n=Ks,Dr(t,0),Gn(t,r),Ot(t,He()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:Cr(t,St,xn);break;case 3:if(Gn(t,r),(r&130023424)===r&&(e=cd+500-He(),10<e)){if(ca(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ku(Cr.bind(null,t,St,xn),e);break}Cr(t,St,xn);break;case 4:if(Gn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-rn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=He()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j0(r/1960))-r,10<r){t.timeoutHandle=Ku(Cr.bind(null,t,St,xn),r);break}Cr(t,St,xn);break;case 5:Cr(t,St,xn);break;default:throw Error(Q(329))}}}return Ot(t,He()),t.callbackNode===n?Hm.bind(null,t):null}function uc(t,e){var n=xs;return t.current.memoizedState.isDehydrated&&(Dr(t,e).flags|=256),t=Na(t,e),t!==2&&(e=St,St=n,e!==null&&cc(e)),t}function cc(t){St===null?St=t:St.push.apply(St,t)}function C0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gn(t,e){for(e&=~ud,e&=~qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function uh(t){if(Se&6)throw Error(Q(327));ji();var e=ca(t,0);if(!(e&1))return Ot(t,He()),null;var n=Na(t,e);if(t.tag!==0&&n===2){var r=Du(t);r!==0&&(e=r,n=uc(t,r))}if(n===1)throw n=Ks,Dr(t,0),Gn(t,e),Ot(t,He()),n;if(n===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cr(t,St,xn),Ot(t,He()),null}function dd(t,e){var n=Se;Se|=1;try{return t(e)}finally{Se=n,Se===0&&(Ii=He()+500,za&&dr())}}function Fr(t){Yn!==null&&Yn.tag===0&&!(Se&6)&&ji();var e=Se;Se|=1;var n=Gt.transition,r=Ce;try{if(Gt.transition=null,Ce=1,t)return t()}finally{Ce=r,Gt.transition=n,Se=e,!(Se&6)&&dr()}}function fd(){Dt=_i.current,De(_i)}function Dr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,r0(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Vc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ma();break;case 3:Ri(),De(Ct),De(gt),td();break;case 5:ed(r);break;case 4:Ri();break;case 13:De(Ue);break;case 19:De(Ue);break;case 10:Jc(r.type._context);break;case 22:case 23:fd()}n=n.return}if(rt=t,Je=t=sr(t.current,null),ot=Dt=e,Ze=0,Ks=null,ud=qa=zr=0,St=xs=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Rr=null}return t}function Gm(t,e){do{var n=Je;try{if(Qc(),Zo.current=Sa,ka){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ka=!1}if(Mr=0,nt=Xe=Me=null,_s=!1,zs=0,ld.current=null,n===null||n.return===null){Ze=1,Ks=e,Je=null;break}e:{var s=t,a=n.return,u=n,d=e;if(e=ot,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,g=u,y=g.tag;if(!(g.mode&1)&&(y===0||y===11||y===15)){var _=g.alternate;_?(g.updateQueue=_.updateQueue,g.memoizedState=_.memoizedState,g.lanes=_.lanes):(g.updateQueue=null,g.memoizedState=null)}var C=Jf(a);if(C!==null){C.flags&=-257,Yf(C,a,u,s,e),C.mode&1&&Qf(s,p,e),e=C,d=p;var T=e.updateQueue;if(T===null){var j=new Set;j.add(d),e.updateQueue=j}else T.add(d);break e}else{if(!(e&1)){Qf(s,p,e),hd();break e}d=Error(Q(426))}}else if(Le&&u.mode&1){var A=Jf(a);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Yf(A,a,u,s,e),Hc(Ai(d,u));break e}}s=d=Ai(d,u),Ze!==4&&(Ze=2),xs===null?xs=[s]:xs.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=Pm(s,d,e);Kf(s,S);break e;case 1:u=d;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(rr===null||!rr.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Rm(s,u,e);Kf(s,M);break e}}s=s.return}while(s!==null)}Ym(n)}catch(H){e=H,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Qm(){var t=Ea.current;return Ea.current=Sa,t===null?Sa:t}function hd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),rt===null||!(zr&268435455)&&!(qa&268435455)||Gn(rt,ot)}function Na(t,e){var n=Se;Se|=2;var r=Qm();(rt!==t||ot!==e)&&(xn=null,Dr(t,e));do try{N0();break}catch(i){Gm(t,i)}while(!0);if(Qc(),Se=n,Ea.current=r,Je!==null)throw Error(Q(261));return rt=null,ot=0,Ze}function N0(){for(;Je!==null;)Jm(Je)}function O0(){for(;Je!==null&&!ey();)Jm(Je)}function Jm(t){var e=Zm(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?Ym(t):Je=e,ld.current=null}function Ym(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=x0(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Je=null;return}}else if(n=b0(n,e,Dt),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);Ze===0&&(Ze=5)}function Cr(t,e,n){var r=Ce,i=Gt.transition;try{Gt.transition=null,Ce=1,T0(t,e,n,r)}finally{Gt.transition=i,Ce=r}return null}function T0(t,e,n,r){do ji();while(Yn!==null);if(Se&6)throw Error(Q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cy(t,s),t===rt&&(Je=rt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bo||(Bo=!0,eg(ua,function(){return ji(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var a=Ce;Ce=1;var u=Se;Se|=4,ld.current=null,S0(t,n),Wm(n,t),Jy(Fu),da=!!zu,Fu=zu=null,t.current=n,E0(n),ty(),Se=u,Ce=a,Gt.transition=s}else t.current=n;if(Bo&&(Bo=!1,Yn=t,Ca=i),s=t.pendingLanes,s===0&&(rr=null),iy(n.stateNode),Ot(t,He()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ja)throw ja=!1,t=ac,ac=null,t;return Ca&1&&t.tag!==0&&ji(),s=t.pendingLanes,s&1?t===lc?ks++:(ks=0,lc=t):ks=0,dr(),null}function ji(){if(Yn!==null){var t=Pp(Ca),e=Gt.transition,n=Ce;try{if(Gt.transition=null,Ce=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Ca=0,Se&6)throw Error(Q(331));var i=Se;for(Se|=4,le=t.current;le!==null;){var s=le,a=s.child;if(le.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(le=p;le!==null;){var g=le;switch(g.tag){case 0:case 11:case 15:bs(8,g,s)}var y=g.child;if(y!==null)y.return=g,le=y;else for(;le!==null;){g=le;var _=g.sibling,C=g.return;if(Bm(g),g===p){le=null;break}if(_!==null){_.return=C,le=_;break}le=C}}}var T=s.alternate;if(T!==null){var j=T.child;if(j!==null){T.child=null;do{var A=j.sibling;j.sibling=null,j=A}while(j!==null)}}le=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,le=a;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:bs(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,le=S;break e}le=s.return}}var b=t.current;for(le=b;le!==null;){a=le;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,le=x;else e:for(a=b;le!==null;){if(u=le,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Ka(9,u)}}catch(H){Ke(u,u.return,H)}if(u===a){le=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,le=M;break e}le=u.return}}if(Se=i,dr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Da,t)}catch{}r=!0}return r}finally{Ce=n,Gt.transition=e}}return!1}function ch(t,e,n){e=Ai(n,e),e=Pm(t,e,1),t=nr(t,e,1),e=wt(),t!==null&&(Hs(t,1,e),Ot(t,e))}function Ke(t,e,n){if(t.tag===3)ch(t,t,n);else for(;e!==null;){if(e.tag===3){ch(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(rr===null||!rr.has(r))){t=Ai(n,t),t=Rm(e,t,1),e=nr(e,t,1),t=wt(),e!==null&&(Hs(e,1,t),Ot(e,t));break}}e=e.return}}function P0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,rt===t&&(ot&n)===n&&(Ze===4||Ze===3&&(ot&130023424)===ot&&500>He()-cd?Dr(t,0):ud|=n),Ot(t,e)}function Xm(t,e){e===0&&(t.mode&1?(e=Ro,Ro<<=1,!(Ro&130023424)&&(Ro=4194304)):e=1);var n=wt();t=Tn(t,e),t!==null&&(Hs(t,e,n),Ot(t,n))}function R0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xm(t,n)}function A0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),Xm(t,n)}var Zm;Zm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,_0(t,e,n);jt=!!(t.flags&131072)}else jt=!1,Le&&e.flags&1048576&&rm(e,ya,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ta(t,e),t=e.pendingProps;var i=Oi(e,gt.current);Ei(e,n),i=rd(null,e,r,t,i,n);var s=id();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,ga(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xc(e),i.updater=Ba,e.stateNode=i,i._reactInternals=e,Ju(e,r,t,n),e=Zu(null,e,r,!0,s,n)):(e.tag=0,Le&&s&&Wc(e),yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ta(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=D0(r),t=Zt(r,t),i){case 0:e=Xu(null,e,r,t,n);break e;case 1:e=eh(null,e,r,t,n);break e;case 11:e=Xf(null,e,r,t,n);break e;case 14:e=Zf(null,e,r,Zt(r.type,t),n);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Xu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),eh(t,e,r,i,n);case 3:e:{if($m(e),t===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,um(t,e),ba(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ai(Error(Q(423)),e),e=th(t,e,r,n,i);break e}else if(r!==i){i=Ai(Error(Q(424)),e),e=th(t,e,r,n,i);break e}else for($t=tr(e.stateNode.containerInfo.firstChild),Lt=e,Le=!0,nn=null,n=am(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===i){e=Pn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return cm(e),t===null&&Hu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Bu(r,i)?a=null:s!==null&&Bu(r,s)&&(e.flags|=32),Dm(t,e),yt(t,e,a,n),e.child;case 6:return t===null&&Hu(e),null;case 13:return Lm(t,e,n);case 4:return Zc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Pi(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Xf(t,e,r,i,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Pe(wa,r._currentValue),r._currentValue=a,s!==null)if(on(s.value,a)){if(s.children===i.children&&!Ct.current){e=Pn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=Cn(-1,n&-n),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?d.next=d:(d.next=g.next,g.next=d),p.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Gu(s.return,n,e),u.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Q(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Gu(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ei(e,n),i=Qt(i),r=r(i),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),Zf(t,e,r,i,n);case 15:return Am(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),ta(t,e),e.tag=1,Nt(r)?(t=!0,ga(e)):t=!1,Ei(e,n),Tm(e,r,i),Ju(e,r,i,n),Zu(null,e,r,!0,t,n);case 19:return Um(t,e,n);case 22:return Im(t,e,n)}throw Error(Q(156,e.tag))};function eg(t,e){return Cp(t,e)}function I0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new I0(t,e,n,r)}function pd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function D0(t){if(typeof t=="function")return pd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ac)return 11;if(t===Ic)return 14}return 2}function sr(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ia(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")pd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ci:return $r(n.children,i,s,e);case Rc:a=8,i|=8;break;case _u:return t=Ht(12,n,e,i|2),t.elementType=_u,t.lanes=s,t;case bu:return t=Ht(13,n,e,i),t.elementType=bu,t.lanes=s,t;case xu:return t=Ht(19,n,e,i),t.elementType=xu,t.lanes=s,t;case cp:return Wa(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lp:a=10;break e;case up:a=9;break e;case Ac:a=11;break e;case Ic:a=14;break e;case qn:a=16,r=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Ht(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $r(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function Wa(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=cp,t.lanes=n,t.stateNode={isHidden:!1},t}function au(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function lu(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function md(t,e,n,r,i,s,a,u,d){return t=new $0(t,e,n,u,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ht(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xc(s),t}function L0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tg(t){if(!t)return ar;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var n=t.type;if(Nt(n))return tm(t,n,e)}return e}function ng(t,e,n,r,i,s,a,u,d){return t=md(n,r,!0,t,i,s,a,u,d),t.context=tg(null),n=t.current,r=wt(),i=ir(n),s=Cn(r,i),s.callback=e??null,nr(n,s,i),t.current.lanes=i,Hs(t,i,r),Ot(t,r),t}function Va(t,e,n,r){var i=e.current,s=wt(),a=ir(i);return n=tg(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=nr(i,e,a),t!==null&&(sn(t,i,a,s),Xo(t,i,a)),a}function Oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gd(t,e){dh(t,e),(t=t.alternate)&&dh(t,e)}function U0(){return null}var rg=typeof reportError=="function"?reportError:function(t){console.error(t)};function vd(t){this._internalRoot=t}Ha.prototype.render=vd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));Va(t,e,null,null)};Ha.prototype.unmount=vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fr(function(){Va(null,t,null,null)}),e[On]=null}};function Ha(t){this._internalRoot=t}Ha.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ip();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&$p(t)}};function yd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ga(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fh(){}function M0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=Oa(a);s.call(p)}}var a=ng(e,r,t,0,null,!1,!1,"",fh);return t._reactRootContainer=a,t[On]=a.current,Ds(t.nodeType===8?t.parentNode:t),Fr(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var p=Oa(d);u.call(p)}}var d=md(t,0,!1,null,null,!1,!1,"",fh);return t._reactRootContainer=d,t[On]=d.current,Ds(t.nodeType===8?t.parentNode:t),Fr(function(){Va(e,d,n,r)}),d}function Qa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var u=i;i=function(){var d=Oa(a);u.call(d)}}Va(e,a,t,i)}else a=M0(n,e,t,i,r);return Oa(a)}Rp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fs(e.pendingLanes);n!==0&&(Lc(e,n|1),Ot(e,He()),!(Se&6)&&(Ii=He()+500,dr()))}break;case 13:Fr(function(){var r=Tn(t,1);if(r!==null){var i=wt();sn(r,t,1,i)}}),gd(t,1)}};Uc=function(t){if(t.tag===13){var e=Tn(t,134217728);if(e!==null){var n=wt();sn(e,t,134217728,n)}gd(t,134217728)}};Ap=function(t){if(t.tag===13){var e=ir(t),n=Tn(t,e);if(n!==null){var r=wt();sn(n,t,e,r)}gd(t,e)}};Ip=function(){return Ce};Dp=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Ru=function(t,e,n){switch(e){case"input":if(Eu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ma(r);if(!i)throw Error(Q(90));fp(r),Eu(r,i)}}}break;case"textarea":pp(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};bp=dd;xp=Fr;var z0={usingClientEntryPoint:!1,Events:[Qs,pi,Ma,wp,_p,dd]},ls={findFiberByHostInstance:Pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F0={bundleType:ls.bundleType,version:ls.version,rendererPackageName:ls.rendererPackageName,rendererConfig:ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ep(t),t===null?null:t.stateNode},findFiberByHostInstance:ls.findFiberByHostInstance||U0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Da=Ko.inject(F0),yn=Ko}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z0;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yd(e))throw Error(Q(200));return L0(t,e,null,n)};zt.createRoot=function(t,e){if(!yd(t))throw Error(Q(299));var n=!1,r="",i=rg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=md(t,1,!1,null,null,n,!1,r,i),t[On]=e.current,Ds(t.nodeType===8?t.parentNode:t),new vd(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=Ep(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return Fr(t)};zt.hydrate=function(t,e,n){if(!Ga(e))throw Error(Q(200));return Qa(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!yd(t))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=rg;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=ng(e,null,t,1,n??null,i,!1,s,a),t[On]=e.current,Ds(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ha(e)};zt.render=function(t,e,n){if(!Ga(e))throw Error(Q(200));return Qa(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Ga(t))throw Error(Q(40));return t._reactRootContainer?(Fr(function(){Qa(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};zt.unstable_batchedUpdates=dd;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ga(n))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return Qa(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function ig(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ig)}catch(t){console.error(t)}}ig(),ip.exports=zt;var B0=ip.exports,sg,hh=B0;sg=hh.createRoot,hh.hydrateRoot;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ph=t=>{const e=q0(t);return e.charAt(0).toUpperCase()+e.slice(1)},og=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),W0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...u},d)=>Y.createElement("svg",{ref:d,...V0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:og("lucide",i),...!s&&!W0(u)&&{"aria-hidden":"true"},...u},[...a.map(([p,g])=>Y.createElement(p,g)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(t,e)=>{const n=Y.forwardRef(({className:r,...i},s)=>Y.createElement(H0,{ref:s,iconNode:e,className:og(`lucide-${K0(ph(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ph(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M16 12h2",key:"7q9ll5"}],["path",{d:"M16 8h2",key:"msurwy"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}],["path",{d:"M6 12h2",key:"32wvfc"}],["path",{d:"M6 8h2",key:"30oboj"}]],Q0=xt("book-open-text",G0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Y0=xt("calculator",J0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Z0=xt("chevron-down",X0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tw=xt("chevron-right",ew);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rw=xt("circle-check-big",nw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],sw=xt("clipboard-list",iw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],aw=xt("clock",ow);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],uw=xt("download",lw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],dw=xt("hammer",cw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],mh=xt("moon",fw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],dc=xt("package",hw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gh=xt("sun",pw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ag=xt("trending-up",mw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vw=xt("upload",gw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],ww=xt("wrench",yw),_w="modulepreload",bw=function(t,e){return new URL(t,e).href},vh={},Ys=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=Promise.allSettled(n.map(p=>{if(p=bw(p,r),p in vh)return;vh[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(!!r)for(let T=a.length-1;T>=0;T--){const j=a[T];if(j.href===p&&(!g||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${y}`))return;const C=document.createElement("link");if(C.rel=g?"stylesheet":_w,g||(C.as="script"),C.crossOrigin="",C.href=p,d&&C.setAttribute("nonce",d),document.head.appendChild(C),g)return new Promise((T,j)=>{C.addEventListener("load",T),C.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},xw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class wd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class yh extends wd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wh extends wd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _h extends wd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(fc||(fc={}));var kw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class Sw{constructor(e,{headers:n={},customFetch:r,region:i=fc.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=xw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return kw(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:u,signal:d}=r;let p={},{region:g}=r;g||(g=this.region);const y=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let _;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(p["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(p["Content-Type"]="application/json",_=JSON.stringify(u)));const C=yield this.fetch(y.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:_,signal:d}).catch(S=>{throw S.name==="AbortError"?S:new yh(S)}),T=C.headers.get("x-relay-error");if(T&&T==="true")throw new wh(C);if(!C.ok)throw new _h(C);let j=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),A;return j==="application/json"?A=yield C.json():j==="application/octet-stream"?A=yield C.blob():j==="text/event-stream"?A=C:j==="multipart/form-data"?A=yield C.formData():A=yield C.text(),{data:A,error:null,response:C}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new yh(s)}:{data:null,error:s,response:s instanceof _h||s instanceof wh?s.context:void 0}}})}}var Et={},_d={},Ja={},Xs={},Ya={},Xa={},Ew=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Di=Ew();const jw=Di.fetch,lg=Di.fetch.bind(Di),ug=Di.Headers,Cw=Di.Request,Nw=Di.Response,zi=Object.freeze(Object.defineProperty({__proto__:null,Headers:ug,Request:Cw,Response:Nw,default:lg,fetch:jw},Symbol.toStringTag,{value:"Module"})),Ow=gv(zi);var Za={};Object.defineProperty(Za,"__esModule",{value:!0});let Tw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Za.default=Tw;var cg=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xa,"__esModule",{value:!0});const Pw=cg(Ow),Rw=cg(Za);let Aw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Pw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,u,d,p;let g=null,y=null,_=null,C=s.status,T=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=await s.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?y=b:y=JSON.parse(b))}const A=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(d=s.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");A&&S&&S.length>1&&(_=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(g={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,_=null,C=406,T="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const A=await s.text();try{g=JSON.parse(A),Array.isArray(g)&&s.status===404&&(y=[],g=null,C=200,T="OK")}catch{s.status===404&&A===""?(C=204,T="No Content"):g={message:A}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,C=200,T="OK"),g&&this.shouldThrowOnError)throw new Rw.default(g)}return{error:g,data:y,count:_,status:C,statusText:T}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,u,d;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=s==null?void 0:s.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Xa.default=Aw;var Iw=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ya,"__esModule",{value:!0});const Dw=Iw(Xa);let $w=class extends Dw.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${p}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ya.default=$w;var Lw=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xs,"__esModule",{value:!0});const Uw=Lw(Ya);let Mw=class extends Uw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Xs.default=Mw;var zw=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});const us=zw(Xs);let Fw=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,n){const{head:r=!1,count:i}=n??{},s=r?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new us.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new us.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(d.length>0){const p=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new us.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new us.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new us.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ja.default=Fw;var dg=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_d,"__esModule",{value:!0});const Bw=dg(Ja),Kw=dg(Xs);let qw=class fg{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Bw.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let u;const d=new URL(`${this.url}/rpc/${e}`);let p;r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([y,_])=>_!==void 0).map(([y,_])=>[y,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([y,_])=>{d.searchParams.append(y,_)})):(u="POST",p=n);const g=new Headers(this.headers);return s&&g.set("Prefer",`count=${s}`),new Kw.default({method:u,url:d,headers:g,schema:this.schemaName,body:p,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};_d.default=qw;var Fi=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Et,"__esModule",{value:!0});Et.PostgrestError=Et.PostgrestBuilder=Et.PostgrestTransformBuilder=Et.PostgrestFilterBuilder=Et.PostgrestQueryBuilder=Et.PostgrestClient=void 0;const hg=Fi(_d);Et.PostgrestClient=hg.default;const pg=Fi(Ja);Et.PostgrestQueryBuilder=pg.default;const mg=Fi(Xs);Et.PostgrestFilterBuilder=mg.default;const gg=Fi(Ya);Et.PostgrestTransformBuilder=gg.default;const vg=Fi(Xa);Et.PostgrestBuilder=vg.default;const yg=Fi(Za);Et.PostgrestError=yg.default;var Ww=Et.default={PostgrestClient:hg.default,PostgrestQueryBuilder:pg.default,PostgrestFilterBuilder:mg.default,PostgrestTransformBuilder:gg.default,PostgrestBuilder:vg.default,PostgrestError:yg.default};const{PostgrestClient:Vw,PostgrestQueryBuilder:qx,PostgrestFilterBuilder:Wx,PostgrestTransformBuilder:Vx,PostgrestBuilder:Hx,PostgrestError:Gx}=Ww;class Hw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Gw="2.75.0",Qw=`realtime-js/${Gw}`,Jw="1.0.0",hc=1e4,Yw=1e3,Xw=100;var Ss;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ss||(Ss={}));var Ye;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ye||(Ye={}));var tn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(tn||(tn={}));var pc;(function(t){t.websocket="websocket"})(pc||(pc={}));var Or;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Or||(Or={}));class Zw{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+s));a=a+s;const p=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:u,event:d,payload:p}}}class wg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Te;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Te||(Te={}));const bh=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=e_(a,t,e,i),s),{}):{}},e_=(t,e,n,r)=>{const i=e.find(u=>u.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?_g(s,a):mc(a)},_g=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return i_(e,n)}switch(t){case Te.bool:return t_(e);case Te.float4:case Te.float8:case Te.int2:case Te.int4:case Te.int8:case Te.numeric:case Te.oid:return n_(e);case Te.json:case Te.jsonb:return r_(e);case Te.timestamp:return s_(e);case Te.abstime:case Te.date:case Te.daterange:case Te.int4range:case Te.int8range:case Te.money:case Te.reltime:case Te.text:case Te.time:case Te.timestamptz:case Te.timetz:case Te.tsrange:case Te.tstzrange:return mc(e);default:return mc(e)}},mc=t=>t,t_=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},n_=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},r_=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},i_=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(u=>_g(e,u))}return t},s_=t=>typeof t=="string"?t.replace(" ","T"):t,bg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class uu{constructor(e,n,r={},i=hc){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xh;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xh||(xh={}));class Es{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Es.syncState(this.state,i,s,a),this.pendingDiffs.forEach(d=>{this.state=Es.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Es.syncDiff(this.state,i,s,a),u())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(s,(p,g)=>{a[p]||(d[p]=g)}),this.map(a,(p,g)=>{const y=s[p];if(y){const _=g.map(A=>A.presence_ref),C=y.map(A=>A.presence_ref),T=g.filter(A=>C.indexOf(A.presence_ref)<0),j=y.filter(A=>_.indexOf(A.presence_ref)<0);T.length>0&&(u[p]=T),j.length>0&&(d[p]=j)}else u[p]=g}),this.syncDiff(s,{joins:u,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,d)=>{var p;const g=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(d),g.length>0){const y=e[u].map(C=>C.presence_ref),_=g.filter(C=>y.indexOf(C.presence_ref)<0);e[u].unshift(..._)}r(u,g,d)}),this.map(a,(u,d)=>{let p=e[u];if(!p)return;const g=d.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),e[u]=p,i(u,p,d),p.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kh;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kh||(kh={}));var js;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(js||(js={}));var kn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(kn||(kn={}));class bd{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ye.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new uu(this,tn.join,this.params,this.timeout),this.rejoinTimer=new wg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ye.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ye.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ye.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tn.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new Es(this),this.broadcastEndpointURL=bg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ye.closed){const{config:{broadcast:a,presence:u,private:d}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[js.PRESENCE]&&this.bindings[js.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,y={},_={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(C=>e==null?void 0:e(kn.CHANNEL_ERROR,C)),this._onClose(()=>e==null?void 0:e(kn.CLOSED)),this.updateJoinPayload(Object.assign({config:_},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var T;if(this.socket.setAuth(),C===void 0){e==null||e(kn.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,A=(T=j==null?void 0:j.length)!==null&&T!==void 0?T:0,S=[];for(let b=0;b<A;b++){const x=j[b],{filter:{event:M,schema:H,table:V,filter:F}}=x,ee=C&&C[b];if(ee&&ee.event===M&&ee.schema===H&&ee.table===V&&ee.filter===F)S.push(Object.assign(Object.assign({},x),{id:ee.id}));else{this.unsubscribe(),this.state=Ye.errored,e==null||e(kn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(kn.SUBSCRIBED);return}}).receive("error",C=>{this.state=Ye.errored,e==null||e(kn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(kn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ye.joined&&e===js.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,u,d;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ye.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new uu(this,tn.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ye.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new uu(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Xw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:p,join:g}=tn;if(r&&[u,d,p,g].indexOf(a)>=0&&r!==this._joinRef())return;let _=this._onMessage(a,n,r);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(C=>{var T,j,A;return((T=C.filter)===null||T===void 0?void 0:T.event)==="*"||((A=(j=C.filter)===null||j===void 0?void 0:j.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===a}).map(C=>C.callback(_,r)):(s=this.bindings[a])===null||s===void 0||s.filter(C=>{var T,j,A,S,b,x;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in C){const M=C.id,H=(T=C.filter)===null||T===void 0?void 0:T.event;return M&&((j=n.ids)===null||j===void 0?void 0:j.includes(M))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const M=(b=(S=C==null?void 0:C.filter)===null||S===void 0?void 0:S.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return M==="*"||M===((x=n==null?void 0:n.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===a}).map(C=>{if(typeof _=="object"&&"ids"in _){const T=_.data,{schema:j,table:A,commit_timestamp:S,type:b,errors:x}=T;_=Object.assign(Object.assign({},{schema:j,table:A,commit_timestamp:S,eventType:b,new:{},old:{},errors:x}),this._getPayloadRecords(T))}C.callback(_,r)})}_isClosed(){return this.state===Ye.closed}_isJoined(){return this.state===Ye.joined}_isJoining(){return this.state===Ye.joining}_isLeaving(){return this.state===Ye.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&bd.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(tn.close,{},e)}_onError(e){this._on(tn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ye.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=bh(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=bh(e.columns,e.old_record)),n}}const cu=()=>{},qo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},o_=[1e3,2e3,5e3,1e4],a_=1e4,l_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u_{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hc,this.transport=null,this.heartbeatIntervalMs=qo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cu,this.ref=0,this.reconnectTimer=null,this.logger=cu,this.conn=null,this.sendBuffer=[],this.serializer=new Zw,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Ys(async()=>{const{default:u}=await Promise.resolve().then(()=>zi);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${pc.websocket}`,this.httpEndpoint=bg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Jw}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ss.connecting:return Or.Connecting;case Ss.open:return Or.Open;case Ss.closing:return Or.Closing;default:return Or.Closed}}isConnected(){return this.connectionState()===Or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new bd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Yw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,u=a?`(${a})`:"",d=s.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),s),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(tn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([l_],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Qw};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(tn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new wg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,u,d,p,g;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:hc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:qo.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:cu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:y=>o_[y-1]||a_,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(y,_)=>_(JSON.stringify(y)),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class xd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class c_ extends xd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gc extends xd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var d_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const xg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},f_=()=>d_(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ys(()=>Promise.resolve().then(()=>zi),void 0,import.meta.url)).Response:Response}),vc=t=>{if(Array.isArray(t))return t.map(n=>vc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=vc(r)}),e},h_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var qr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const du=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),p_=(t,e,n)=>qr(void 0,void 0,void 0,function*(){const r=yield f_();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new c_(du(i),s,a))}).catch(i=>{e(new gc(du(i),i))}):e(new gc(du(t),t))}),m_=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(h_(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Zs(t,e,n,r,i,s){return qr(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,m_(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>p_(d,u,r))})})}function Ta(t,e,n,r){return qr(this,void 0,void 0,function*(){return Zs(t,"GET",e,n,r)})}function mn(t,e,n,r,i){return qr(this,void 0,void 0,function*(){return Zs(t,"POST",e,r,i,n)})}function yc(t,e,n,r,i){return qr(this,void 0,void 0,function*(){return Zs(t,"PUT",e,r,i,n)})}function g_(t,e,n,r){return qr(this,void 0,void 0,function*(){return Zs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function kg(t,e,n,r,i){return qr(this,void 0,void 0,function*(){return Zs(t,"DELETE",e,r,i,n)})}var v_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class y_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return v_(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var w_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class __{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new y_(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return w_(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var kt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const b_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class x_{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=xg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return kt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Sh),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(e=="PUT"?yc:mn)(this.fetch,`${this.url}/object/${g}`,s,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qe(s))return{data:null,error:s};throw s}})}upload(e,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return kt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const p=Object.assign({upsert:Sh.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",p.cacheControl)):(d=r,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield yc(this.fetch,u.toString(),d,{headers:g});return{data:{path:s,fullPath:y.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Qe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return kt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield mn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),u=a.searchParams.get("token");if(!u)throw new xd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,n,r){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return kt(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}copy(e,n,r){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield mn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return kt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield mn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return kt(this,void 0,void 0,function*(){try{const i=yield mn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",u=this._getFinalPath(e),d=()=>Ta(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new __(d,this.shouldThrowOnError)}info(e){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ta(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return kt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield g_(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof gc){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}remove(e){return kt(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}list(e,n,r){return kt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},b_),n),{prefix:e||""});return{data:yield mn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}listV2(e,n){return kt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield mn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const k_="2.75.0",S_={"X-Client-Info":`storage-js/${k_}`};var ei=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class E_{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S_),n),this.fetch=xg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ei(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}getBucket(e){return ei(this,void 0,void 0,function*(){try{return{data:yield Ta(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}createBucket(e){return ei(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield mn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ei(this,void 0,void 0,function*(){try{return{data:yield yc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ei(this,void 0,void 0,function*(){try{return{data:yield mn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ei(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}}class j_ extends E_{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new x_(this.url,this.headers,e,this.fetch)}}const C_="2.75.0";let ps="";typeof Deno<"u"?ps="deno":typeof document<"u"?ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ps="react-native":ps="node";const N_={"X-Client-Info":`supabase-js-${ps}/${C_}`},O_={headers:N_},T_={schema:"public"},P_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R_={};var A_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const I_=t=>{let e;return t?e=t:typeof fetch>"u"?e=lg:e=fetch,(...n)=>e(...n)},D_=()=>typeof Headers>"u"?ug:Headers,$_=(t,e,n)=>{const r=I_(n),i=D_();return(s,a)=>A_(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let p=new i(a==null?void 0:a.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},a),{headers:p}))})};var L_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};function U_(t){return t.endsWith("/")?t:t+"/"}function M_(t,e){var n,r;const{db:i,auth:s,realtime:a,global:u}=t,{db:d,auth:p,realtime:g,global:y}=e,_={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},p),s),realtime:Object.assign(Object.assign({},g),a),storage:{},global:Object.assign(Object.assign(Object.assign({},y),u),{headers:Object.assign(Object.assign({},(n=y==null?void 0:y.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>L_(this,void 0,void 0,function*(){return""})};return t.accessToken?_.accessToken=t.accessToken:delete _.accessToken,_}function z_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sg="2.75.0",ai=30*1e3,wc=3,fu=wc*ai,F_="http://localhost:9999",B_="supabase.auth.token",K_={"X-Client-Info":`gotrue-js/${Sg}`},_c="X-Supabase-Api-Version",Eg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,W_=10*60*1e3;class qs extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class V_ extends qs{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function H_(t){return he(t)&&t.name==="AuthApiError"}class Tr extends qs{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fr extends qs{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Kn extends fr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G_(t){return he(t)&&t.name==="AuthSessionMissingError"}class ti extends fr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wo extends fr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vo extends fr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Q_(t){return he(t)&&t.name==="AuthImplicitGrantRedirectError"}class Eh extends fr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bc extends fr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function hu(t){return he(t)&&t.name==="AuthRetryableFetchError"}class jh extends fr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xc extends fr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ch=` 	
\r=`.split(""),J_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ch.length;e+=1)t[Ch[e].charCodeAt(0)]=-2;for(let e=0;e<Pa.length;e+=1)t[Pa[e].charCodeAt(0)]=e;return t})();function Nh(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pa[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pa[r]),e.queuedBits-=6}}function jg(t,e,n){const r=J_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Oh(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{Z_(a,r,n)};for(let a=0;a<t.length;a+=1)jg(t.charCodeAt(a),i,s);return e.join("")}function Y_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function X_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Y_(r,e)}}function Z_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Ci(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)jg(t.charCodeAt(i),n,r);return new Uint8Array(e)}function eb(t){const e=[];return X_(t,n=>e.push(n)),new Uint8Array(e)}function Ir(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Nh(i,n,r)),Nh(null,n,r),e.join("")}function tb(t){return Math.round(Date.now()/1e3)+t}function nb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",Sr={tested:!1,writable:!1},Cg=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sr.tested)return Sr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Sr.tested=!0,Sr.writable=!0}catch{Sr.tested=!0,Sr.writable=!1}return Sr.writable};function rb(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Ng=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ys(async()=>{const{default:r}=await Promise.resolve().then(()=>zi);return{default:r}},void 0,import.meta.url).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},ib=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",li=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Er=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fn=async(t,e)=>{await t.removeItem(e)};class el{constructor(){this.promise=new el.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}el.promiseConstructor=Promise;function pu(t){const e=t.split(".");if(e.length!==3)throw new xc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!q_.test(e[r]))throw new xc("JWT not in base64url format");return{header:JSON.parse(Oh(e[0])),payload:JSON.parse(Oh(e[1])),signature:Ci(e[2]),raw:{header:e[0],payload:e[1]}}}async function sb(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ob(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function ab(t){return("0"+t.toString(16)).substr(-2)}function lb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,ab).join("")}async function ub(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function cb(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await ub(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ni(t,e,n=!1){const r=lb();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await li(t,`${e}-code-verifier`,i);const s=await cb(r);return[s,r===s?"plain":"s256"]}const db=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function fb(t){const e=t.headers.get(_c);if(!e||!e.match(db))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hb(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pb(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mb=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ri(t){if(!mb.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function mu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Th(t){return JSON.parse(JSON.stringify(t))}var gb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Nr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vb=[502,503,504];async function Ph(t){var e;if(!ib(t))throw new bc(Nr(t),0);if(vb.includes(t.status))throw new bc(Nr(t),t.status);let n;try{n=await t.json()}catch(s){throw new Tr(Nr(s),s)}let r;const i=fb(t);if(i&&i.getTime()>=Eg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new jh(Nr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Kn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new jh(Nr(n),t.status,n.weak_password.reasons);throw new V_(Nr(n),t.status||500,r)}const yb=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ve(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[_c]||(s[_c]=Eg["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await wb(t,e,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function wb(t,e,n,r,i,s){const a=yb(e,r,i,s);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new bc(Nr(d),0)}if(u.ok||await Ph(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await Ph(d)}}function Xt(t){var e;let n=null;xb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=tb(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Rh(t){const e=Xt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function _b(t){return{data:t,error:null}}function bb(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=gb(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function Ah(t){return t}function xb(t){return t.access_token&&t.refresh_token&&t.expires_in}const gu=["global","local","others"];var kb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Sb{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Ng(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=gu[0]){if(gu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gu.join(", ")}`);try{return await ve(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=kb(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:bb,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(he(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},g=await ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ah});if(g.error)throw g.error;const y=await g.json(),_=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return C.length>0&&(C.forEach(T=>{const j=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=j}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(he(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ri(e);try{return await ve(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qn})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ri(e);try{return await ve(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){ri(e);try{return await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qn})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ri(e.userId);try{const{data:n,error:r}=await ve(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ri(e.userId),ri(e.id);try{return{data:await ve(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},g=await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Ah});if(g.error)throw g.error;const y=await g.json(),_=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,C=(d=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return C.length>0&&(C.forEach(T=>{const j=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(T.split(";")[1].split("=")[1]);p[`${A}Page`]=j}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(he(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ve(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ve(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ve(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}}function Ih(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ii={debug:!!(globalThis&&Cg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Og extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Eb extends Og{}async function jb(t,e,n){ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ii.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ii.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Eb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ii.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Cb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Tg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Nb(t){return parseInt(t,16)}function Ob(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Tb(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:u,requestId:d,resources:p,scheme:g,uri:y,version:_}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const C=Tg(t.address),T=g?`${g}://${r}`:r,j=t.statement?`${t.statement}
`:"",A=`${T} wants you to sign in with your Ethereum account:
${C}

${j}`;let S=`URI: ${y}
Version: ${_}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),u&&(S+=`
Not Before: ${u.toISOString()}`),d&&(S+=`
Request ID: ${d}`),p){let b=`
Resources:`;for(const x of p){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);b+=`
- ${x}`}S+=b}return`${A}
${S}`}class Ge extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Ra extends Ge{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Pb({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Rg(a)){if(s.rp.id!==a)return new Ge({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Rb({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Rg(r)){if(n.rpId!==r)return new Ge({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Pg=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Ab{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Ib=new Ab;function Db(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Pg(t,["challenge","user","excludeCredentials"]),s=Ci(e).buffer,a=Object.assign(Object.assign({},n),{id:Ci(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const p=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:Ci(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function $b(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Pg(t,["challenge","allowCredentials"]),i=Ci(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},u),{id:Ci(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function Lb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ir(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ir(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ub(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ir(new Uint8Array(i.authenticatorData)),clientDataJSON:Ir(new Uint8Array(i.clientDataJSON)),signature:Ir(new Uint8Array(i.signature)),userHandle:i.userHandle?Ir(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Rg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Dh(){var t,e;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Mb(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ra("Browser returned unexpected credential type",e)}:{data:null,error:new Ra("Empty credential response",e)}}catch(e){return{data:null,error:Pb({error:e,options:t})}}}async function zb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ra("Browser returned unexpected credential type",e)}:{data:null,error:new Ra("Empty credential response",e)}}catch(e){return{data:null,error:Rb({error:e,options:t})}}}const Fb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Bb={userVerification:"preferred",hints:["security-key"]};function Aa(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const u=r[s];e(u)?r[s]=Aa(u,a):r[s]=Aa(a)}else r[s]=a}return r}function Kb(t,e){return Aa(Fb,t,e||{})}function qb(t,e){return Aa(Bb,t,e||{})}class Wb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const d=i??Ib.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:p}=a.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(a.webauthn.type){case"create":{const p=Kb(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:g,error:y}=await Mb({publicKey:p,signal:d});return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=qb(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:g,error:y}=await zb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:p,signal:d}));return g?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Tr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new qs("rpId is required for WebAuthn authentication")};try{if(!Dh())return{data:null,error:new Tr("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:u};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Tr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new qs("rpId is required for WebAuthn registration")};try{if(!Dh())return{data:null,error:new Tr("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===e&&_.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:u};const{data:d,error:p}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new Tr("Unexpected error in register",a)}}}}Cb();const Vb={url:F_,storageKey:B_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $h(t,e,n){return await n()}const si={};class Ws{get jwks(){var e,n;return(n=(e=si[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=si[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){si[this.storageKey]=Object.assign(Object.assign({},si[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ws.nextInstanceID,Ws.nextInstanceID+=1,this.instanceID>0&&It()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Vb),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Sb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ng(i.fetch),this.lock=i.lock||$h,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:It()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=jb:this.lock=$h,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Wb(this)},this.persistSession?(i.storage?this.storage=i.storage:Cg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ih(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ih(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=rb(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),It()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Q_(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return he(n)?{error:n}:{error:new Tr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Xt}),{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:g,password:y,options:_}=e;let C=null,T=null;this.flowType==="pkce"&&([C,T]=await ni(this.storage,this.storageKey)),s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:g,password:y,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:C,code_challenge_method:T},xform:Xt})}else if("phone"in e){const{phone:g,password:y,options:_}=e;s=await ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},channel:(i=_==null?void 0:_.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:Xt})}else throw new Wo("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(he(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:u}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rh})}else if("phone"in e){const{phone:s,password:a,options:u}=e;n=await ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Rh})}else throw new Wo("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ti}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,u,d,p,g,y,_;let C,T;if("message"in e)C=e.message,T=e.signature;else{const{chain:j,wallet:A,statement:S,options:b}=e;let x;if(It())if(typeof A=="object")x=A;else{const ye=window;if("ethereum"in ye&&typeof ye.ethereum=="object"&&"request"in ye.ethereum&&typeof ye.ethereum.request=="function")x=ye.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=A}const M=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),H=await x.request({method:"eth_requestAccounts"}).then(ye=>ye).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=Tg(H[0]);let F=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!F){const ye=await x.request({method:"eth_chainId"});F=Nb(ye)}const ee={domain:M.host,address:V,statement:S,uri:M.href,version:"1",chainId:F,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=b==null?void 0:b.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=b==null?void 0:b.signInWithEthereum)===null||g===void 0?void 0:g.resources};C=Tb(ee),T=await x.request({method:"personal_sign",params:[Ob(C),V]})}try{const{data:j,error:A}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:T},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Xt});if(A)throw A;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new ti}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:A})}catch(j){if(he(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(e){var n,r,i,s,a,u,d,p,g,y,_,C;let T,j;if("message"in e)T=e.message,j=e.signature;else{const{chain:A,wallet:S,statement:b,options:x}=e;let M;if(It())if(typeof S=="object")M=S;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))M=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const H=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const V=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),b?{statement:b}:null));let F;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")F=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)F=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)T=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),j=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${H.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(i=(r=x==null?void 0:x.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((d=x==null?void 0:x.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((p=x==null?void 0:x.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((y=(g=x==null?void 0:x.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...x.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const V=await M.signMessage(new TextEncoder().encode(T),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=V}}try{const{data:A,error:S}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:Ir(j)},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Xt});if(S)throw S;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new ti}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:S})}catch(A){if(he(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(e){const n=await Er(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Xt});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new ti}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(he(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,u=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xt}),{data:d,error:p}=u;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new ti}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:u,options:d}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ni(this.storage,this.storageKey));const{error:y}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:u,options:d}=e,{data:p,error:g}=await ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:g}}throw new Wo("You must provide either an email or phone number.")}catch(u){if(he(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Xt});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,p=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await ni(this.storage,this.storageKey)),await ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:_b})}catch(s){if(he(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Kn;const{error:i}=await ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:u}=await ve(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Wo("You must provide either an email or phone number and a type")}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Er(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<fu:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Er(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=mu()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,p,g)=>(!a&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,p,g))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qn}):await this._useSession(async n=>{var r,i,s;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kn}:await ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Qn})})}catch(n){if(he(n))return G_(n)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Kn;const a=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await ni(this.storage,this.storageKey));const{data:p,error:g}=await ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:Qn});if(g)throw g;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Kn;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=pu(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(he(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Kn;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!It())throw new Vo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Eh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Eh("No code detected.");const{data:b,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:u,expires_at:d,token_type:p}=e;if(!s||!u||!a||!p)throw new Vo("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(u);let _=g+y;d&&(_=parseInt(d));const C=_-g;C*1e3<=ai&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${y}s`);const T=_-y;g-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,_,g):g-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,_,g);const{data:j,error:A}=await this._getUser(s);if(A)throw A;const S={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:y,expires_at:_,refresh_token:a,token_type:p,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(r){if(he(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Er(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(H_(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=nb(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ni(this.storage,this.storageKey,!0));try{return await ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(he(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,u,d,p,g;const{data:y,error:_}=s;if(_)throw _;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await ve(this.fetch,"GET",C,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return It()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(he(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:u,token:d,access_token:p,nonce:g}=e,y=await ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xt}),{data:_,error:C}=y;return C?{data:{user:null,session:null},error:C}:!_||!_.session||!_.user?{data:{user:null,session:null},error:new ti}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),{data:_,error:C})}catch(i){if(he(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ve(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ob(async i=>(i>0&&await sb(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xt})),(i,s)=>{const a=200*Math.pow(2,i);return s&&hu(s)&&Date.now()+a-r<ai})}catch(r){if(this._debug(n,"error",r),he(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),It()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Er(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Er(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await li(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:mu()}else if(i&&!i.user&&!i.user){const a=await Er(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Fn(this.storage,this.storageKey+"-user"),await li(this.storage,this.storageKey,i)):i.user=mu()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<fu;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${fu}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),hu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Kn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new el;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new Kn;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),he(s)){const a={data:null,error:s};return hu(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await li(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Th(i);await li(this.storage,this.storageKey,s)}else{const i=Th(n);await li(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ai);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ai);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ai}ms, refresh threshold is ${wc} ticks`),i<=wc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Og)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await ni(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ve(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await ve(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Lb(e.webauthn.credential_response):Ub(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(n){if(he(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=await ve(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Db(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:$b(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(he(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pu(i.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const g=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+W_>i)return r;const{data:s,error:a}=await ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:C,error:T}=await this.getSession();if(T||!C.session)return{data:null,error:T};r=C.session.access_token}const{header:i,payload:s,signature:a,raw:{header:u,payload:d}}=pu(r);n!=null&&n.allowExpired||hb(s.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:s,header:i,signature:a},error:null}}const g=pb(i.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,a,eb(`${u}.${d}`)))throw new xc("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}Ws.nextInstanceID=0;const Hb=Ws;class Gb extends Hb{constructor(e){super(e)}}var Qb=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(g){try{p(r.next(g))}catch(y){a(y)}}function d(g){try{p(r.throw(g))}catch(y){a(y)}}function p(g){g.done?s(g.value):i(g.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class Jb{constructor(e,n,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=n;const u=z_(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:T_,realtime:R_,auth:Object.assign(Object.assign({},P_),{storageKey:d}),global:O_},g=M_(r??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=g.global.headers)!==null&&s!==void 0?s:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=g.auth)!==null&&a!==void 0?a:{},this.headers,g.global.fetch),this.fetch=$_(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new Vw(new URL("rest/v1",u).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new j_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new Sw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Qb(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:u,lock:d,debug:p},g,y){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gb({url:this.authUrl.href,headers:Object.assign(Object.assign({},_),g),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:u,lock:d,debug:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new u_(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yb=(t,e,n)=>new Jb(t,e,n);function Xb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zb=`https://dzazapfzfuonyuvslhgk.supabase.co
`,ex=`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6YXphcGZ6ZnVvbnl1dnNsaGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDA3NzAsImV4cCI6MjA3NTYxNjc3MH0.wSVO93VzKwC3Tvwwh-1yCDb1gV0Kw5ava5iBGYfD_j0
`,vn=Yb(Zb,ex);window.supa=vn;(async()=>{try{const{data:t,error:e}=await vn.from("backups").select("id").limit(1),n=t&&!e,r=document.createElement("div");r.textContent=n?" Conectado a Supabase":" Error de conexin con Supabase",r.style.position="fixed",r.style.bottom="8px",r.style.left="8px",r.style.padding="6px 10px",r.style.fontSize="12px",r.style.borderRadius="6px",r.style.background=n?"#064e3b":"#7f1d1d",r.style.color="white",r.style.zIndex="9999",document.body.appendChild(r)}catch{const e=document.createElement("div");e.textContent=" Error de conexin con Supabase",e.style.position="fixed",e.style.bottom="8px",e.style.left="8px",e.style.padding="6px 10px",e.style.fontSize="12px",e.style.borderRadius="6px",e.style.background="#7f1d1d",e.style.color="white",e.style.zIndex="9999",document.body.appendChild(e)}})();var Ag={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Tt,function(){var n=function(o,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(c[m]=f[m])})(o,l)},r=function(){return(r=Object.assign||function(o){for(var l,c=1,f=arguments.length;c<f;c++)for(var m in l=arguments[c])Object.prototype.hasOwnProperty.call(l,m)&&(o[m]=l[m]);return o}).apply(this,arguments)};function i(o,l,c){for(var f,m=0,v=l.length;m<v;m++)!f&&m in l||((f=f||Array.prototype.slice.call(l,0,m))[m]=l[m]);return o.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Tt,a=Object.keys,u=Array.isArray;function d(o,l){return typeof l!="object"||a(l).forEach(function(c){o[c]=l[c]}),o}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var p=Object.getPrototypeOf,g={}.hasOwnProperty;function y(o,l){return g.call(o,l)}function _(o,l){typeof l=="function"&&(l=l(p(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(c){T(o,c,l[c])})}var C=Object.defineProperty;function T(o,l,c,f){C(o,l,d(c&&y(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},f))}function j(o){return{from:function(l){return o.prototype=Object.create(l.prototype),T(o.prototype,"constructor",o),{extend:_.bind(null,o.prototype)}}}}var A=Object.getOwnPropertyDescriptor,S=[].slice;function b(o,l,c){return S.call(o,l,c)}function x(o,l){return l(o)}function M(o){if(!o)throw new Error("Assertion Failed")}function H(o){s.setImmediate?setImmediate(o):setTimeout(o,0)}function V(o,l){if(typeof l=="string"&&y(o,l))return o[l];if(!l)return o;if(typeof l!="string"){for(var c=[],f=0,m=l.length;f<m;++f){var v=V(o,l[f]);c.push(v)}return c}var w=l.indexOf(".");if(w!==-1){var k=o[l.substr(0,w)];return k==null?void 0:V(k,l.substr(w+1))}}function F(o,l,c){if(o&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof l!="string"&&"length"in l){M(typeof c!="string"&&"length"in c);for(var f=0,m=l.length;f<m;++f)F(o,l[f],c[f])}else{var v,w,k=l.indexOf(".");k!==-1?(v=l.substr(0,k),(w=l.substr(k+1))===""?c===void 0?u(o)&&!isNaN(parseInt(v))?o.splice(v,1):delete o[v]:o[v]=c:F(k=!(k=o[v])||!y(o,v)?o[v]={}:k,w,c)):c===void 0?u(o)&&!isNaN(parseInt(l))?o.splice(l,1):delete o[l]:o[l]=c}}function ee(o){var l,c={};for(l in o)y(o,l)&&(c[l]=o[l]);return c}var ye=[].concat;function W(o){return ye.apply([],o)}var pr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(l){return l+o+"Array"})}))).filter(function(o){return s[o]}),ie=new Set(pr.map(function(o){return s[o]})),pe=null;function ce(o){return pe=new WeakMap,o=function l(c){if(!c||typeof c!="object")return c;var f=pe.get(c);if(f)return f;if(u(c)){f=[],pe.set(c,f);for(var m=0,v=c.length;m<v;++m)f.push(l(c[m]))}else if(ie.has(c.constructor))f=c;else{var w,k=p(c);for(w in f=k===Object.prototype?{}:Object.create(k),pe.set(c,f),c)y(c,w)&&(f[w]=l(c[w]))}return f}(o),pe=null,o}var je={}.toString;function Re(o){return je.call(o).slice(8,-1)}var lt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",an=typeof lt=="symbol"?function(o){var l;return o!=null&&(l=o[lt])&&l.apply(o)}:function(){return null};function te(o,l){return l=o.indexOf(l),0<=l&&o.splice(l,1),0<=l}var de={};function fe(o){var l,c,f,m;if(arguments.length===1){if(u(o))return o.slice();if(this===de&&typeof o=="string")return[o];if(m=an(o)){for(c=[];!(f=m.next()).done;)c.push(f.value);return c}if(o==null)return[o];if(typeof(l=o.length)!="number")return[o];for(c=new Array(l);l--;)c[l]=o[l];return c}for(l=arguments.length,c=new Array(l);l--;)c[l]=arguments[l];return c}var Ne=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ki=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Kt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ki),Fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Pt(o,l){this.name=o,this.message=l}function Bt(o,l){return o+". Errors: "+Object.keys(l).map(function(c){return l[c].toString()}).filter(function(c,f,m){return m.indexOf(c)===f}).join(`
`)}function ln(o,l,c,f){this.failures=l,this.failedKeys=f,this.successCount=c,this.message=Bt(o,l)}function ut(o,l){this.name="BulkError",this.failures=Object.keys(l).map(function(c){return l[c]}),this.failuresByPos=l,this.message=Bt(o,this.failures)}j(Pt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),j(ln).from(Pt),j(ut).from(Pt);var un=Kt.reduce(function(o,l){return o[l]=l+"Error",o},{}),tl=Pt,B=Kt.reduce(function(o,l){var c=l+"Error";function f(m,v){this.name=c,m?typeof m=="string"?(this.message="".concat(m).concat(v?`
 `+v:""),this.inner=v||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=Fe[l]||c,this.inner=null)}return j(f).from(tl),o[l]=f,o},{});B.Syntax=SyntaxError,B.Type=TypeError,B.Range=RangeError;var Oe=Ki.reduce(function(o,l){return o[l+"Error"]=B[l],o},{}),qe=Kt.reduce(function(o,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(o[l+"Error"]=B[l]),o},{});function be(){}function Rt(o){return o}function zg(o,l){return o==null||o===Rt?l:function(c){return l(o(c))}}function hr(o,l){return function(){o.apply(this,arguments),l.apply(this,arguments)}}function Fg(o,l){return o===be?l:function(){var c=o.apply(this,arguments);c!==void 0&&(arguments[0]=c);var f=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var v=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?hr(f,this.onsuccess):f),m&&(this.onerror=this.onerror?hr(m,this.onerror):m),v!==void 0?v:c}}function Bg(o,l){return o===be?l:function(){o.apply(this,arguments);var c=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?hr(c,this.onsuccess):c),f&&(this.onerror=this.onerror?hr(f,this.onerror):f)}}function Kg(o,l){return o===be?l:function(c){var f=o.apply(this,arguments);d(c,f);var m=this.onsuccess,v=this.onerror;return this.onsuccess=null,this.onerror=null,c=l.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?hr(m,this.onsuccess):m),v&&(this.onerror=this.onerror?hr(v,this.onerror):v),f===void 0?c===void 0?void 0:c:d(f,c)}}function qg(o,l){return o===be?l:function(){return l.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function nl(o,l){return o===be?l:function(){var c=o.apply(this,arguments);if(c&&typeof c.then=="function"){for(var f=this,m=arguments.length,v=new Array(m);m--;)v[m]=arguments[m];return c.then(function(){return l.apply(f,v)})}return l.apply(this,arguments)}}qe.ModifyError=ln,qe.DexieError=Pt,qe.BulkError=ut;var cn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Sd(o){cn=o}var Bi={},Ed=100,pr=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,p(o),o];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,p(l),o]}(),Ki=pr[0],Kt=pr[1],pr=pr[2],Kt=Kt&&Kt.then,mr=Ki&&Ki.constructor,rl=!!pr,qi=function(o,l){Wi.push([o,l]),eo&&(queueMicrotask(Vg),eo=!1)},il=!0,eo=!0,gr=[],to=[],sl=Rt,An={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},ue=An,Wi=[],vr=0,no=[];function se(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=ue;if(typeof o!="function"){if(o!==Bi)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&al(this,this._value))}this._state=null,this._value=null,++l.ref,function c(f,m){try{m(function(v){if(f._state===null){if(v===f)throw new TypeError("A promise cannot be resolved with itself.");var w=f._lib&&Wr();v&&typeof v.then=="function"?c(f,function(k,N){v instanceof se?v._then(k,N):v.then(k,N)}):(f._state=!0,f._value=v,Cd(f)),w&&Vr()}},al.bind(null,f))}catch(v){al(f,v)}}(this,o)}var ol={get:function(){var o=ue,l=oo;function c(f,m){var v=this,w=!o.global&&(o!==ue||l!==oo),k=w&&!Dn(),N=new se(function(P,I){ll(v,new jd(Od(f,o,w,k),Od(m,o,w,k),P,I,o))});return this._consoleTask&&(N._consoleTask=this._consoleTask),N}return c.prototype=Bi,c},set:function(o){T(this,"then",o&&o.prototype===Bi?ol:{get:function(){return o},set:ol.set})}};function jd(o,l,c,f,m){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof l=="function"?l:null,this.resolve=c,this.reject=f,this.psd=m}function al(o,l){var c,f;to.push(l),o._state===null&&(c=o._lib&&Wr(),l=sl(l),o._state=!1,o._value=l,f=o,gr.some(function(m){return m._value===f._value})||gr.push(f),Cd(o),c&&Vr())}function Cd(o){var l=o._listeners;o._listeners=[];for(var c=0,f=l.length;c<f;++c)ll(o,l[c]);var m=o._PSD;--m.ref||m.finalize(),vr===0&&(++vr,qi(function(){--vr==0&&ul()},[]))}function ll(o,l){if(o._state!==null){var c=o._state?l.onFulfilled:l.onRejected;if(c===null)return(o._state?l.resolve:l.reject)(o._value);++l.psd.ref,++vr,qi(Wg,[c,o,l])}else o._listeners.push(l)}function Wg(o,l,c){try{var f,m=l._value;!l._state&&to.length&&(to=[]),f=cn&&l._consoleTask?l._consoleTask.run(function(){return o(m)}):o(m),l._state||to.indexOf(m)!==-1||function(v){for(var w=gr.length;w;)if(gr[--w]._value===v._value)return gr.splice(w,1)}(l),c.resolve(f)}catch(v){c.reject(v)}finally{--vr==0&&ul(),--c.psd.ref||c.psd.finalize()}}function Vg(){yr(An,function(){Wr()&&Vr()})}function Wr(){var o=il;return eo=il=!1,o}function Vr(){var o,l,c;do for(;0<Wi.length;)for(o=Wi,Wi=[],c=o.length,l=0;l<c;++l){var f=o[l];f[0].apply(null,f[1])}while(0<Wi.length);eo=il=!0}function ul(){var o=gr;gr=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=no.slice(0),c=l.length;c;)l[--c]()}function ro(o){return new se(Bi,!1,o)}function $e(o,l){var c=ue;return function(){var f=Wr(),m=ue;try{return $n(c,!0),o.apply(this,arguments)}catch(v){l&&l(v)}finally{$n(m,!1),f&&Vr()}}}_(se.prototype,{then:ol,_then:function(o,l){ll(this,new jd(null,null,o,l,ue))},catch:function(o){if(arguments.length===1)return this.then(null,o);var l=o,c=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?c:ro)(f)}):this.then(null,function(f){return(f&&f.name===l?c:ro)(f)})},finally:function(o){return this.then(function(l){return se.resolve(o()).then(function(){return l})},function(l){return se.resolve(o()).then(function(){return ro(l)})})},timeout:function(o,l){var c=this;return o<1/0?new se(function(f,m){var v=setTimeout(function(){return m(new B.Timeout(l))},o);c.then(f,m).finally(clearTimeout.bind(null,v))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(se.prototype,Symbol.toStringTag,"Dexie.Promise"),An.env=Nd(),_(se,{all:function(){var o=fe.apply(null,arguments).map(ao);return new se(function(l,c){o.length===0&&l([]);var f=o.length;o.forEach(function(m,v){return se.resolve(m).then(function(w){o[v]=w,--f||l(o)},c)})})},resolve:function(o){return o instanceof se?o:o&&typeof o.then=="function"?new se(function(l,c){o.then(l,c)}):new se(Bi,!0,o)},reject:ro,race:function(){var o=fe.apply(null,arguments).map(ao);return new se(function(l,c){o.map(function(f){return se.resolve(f).then(l,c)})})},PSD:{get:function(){return ue},set:function(o){return ue=o}},totalEchoes:{get:function(){return oo}},newPSD:In,usePSD:yr,scheduler:{get:function(){return qi},set:function(o){qi=o}},rejectionMapper:{get:function(){return sl},set:function(o){sl=o}},follow:function(o,l){return new se(function(c,f){return In(function(m,v){var w=ue;w.unhandleds=[],w.onunhandled=v,w.finalize=hr(function(){var k,N=this;k=function(){N.unhandleds.length===0?m():v(N.unhandleds[0])},no.push(function P(){k(),no.splice(no.indexOf(P),1)}),++vr,qi(function(){--vr==0&&ul()},[])},w.finalize),o()},l,c,f)})}}),mr&&(mr.allSettled&&T(se,"allSettled",function(){var o=fe.apply(null,arguments).map(ao);return new se(function(l){o.length===0&&l([]);var c=o.length,f=new Array(c);o.forEach(function(m,v){return se.resolve(m).then(function(w){return f[v]={status:"fulfilled",value:w}},function(w){return f[v]={status:"rejected",reason:w}}).then(function(){return--c||l(f)})})})}),mr.any&&typeof AggregateError<"u"&&T(se,"any",function(){var o=fe.apply(null,arguments).map(ao);return new se(function(l,c){o.length===0&&c(new AggregateError([]));var f=o.length,m=new Array(f);o.forEach(function(v,w){return se.resolve(v).then(function(k){return l(k)},function(k){m[w]=k,--f||c(new AggregateError(m))})})})}),mr.withResolvers&&(se.withResolvers=mr.withResolvers));var et={awaits:0,echoes:0,id:0},Hg=0,io=[],so=0,oo=0,Gg=0;function In(o,l,c,f){var m=ue,v=Object.create(m);return v.parent=m,v.ref=0,v.global=!1,v.id=++Gg,An.env,v.env=rl?{Promise:se,PromiseProp:{value:se,configurable:!0,writable:!0},all:se.all,race:se.race,allSettled:se.allSettled,any:se.any,resolve:se.resolve,reject:se.reject}:{},l&&d(v,l),++m.ref,v.finalize=function(){--this.parent.ref||this.parent.finalize()},f=yr(v,o,c,f),v.ref===0&&v.finalize(),f}function Hr(){return et.id||(et.id=++Hg),++et.awaits,et.echoes+=Ed,et.id}function Dn(){return!!et.awaits&&(--et.awaits==0&&(et.id=0),et.echoes=et.awaits*Ed,!0)}function ao(o){return et.echoes&&o&&o.constructor===mr?(Hr(),o.then(function(l){return Dn(),l},function(l){return Dn(),We(l)})):o}function Qg(){var o=io[io.length-1];io.pop(),$n(o,!1)}function $n(o,l){var c,f=ue;(l?!et.echoes||so++&&o===ue:!so||--so&&o===ue)||queueMicrotask(l?(function(m){++oo,et.echoes&&--et.echoes!=0||(et.echoes=et.awaits=et.id=0),io.push(ue),$n(m,!0)}).bind(null,o):Qg),o!==ue&&(ue=o,f===An&&(An.env=Nd()),rl&&(c=An.env.Promise,l=o.env,(f.global||o.global)&&(Object.defineProperty(s,"Promise",l.PromiseProp),c.all=l.all,c.race=l.race,c.resolve=l.resolve,c.reject=l.reject,l.allSettled&&(c.allSettled=l.allSettled),l.any&&(c.any=l.any))))}function Nd(){var o=s.Promise;return rl?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function yr(o,l,c,f,m){var v=ue;try{return $n(o,!0),l(c,f,m)}finally{$n(v,!1)}}function Od(o,l,c,f){return typeof o!="function"?o:function(){var m=ue;c&&Hr(),$n(l,!0);try{return o.apply(this,arguments)}finally{$n(m,!1),f&&queueMicrotask(Dn)}}}function cl(o){Promise===mr&&et.echoes===0?so===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Kt).indexOf("[native code]")===-1&&(Hr=Dn=be);var We=se.reject,wr="",_n="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Td="String expected.",Gr=[],lo="__dbnames",dl="readonly",fl="readwrite";function _r(o,l){return o?l?function(){return o.apply(this,arguments)&&l.apply(this,arguments)}:o:l}var Pd={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function uo(o){return typeof o!="string"||/\./.test(o)?function(l){return l}:function(l){return l[o]===void 0&&o in l&&delete(l=ce(l))[o],l}}function Rd(){throw B.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function xe(o,l){try{var c=Ad(o),f=Ad(l);if(c!==f)return c==="Array"?1:f==="Array"?-1:c==="binary"?1:f==="binary"?-1:c==="string"?1:f==="string"?-1:c==="Date"?1:f!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return l<o?1:o<l?-1:0;case"binary":return function(m,v){for(var w=m.length,k=v.length,N=w<k?w:k,P=0;P<N;++P)if(m[P]!==v[P])return m[P]<v[P]?-1:1;return w===k?0:w<k?-1:1}(Id(o),Id(l));case"Array":return function(m,v){for(var w=m.length,k=v.length,N=w<k?w:k,P=0;P<N;++P){var I=xe(m[P],v[P]);if(I!==0)return I}return w===k?0:w<k?-1:1}(o,l)}}catch{}return NaN}function Ad(o){var l=typeof o;return l!="object"?l:ArrayBuffer.isView(o)?"binary":(o=Re(o),o==="ArrayBuffer"?"binary":o)}function Id(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function co(o,l,c){var f=o.schema.yProps;return f?(l&&0<c.numFailures&&(l=l.filter(function(m,v){return!c.failures[v]})),Promise.all(f.map(function(m){return m=m.updatesTable,l?o.db.table(m).where("k").anyOf(l).delete():o.db.table(m).clear()})).then(function(){return c})):c}var Dd=(Ae.prototype._trans=function(o,l,c){var f=this._tx||ue.trans,m=this.name,v=cn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function w(P,I,E){if(!E.schema[m])throw new B.NotFound("Table "+m+" not part of transaction");return l(E.idbtrans,E)}var k=Wr();try{var N=f&&f.db._novip===this.db._novip?f===ue.trans?f._promise(o,w,c):In(function(){return f._promise(o,w,c)},{trans:f,transless:ue.transless||ue}):function P(I,E,L,O){if(I.idbdb&&(I._state.openComplete||ue.letThrough||I._vip)){var R=I._createTransaction(E,L,I._dbSchema);try{R.create(),I._state.PR1398_maxLoop=3}catch($){return $.name===un.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return P(I,E,L,O)})):We($)}return R._promise(E,function($,D){return In(function(){return ue.trans=R,O($,D,R)})}).then(function($){if(E==="readwrite")try{R.idbtrans.commit()}catch{}return E==="readonly"?$:R._completion.then(function(){return $})})}if(I._state.openComplete)return We(new B.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return We(new B.DatabaseClosed);I.open().catch(be)}return I._state.dbReadyPromise.then(function(){return P(I,E,L,O)})}(this.db,o,[this.name],w);return v&&(N._consoleTask=v,N=N.catch(function(P){return console.trace(P),We(P)})),N}finally{k&&Vr()}},Ae.prototype.get=function(o,l){var c=this;return o&&o.constructor===Object?this.where(o).first(l):o==null?We(new B.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return c.core.get({trans:f,key:o}).then(function(m){return c.hook.reading.fire(m)})}).then(l)},Ae.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(u(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var l=a(o);if(l.length===1)return this.where(l[0]).equals(o[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&l.every(function(P){return 0<=k.keyPath.indexOf(P)})){for(var N=0;N<l.length;++N)if(l.indexOf(k.keyPath[N])===-1)return!1;return!0}return!1}).sort(function(k,N){return k.keyPath.length-N.keyPath.length})[0];if(c&&this.db._maxKey!==wr){var v=c.keyPath.slice(0,l.length);return this.where(v).equals(v.map(function(N){return o[N]}))}!c&&cn&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function m(k,N){return xe(k,N)===0}var w=l.reduce(function(E,N){var P=E[0],I=E[1],E=f[N],L=o[N];return[P||E,P||!E?_r(I,E&&E.multi?function(O){return O=V(O,N),u(O)&&O.some(function(R){return m(L,R)})}:function(O){return m(L,V(O,N))}):I]},[null,null]),v=w[0],w=w[1];return v?this.where(v.name).equals(o[v.keyPath]).filter(w):c?this.filter(w):this.where(l).equals("")},Ae.prototype.filter=function(o){return this.toCollection().and(o)},Ae.prototype.count=function(o){return this.toCollection().count(o)},Ae.prototype.offset=function(o){return this.toCollection().offset(o)},Ae.prototype.limit=function(o){return this.toCollection().limit(o)},Ae.prototype.each=function(o){return this.toCollection().each(o)},Ae.prototype.toArray=function(o){return this.toCollection().toArray(o)},Ae.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ae.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,u(o)?"[".concat(o.join("+"),"]"):o))},Ae.prototype.reverse=function(){return this.toCollection().reverse()},Ae.prototype.mapToClass=function(o){var l,c=this.db,f=this.name;function m(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Rd&&(function(N,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function I(){this.constructor=N}n(N,P),N.prototype=P===null?Object.create(P):(I.prototype=P.prototype,new I)}(m,l=o),Object.defineProperty(m.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),m.prototype.table=function(){return f},o=m);for(var v=new Set,w=o.prototype;w;w=p(w))Object.getOwnPropertyNames(w).forEach(function(N){return v.add(N)});function k(N){if(!N)return N;var P,I=Object.create(o.prototype);for(P in N)if(!v.has(P))try{I[P]=N[P]}catch{}return I}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),o},Ae.prototype.defineClass=function(){return this.mapToClass(function(o){d(this,o)})},Ae.prototype.add=function(o,l){var c=this,f=this.schema.primKey,m=f.auto,v=f.keyPath,w=o;return v&&m&&(w=uo(v)(o)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"add",keys:l!=null?[l]:null,values:[w]})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(v)try{F(o,v,k)}catch{}return k})},Ae.prototype.update=function(o,l){return typeof o!="object"||u(o)?this.where(":id").equals(o).modify(l):(o=V(o,this.schema.primKey.keyPath),o===void 0?We(new B.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(l))},Ae.prototype.put=function(o,l){var c=this,f=this.schema.primKey,m=f.auto,v=f.keyPath,w=o;return v&&m&&(w=uo(v)(o)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"put",values:[w],keys:l!=null?[l]:null})}).then(function(k){return k.numFailures?se.reject(k.failures[0]):k.lastResult}).then(function(k){if(v)try{F(o,v,k)}catch{}return k})},Ae.prototype.delete=function(o){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[o]}).then(function(f){return co(l,[o],f)}).then(function(f){return f.numFailures?se.reject(f.failures[0]):void 0})})},Ae.prototype.clear=function(){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"deleteRange",range:Pd}).then(function(c){return co(o,null,c)})}).then(function(l){return l.numFailures?se.reject(l.failures[0]):void 0})},Ae.prototype.bulkGet=function(o){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:o,trans:c}).then(function(f){return f.map(function(m){return l.hook.reading.fire(m)})})})},Ae.prototype.bulkAdd=function(o,l,c){var f=this,m=Array.isArray(l)?l:void 0,v=(c=c||(m?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(w){var P=f.schema.primKey,k=P.auto,P=P.keyPath;if(P&&m)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==o.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var N=o.length,P=P&&k?o.map(uo(P)):o;return f.core.mutate({trans:w,type:"add",keys:m,values:P,wantResults:v}).then(function(R){var E=R.numFailures,L=R.results,O=R.lastResult,R=R.failures;if(E===0)return v?L:O;throw new ut("".concat(f.name,".bulkAdd(): ").concat(E," of ").concat(N," operations failed"),R)})})},Ae.prototype.bulkPut=function(o,l,c){var f=this,m=Array.isArray(l)?l:void 0,v=(c=c||(m?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(w){var P=f.schema.primKey,k=P.auto,P=P.keyPath;if(P&&m)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==o.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");var N=o.length,P=P&&k?o.map(uo(P)):o;return f.core.mutate({trans:w,type:"put",keys:m,values:P,wantResults:v}).then(function(R){var E=R.numFailures,L=R.results,O=R.lastResult,R=R.failures;if(E===0)return v?L:O;throw new ut("".concat(f.name,".bulkPut(): ").concat(E," of ").concat(N," operations failed"),R)})})},Ae.prototype.bulkUpdate=function(o){var l=this,c=this.core,f=o.map(function(w){return w.key}),m=o.map(function(w){return w.changes}),v=[];return this._trans("readwrite",function(w){return c.getMany({trans:w,keys:f,cache:"clone"}).then(function(k){var N=[],P=[];o.forEach(function(E,L){var O=E.key,R=E.changes,$=k[L];if($){for(var D=0,U=Object.keys(R);D<U.length;D++){var z=U[D],K=R[z];if(z===l.schema.primKey.keyPath){if(xe(K,O)!==0)throw new B.Constraint("Cannot update primary key in bulkUpdate()")}else F($,z,K)}v.push(L),N.push(O),P.push($)}});var I=N.length;return c.mutate({trans:w,type:"put",keys:N,values:P,updates:{keys:f,changeSpecs:m}}).then(function(E){var L=E.numFailures,O=E.failures;if(L===0)return I;for(var R=0,$=Object.keys(O);R<$.length;R++){var D,U=$[R],z=v[Number(U)];z!=null&&(D=O[U],delete O[U],O[z]=D)}throw new ut("".concat(l.name,".bulkUpdate(): ").concat(L," of ").concat(I," operations failed"),O)})})})},Ae.prototype.bulkDelete=function(o){var l=this,c=o.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:o}).then(function(m){return co(l,o,m)})}).then(function(w){var m=w.numFailures,v=w.lastResult,w=w.failures;if(m===0)return v;throw new ut("".concat(l.name,".bulkDelete(): ").concat(m," of ").concat(c," operations failed"),w)})},Ae);function Ae(){}function Vi(o){function l(w,k){if(k){for(var N=arguments.length,P=new Array(N-1);--N;)P[N-1]=arguments[N];return c[w].subscribe.apply(null,P),o}if(typeof w=="string")return c[w]}var c={};l.addEventType=v;for(var f=1,m=arguments.length;f<m;++f)v(arguments[f]);return l;function v(w,k,N){if(typeof w!="object"){var P;k=k||qg;var I={subscribers:[],fire:N=N||be,subscribe:function(E){I.subscribers.indexOf(E)===-1&&(I.subscribers.push(E),I.fire=k(I.fire,E))},unsubscribe:function(E){I.subscribers=I.subscribers.filter(function(L){return L!==E}),I.fire=I.subscribers.reduce(k,N)}};return c[w]=l[w]=I}a(P=w).forEach(function(E){var L=P[E];if(u(L))v(E,P[E][0],P[E][1]);else{if(L!=="asap")throw new B.InvalidArgument("Invalid event config");var O=v(E,Rt,function(){for(var R=arguments.length,$=new Array(R);R--;)$[R]=arguments[R];O.subscribers.forEach(function(D){H(function(){D.apply(null,$)})})})}})}}function Hi(o,l){return j(l).from({prototype:o}),l}function Qr(o,l){return!(o.filter||o.algorithm||o.or)&&(l?o.justLimit:!o.replayFilter)}function hl(o,l){o.filter=_r(o.filter,l)}function pl(o,l,c){var f=o.replayFilter;o.replayFilter=f?function(){return _r(f(),l())}:l,o.justLimit=c&&!f}function fo(o,l){if(o.isPrimKey)return l.primaryKey;var c=l.getIndexByKeyPath(o.index);if(!c)throw new B.Schema("KeyPath "+o.index+" on object store "+l.name+" is not indexed");return c}function $d(o,l,c){var f=fo(o,l.schema);return l.openCursor({trans:c,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function ho(o,l,c,f){var m=o.replayFilter?_r(o.filter,o.replayFilter()):o.filter;if(o.or){var v={},w=function(k,N,P){var I,E;m&&!m(N,P,function(L){return N.stop(L)},function(L){return N.fail(L)})||((E=""+(I=N.primaryKey))=="[object ArrayBuffer]"&&(E=""+new Uint8Array(I)),y(v,E)||(v[E]=!0,l(k,N,P)))};return Promise.all([o.or._iterate(w,c),Ld($d(o,f,c),o.algorithm,w,!o.keysOnly&&o.valueMapper)])}return Ld($d(o,f,c),_r(o.algorithm,m),l,!o.keysOnly&&o.valueMapper)}function Ld(o,l,c,f){var m=$e(f?function(v,w,k){return c(f(v),w,k)}:c);return o.then(function(v){if(v)return v.start(function(){var w=function(){return v.continue()};l&&!l(v,function(k){return w=k},function(k){v.stop(k),w=be},function(k){v.fail(k),w=be})||m(v.value,v,function(k){return w=k}),w()})})}var Gi=(Ud.prototype.execute=function(o){var l=this["@@propmod"];if(l.add!==void 0){var c=l.add;if(u(c))return i(i([],u(o)?o:[],!0),c).sort();if(typeof c=="number")return(Number(o)||0)+c;if(typeof c=="bigint")try{return BigInt(o)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(l.remove!==void 0){var f=l.remove;if(u(f))return u(o)?o.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=l.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof o=="string"&&o.startsWith(c)?l.replacePrefix[1]+o.substring(c.length):o},Ud);function Ud(o){this["@@propmod"]=o}var Jg=(Ee.prototype._read=function(o,l){var c=this._ctx;return c.error?c.table._trans(null,We.bind(null,c.error)):c.table._trans("readonly",o).then(l)},Ee.prototype._write=function(o){var l=this._ctx;return l.error?l.table._trans(null,We.bind(null,l.error)):l.table._trans("readwrite",o,"locked")},Ee.prototype._addAlgorithm=function(o){var l=this._ctx;l.algorithm=_r(l.algorithm,o)},Ee.prototype._iterate=function(o,l){return ho(this._ctx,o,l,this._ctx.table.core)},Ee.prototype.clone=function(o){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return o&&d(c,o),l._ctx=c,l},Ee.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ee.prototype.each=function(o){var l=this._ctx;return this._read(function(c){return ho(l,o,c,l.table.core)})},Ee.prototype.count=function(o){var l=this;return this._read(function(c){var f=l._ctx,m=f.table.core;if(Qr(f,!0))return m.count({trans:c,query:{index:fo(f,m.schema),range:f.range}}).then(function(w){return Math.min(w,f.limit)});var v=0;return ho(f,function(){return++v,!1},c,m).then(function(){return v})}).then(o)},Ee.prototype.sortBy=function(o,l){var c=o.split(".").reverse(),f=c[0],m=c.length-1;function v(N,P){return P?v(N[c[P]],P-1):N[f]}var w=this._ctx.dir==="next"?1:-1;function k(N,P){return xe(v(N,m),v(P,m))*w}return this.toArray(function(N){return N.sort(k)}).then(l)},Ee.prototype.toArray=function(o){var l=this;return this._read(function(c){var f=l._ctx;if(f.dir==="next"&&Qr(f,!0)&&0<f.limit){var m=f.valueMapper,v=fo(f,f.table.core.schema);return f.table.core.query({trans:c,limit:f.limit,values:!0,query:{index:v,range:f.range}}).then(function(k){return k=k.result,m?k.map(m):k})}var w=[];return ho(f,function(k){return w.push(k)},c,f.table.core).then(function(){return w})},o)},Ee.prototype.offset=function(o){var l=this._ctx;return o<=0||(l.offset+=o,Qr(l)?pl(l,function(){var c=o;return function(f,m){return c===0||(c===1?--c:m(function(){f.advance(c),c=0}),!1)}}):pl(l,function(){var c=o;return function(){return--c<0}})),this},Ee.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),pl(this._ctx,function(){var l=o;return function(c,f,m){return--l<=0&&f(m),0<=l}},!0),this},Ee.prototype.until=function(o,l){return hl(this._ctx,function(c,f,m){return!o(c.value)||(f(m),l)}),this},Ee.prototype.first=function(o){return this.limit(1).toArray(function(l){return l[0]}).then(o)},Ee.prototype.last=function(o){return this.reverse().first(o)},Ee.prototype.filter=function(o){var l;return hl(this._ctx,function(c){return o(c.value)}),(l=this._ctx).isMatch=_r(l.isMatch,o),this},Ee.prototype.and=function(o){return this.filter(o)},Ee.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},Ee.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ee.prototype.desc=function(){return this.reverse()},Ee.prototype.eachKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.key,f)})},Ee.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},Ee.prototype.eachPrimaryKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.primaryKey,f)})},Ee.prototype.keys=function(o){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,m){c.push(m.key)}).then(function(){return c}).then(o)},Ee.prototype.primaryKeys=function(o){var l=this._ctx;if(l.dir==="next"&&Qr(l,!0)&&0<l.limit)return this._read(function(f){var m=fo(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:m,range:l.range}})}).then(function(f){return f.result}).then(o);l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,m){c.push(m.primaryKey)}).then(function(){return c}).then(o)},Ee.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},Ee.prototype.firstKey=function(o){return this.limit(1).keys(function(l){return l[0]}).then(o)},Ee.prototype.lastKey=function(o){return this.reverse().firstKey(o)},Ee.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var l={};return hl(this._ctx,function(m){var f=m.primaryKey.toString(),m=y(l,f);return l[f]=!0,!m}),this},Ee.prototype.modify=function(o){var l=this,c=this._ctx;return this._write(function(f){var m,v,w;w=typeof o=="function"?o:(m=a(o),v=m.length,function(U){for(var z=!1,K=0;K<v;++K){var q=m[K],G=o[q],Z=V(U,q);G instanceof Gi?(F(U,q,G.execute(Z)),z=!0):Z!==G&&(F(U,q,G),z=!0)}return z});var k=c.table.core,E=k.schema.primaryKey,N=E.outbound,P=E.extractKey,I=200,E=l.db._options.modifyChunkSize;E&&(I=typeof E=="object"?E[k.name]||E["*"]||200:E);function L(U,q){var K=q.failures,q=q.numFailures;R+=U-q;for(var G=0,Z=a(K);G<Z.length;G++){var J=Z[G];O.push(K[J])}}var O=[],R=0,$=[],D=o===Md;return l.clone().primaryKeys().then(function(U){function z(q){var G=Math.min(I,U.length-q),Z=U.slice(q,q+G);return(D?Promise.resolve([]):k.getMany({trans:f,keys:Z,cache:"immutable"})).then(function(J){var X=[],re=[],ne=N?[]:null,oe=D?Z:[];if(!D)for(var we=0;we<G;++we){var ke=J[we],ge={value:ce(ke),primKey:U[q+we]};w.call(ge,ge.value,ge)!==!1&&(ge.value==null?oe.push(U[q+we]):N||xe(P(ke),P(ge.value))===0?(re.push(ge.value),N&&ne.push(U[q+we])):(oe.push(U[q+we]),X.push(ge.value)))}return Promise.resolve(0<X.length&&k.mutate({trans:f,type:"add",values:X}).then(function(Be){for(var me in Be.failures)oe.splice(parseInt(me),1);L(X.length,Be)})).then(function(){return(0<re.length||K&&typeof o=="object")&&k.mutate({trans:f,type:"put",keys:ne,values:re,criteria:K,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<q}).then(function(Be){return L(re.length,Be)})}).then(function(){return(0<oe.length||K&&D)&&k.mutate({trans:f,type:"delete",keys:oe,criteria:K,isAdditionalChunk:0<q}).then(function(Be){return co(c.table,oe,Be)}).then(function(Be){return L(oe.length,Be)})}).then(function(){return U.length>q+G&&z(q+I)})})}var K=Qr(c)&&c.limit===1/0&&(typeof o!="function"||D)&&{index:c.index,range:c.range};return z(0).then(function(){if(0<O.length)throw new ln("Error modifying one or more objects",O,R,$);return U.length})})})},Ee.prototype.delete=function(){var o=this._ctx,l=o.range;return!Qr(o)||o.table.schema.yProps||!o.isPrimKey&&l.type!==3?this.modify(Md):this._write(function(c){var f=o.table.core.schema.primaryKey,m=l;return o.table.core.count({trans:c,query:{index:f,range:m}}).then(function(v){return o.table.core.mutate({trans:c,type:"deleteRange",range:m}).then(function(N){var k=N.failures,N=N.numFailures;if(N)throw new ln("Could not delete some values",Object.keys(k).map(function(P){return k[P]}),v-N);return v-N})})})},Ee);function Ee(){}var Md=function(o,l){return l.value=null};function Yg(o,l){return o<l?-1:o===l?0:1}function Xg(o,l){return l<o?-1:o===l?0:1}function At(o,l,c){return o=o instanceof Fd?new o.Collection(o):o,o._ctx.error=new(c||TypeError)(l),o}function Jr(o){return new o.Collection(o,function(){return zd("")}).limit(0)}function po(o,l,c,f){var m,v,w,k,N,P,I,E=c.length;if(!c.every(function(R){return typeof R=="string"}))return At(o,Td);function L(R){m=R==="next"?function(D){return D.toUpperCase()}:function(D){return D.toLowerCase()},v=R==="next"?function(D){return D.toLowerCase()}:function(D){return D.toUpperCase()},w=R==="next"?Yg:Xg;var $=c.map(function(D){return{lower:v(D),upper:m(D)}}).sort(function(D,U){return w(D.lower,U.lower)});k=$.map(function(D){return D.upper}),N=$.map(function(D){return D.lower}),I=(P=R)==="next"?"":f}L("next"),o=new o.Collection(o,function(){return Ln(k[0],N[E-1]+f)}),o._ondirectionchange=function(R){L(R)};var O=0;return o._addAlgorithm(function(R,$,D){var U=R.key;if(typeof U!="string")return!1;var z=v(U);if(l(z,N,O))return!0;for(var K=null,q=O;q<E;++q){var G=function(Z,J,X,re,ne,oe){for(var we=Math.min(Z.length,re.length),ke=-1,ge=0;ge<we;++ge){var Be=J[ge];if(Be!==re[ge])return ne(Z[ge],X[ge])<0?Z.substr(0,ge)+X[ge]+X.substr(ge+1):ne(Z[ge],re[ge])<0?Z.substr(0,ge)+re[ge]+X.substr(ge+1):0<=ke?Z.substr(0,ke)+J[ke]+X.substr(ke+1):null;ne(Z[ge],Be)<0&&(ke=ge)}return we<re.length&&oe==="next"?Z+X.substr(Z.length):we<Z.length&&oe==="prev"?Z.substr(0,X.length):ke<0?null:Z.substr(0,ke)+re[ke]+X.substr(ke+1)}(U,z,k[q],N[q],w,P);G===null&&K===null?O=q+1:(K===null||0<w(K,G))&&(K=G)}return $(K!==null?function(){R.continue(K+I)}:D),!1}),o}function Ln(o,l,c,f){return{type:2,lower:o,upper:l,lowerOpen:c,upperOpen:f}}function zd(o){return{type:1,lower:o,upper:o}}var Fd=(Object.defineProperty(tt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),tt.prototype.between=function(o,l,c,f){c=c!==!1,f=f===!0;try{return 0<this._cmp(o,l)||this._cmp(o,l)===0&&(c||f)&&(!c||!f)?Jr(this):new this.Collection(this,function(){return Ln(o,l,!c,!f)})}catch{return At(this,_n)}},tt.prototype.equals=function(o){return o==null?At(this,_n):new this.Collection(this,function(){return zd(o)})},tt.prototype.above=function(o){return o==null?At(this,_n):new this.Collection(this,function(){return Ln(o,void 0,!0)})},tt.prototype.aboveOrEqual=function(o){return o==null?At(this,_n):new this.Collection(this,function(){return Ln(o,void 0,!1)})},tt.prototype.below=function(o){return o==null?At(this,_n):new this.Collection(this,function(){return Ln(void 0,o,!1,!0)})},tt.prototype.belowOrEqual=function(o){return o==null?At(this,_n):new this.Collection(this,function(){return Ln(void 0,o)})},tt.prototype.startsWith=function(o){return typeof o!="string"?At(this,Td):this.between(o,o+wr,!0,!0)},tt.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):po(this,function(l,c){return l.indexOf(c[0])===0},[o],wr)},tt.prototype.equalsIgnoreCase=function(o){return po(this,function(l,c){return l===c[0]},[o],"")},tt.prototype.anyOfIgnoreCase=function(){var o=fe.apply(de,arguments);return o.length===0?Jr(this):po(this,function(l,c){return c.indexOf(l)!==-1},o,"")},tt.prototype.startsWithAnyOfIgnoreCase=function(){var o=fe.apply(de,arguments);return o.length===0?Jr(this):po(this,function(l,c){return c.some(function(f){return l.indexOf(f)===0})},o,wr)},tt.prototype.anyOf=function(){var o=this,l=fe.apply(de,arguments),c=this._cmp;try{l.sort(c)}catch{return At(this,_n)}if(l.length===0)return Jr(this);var f=new this.Collection(this,function(){return Ln(l[0],l[l.length-1])});f._ondirectionchange=function(v){c=v==="next"?o._ascending:o._descending,l.sort(c)};var m=0;return f._addAlgorithm(function(v,w,k){for(var N=v.key;0<c(N,l[m]);)if(++m===l.length)return w(k),!1;return c(N,l[m])===0||(w(function(){v.continue(l[m])}),!1)}),f},tt.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},tt.prototype.noneOf=function(){var o=fe.apply(de,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return At(this,_n)}var l=o.reduce(function(c,f){return c?c.concat([[c[c.length-1][1],f]]):[[-1/0,f]]},null);return l.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},tt.prototype.inAnyRange=function(U,l){var c=this,f=this._cmp,m=this._ascending,v=this._descending,w=this._min,k=this._max;if(U.length===0)return Jr(this);if(!U.every(function(z){return z[0]!==void 0&&z[1]!==void 0&&m(z[0],z[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);var N=!l||l.includeLowers!==!1,P=l&&l.includeUppers===!0,I,E=m;function L(z,K){return E(z[0],K[0])}try{(I=U.reduce(function(z,K){for(var q=0,G=z.length;q<G;++q){var Z=z[q];if(f(K[0],Z[1])<0&&0<f(K[1],Z[0])){Z[0]=w(Z[0],K[0]),Z[1]=k(Z[1],K[1]);break}}return q===G&&z.push(K),z},[])).sort(L)}catch{return At(this,_n)}var O=0,R=P?function(z){return 0<m(z,I[O][1])}:function(z){return 0<=m(z,I[O][1])},$=N?function(z){return 0<v(z,I[O][0])}:function(z){return 0<=v(z,I[O][0])},D=R,U=new this.Collection(this,function(){return Ln(I[0][0],I[I.length-1][1],!N,!P)});return U._ondirectionchange=function(z){E=z==="next"?(D=R,m):(D=$,v),I.sort(L)},U._addAlgorithm(function(z,K,q){for(var G,Z=z.key;D(Z);)if(++O===I.length)return K(q),!1;return!R(G=Z)&&!$(G)||(c._cmp(Z,I[O][1])===0||c._cmp(Z,I[O][0])===0||K(function(){E===m?z.continue(I[O][0]):z.continue(I[O][1])}),!1)}),U},tt.prototype.startsWithAnyOf=function(){var o=fe.apply(de,arguments);return o.every(function(l){return typeof l=="string"})?o.length===0?Jr(this):this.inAnyRange(o.map(function(l){return[l,l+wr]})):At(this,"startsWithAnyOf() only works with strings")},tt);function tt(){}function dn(o){return $e(function(l){return Qi(l),o(l.target.error),!1})}function Qi(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Ji="storagemutated",ml="x-storagemutated-1",Un=Vi(null,Ji),Zg=(fn.prototype._lock=function(){return M(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},fn.prototype._unlock=function(){if(M(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{yr(o[1],o[0])}catch{}}return this},fn.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},fn.prototype.create=function(o){var l=this;if(!this.mode)return this;var c=this.db.idbdb,f=this.db._state.dbOpenError;if(M(!this.idbtrans),!o&&!c)switch(f&&f.name){case"DatabaseClosedError":throw new B.DatabaseClosed(f);case"MissingAPIError":throw new B.MissingAPI(f.message,f);default:throw new B.OpenFailed(f)}if(!this.active)throw new B.TransactionInactive;return M(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=$e(function(m){Qi(m),l._reject(o.error)}),o.onabort=$e(function(m){Qi(m),l.active&&l._reject(new B.Abort(o.error)),l.active=!1,l.on("abort").fire(m)}),o.oncomplete=$e(function(){l.active=!1,l._resolve(),"mutatedParts"in o&&Un.storagemutated.fire(o.mutatedParts)}),this},fn.prototype._promise=function(o,l,c){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return We(new B.ReadOnly("Transaction is readonly"));if(!this.active)return We(new B.TransactionInactive);if(this._locked())return new se(function(v,w){f._blockedFuncs.push([function(){f._promise(o,l,c).then(v,w)},ue])});if(c)return In(function(){var v=new se(function(w,k){f._lock();var N=l(w,k,f);N&&N.then&&N.then(w,k)});return v.finally(function(){return f._unlock()}),v._lib=!0,v});var m=new se(function(v,w){var k=l(v,w,f);k&&k.then&&k.then(v,w)});return m._lib=!0,m},fn.prototype._root=function(){return this.parent?this.parent._root():this},fn.prototype.waitFor=function(o){var l,c=this._root(),f=se.resolve(o);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return f}):(c._waitingFor=f,c._waitingQueue=[],l=c.idbtrans.objectStore(c.storeNames[0]),function v(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(l.get(-1/0).onsuccess=v)}());var m=c._waitingFor;return new se(function(v,w){f.then(function(k){return c._waitingQueue.push($e(v.bind(null,k)))},function(k){return c._waitingQueue.push($e(w.bind(null,k)))}).finally(function(){c._waitingFor===m&&(c._waitingFor=null)})})},fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))},fn.prototype.table=function(o){var l=this._memoizedTables||(this._memoizedTables={});if(y(l,o))return l[o];var c=this.schema[o];if(!c)throw new B.NotFound("Table "+o+" not part of transaction");return c=new this.db.Table(o,c,this),c.core=this.db.core.table(o),l[o]=c},fn);function fn(){}function gl(o,l,c,f,m,v,w,k){return{name:o,keyPath:l,unique:c,multi:f,auto:m,compound:v,src:(c&&!w?"&":"")+(f?"*":"")+(m?"++":"")+Bd(l),type:k}}function Bd(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function vl(o,l,c){return{name:o,primKey:l,indexes:c,mappedClass:null,idxByName:(f=function(m){return[m.name,m]},c.reduce(function(m,v,w){return w=f(v,w),w&&(m[w[0]]=w[1]),m},{}))};var f}var Yi=function(o){try{return o.only([[]]),Yi=function(){return[[]]},[[]]}catch{return Yi=function(){return wr},wr}};function yl(o){return o==null?function(){}:typeof o=="string"?(l=o).split(".").length===1?function(c){return c[l]}:function(c){return V(c,l)}:function(c){return V(c,o)};var l}function Kd(o){return[].slice.call(o)}var ev=0;function Xi(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function tv(o,l,N){function f(D){if(D.type===3)return null;if(D.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var O=D.lower,R=D.upper,$=D.lowerOpen,D=D.upperOpen;return O===void 0?R===void 0?null:l.upperBound(R,!!D):R===void 0?l.lowerBound(O,!!$):l.bound(O,R,!!$,!!D)}function m(L){var O,R=L.name;return{name:R,schema:L,mutate:function($){var D=$.trans,U=$.type,z=$.keys,K=$.values,q=$.range;return new Promise(function(G,Z){G=$e(G);var J=D.objectStore(R),X=J.keyPath==null,re=U==="put"||U==="add";if(!re&&U!=="delete"&&U!=="deleteRange")throw new Error("Invalid operation type: "+U);var ne,oe=(z||K||{length:1}).length;if(z&&K&&z.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(oe===0)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function we(vt){++Be,Qi(vt)}var ke=[],ge=[],Be=0;if(U==="deleteRange"){if(q.type===4)return G({numFailures:Be,failures:ge,results:[],lastResult:void 0});q.type===3?ke.push(ne=J.clear()):ke.push(ne=J.delete(f(q)))}else{var X=re?X?[K,z]:[K,null]:[z,null],me=X[0],dt=X[1];if(re)for(var ft=0;ft<oe;++ft)ke.push(ne=dt&&dt[ft]!==void 0?J[U](me[ft],dt[ft]):J[U](me[ft])),ne.onerror=we;else for(ft=0;ft<oe;++ft)ke.push(ne=J[U](me[ft])),ne.onerror=we}function jo(vt){vt=vt.target.result,ke.forEach(function(kr,$l){return kr.error!=null&&(ge[$l]=kr.error)}),G({numFailures:Be,failures:ge,results:U==="delete"?z:ke.map(function(kr){return kr.result}),lastResult:vt})}ne.onerror=function(vt){we(vt),jo(vt)},ne.onsuccess=jo})},getMany:function($){var D=$.trans,U=$.keys;return new Promise(function(z,K){z=$e(z);for(var q,G=D.objectStore(R),Z=U.length,J=new Array(Z),X=0,re=0,ne=function(ke){ke=ke.target,J[ke._pos]=ke.result,++re===X&&z(J)},oe=dn(K),we=0;we<Z;++we)U[we]!=null&&((q=G.get(U[we]))._pos=we,q.onsuccess=ne,q.onerror=oe,++X);X===0&&z(J)})},get:function($){var D=$.trans,U=$.key;return new Promise(function(z,K){z=$e(z);var q=D.objectStore(R).get(U);q.onsuccess=function(G){return z(G.target.result)},q.onerror=dn(K)})},query:(O=P,function($){return new Promise(function(D,U){D=$e(D);var z,K,q,X=$.trans,G=$.values,Z=$.limit,ne=$.query,J=Z===1/0?void 0:Z,re=ne.index,ne=ne.range,X=X.objectStore(R),re=re.isPrimaryKey?X:X.index(re.name),ne=f(ne);if(Z===0)return D({result:[]});O?((J=G?re.getAll(ne,J):re.getAllKeys(ne,J)).onsuccess=function(oe){return D({result:oe.target.result})},J.onerror=dn(U)):(z=0,K=!G&&"openKeyCursor"in re?re.openKeyCursor(ne):re.openCursor(ne),q=[],K.onsuccess=function(oe){var we=K.result;return we?(q.push(G?we.value:we.primaryKey),++z===Z?D({result:q}):void we.continue()):D({result:q})},K.onerror=dn(U))})}),openCursor:function($){var D=$.trans,U=$.values,z=$.query,K=$.reverse,q=$.unique;return new Promise(function(G,Z){G=$e(G);var re=z.index,J=z.range,X=D.objectStore(R),X=re.isPrimaryKey?X:X.index(re.name),re=K?q?"prevunique":"prev":q?"nextunique":"next",ne=!U&&"openKeyCursor"in X?X.openKeyCursor(f(J),re):X.openCursor(f(J),re);ne.onerror=dn(Z),ne.onsuccess=$e(function(oe){var we,ke,ge,Be,me=ne.result;me?(me.___id=++ev,me.done=!1,we=me.continue.bind(me),ke=(ke=me.continuePrimaryKey)&&ke.bind(me),ge=me.advance.bind(me),Be=function(){throw new Error("Cursor not stopped")},me.trans=D,me.stop=me.continue=me.continuePrimaryKey=me.advance=function(){throw new Error("Cursor not started")},me.fail=$e(Z),me.next=function(){var dt=this,ft=1;return this.start(function(){return ft--?dt.continue():dt.stop()}).then(function(){return dt})},me.start=function(dt){function ft(){if(ne.result)try{dt()}catch(vt){me.fail(vt)}else me.done=!0,me.start=function(){throw new Error("Cursor behind last entry")},me.stop()}var jo=new Promise(function(vt,kr){vt=$e(vt),ne.onerror=dn(kr),me.fail=kr,me.stop=function($l){me.stop=me.continue=me.continuePrimaryKey=me.advance=Be,vt($l)}});return ne.onsuccess=$e(function(vt){ne.onsuccess=ft,ft()}),me.continue=we,me.continuePrimaryKey=ke,me.advance=ge,ft(),jo},G(me)):G(null)},Z)})},count:function($){var D=$.query,U=$.trans,z=D.index,K=D.range;return new Promise(function(q,G){var Z=U.objectStore(R),J=z.isPrimaryKey?Z:Z.index(z.name),Z=f(K),J=Z?J.count(Z):J.count();J.onsuccess=$e(function(X){return q(X.target.result)}),J.onerror=dn(G)})}}}var v,w,k,I=(w=N,k=Kd((v=o).objectStoreNames),{schema:{name:v.name,tables:k.map(function(L){return w.objectStore(L)}).map(function(L){var O=L.keyPath,D=L.autoIncrement,R=u(O),$={},D={name:L.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:O==null,compound:R,keyPath:O,autoIncrement:D,unique:!0,extractKey:yl(O)},indexes:Kd(L.indexNames).map(function(U){return L.index(U)}).map(function(q){var z=q.name,K=q.unique,G=q.multiEntry,q=q.keyPath,G={name:z,compound:u(q),keyPath:q,unique:K,multiEntry:G,extractKey:yl(q)};return $[Xi(q)]=G}),getIndexByKeyPath:function(U){return $[Xi(U)]}};return $[":id"]=D.primaryKey,O!=null&&($[Xi(O)]=D.primaryKey),D})},hasGetAll:0<k.length&&"getAll"in w.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),N=I.schema,P=I.hasGetAll,I=N.tables.map(m),E={};return I.forEach(function(L){return E[L.name]=L}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(L){if(!E[L])throw new Error("Table '".concat(L,"' not found"));return E[L]},MIN_KEY:-1/0,MAX_KEY:Yi(l),schema:N}}function nv(o,l,c,f){var m=c.IDBKeyRange;return c.indexedDB,{dbcore:(f=tv(l,m,f),o.dbcore.reduce(function(v,w){return w=w.create,r(r({},v),w(v))},f))}}function mo(o,f){var c=f.db,f=nv(o._middlewares,c,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(m){var v=m.name;o.core.schema.tables.some(function(w){return w.name===v})&&(m.core=o.core.table(v),o[v]instanceof o.Table&&(o[v].core=m.core))})}function go(o,l,c,f){c.forEach(function(m){var v=f[m];l.forEach(function(w){var k=function N(P,I){return A(P,I)||(P=p(P))&&N(P,I)}(w,m);(!k||"value"in k&&k.value===void 0)&&(w===o.Transaction.prototype||w instanceof o.Transaction?T(w,m,{get:function(){return this.table(m)},set:function(N){C(this,m,{value:N,writable:!0,configurable:!0,enumerable:!0})}}):w[m]=new o.Table(m,v))})})}function wl(o,l){l.forEach(function(c){for(var f in c)c[f]instanceof o.Table&&delete c[f]})}function rv(o,l){return o._cfg.version-l._cfg.version}function iv(o,l,c,f){var m=o._dbSchema;c.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=vl("$meta",Wd("")[0],[]),o._storeNames.push("$meta"));var v=o._createTransaction("readwrite",o._storeNames,m);v.create(c),v._completion.catch(f);var w=v._reject.bind(v),k=ue.transless||ue;In(function(){return ue.trans=v,ue.transless=k,l!==0?(mo(o,c),P=l,((N=v).storeNames.includes("$meta")?N.table("$meta").get("version").then(function(I){return I??P}):se.resolve(P)).then(function(I){return L=I,O=v,R=c,$=[],I=(E=o)._versions,D=E._dbSchema=yo(0,E.idbdb,R),(I=I.filter(function(U){return U._cfg.version>=L})).length!==0?(I.forEach(function(U){$.push(function(){var z=D,K=U._cfg.dbschema;wo(E,z,R),wo(E,K,R),D=E._dbSchema=K;var q=_l(z,K);q.add.forEach(function(re){bl(R,re[0],re[1].primKey,re[1].indexes)}),q.change.forEach(function(re){if(re.recreate)throw new B.Upgrade("Not yet support for changing primary key");var ne=R.objectStore(re.name);re.add.forEach(function(oe){return vo(ne,oe)}),re.change.forEach(function(oe){ne.deleteIndex(oe.name),vo(ne,oe)}),re.del.forEach(function(oe){return ne.deleteIndex(oe)})});var G=U._cfg.contentUpgrade;if(G&&U._cfg.version>L){mo(E,R),O._memoizedTables={};var Z=ee(K);q.del.forEach(function(re){Z[re]=z[re]}),wl(E,[E.Transaction.prototype]),go(E,[E.Transaction.prototype],a(Z),Z),O.schema=Z;var J,X=Ne(G);return X&&Hr(),q=se.follow(function(){var re;(J=G(O))&&X&&(re=Dn.bind(null,null),J.then(re,re))}),J&&typeof J.then=="function"?se.resolve(J):q.then(function(){return J})}}),$.push(function(z){var K,q,G=U._cfg.dbschema;K=G,q=z,[].slice.call(q.db.objectStoreNames).forEach(function(Z){return K[Z]==null&&q.db.deleteObjectStore(Z)}),wl(E,[E.Transaction.prototype]),go(E,[E.Transaction.prototype],E._storeNames,E._dbSchema),O.schema=E._dbSchema}),$.push(function(z){E.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(E.idbdb.version/10)===U._cfg.version?(E.idbdb.deleteObjectStore("$meta"),delete E._dbSchema.$meta,E._storeNames=E._storeNames.filter(function(K){return K!=="$meta"})):z.objectStore("$meta").put(U._cfg.version,"version"))})}),function U(){return $.length?se.resolve($.shift()(O.idbtrans)).then(U):se.resolve()}().then(function(){qd(D,R)})):se.resolve();var E,L,O,R,$,D}).catch(w)):(a(m).forEach(function(I){bl(c,I,m[I].primKey,m[I].indexes)}),mo(o,c),void se.follow(function(){return o.on.populate.fire(v)}).catch(w));var N,P})}function sv(o,l){qd(o._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var c=yo(0,o.idbdb,l);wo(o,o._dbSchema,l);for(var f=0,m=_l(c,o._dbSchema).change;f<m.length;f++){var v=function(w){if(w.change.length||w.recreate)return console.warn("Unable to patch indexes of table ".concat(w.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=l.objectStore(w.name);w.add.forEach(function(N){cn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(w.name,".").concat(N.src)),vo(k,N)})}(m[f]);if(typeof v=="object")return v.value}}function _l(o,l){var c,f={del:[],add:[],change:[]};for(c in o)l[c]||f.del.push(c);for(c in l){var m=o[c],v=l[c];if(m){var w={name:c,def:v,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(v.primKey.keyPath||"")||m.primKey.auto!==v.primKey.auto)w.recreate=!0,f.change.push(w);else{var k=m.idxByName,N=v.idxByName,P=void 0;for(P in k)N[P]||w.del.push(P);for(P in N){var I=k[P],E=N[P];I?I.src!==E.src&&w.change.push(E):w.add.push(E)}(0<w.del.length||0<w.add.length||0<w.change.length)&&f.change.push(w)}}else f.add.push([c,v])}return f}function bl(o,l,c,f){var m=o.db.createObjectStore(l,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return f.forEach(function(v){return vo(m,v)}),m}function qd(o,l){a(o).forEach(function(c){l.db.objectStoreNames.contains(c)||(cn&&console.debug("Dexie: Creating missing table",c),bl(l,c,o[c].primKey,o[c].indexes))})}function vo(o,l){o.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function yo(o,l,c){var f={};return b(l.objectStoreNames,0).forEach(function(m){for(var v=c.objectStore(m),w=gl(Bd(P=v.keyPath),P||"",!0,!1,!!v.autoIncrement,P&&typeof P!="string",!0),k=[],N=0;N<v.indexNames.length;++N){var I=v.index(v.indexNames[N]),P=I.keyPath,I=gl(I.name,P,!!I.unique,!!I.multiEntry,!1,P&&typeof P!="string",!1);k.push(I)}f[m]=vl(m,w,k)}),f}function wo(o,l,c){for(var f=c.db.objectStoreNames,m=0;m<f.length;++m){var v=f[m],w=c.objectStore(v);o._hasGetAll="getAll"in w;for(var k=0;k<w.indexNames.length;++k){var N=w.indexNames[k],P=w.index(N).keyPath,I=typeof P=="string"?P:"["+b(P).join("+")+"]";!l[v]||(P=l[v].idxByName[I])&&(P.name=N,delete l[v].idxByName[I],l[v].idxByName[N]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Wd(o){return o.split(",").map(function(l,c){var v=l.split(":"),f=(m=v[1])===null||m===void 0?void 0:m.trim(),m=(l=v[0].trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return gl(m,v||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),u(v),c===0,f)})}var ov=(Yr.prototype._createTableSchema=vl,Yr.prototype._parseIndexSyntax=Wd,Yr.prototype._parseStoresSpec=function(o,l){var c=this;a(o).forEach(function(f){if(o[f]!==null){var m=c._parseIndexSyntax(o[f]),v=m.shift();if(!v)throw new B.Schema("Invalid schema for table "+f+": "+o[f]);if(v.unique=!0,v.multi)throw new B.Schema("Primary key cannot be multiEntry*");m.forEach(function(w){if(w.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!w.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),m=c._createTableSchema(f,v,m),l[f]=m}})},Yr.prototype.stores=function(c){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,c):c;var c=l._versions,f={},m={};return c.forEach(function(v){d(f,v._cfg.storesSource),m=v._cfg.dbschema={},v._parseStoresSpec(f,m)}),l._dbSchema=m,wl(l,[l._allTables,l,l.Transaction.prototype]),go(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(m),m),l._storeNames=a(m),this},Yr.prototype.upgrade=function(o){return this._cfg.contentUpgrade=nl(this._cfg.contentUpgrade||be,o),this},Yr);function Yr(){}function xl(o,l){var c=o._dbNamesDB;return c||(c=o._dbNamesDB=new bn(lo,{addons:[],indexedDB:o,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function kl(o){return o&&typeof o.databases=="function"}function Sl(o){return In(function(){return ue.letThrough=!0,o()})}function El(o){return!("from"in o)}var ct=function(o,l){if(!this){var c=new ct;return o&&"d"in o&&d(c,o),c}d(this,arguments.length?{d:1,from:o,to:1<arguments.length?l:o}:{d:0})};function Zi(o,l,c){var f=xe(l,c);if(!isNaN(f)){if(0<f)throw RangeError();if(El(o))return d(o,{from:l,to:c,d:1});var m=o.l,f=o.r;if(xe(c,o.from)<0)return m?Zi(m,l,c):o.l={from:l,to:c,d:1,l:null,r:null},Hd(o);if(0<xe(l,o.to))return f?Zi(f,l,c):o.r={from:l,to:c,d:1,l:null,r:null},Hd(o);xe(l,o.from)<0&&(o.from=l,o.l=null,o.d=f?f.d+1:1),0<xe(c,o.to)&&(o.to=c,o.r=null,o.d=o.l?o.l.d+1:1),c=!o.r,m&&!o.l&&es(o,m),f&&c&&es(o,f)}}function es(o,l){El(l)||function c(f,N){var v=N.from,w=N.to,k=N.l,N=N.r;Zi(f,v,w),k&&c(f,k),N&&c(f,N)}(o,l)}function Vd(o,l){var c=_o(l),f=c.next();if(f.done)return!1;for(var m=f.value,v=_o(o),w=v.next(m.from),k=w.value;!f.done&&!w.done;){if(xe(k.from,m.to)<=0&&0<=xe(k.to,m.from))return!0;xe(m.from,k.from)<0?m=(f=c.next(k.from)).value:k=(w=v.next(m.from)).value}return!1}function _o(o){var l=El(o)?null:{s:0,n:o};return{next:function(c){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&xe(c,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||xe(c,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Hd(o){var l,c,f=(((l=o.r)===null||l===void 0?void 0:l.d)||0)-(((c=o.l)===null||c===void 0?void 0:c.d)||0),m=1<f?"r":f<-1?"l":"";m&&(l=m=="r"?"l":"r",c=r({},o),f=o[m],o.from=f.from,o.to=f.to,o[m]=f[m],c[m]=f[l],(o[l]=c).d=Gd(c)),o.d=Gd(o)}function Gd(c){var l=c.r,c=c.l;return(l?c?Math.max(l.d,c.d):l.d:c?c.d:0)+1}function bo(o,l){return a(l).forEach(function(c){o[c]?es(o[c],l[c]):o[c]=function f(m){var v,w,k={};for(v in m)y(m,v)&&(w=m[v],k[v]=!w||typeof w!="object"||ie.has(w.constructor)?w:f(w));return k}(l[c])}),o}function jl(o,l){return o.all||l.all||Object.keys(o).some(function(c){return l[c]&&Vd(l[c],o[c])})}_(ct.prototype,((Kt={add:function(o){return es(this,o),this},addKey:function(o){return Zi(this,o,o),this},addKeys:function(o){var l=this;return o.forEach(function(c){return Zi(l,c,c)}),this},hasKey:function(o){var l=_o(this).next(o).value;return l&&xe(l.from,o)<=0&&0<=xe(l.to,o)}})[lt]=function(){return _o(this)},Kt));var br={},Cl={},Nl=!1;function xo(o){bo(Cl,o),Nl||(Nl=!0,setTimeout(function(){Nl=!1,Ol(Cl,!(Cl={}))},0))}function Ol(o,l){l===void 0&&(l=!1);var c=new Set;if(o.all)for(var f=0,m=Object.values(br);f<m.length;f++)Qd(w=m[f],o,c,l);else for(var v in o){var w,k=/^idb\:\/\/(.*)\/(.*)\//.exec(v);k&&(v=k[1],k=k[2],(w=br["idb://".concat(v,"/").concat(k)])&&Qd(w,o,c,l))}c.forEach(function(N){return N()})}function Qd(o,l,c,f){for(var m=[],v=0,w=Object.entries(o.queries.query);v<w.length;v++){for(var k=w[v],N=k[0],P=[],I=0,E=k[1];I<E.length;I++){var L=E[I];jl(l,L.obsSet)?L.subscribers.forEach(function(D){return c.add(D)}):f&&P.push(L)}f&&m.push([N,P])}if(f)for(var O=0,R=m;O<R.length;O++){var $=R[O],N=$[0],P=$[1];o.queries.query[N]=P}}function av(o){var l=o._state,c=o._deps.indexedDB;if(l.isBeingOpened||o.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?We(l.dbOpenError):o});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,m=Math.round(10*o.verno),v=!1;function w(){if(l.openCanceller!==f)throw new B.DatabaseClosed("db.open() was cancelled")}function k(){return new se(function(L,O){if(w(),!c)throw new B.MissingAPI;var R=o.name,$=l.autoSchema||!m?c.open(R):c.open(R,m);if(!$)throw new B.MissingAPI;$.onerror=dn(O),$.onblocked=$e(o._fireOnBlocked),$.onupgradeneeded=$e(function(D){var U;I=$.transaction,l.autoSchema&&!o._options.allowEmptyDB?($.onerror=Qi,I.abort(),$.result.close(),(U=c.deleteDatabase(R)).onsuccess=U.onerror=$e(function(){O(new B.NoSuchDatabase("Database ".concat(R," doesnt exist")))})):(I.onerror=dn(O),D=D.oldVersion>Math.pow(2,62)?0:D.oldVersion,E=D<1,o.idbdb=$.result,v&&sv(o,I),iv(o,D/10,I,O))},O),$.onsuccess=$e(function(){I=null;var D,U,z,K,q,G=o.idbdb=$.result,Z=b(G.objectStoreNames);if(0<Z.length)try{var J=G.transaction((K=Z).length===1?K[0]:K,"readonly");if(l.autoSchema)U=G,z=J,(D=o).verno=U.version/10,z=D._dbSchema=yo(0,U,z),D._storeNames=b(U.objectStoreNames,0),go(D,[D._allTables],a(z),z);else if(wo(o,o._dbSchema,J),((q=_l(yo(0,(q=o).idbdb,J),q._dbSchema)).add.length||q.change.some(function(X){return X.add.length||X.change.length}))&&!v)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),m=G.version+1,v=!0,L(k());mo(o,J)}catch{}Gr.push(o),G.onversionchange=$e(function(X){l.vcFired=!0,o.on("versionchange").fire(X)}),G.onclose=$e(function(X){o.on("close").fire(X)}),E&&(q=o._deps,J=R,G=q.indexedDB,q=q.IDBKeyRange,kl(G)||J===lo||xl(G,q).put({name:J}).catch(be)),L()},O)}).catch(function(L){switch(L==null?void 0:L.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<m)return m=0,k()}return se.reject(L)})}var N,P=l.dbReadyResolve,I=null,E=!1;return se.race([f,(typeof navigator>"u"?se.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(L){function O(){return indexedDB.databases().finally(L)}N=setInterval(O,100),O()}).finally(function(){return clearInterval(N)}):Promise.resolve()).then(k)]).then(function(){return w(),l.onReadyBeingFired=[],se.resolve(Sl(function(){return o.on.ready.fire(o.vip)})).then(function L(){if(0<l.onReadyBeingFired.length){var O=l.onReadyBeingFired.reduce(nl,be);return l.onReadyBeingFired=[],se.resolve(Sl(function(){return O(o.vip)})).then(L)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(L){l.dbOpenError=L;try{I&&I.abort()}catch{}return f===l.openCanceller&&o._close(),We(L)}).finally(function(){l.openComplete=!0,P()}).then(function(){var L;return E&&(L={},o.tables.forEach(function(O){O.schema.indexes.forEach(function(R){R.name&&(L["idb://".concat(o.name,"/").concat(O.name,"/").concat(R.name)]=new ct(-1/0,[[[]]]))}),L["idb://".concat(o.name,"/").concat(O.name,"/")]=L["idb://".concat(o.name,"/").concat(O.name,"/:dels")]=new ct(-1/0,[[[]]])}),Un(Ji).fire(L),Ol(L,!0)),o})}function Tl(o){function l(v){return o.next(v)}var c=m(l),f=m(function(v){return o.throw(v)});function m(v){return function(N){var k=v(N),N=k.value;return k.done?N:N&&typeof N.then=="function"?N.then(c,f):u(N)?Promise.all(N).then(c,f):c(N)}}return m(l)()}function ko(o,l,c){for(var f=u(o)?o.slice():[o],m=0;m<c;++m)f.push(l);return f}var lv={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema,m={},v=[];function w(E,L,O){var R=Xi(E),$=m[R]=m[R]||[],D=E==null?0:typeof E=="string"?1:E.length,U=0<L,U=r(r({},O),{name:U?"".concat(R,"(virtual-from:").concat(O.name,")"):O.name,lowLevelIndex:O,isVirtual:U,keyTail:L,keyLength:D,extractKey:yl(E),unique:!U&&O.unique});return $.push(U),U.isPrimaryKey||v.push(U),1<D&&w(D===2?E[0]:E.slice(0,D-1),L+1,O),$.sort(function(z,K){return z.keyTail-K.keyTail}),U}l=w(f.primaryKey.keyPath,0,f.primaryKey),m[":id"]=[l];for(var k=0,N=f.indexes;k<N.length;k++){var P=N[k];w(P.keyPath,0,P)}function I(E){var L,O=E.query.index;return O.isVirtual?r(r({},E),{query:{index:O.lowLevelIndex,range:(L=E.query.range,O=O.keyTail,{type:L.type===1?2:L.type,lower:ko(L.lower,L.lowerOpen?o.MAX_KEY:o.MIN_KEY,O),lowerOpen:!0,upper:ko(L.upper,L.upperOpen?o.MIN_KEY:o.MAX_KEY,O),upperOpen:!0})}}):E}return r(r({},c),{schema:r(r({},f),{primaryKey:l,indexes:v,getIndexByKeyPath:function(E){return(E=m[Xi(E)])&&E[0]}}),count:function(E){return c.count(I(E))},query:function(E){return c.query(I(E))},openCursor:function(E){var L=E.query.index,O=L.keyTail,R=L.isVirtual,$=L.keyLength;return R?c.openCursor(I(E)).then(function(U){return U&&D(U)}):c.openCursor(E);function D(U){return Object.create(U,{continue:{value:function(z){z!=null?U.continue(ko(z,E.reverse?o.MAX_KEY:o.MIN_KEY,O)):E.unique?U.continue(U.key.slice(0,$).concat(E.reverse?o.MIN_KEY:o.MAX_KEY,O)):U.continue()}},continuePrimaryKey:{value:function(z,K){U.continuePrimaryKey(ko(z,o.MAX_KEY,O),K)}},primaryKey:{get:function(){return U.primaryKey}},key:{get:function(){var z=U.key;return $===1?z[0]:z.slice(0,$)}},value:{get:function(){return U.value}}})}}})}})}};function Pl(o,l,c,f){return c=c||{},f=f||"",a(o).forEach(function(m){var v,w,k;y(l,m)?(v=o[m],w=l[m],typeof v=="object"&&typeof w=="object"&&v&&w?(k=Re(v))!==Re(w)?c[f+m]=l[m]:k==="Object"?Pl(v,w,c,f+m+"."):v!==w&&(c[f+m]=l[m]):v!==w&&(c[f+m]=l[m])):c[f+m]=void 0}),a(l).forEach(function(m){y(o,m)||(c[f+m]=l[m])}),c}function Rl(o,l){return l.type==="delete"?l.keys:l.keys||l.values.map(o.extractKey)}var uv={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema.primaryKey;return r(r({},c),{mutate:function(m){var v=ue.trans,w=v.table(l).hook,k=w.deleting,N=w.creating,P=w.updating;switch(m.type){case"add":if(N.fire===be)break;return v._promise("readwrite",function(){return I(m)},!0);case"put":if(N.fire===be&&P.fire===be)break;return v._promise("readwrite",function(){return I(m)},!0);case"delete":if(k.fire===be)break;return v._promise("readwrite",function(){return I(m)},!0);case"deleteRange":if(k.fire===be)break;return v._promise("readwrite",function(){return function E(L,O,R){return c.query({trans:L,values:!1,query:{index:f,range:O},limit:R}).then(function($){var D=$.result;return I({type:"delete",keys:D,trans:L}).then(function(U){return 0<U.numFailures?Promise.reject(U.failures[0]):D.length<R?{failures:[],numFailures:0,lastResult:void 0}:E(L,r(r({},O),{lower:D[D.length-1],lowerOpen:!0}),R)})})}(m.trans,m.range,1e4)},!0)}return c.mutate(m);function I(E){var L,O,R,$=ue.trans,D=E.keys||Rl(f,E);if(!D)throw new Error("Keys missing");return(E=E.type==="add"||E.type==="put"?r(r({},E),{keys:D}):r({},E)).type!=="delete"&&(E.values=i([],E.values)),E.keys&&(E.keys=i([],E.keys)),L=c,R=D,((O=E).type==="add"?Promise.resolve([]):L.getMany({trans:O.trans,keys:R,cache:"immutable"})).then(function(U){var z=D.map(function(K,q){var G,Z,J,X=U[q],re={onerror:null,onsuccess:null};return E.type==="delete"?k.fire.call(re,K,X,$):E.type==="add"||X===void 0?(G=N.fire.call(re,K,E.values[q],$),K==null&&G!=null&&(E.keys[q]=K=G,f.outbound||F(E.values[q],f.keyPath,K))):(G=Pl(X,E.values[q]),(Z=P.fire.call(re,G,K,X,$))&&(J=E.values[q],Object.keys(Z).forEach(function(ne){y(J,ne)?J[ne]=Z[ne]:F(J,ne,Z[ne])}))),re});return c.mutate(E).then(function(K){for(var q=K.failures,G=K.results,Z=K.numFailures,K=K.lastResult,J=0;J<D.length;++J){var X=(G||D)[J],re=z[J];X==null?re.onerror&&re.onerror(q[J]):re.onsuccess&&re.onsuccess(E.type==="put"&&U[J]?E.values[J]:X)}return{failures:q,results:G,numFailures:Z,lastResult:K}}).catch(function(K){return z.forEach(function(q){return q.onerror&&q.onerror(K)}),Promise.reject(K)})})}}})}})}};function Jd(o,l,c){try{if(!l||l.keys.length<o.length)return null;for(var f=[],m=0,v=0;m<l.keys.length&&v<o.length;++m)xe(l.keys[m],o[v])===0&&(f.push(c?ce(l.values[m]):l.values[m]),++v);return f.length===o.length?f:null}catch{return null}}var cv={stack:"dbcore",level:-1,create:function(o){return{table:function(l){var c=o.table(l);return r(r({},c),{getMany:function(f){if(!f.cache)return c.getMany(f);var m=Jd(f.keys,f.trans._cache,f.cache==="clone");return m?se.resolve(m):c.getMany(f).then(function(v){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?ce(v):v},v})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),c.mutate(f)}})}}}};function Yd(o,l){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function Xd(o,l){switch(o){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var dv={stack:"dbcore",level:0,name:"Observability",create:function(o){var l=o.schema.name,c=new ct(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(f,m,v){if(ue.subscr&&m!=="readonly")throw new B.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return o.transaction(f,m,v)},table:function(f){var m=o.table(f),v=m.schema,w=v.primaryKey,E=v.indexes,k=w.extractKey,N=w.outbound,P=w.autoIncrement&&E.filter(function(O){return O.compound&&O.keyPath.includes(w.keyPath)}),I=r(r({},m),{mutate:function(O){function R(ne){return ne="idb://".concat(l,"/").concat(f,"/").concat(ne),K[ne]||(K[ne]=new ct)}var $,D,U,z=O.trans,K=O.mutatedParts||(O.mutatedParts={}),q=R(""),G=R(":dels"),Z=O.type,re=O.type==="deleteRange"?[O.range]:O.type==="delete"?[O.keys]:O.values.length<50?[Rl(w,O).filter(function(ne){return ne}),O.values]:[],J=re[0],X=re[1],re=O.trans._cache;return u(J)?(q.addKeys(J),(re=Z==="delete"||J.length===X.length?Jd(J,re):null)||G.addKeys(J),(re||X)&&($=R,D=re,U=X,v.indexes.forEach(function(ne){var oe=$(ne.name||"");function we(ge){return ge!=null?ne.extractKey(ge):null}function ke(ge){return ne.multiEntry&&u(ge)?ge.forEach(function(Be){return oe.addKey(Be)}):oe.addKey(ge)}(D||U).forEach(function(ge,dt){var me=D&&we(D[dt]),dt=U&&we(U[dt]);xe(me,dt)!==0&&(me!=null&&ke(me),dt!=null&&ke(dt))})}))):J?(X={from:(X=J.lower)!==null&&X!==void 0?X:o.MIN_KEY,to:(X=J.upper)!==null&&X!==void 0?X:o.MAX_KEY},G.add(X),q.add(X)):(q.add(c),G.add(c),v.indexes.forEach(function(ne){return R(ne.name).add(c)})),m.mutate(O).then(function(ne){return!J||O.type!=="add"&&O.type!=="put"||(q.addKeys(ne.results),P&&P.forEach(function(oe){for(var we=O.values.map(function(me){return oe.extractKey(me)}),ke=oe.keyPath.findIndex(function(me){return me===w.keyPath}),ge=0,Be=ne.results.length;ge<Be;++ge)we[ge][ke]=ne.results[ge];R(oe.name).addKeys(we)})),z.mutatedParts=bo(z.mutatedParts||{},K),ne})}}),E=function(R){var $=R.query,R=$.index,$=$.range;return[R,new ct((R=$.lower)!==null&&R!==void 0?R:o.MIN_KEY,($=$.upper)!==null&&$!==void 0?$:o.MAX_KEY)]},L={get:function(O){return[w,new ct(O.key)]},getMany:function(O){return[w,new ct().addKeys(O.keys)]},count:E,query:E,openCursor:E};return a(L).forEach(function(O){I[O]=function(R){var $=ue.subscr,D=!!$,U=Yd(ue,m)&&Xd(O,R)?R.obsSet={}:$;if(D){var z=function(X){return X="idb://".concat(l,"/").concat(f,"/").concat(X),U[X]||(U[X]=new ct)},K=z(""),q=z(":dels"),$=L[O](R),D=$[0],$=$[1];if((O==="query"&&D.isPrimaryKey&&!R.values?q:z(D.name||"")).add($),!D.isPrimaryKey){if(O!=="count"){var G=O==="query"&&N&&R.values&&m.query(r(r({},R),{values:!1}));return m[O].apply(this,arguments).then(function(X){if(O==="query"){if(N&&R.values)return G.then(function(we){return we=we.result,K.addKeys(we),X});var re=R.values?X.result.map(k):X.result;(R.values?K:q).addKeys(re)}else if(O==="openCursor"){var ne=X,oe=R.values;return ne&&Object.create(ne,{key:{get:function(){return q.addKey(ne.primaryKey),ne.key}},primaryKey:{get:function(){var we=ne.primaryKey;return q.addKey(we),we}},value:{get:function(){return oe&&K.addKey(ne.primaryKey),ne.value}}})}return X})}q.add(c)}}return m[O].apply(this,arguments)}}),I}})}};function Zd(o,l,c){if(c.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return c.numFailures===f?null:(l=r({},l),u(l.keys)&&(l.keys=l.keys.filter(function(m,v){return!(v in c.failures)})),"values"in l&&u(l.values)&&(l.values=l.values.filter(function(m,v){return!(v in c.failures)})),l)}function Al(o,l){return c=o,((f=l).lower===void 0||(f.lowerOpen?0<xe(c,f.lower):0<=xe(c,f.lower)))&&(o=o,(l=l).upper===void 0||(l.upperOpen?xe(o,l.upper)<0:xe(o,l.upper)<=0));var c,f}function ef(o,l,L,f,m,v){if(!L||L.length===0)return o;var w=l.query.index,k=w.multiEntry,N=l.query.range,P=f.schema.primaryKey.extractKey,I=w.extractKey,E=(w.lowLevelIndex||w).extractKey,L=L.reduce(function(O,R){var $=O,D=[];if(R.type==="add"||R.type==="put")for(var U=new ct,z=R.values.length-1;0<=z;--z){var K,q=R.values[z],G=P(q);U.hasKey(G)||(K=I(q),(k&&u(K)?K.some(function(ne){return Al(ne,N)}):Al(K,N))&&(U.addKey(G),D.push(q)))}switch(R.type){case"add":var Z=new ct().addKeys(l.values?O.map(function(oe){return P(oe)}):O),$=O.concat(l.values?D.filter(function(oe){return oe=P(oe),!Z.hasKey(oe)&&(Z.addKey(oe),!0)}):D.map(function(oe){return P(oe)}).filter(function(oe){return!Z.hasKey(oe)&&(Z.addKey(oe),!0)}));break;case"put":var J=new ct().addKeys(R.values.map(function(oe){return P(oe)}));$=O.filter(function(oe){return!J.hasKey(l.values?P(oe):oe)}).concat(l.values?D:D.map(function(oe){return P(oe)}));break;case"delete":var X=new ct().addKeys(R.keys);$=O.filter(function(oe){return!X.hasKey(l.values?P(oe):oe)});break;case"deleteRange":var re=R.range;$=O.filter(function(oe){return!Al(P(oe),re)})}return $},o);return L===o?o:(L.sort(function(O,R){return xe(E(O),E(R))||xe(P(O),P(R))}),l.limit&&l.limit<1/0&&(L.length>l.limit?L.length=l.limit:o.length===l.limit&&L.length<l.limit&&(m.dirty=!0)),v?Object.freeze(L):L)}function tf(o,l){return xe(o.lower,l.lower)===0&&xe(o.upper,l.upper)===0&&!!o.lowerOpen==!!l.lowerOpen&&!!o.upperOpen==!!l.upperOpen}function fv(o,l){return function(c,f,m,v){if(c===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=xe(c,f))===0){if(m&&v)return 0;if(m)return 1;if(v)return-1}return f}(o.lower,l.lower,o.lowerOpen,l.lowerOpen)<=0&&0<=function(c,f,m,v){if(c===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=xe(c,f))===0){if(m&&v)return 0;if(m)return-1;if(v)return 1}return f}(o.upper,l.upper,o.upperOpen,l.upperOpen)}function hv(o,l,c,f){o.subscribers.add(c),f.addEventListener("abort",function(){var m,v;o.subscribers.delete(c),o.subscribers.size===0&&(m=o,v=l,setTimeout(function(){m.subscribers.size===0&&te(v,m)},3e3))})}var pv={stack:"dbcore",level:0,name:"Cache",create:function(o){var l=o.schema.name;return r(r({},o),{transaction:function(c,f,m){var v,w,k=o.transaction(c,f,m);return f==="readwrite"&&(w=(v=new AbortController).signal,m=function(N){return function(){if(v.abort(),f==="readwrite"){for(var P=new Set,I=0,E=c;I<E.length;I++){var L=E[I],O=br["idb://".concat(l,"/").concat(L)];if(O){var R=o.table(L),$=O.optimisticOps.filter(function(oe){return oe.trans===k});if(k._explicit&&N&&k.mutatedParts)for(var D=0,U=Object.values(O.queries.query);D<U.length;D++)for(var z=0,K=(Z=U[D]).slice();z<K.length;z++)jl((J=K[z]).obsSet,k.mutatedParts)&&(te(Z,J),J.subscribers.forEach(function(oe){return P.add(oe)}));else if(0<$.length){O.optimisticOps=O.optimisticOps.filter(function(oe){return oe.trans!==k});for(var q=0,G=Object.values(O.queries.query);q<G.length;q++)for(var Z,J,X,re=0,ne=(Z=G[q]).slice();re<ne.length;re++)(J=ne[re]).res!=null&&k.mutatedParts&&(N&&!J.dirty?(X=Object.isFrozen(J.res),X=ef(J.res,J.req,$,R,J,X),J.dirty?(te(Z,J),J.subscribers.forEach(function(oe){return P.add(oe)})):X!==J.res&&(J.res=X,J.promise=se.resolve({result:X}))):(J.dirty&&te(Z,J),J.subscribers.forEach(function(oe){return P.add(oe)})))}}}P.forEach(function(oe){return oe()})}}},k.addEventListener("abort",m(!1),{signal:w}),k.addEventListener("error",m(!1),{signal:w}),k.addEventListener("complete",m(!0),{signal:w})),k},table:function(c){var f=o.table(c),m=f.schema.primaryKey;return r(r({},f),{mutate:function(v){var w=ue.trans;if(m.outbound||w.db._options.cache==="disabled"||w.explicit||w.idbtrans.mode!=="readwrite")return f.mutate(v);var k=br["idb://".concat(l,"/").concat(c)];return k?(w=f.mutate(v),v.type!=="add"&&v.type!=="put"||!(50<=v.values.length||Rl(m,v).some(function(N){return N==null}))?(k.optimisticOps.push(v),v.mutatedParts&&xo(v.mutatedParts),w.then(function(N){0<N.numFailures&&(te(k.optimisticOps,v),(N=Zd(0,v,N))&&k.optimisticOps.push(N),v.mutatedParts&&xo(v.mutatedParts))}),w.catch(function(){te(k.optimisticOps,v),v.mutatedParts&&xo(v.mutatedParts)})):w.then(function(N){var P=Zd(0,r(r({},v),{values:v.values.map(function(I,E){var L;return N.failures[E]?I:(I=(L=m.keyPath)!==null&&L!==void 0&&L.includes(".")?ce(I):r({},I),F(I,m.keyPath,N.results[E]),I)})}),N);k.optimisticOps.push(P),queueMicrotask(function(){return v.mutatedParts&&xo(v.mutatedParts)})}),w):f.mutate(v)},query:function(v){if(!Yd(ue,f)||!Xd("query",v))return f.query(v);var w=((P=ue.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",E=ue,k=E.requery,N=E.signal,P=function(R,$,D,U){var z=br["idb://".concat(R,"/").concat($)];if(!z)return[];if(!($=z.queries[D]))return[null,!1,z,null];var K=$[(U.query?U.query.index.name:null)||""];if(!K)return[null,!1,z,null];switch(D){case"query":var q=K.find(function(G){return G.req.limit===U.limit&&G.req.values===U.values&&tf(G.req.query.range,U.query.range)});return q?[q,!0,z,K]:[K.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=U.limit&&(!U.values||G.req.values)&&fv(G.req.query.range,U.query.range)}),!1,z,K];case"count":return q=K.find(function(G){return tf(G.req.query.range,U.query.range)}),[q,!!q,z,K]}}(l,c,"query",v),I=P[0],E=P[1],L=P[2],O=P[3];return I&&E?I.obsSet=v.obsSet:(E=f.query(v).then(function(R){var $=R.result;if(I&&(I.res=$),w){for(var D=0,U=$.length;D<U;++D)Object.freeze($[D]);Object.freeze($)}else R.result=ce($);return R}).catch(function(R){return O&&I&&te(O,I),Promise.reject(R)}),I={obsSet:v.obsSet,promise:E,subscribers:new Set,type:"query",req:v,dirty:!1},O?O.push(I):(O=[I],(L=L||(br["idb://".concat(l,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[v.query.index.name||""]=O)),hv(I,O,k,N),I.promise.then(function(R){return{result:ef(R.result,v,L==null?void 0:L.optimisticOps,f,I,w)}})}})}})}};function So(o,l){return new Proxy(o,{get:function(c,f,m){return f==="db"?l:Reflect.get(c,f,m)}})}var bn=(Ve.prototype.version=function(o){if(isNaN(o)||o<.1)throw new B.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var l=this._versions,c=l.filter(function(f){return f._cfg.version===o})[0];return c||(c=new this.Version(o),l.push(c),l.sort(rv),c.stores({}),this._state.autoSchema=!1,c)},Ve.prototype._whenReady=function(o){var l=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?o():new se(function(c,f){if(l._state.openComplete)return f(new B.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new B.DatabaseClosed);l.open().catch(be)}l._state.dbReadyPromise.then(c,f)}).then(o)},Ve.prototype.use=function(o){var l=o.stack,c=o.create,f=o.level,m=o.name;return m&&this.unuse({stack:l,name:m}),o=this._middlewares[l]||(this._middlewares[l]=[]),o.push({stack:l,create:c,level:f??10,name:m}),o.sort(function(v,w){return v.level-w.level}),this},Ve.prototype.unuse=function(o){var l=o.stack,c=o.name,f=o.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(m){return f?m.create!==f:!!c&&m.name!==c})),this},Ve.prototype.open=function(){var o=this;return yr(An,function(){return av(o)})},Ve.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,l=Gr.indexOf(this);if(0<=l&&Gr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new se(function(c){o.dbReadyResolve=c}),o.openCanceller=new se(function(c,f){o.cancelOpen=f}))},Ve.prototype.close=function(c){var l=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;l?(c.isBeingOpened&&c.cancelOpen(new B.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new B.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Ve.prototype.delete=function(o){var l=this;o===void 0&&(o={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new se(function(m,v){function w(){l.close(o);var k=l._deps.indexedDB.deleteDatabase(l.name);k.onsuccess=$e(function(){var N,P,I;N=l._deps,P=l.name,I=N.indexedDB,N=N.IDBKeyRange,kl(I)||P===lo||xl(I,N).delete(P).catch(be),m()}),k.onerror=dn(v),k.onblocked=l._fireOnBlocked}if(c)throw new B.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(w):w()})},Ve.prototype.backendDB=function(){return this.idbdb},Ve.prototype.isOpen=function(){return this.idbdb!==null},Ve.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Ve.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ve.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ve.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(l){return o._allTables[l]})},enumerable:!1,configurable:!0}),Ve.prototype.transaction=function(){var o=(function(l,c,f){var m=arguments.length;if(m<2)throw new B.InvalidArgument("Too few arguments");for(var v=new Array(m-1);--m;)v[m-1]=arguments[m];return f=v.pop(),[l,W(v),f]}).apply(this,arguments);return this._transaction.apply(this,o)},Ve.prototype._transaction=function(o,l,c){var f=this,m=ue.trans;m&&m.db===this&&o.indexOf("!")===-1||(m=null);var v,w,k=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(w=l.map(function(P){if(P=P instanceof f.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),o=="r"||o===dl)v=dl;else{if(o!="rw"&&o!=fl)throw new B.InvalidArgument("Invalid transaction mode: "+o);v=fl}if(m){if(m.mode===dl&&v===fl){if(!k)throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m=null}m&&w.forEach(function(P){if(m&&m.storeNames.indexOf(P)===-1){if(!k)throw new B.SubTransaction("Table "+P+" not included in parent transaction.");m=null}}),k&&m&&!m.active&&(m=null)}}catch(P){return m?m._promise(null,function(I,E){E(P)}):We(P)}var N=(function P(I,E,L,O,R){return se.resolve().then(function(){var $=ue.transless||ue,D=I._createTransaction(E,L,I._dbSchema,O);if(D.explicit=!0,$={trans:D,transless:$},O)D.idbtrans=O.idbtrans;else try{D.create(),D.idbtrans._explicit=!0,I._state.PR1398_maxLoop=3}catch(K){return K.name===un.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return P(I,E,L,null,R)})):We(K)}var U,z=Ne(R);return z&&Hr(),$=se.follow(function(){var K;(U=R.call(D,D))&&(z?(K=Dn.bind(null,null),U.then(K,K)):typeof U.next=="function"&&typeof U.throw=="function"&&(U=Tl(U)))},$),(U&&typeof U.then=="function"?se.resolve(U).then(function(K){return D.active?K:We(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$.then(function(){return U})).then(function(K){return O&&D._resolve(),D._completion.then(function(){return K})}).catch(function(K){return D._reject(K),We(K)})})}).bind(null,this,v,w,m,c);return m?m._promise(v,N,"lock"):ue.trans?yr(ue.transless,function(){return f._whenReady(N)}):this._whenReady(N)},Ve.prototype.table=function(o){if(!y(this._allTables,o))throw new B.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Ve);function Ve(o,l){var c=this;this._middlewares={},this.verno=0;var f=Ve.dependencies;this._options=l=r({addons:Ve.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var m,v,w,k,N,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};P.dbReadyPromise=new se(function(E){P.dbReadyResolve=E}),P.openCanceller=new se(function(E,L){P.cancelOpen=L}),this._state=P,this.name=o,this.on=Vi(this,"populate","blocked","versionchange","close",{ready:[nl,be]}),this.once=function(E,L){var O=function(){for(var R=[],$=0;$<arguments.length;$++)R[$]=arguments[$];c.on(E).unsubscribe(O),L.apply(c,R)};return c.on(E,O)},this.on.ready.subscribe=x(this.on.ready.subscribe,function(E){return function(L,O){Ve.vip(function(){var R,$=c._state;$.openComplete?($.dbOpenError||se.resolve().then(L),O&&E(L)):$.onReadyBeingFired?($.onReadyBeingFired.push(L),O&&E(L)):(E(L),R=c,O||E(function D(){R.on.ready.unsubscribe(L),R.on.ready.unsubscribe(D)}))})}}),this.Collection=(m=this,Hi(Jg.prototype,function(U,D){this.db=m;var O=Pd,R=null;if(D)try{O=D()}catch(z){R=z}var $=U._ctx,D=$.table,U=D.hook.reading.fire;this._ctx={table:D,index:$.index,isPrimKey:!$.index||D.schema.primKey.keyPath&&$.index===D.schema.primKey.name,range:O,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:R,or:$.or,valueMapper:U!==Rt?U:null}})),this.Table=(v=this,Hi(Dd.prototype,function(E,L,O){this.db=v,this._tx=O,this.name=E,this.schema=L,this.hook=v._allTables[E]?v._allTables[E].hook:Vi(null,{creating:[Fg,be],reading:[zg,Rt],updating:[Kg,be],deleting:[Bg,be]})})),this.Transaction=(w=this,Hi(Zg.prototype,function(E,L,O,R,$){var D=this;E!=="readonly"&&L.forEach(function(U){U=(U=O[U])===null||U===void 0?void 0:U.yProps,U&&(L=L.concat(U.map(function(z){return z.updatesTable})))}),this.db=w,this.mode=E,this.storeNames=L,this.schema=O,this.chromeTransactionDurability=R,this.idbtrans=null,this.on=Vi(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new se(function(U,z){D._resolve=U,D._reject=z}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(U){var z=D.active;return D.active=!1,D.on.error.fire(U),D.parent?D.parent._reject(U):z&&D.idbtrans&&D.idbtrans.abort(),We(U)})})),this.Version=(k=this,Hi(ov.prototype,function(E){this.db=k,this._cfg={version:E,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(N=this,Hi(Fd.prototype,function(E,L,O){if(this.db=N,this._ctx={table:E,index:L===":id"?null:L,or:O},this._cmp=this._ascending=xe,this._descending=function(R,$){return xe($,R)},this._max=function(R,$){return 0<xe(R,$)?R:$},this._min=function(R,$){return xe(R,$)<0?R:$},this._IDBKeyRange=N._deps.IDBKeyRange,!this._IDBKeyRange)throw new B.MissingAPI})),this.on("versionchange",function(E){0<E.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(E){!E.newVersion||E.newVersion<E.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(E.oldVersion/10))}),this._maxKey=Yi(l.IDBKeyRange),this._createTransaction=function(E,L,O,R){return new c.Transaction(E,L,O,c._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(E){c.on("blocked").fire(E),Gr.filter(function(L){return L.name===c.name&&L!==c&&!L._state.vcFired}).map(function(L){return L.on("versionchange").fire(E)})},this.use(cv),this.use(pv),this.use(dv),this.use(lv),this.use(uv);var I=new Proxy(this,{get:function(E,L,O){if(L==="_vip")return!0;if(L==="table")return function($){return So(c.table($),I)};var R=Reflect.get(E,L,O);return R instanceof Dd?So(R,I):L==="tables"?R.map(function($){return So($,I)}):L==="_createTransaction"?function(){return So(R.apply(this,arguments),I)}:R}});this.vip=I,f.forEach(function(E){return E(c)})}var Eo,Kt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mv=(Il.prototype.subscribe=function(o,l,c){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:l,complete:c})},Il.prototype[Kt]=function(){return this},Il);function Il(o){this._subscribe=o}try{Eo={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Eo={indexedDB:null,IDBKeyRange:null}}function nf(o){var l,c=!1,f=new mv(function(m){var v=Ne(o),w,k=!1,N={},P={},I={get closed(){return k},unsubscribe:function(){k||(k=!0,w&&w.abort(),E&&Un.storagemutated.unsubscribe(O))}};m.start&&m.start(I);var E=!1,L=function(){return cl(R)},O=function($){bo(N,$),jl(P,N)&&L()},R=function(){var $,D,U;!k&&Eo.indexedDB&&(N={},$={},w&&w.abort(),w=new AbortController,U=function(z){var K=Wr();try{v&&Hr();var q=In(o,z);return q=v?q.finally(Dn):q}finally{K&&Vr()}}(D={subscr:$,signal:w.signal,requery:L,querier:o,trans:null}),Promise.resolve(U).then(function(z){c=!0,l=z,k||D.signal.aborted||(N={},function(K){for(var q in K)if(y(K,q))return;return 1}(P=$)||E||(Un(Ji,O),E=!0),cl(function(){return!k&&m.next&&m.next(z)}))},function(z){c=!1,["DatabaseClosedError","AbortError"].includes(z==null?void 0:z.name)||k||cl(function(){k||m.error&&m.error(z)})}))};return setTimeout(L,0),I});return f.hasValue=function(){return c},f.getValue=function(){return l},f}var xr=bn;function Dl(o){var l=Mn;try{Mn=!0,Un.storagemutated.fire(o),Ol(o,!0)}finally{Mn=l}}_(xr,r(r({},qe),{delete:function(o){return new xr(o,{addons:[]}).delete()},exists:function(o){return new xr(o,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return l=xr.dependencies,c=l.indexedDB,l=l.IDBKeyRange,(kl(c)?Promise.resolve(c.databases()).then(function(f){return f.map(function(m){return m.name}).filter(function(m){return m!==lo})}):xl(c,l).toCollection().primaryKeys()).then(o)}catch{return We(new B.MissingAPI)}var l,c},defineClass:function(){return function(o){d(this,o)}},ignoreTransaction:function(o){return ue.trans?yr(ue.transless,o):o()},vip:Sl,async:function(o){return function(){try{var l=Tl(o.apply(this,arguments));return l&&typeof l.then=="function"?l:se.resolve(l)}catch(c){return We(c)}}},spawn:function(o,l,c){try{var f=Tl(o.apply(c,l||[]));return f&&typeof f.then=="function"?f:se.resolve(f)}catch(m){return We(m)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(o,l){return l=se.resolve(typeof o=="function"?xr.ignoreTransaction(o):o).timeout(l||6e4),ue.trans?ue.trans.waitFor(l):l},Promise:se,debug:{get:function(){return cn},set:function(o){Sd(o)}},derive:j,extend:d,props:_,override:x,Events:Vi,on:Un,liveQuery:nf,extendObservabilitySet:bo,getByKeyPath:V,setByKeyPath:F,delByKeyPath:function(o,l){typeof l=="string"?F(o,l,void 0):"length"in l&&[].map.call(l,function(c){F(o,c,void 0)})},shallowClone:ee,deepClone:ce,getObjectDiff:Pl,cmp:xe,asap:H,minKey:-1/0,addons:[],connections:Gr,errnames:un,dependencies:Eo,cache:br,semVer:"4.2.0",version:"4.2.0".split(".").map(function(o){return parseInt(o)}).reduce(function(o,l,c){return o+l/Math.pow(10,2*c)})})),xr.maxKey=Yi(xr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Un(Ji,function(o){Mn||(o=new CustomEvent(ml,{detail:o}),Mn=!0,dispatchEvent(o),Mn=!1)}),addEventListener(ml,function(o){o=o.detail,Mn||Dl(o)}));var Xr,Mn=!1,rf=function(){};return typeof BroadcastChannel<"u"&&((rf=function(){(Xr=new BroadcastChannel(ml)).onmessage=function(o){return o.data&&Dl(o.data)}})(),typeof Xr.unref=="function"&&Xr.unref(),Un(Ji,function(o){Mn||Xr.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!bn.disableBfCache&&o.persisted){cn&&console.debug("Dexie: handling persisted pagehide"),Xr!=null&&Xr.close();for(var l=0,c=Gr;l<c.length;l++)c[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!bn.disableBfCache&&o.persisted&&(cn&&console.debug("Dexie: handling persisted pageshow"),rf(),Dl({all:new ct(-1/0,[[]])}))})),se.rejectionMapper=function(o,l){return!o||o instanceof Pt||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Oe[o.name]?o:(l=new Oe[o.name](l||o.message,o),"stack"in o&&T(l,"stack",{get:function(){return this.inner.stack}}),l)},Sd(cn),r(bn,Object.freeze({__proto__:null,Dexie:bn,liveQuery:nf,Entity:Rd,cmp:xe,PropModification:Gi,replacePrefix:function(o,l){return new Gi({replacePrefix:[o,l]})},add:function(o){return new Gi({add:o})},remove:function(o){return new Gi({remove:o})},default:bn,RangeSet:ct,mergeRanges:es,rangesOverlap:Vd}),{default:bn}),bn})})(Ag);var tx=Ag.exports;const kc=Vh(tx),Lh=Symbol.for("Dexie"),$i=globalThis[Lh]||(globalThis[Lh]=kc);if(kc.semVer!==$i.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${kc.semVer} and ${$i.semVer}`);const{liveQuery:Qx,mergeRanges:Jx,rangesOverlap:Yx,RangeSet:Xx,cmp:Zx,Entity:ek,PropModification:tk,replacePrefix:nk,add:rk,remove:ik,DexieYProvider:sk}=$i;class nx extends $i{constructor(){super("gestor-reparaciones"),this.version(1).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",componentes:"id, tipo, nombre",equivalencias:"id, origen, sustituto"}),this.version(2).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"}),this.version(3).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada, cliente, telefono, equipo",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"})}}const ae=new nx;window.db=ae;const Sc="2f647c2d-8b01-447a-8959-1e35520937a6";let Ig="idle";function oi(t,e){const n="sync-toast";let r=document.getElementById(n);r||(r=document.createElement("div"),r.id=n,r.style.position="fixed",r.style.bottom="8px",r.style.right="8px",r.style.zIndex="9999",r.style.padding="6px 10px",r.style.borderRadius="8px",r.style.fontSize="12px",r.style.background="#1e293b",r.style.color="white",r.style.opacity="0.9",document.body.appendChild(r));const i=t==="push"?"Subida (Push)":t==="pull"?"Descarga (Pull)":"Sin cambios";r.textContent=`ltima sincronizacin: ${e.toLocaleString()} [${i}]`}function rx(){return Ig}const sa=[];function ix(t){return sa.push(t),()=>{const e=sa.indexOf(t);e!==-1&&sa.splice(e,1)}}function Vt(t){Ig=t,sa.forEach(e=>e(t))}async function Dg(){Vt("syncing"),console.log(" Sincronizacin manual forzada...");try{await sx(),await ox(!0),Vt("ok")}catch(t){throw console.error(" Error en sincronizacin forzada:",t),Vt("error"),t}}async function sx(){var t;try{Vt("syncing"),console.log(" Evaluando si es necesario subir a Supabase...");const e=await ae.clientes.toArray(),n=await ae.equipos.toArray(),r=await ae.ordenes.toArray(),i=await ae.adjuntos.toArray();console.log(` Preparando backup local: ${e.length} clientes, ${n.length} equipos, ${r.length} rdenes`);const{data:s,error:a}=await vn.from("backups").select("payload, fecha").eq("id",Sc).single();if(a&&a.code!=="PGRST116")throw a;const u=s==null?void 0:s.payload,d=((t=u==null?void 0:u.ordenes)==null?void 0:t.length)||0,p=s!=null&&s.fecha?new Date(s.fecha):null,g=new Date(Math.max(...r.map(C=>new Date(C.actualizada||C.creada||0).getTime()),Date.now()));if(d>r.length){console.warn(` Evitado: la base local (${r.length}) tiene menos rdenes que la remota (${d}). No se sube.`),Vt("ok");return}if(p&&p>g){console.warn(" Evitado: el backup remoto es ms reciente. No se sube nada."),Vt("ok");return}console.log(" Subiendo backup ms reciente a Supabase...");const y={clientes:e,equipos:n,ordenes:r,adjuntos:i,fecha:new Date().toISOString()},{error:_}=await vn.from("backups").upsert([{id:Sc,fecha:new Date().toISOString(),payload:y}],{onConflict:"id"});if(_)throw _;console.log(" Backup subido correctamente."),Vt("ok")}catch(e){console.error(" Error en syncPush:",e.message),Vt("error")}}async function ox(t=!1){try{Vt("syncing"),console.log(" Descargando backup desde Supabase...");const{data:e,error:n}=await vn.from("backups").select("payload, fecha").eq("id",Sc).single();if(n&&n.code!=="PGRST116")throw n;const r=e==null?void 0:e.payload,i=e!=null&&e.fecha?new Date(e.fecha):null;if(!r){console.log(" No se encontr backup vlido en Supabase."),Vt("ok");return}const s=await ae.ordenes.count(),a=await ae.ordenes.orderBy("actualizada").last(),u=a?new Date(a.actualizada||a.creada):new Date(0),d=i&&u?i.getTime()-u.getTime():0,p=d>5e3;if(s===0||t||p){console.log(` Restaurando backup remoto. Causa: ${s===0?"Local vaco":t?"Sincronizacin forzada":`Remoto ms reciente (+${Math.round(d/1e3)}s)`}`);const{clientes:g,equipos:y,ordenes:_,adjuntos:C}=r;await ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.adjuntos,async()=>{await ae.clientes.clear(),await ae.equipos.clear(),await ae.ordenes.clear(),await ae.adjuntos.clear(),await ae.clientes.bulkAdd(g||[]),await ae.equipos.bulkAdd(y||[]),await ae.ordenes.bulkAdd(_||[]),await ae.adjuntos.bulkAdd(C||[])}),console.log(" Datos restaurados desde Supabase."),oi==null||oi("pull",new Date)}else console.log("Datos locales ms recientes o iguales. No se realiza pull."),oi==null||oi("skip",new Date);Vt("ok")}catch(e){console.error(" Error en syncPull:",e.message),Vt("error")}}window.forceSync=Dg;const Uh=[{tab:"registro",label:"Registro",icon:Q0},{tab:"ordenes",label:"rdenes",icon:sw},{tab:"presupuesto",label:"Presupuesto",icon:Y0},{tab:"reparacion",label:"Reparacin",icon:ww},{tab:"historial",label:"Historial",icon:dw},{tab:"informes",label:"Informes",icon:ag},{tab:"componentes",label:"Componentes",icon:dc}];function ax({tab:t,onTab:e,children:n}){const[r,i]=Y.useState(()=>localStorage.getItem("gr_dark")==="1"),[s,a]=Y.useState(rx());return Y.useEffect(()=>{ix(d=>a(d))},[]),Y.useEffect(()=>{const u=document.documentElement;localStorage.setItem("gr_dark",r?"1":"0"),r?u.classList.add("dark"):u.classList.remove("dark")},[r]),h.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-[240px_1fr] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[h.jsxs("aside",{className:"hidden lg:flex lg:flex-col gap-2 border-r border-neutral-200 dark:border-neutral-800 p-4 sticky top-0 h-screen",children:[h.jsx("h1",{className:"text-xl font-bold p-2 mb-4",children:"Gestor de Reparaciones"}),Uh.map(u=>h.jsx(lx,{icon:u.icon,label:u.label,active:t===u.tab,onClick:()=>e(u.tab)},u.tab)),h.jsxs("div",{className:"mt-auto pt-4 border-t border-neutral-200 dark:border-neutral-800 flex flex-col gap-2",children:[h.jsxs("p",{className:"text-xs opacity-70",children:["Sincronizacin: ",s]}),h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("p",{className:"text-sm font-semibold",children:"Tema"}),h.jsx("button",{title:"Tema",className:"btn btn-ghost",onClick:()=>i(u=>!u),children:r?h.jsx(gh,{className:"size-5"}):h.jsx(mh,{className:"size-5"})})]})]})]}),h.jsxs("div",{className:"flex flex-col h-screen overflow-y-auto",children:[h.jsxs("header",{className:"sticky top-0 z-10 bg-white dark:bg-neutral-950 border-b border-neutral-200 dark:border-neutral-800",children:[h.jsx("div",{className:"max-w-6xl mx-auto p-2 lg:p-0",children:h.jsxs("div",{className:"flex gap-2 p-2 overflow-x-auto lg:hidden justify-between",children:[Uh.map(u=>h.jsx("button",{className:`tab ${t===u.tab?"tab-active":""}`,onClick:()=>e(u.tab),children:u.label},u.tab)),h.jsx("button",{title:"Tema",className:"btn btn-ghost flex-shrink-0",onClick:()=>i(u=>!u),children:r?h.jsx(gh,{className:"size-4"}):h.jsx(mh,{className:"size-4"})})]})}),h.jsxs("div",{className:"lg:hidden p-2 text-center text-xs opacity-70 border-t border-neutral-200 dark:border-neutral-800",children:["Sincronizacin: ",s]})]}),h.jsx("main",{className:"max-w-6xl w-full mx-auto p-4 overflow-y-auto flex-grow",children:h.jsx("div",{className:"grid gap-4",children:n})})]})]})}function lx({icon:t,label:e,active:n,onClick:r}){return h.jsxs("button",{onClick:r,className:`flex items-center gap-2 rounded-lg px-3 py-2 transition-colors duration-150 ${n?"bg-primary-100 text-primary-700 dark:bg-primary-800 dark:text-primary-100":"text-neutral-600 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-neutral-800"}`,children:[h.jsx(t,{className:"size-5"}),h.jsx("span",{children:e})]})}function ux(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=Vn.useRef({hasResult:!1,result:i,error:null}),a=Vn.useReducer(function(p){return p+1},0);a[0];var u=a[1],d=Vn.useMemo(function(){var p=typeof t=="function"?t():t;if(!p||typeof p.subscribe!="function")throw t===p?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof p.hasValue!="function"||p.hasValue()))if(typeof p.getValue=="function")s.current.result=p.getValue(),s.current.hasResult=!0;else{var g=p.subscribe(function(y){s.current.result=y,s.current.hasResult=!0});typeof g=="function"?g():g.unsubscribe()}return p},r);if(Vn.useDebugValue(s.current.result),Vn.useEffect(function(){var p=d.subscribe(function(g){var y=s.current;(y.error!==null||y.result!==g)&&(y.error=null,y.result=g,y.hasResult=!0,u())},function(g){var y=s.current;y.error!==g&&(y.error=g,u())});return typeof p=="function"?p:p.unsubscribe.bind(p)},r),s.current.error)throw s.current.error;return s.current.result}function lr(t,e,n){return ux(function(){return $i.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=$i.DexieYProvider;e&&e.release(t)});function cx(t,e,n){const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}async function dx(){return new Promise(t=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r;const n=(r=e.files)==null?void 0:r[0];if(!n)return t(null);try{const i=JSON.parse(await n.text());t(i)}catch{t(null)}},e.click()})}function fx({onOpen:t}){const[e,n]=Y.useState(""),[r,i]=Y.useState("todos"),[s,a]=Y.useState(""),[u,d]=Y.useState(""),[p,g]=Y.useState(null),[y,_]=Y.useState(!1),[C,T]=Y.useState(null),[j,A]=Y.useState({}),S=lr(async()=>(await ae.ordenes.toArray()).map(ie=>({id:ie.id,codigo:ie.codigo??"",estado:ie.estado??"",cliente:ie.cliente??"",telefono:ie.telefono??"",equipo:ie.equipo??"",aparato:ie.aparato??"",marca:ie.marca??"",modelo:ie.modelo??"",numeroSerie:ie.numeroSerie??"",descripcion:ie.descripcion??"",creada:ie.creada,actualizada:ie.actualizada})),[]),b=Y.useMemo(()=>{if(!S)return[];const W={};S.forEach(ce=>{const je=`${ce.cliente}-${ce.telefono}`;W[je]||(W[je]={clienteKey:je,nombre:ce.cliente,telefono:ce.telefono,totalOrdenes:0,ordenes:[]}),W[je].ordenes.push(ce),W[je].totalOrdenes++});const ie=e.trim().toLowerCase(),pe=Object.values(W).map(ce=>{const je=ce.ordenes.filter(Re=>{const lt=r==="todos"||Re.estado===r,an=!s||new Date(Re.creada).getTime()>=new Date(s).getTime(),te=!u||new Date(Re.creada).getTime()<new Date(u).getTime()+864e5,de=(Re.aparato||Re.equipo||"").toLowerCase(),fe=!ie||(Re.cliente||"").toLowerCase().includes(ie)||(Re.telefono||"").includes(ie)||de.includes(ie)||(Re.codigo||"").toLowerCase().includes(ie);return lt&&an&&te&&fe}).sort((Re,lt)=>new Date(Re.creada).getTime()-new Date(lt.creada).getTime());return{...ce,ordenes:je,totalOrdenes:je.length}}).filter(ce=>ce.totalOrdenes>0);return pe.sort((ce,je)=>{const Re=ce.ordenes.length?new Date(ce.ordenes[0].creada).getTime():Number.MAX_SAFE_INTEGER,lt=je.ordenes.length?new Date(je.ordenes[0].creada).getTime():Number.MAX_SAFE_INTEGER;return Re-lt}),pe},[S,e,r,s,u]);async function x(W){window.confirm("Eliminar esta orden definitivamente?")&&await ae.ordenes.delete(W)}async function M(){if(!S)return;const W=JSON.stringify(S,null,2);cx(W,`ordenes_backup_${new Date().toISOString().split("T")[0]}.json`,"application/json")}async function H(){if(!window.confirm(" Esto reemplazar todas las rdenes locales. Continuar?"))return;const W=await dx();if(!Array.isArray(W))return alert("Archivo no vlido.");await ae.transaction("rw",ae.ordenes,async()=>{await ae.ordenes.clear(),await ae.ordenes.bulkAdd(W)}),alert(" Importacin completada. Recarga la pgina."),window.location.reload()}async function V(){_(!0),await Dg(),_(!1)}function F(W){T(W.id),A({cliente:W.cliente,telefono:W.telefono,aparato:W.aparato,marca:W.marca,modelo:W.modelo,numeroSerie:W.numeroSerie,descripcion:W.descripcion,estado:W.estado})}function ee(){T(null),A({})}async function ye(W){await ae.ordenes.update(W,{cliente:j.cliente??"",telefono:j.telefono??"",aparato:j.aparato??"",marca:j.marca??"",modelo:j.modelo??"",numeroSerie:j.numeroSerie??"",descripcion:j.descripcion??"",estado:j.estado??"",actualizada:new Date().toISOString()}),alert(" Cambios guardados"),ee()}return h.jsxs("section",{className:"grid gap-4",children:[h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid gap-4",children:[h.jsxs("div",{className:"grid sm:grid-cols-4 gap-3",children:[h.jsxs("label",{className:"sm:col-span-2",children:[h.jsx("span",{className:"text-sm text-neutral-500",children:"Buscar (Cliente, Telfono, Aparato)"}),h.jsx("input",{className:"input w-full",value:e,onChange:W=>n(W.target.value),placeholder:"Escribe para filtrar..."})]}),h.jsxs("label",{children:[h.jsx("span",{className:"text-sm text-neutral-500",children:"Estado"}),h.jsxs("select",{className:"input w-full",value:r,onChange:W=>i(W.target.value),children:[h.jsx("option",{value:"todos",children:"Todos"}),h.jsx("option",{value:"recepcion",children:"Recepcin"}),h.jsx("option",{value:"diagnostico",children:"Diagnstico"}),h.jsx("option",{value:"presupuesto",children:"Presupuesto"}),h.jsx("option",{value:"reparacion",children:"Reparacin"}),h.jsx("option",{value:"listo",children:"Listo"}),h.jsx("option",{value:"entregado",children:"Entregado"})]})]})]}),h.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[h.jsxs("button",{className:"btn",onClick:M,children:[h.jsx(uw,{className:"size-4 mr-1"})," Exportar JSON"]}),h.jsxs("button",{className:"btn",onClick:H,children:[h.jsx(vw,{className:"size-4 mr-1"})," Importar JSON"]}),h.jsx("button",{className:"btn btn-secondary",onClick:V,disabled:y,children:y?"Sincronizando...":"Sincronizar"})]})]})}),h.jsx("div",{className:"card overflow-x-auto",children:h.jsxs("table",{className:"table-auto w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[h.jsx("th",{className:"p-2 text-left w-10"}),h.jsx("th",{className:"p-2 text-left",children:"Cliente"}),h.jsx("th",{className:"p-2 text-left",children:"Telfono"}),h.jsx("th",{className:"p-2 text-left",children:"rdenes"}),h.jsx("th",{className:"p-2 text-left",children:"ltima Act."}),h.jsx("th",{className:"p-2 text-left",children:"Acciones"})]})}),h.jsx("tbody",{children:b.map(W=>h.jsxs(Vn.Fragment,{children:[h.jsxs("tr",{className:"bg-neutral-50 dark:bg-neutral-700 font-semibold cursor-pointer border-y hover:bg-neutral-100 dark:hover:bg-neutral-600",onClick:()=>g(p===W.clienteKey?null:W.clienteKey),children:[h.jsx("td",{className:"py-2 px-3",children:p===W.clienteKey?h.jsx(Z0,{className:"size-4"}):h.jsx(tw,{className:"size-4"})}),h.jsx("td",{className:"py-2 pr-3",children:W.nombre||"Sin nombre"}),h.jsx("td",{className:"py-2 pr-3",children:W.telefono}),h.jsxs("td",{className:"py-2 pr-3",children:[W.totalOrdenes," rdenes"]}),h.jsx("td",{className:"py-2 pr-3",children:new Date(W.ordenes[0].actualizada).toLocaleString()}),h.jsx("td",{className:"py-2 pr-3"})]}),p===W.clienteKey&&h.jsx("tr",{children:h.jsx("td",{colSpan:6,className:"p-0",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-50 dark:bg-neutral-800 text-xs text-neutral-500 border-b",children:[h.jsx("th",{className:"py-2 pl-8 text-left",children:"Cdigo"}),h.jsx("th",{className:"py-2 text-left",children:"Equipo"}),h.jsx("th",{className:"py-2 text-left",children:"Estado"}),h.jsx("th",{className:"py-2 text-left",children:"Actualizada"}),h.jsx("th",{className:"py-2 text-left w-48",children:"Accin"})]})}),h.jsx("tbody",{children:W.ordenes.map(ie=>h.jsxs(Vn.Fragment,{children:[h.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[h.jsx("td",{className:"py-2 pl-8",children:ie.codigo}),h.jsxs("td",{className:"py-2",children:[ie.aparato||ie.equipo||"Sin equipo",h.jsxs("div",{className:"text-xs text-neutral-500",children:[ie.marca&&h.jsxs("div",{children:[h.jsx("b",{children:"Marca:"})," ",ie.marca]}),ie.modelo&&h.jsxs("div",{children:[h.jsx("b",{children:"Modelo:"})," ",ie.modelo]}),ie.numeroSerie&&h.jsxs("div",{children:[h.jsx("b",{children:"Serie:"})," ",ie.numeroSerie]}),ie.descripcion&&h.jsxs("div",{children:[h.jsx("b",{children:"Descripcin:"})," ",ie.descripcion]})]})]}),h.jsx("td",{className:"py-2",children:ie.estado}),h.jsx("td",{className:"py-2",children:new Date(ie.actualizada).toLocaleString()}),h.jsxs("td",{className:"py-2 flex gap-2",children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>t(ie.id),children:"Abrir"}),h.jsx("button",{className:"btn btn-secondary",onClick:()=>F(ie),children:"Editar"}),h.jsx("button",{className:"btn btn-danger",onClick:()=>x(ie.id),children:"Eliminar"})]})]}),C===ie.id&&h.jsx("tr",{className:"bg-neutral-100 dark:bg-neutral-800 border-t",children:h.jsxs("td",{colSpan:5,className:"p-4",children:[h.jsxs("div",{className:"grid sm:grid-cols-2 gap-2",children:[h.jsx("input",{className:"input w-full",placeholder:"Cliente",value:j.cliente??"",onChange:pe=>A(ce=>({...ce,cliente:pe.target.value}))}),h.jsx("input",{className:"input w-full",placeholder:"Telfono",value:j.telefono??"",onChange:pe=>A(ce=>({...ce,telefono:pe.target.value}))}),h.jsx("input",{className:"input w-full",placeholder:"Aparato",value:j.aparato??"",onChange:pe=>A(ce=>({...ce,aparato:pe.target.value}))}),h.jsx("input",{className:"input w-full",placeholder:"Marca",value:j.marca??"",onChange:pe=>A(ce=>({...ce,marca:pe.target.value}))}),h.jsx("input",{className:"input w-full",placeholder:"Modelo",value:j.modelo??"",onChange:pe=>A(ce=>({...ce,modelo:pe.target.value}))}),h.jsx("input",{className:"input w-full",placeholder:"Nmero de serie",value:j.numeroSerie??"",onChange:pe=>A(ce=>({...ce,numeroSerie:pe.target.value}))}),h.jsx("textarea",{className:"input w-full",placeholder:"Descripcin",value:j.descripcion??"",onChange:pe=>A(ce=>({...ce,descripcion:pe.target.value}))}),h.jsxs("select",{className:"input w-full",value:j.estado??ie.estado,onChange:pe=>A(ce=>({...ce,estado:pe.target.value})),children:[h.jsx("option",{value:"recepcion",children:"Recepcin"}),h.jsx("option",{value:"diagnostico",children:"Diagnstico"}),h.jsx("option",{value:"presupuesto",children:"Presupuesto"}),h.jsx("option",{value:"reparacion",children:"Reparacin"}),h.jsx("option",{value:"listo",children:"Listo"}),h.jsx("option",{value:"entregado",children:"Entregado"})]})]}),h.jsxs("div",{className:"flex gap-2 mt-3",children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>ye(ie.id),children:"Guardar cambios"}),h.jsx("button",{className:"btn btn-secondary",onClick:ee,children:"Cancelar"})]})]})})]},ie.id))})]})})})]},W.clienteKey))})]})})]})}const it=[];for(let t=0;t<256;++t)it.push((t+256).toString(16).slice(1));function hx(t,e=0){return(it[t[e+0]]+it[t[e+1]]+it[t[e+2]]+it[t[e+3]]+"-"+it[t[e+4]]+it[t[e+5]]+"-"+it[t[e+6]]+it[t[e+7]]+"-"+it[t[e+8]]+it[t[e+9]]+"-"+it[t[e+10]]+it[t[e+11]]+it[t[e+12]]+it[t[e+13]]+it[t[e+14]]+it[t[e+15]]).toLowerCase()}let vu;const px=new Uint8Array(16);function mx(){if(!vu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vu=crypto.getRandomValues.bind(crypto)}return vu(px)}const gx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Mh={randomUUID:gx};function vx(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??mx();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hx(r)}function Ut(t,e,n){return Mh.randomUUID&&!t?Mh.randomUUID():vx(t)}function $g(t=Date.now()){return"ORD-"+t}async function Lg(t){const e=new Date().toISOString();let n;if(t.id){if(await ae.clientes.update(t.id,{nombre:t.nombre,telefono:t.telefono,email:t.email||null}),n=await ae.clientes.get(t.id),!n)throw new Error(`Error: Cliente con ID ${t.id} no encontrado para actualizar.`)}else n={id:Ut(),nombre:t.nombre,telefono:t.telefono,email:t.email||null,fecha_alta:e},await ae.clientes.add(n);return n}async function yx(t){const e=new Date().toISOString();return ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.eventos,async()=>{const n=await Lg(t.cliente),r={id:Ut(),clienteId:n.id,categoria:t.equipo.categoria,marca:t.equipo.marca,modelo:t.equipo.modelo,numeroSerie:t.equipo.numeroSerie,descripcion:t.equipo.descripcion,fecha_recepcion:e},i={id:Ut(),codigo:$g(),equipoId:r.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${r.marca} ${r.modelo}`},s={id:Ut(),ordenId:i.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e};return await ae.equipos.add(r),await ae.ordenes.add(i),await ae.eventos.add(s),{cliente:n,equipo:r,orden:i}})}async function wx(t){const e=new Date().toISOString();return ae.transaction("rw",ae.clientes,ae.equipos,ae.ordenes,ae.eventos,async()=>{const n=await Lg(t.cliente),r=t.equipos.map(u=>({id:Ut(),clienteId:n.id,categoria:u.categoria,marca:u.marca,modelo:u.modelo,numeroSerie:u.numeroSerie,descripcion:u.descripcion,fecha_recepcion:e})),i=r.map(u=>({id:Ut(),codigo:$g(),equipoId:u.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${u.marca} ${u.modelo}`})),s=i.map(u=>({id:Ut(),ordenId:u.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e}));return await ae.equipos.bulkAdd(r),await ae.ordenes.bulkAdd(i),await ae.eventos.bulkAdd(s),{resultados:i.map((u,d)=>({cliente:n,equipo:r[d],orden:u}))}})}function Bn({label:t,children:e}){return h.jsxs("label",{className:"grid gap-1",children:[h.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function _x({onCreated:t}){const[e,n]=Y.useState({nombre:"",telefono:"",email:""}),[r,i]=Y.useState([{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}]),[s,a]=Y.useState([]),u=lr(()=>ae.clientes.toArray(),[])||[];function d(j){if(n({...e,nombre:j}),j.length>2){const A=u.filter(S=>S.nombre.toLowerCase().includes(j.toLowerCase()));a(A)}else a([])}function p(j){n({nombre:j.nombre,telefono:j.telefono,email:j.email||""}),a([])}const g=!!e.nombre&&!!e.telefono&&r.every(j=>j.marca&&j.modelo&&j.descripcion&&j.aparato);function y(j,A){i(S=>S.map((b,x)=>x===j?{...b,...A}:b))}function _(){i(j=>[...j,{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}])}function C(j){i(A=>A.length>1?A.filter((S,b)=>b!==j):A)}async function T(){if(!g)return;const j={nombre:e.nombre,telefono:e.telefono,email:e.email||void 0};if(r.length===1){const{id:A}=await yx({cliente:j,equipo:r[0]});t(A)}else{const{ids:A}=await wx({cliente:j,equipos:r});A.length>0&&t(A[0])}}return h.jsx("section",{className:"grid gap-4",children:h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid gap-4",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Datos del Cliente"}),h.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Bn,{label:"Nombre completo*",children:h.jsx("input",{className:"input",value:e.nombre,onChange:j=>d(j.target.value)})}),s.length>0&&h.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded-b-lg shadow-lg max-h-48 overflow-y-auto",children:s.map(j=>h.jsxs("button",{className:"w-full text-left p-2 hover:bg-neutral-100 dark:hover:bg-neutral-700 text-sm border-b dark:border-neutral-700",onClick:()=>p(j),children:[j.nombre," (",j.telefono,")"]},j.id))})]}),h.jsx(Bn,{label:"Telfono*",children:h.jsx("input",{type:"tel",className:"input",value:e.telefono,onChange:j=>n({...e,telefono:j.target.value})})}),h.jsx(Bn,{label:"Email",children:h.jsx("input",{type:"email",className:"input",value:e.email,onChange:j=>n({...e,email:j.target.value})})})]}),h.jsx("hr",{className:"my-2"}),h.jsxs("h2",{className:"text-lg font-semibold",children:["Datos del Equipo (",r.length,")"]}),h.jsxs("div",{className:"grid gap-4",children:[r.map((j,A)=>h.jsx("div",{className:"card border-primary-500/50 border shadow-lg",children:h.jsxs("div",{className:"card-body grid gap-3",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("h3",{className:"text-md font-semibold",children:["Equipo ",A+1]}),r.length>1&&h.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>C(A),children:"Eliminar Equipo"})]}),h.jsxs("div",{className:"grid sm:grid-cols-4 gap-3",children:[h.jsx(Bn,{label:"Aparato*",children:h.jsx("input",{className:"input",value:j.aparato,onChange:S=>y(A,{aparato:S.target.value}),placeholder:"Ejemplo: Sierra, Porttil, Mvil..."})}),h.jsx(Bn,{label:"Marca*",children:h.jsx("input",{className:"input",value:j.marca,onChange:S=>y(A,{marca:S.target.value})})}),h.jsx(Bn,{label:"Modelo*",children:h.jsx("input",{className:"input",value:j.modelo,onChange:S=>y(A,{modelo:S.target.value})})}),h.jsx(Bn,{label:"N de serie",children:h.jsx("input",{className:"input",value:j.numeroSerie,onChange:S=>y(A,{numeroSerie:S.target.value})})})]}),h.jsx(Bn,{label:"Dao inicial*",children:h.jsx("textarea",{className:"input min-h-28",value:j.descripcion,onChange:S=>y(A,{descripcion:S.target.value})})})]})},A)),h.jsx("div",{children:h.jsx("button",{className:"btn",onClick:_,children:"Aadir otro equipo"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"btn btn-primary",disabled:!g,onClick:T,children:"Crear orden(es)"}),h.jsx("button",{className:"btn",onClick:()=>{n({nombre:"",telefono:"",email:""}),i([{aparato:"",marca:"",modelo:"",numeroSerie:"",descripcion:""}])},children:"Limpiar"})]})]})})})}function bx({orden:t,onNavigateToBudget:e}){const n=t.horasReparacion??0,r=t.tarifa??25,a=(t.piezas||[]).reduce((d,p)=>d+(p.precio||0),0)*1.15,u=n*r;return h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid gap-3",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Resumen de Presupuesto"}),h.jsxs("div",{className:"grid sm:grid-cols-4 gap-3 items-end",children:[h.jsxs("div",{className:"text-sm",children:["Horas: ",h.jsx("b",{children:n})]}),h.jsxs("div",{className:"text-sm",children:["Mano de Obra: ",h.jsxs("b",{children:[u.toFixed(2)," "]})]}),h.jsxs("div",{className:"text-sm",children:["Coste Piezas (+15%): ",h.jsxs("b",{children:[a.toFixed(2)," "]})]}),h.jsxs("div",{className:"text-lg font-bold p-2 bg-indigo-100 text-indigo-800 rounded-lg",children:["Total:"," ",(t.presupuestoAprox??u+a).toFixed(2)," "]})]}),h.jsx("button",{className:"btn btn-primary w-full mt-2",onClick:e,children:" Ir a Presupuesto"})]})})}const xx=[{id:"recepcion",label:"Recepcin"},{id:"diagnostico",label:"Diagnstico"},{id:"presupuesto",label:"Presupuesto"},{id:"reparacion",label:"Reparacin"},{id:"listo",label:"Listo"},{id:"entregado",label:"Entregado"}];function kx({ordenId:t,onNavigateToBudget:e}){const[n,r]=Y.useState(null),[i,s]=Y.useState([]),[a,u]=Y.useState(null),[d,p]=Y.useState(""),[g,y]=Y.useState(""),[_,C]=Y.useState(!1),[T,j]=Y.useState(null),A=lr(()=>t?ae.ordenes.get(t):Promise.resolve(void 0),[t]);Y.useEffect(()=>{A&&A.equipoId&&ae.equipos.get(A.equipoId).then(F=>{F&&j(F)})},[A]),Y.useEffect(()=>{A&&(p(A.trabajoRealizado||""),y(A.ubicacion||""))},[A]),Y.useEffect(()=>{t&&(async()=>{const{data:F}=await vn.storage.from("adjuntos").list(t);s(F||[])})()},[t]),Y.useEffect(()=>{if(!A)return;const F=setTimeout(async()=>{(d!==A.trabajoRealizado||g!==A.ubicacion)&&(C(!0),await ae.ordenes.update(t,{trabajoRealizado:d,ubicacion:g,actualizada:new Date().toISOString()}),C(!1),r(" Guardado automtico."))},1200);return()=>clearTimeout(F)},[d,g]);async function S(F){await ae.ordenes.update(t,{estado:F,actualizada:new Date().toISOString()}),r(`Estado actualizado: ${F}`)}async function b(){a!=null&&a.length&&(await Promise.all(a.map(F=>vn.storage.from("adjuntos").upload(`${t}/${F.name}`,F))),await ae.ordenes.update(t,{archivos:[...(A==null?void 0:A.archivos)||[],...a.map(F=>F.name)]}),r(`Subidos ${a.length} archivo(s).`),u(null))}async function x(F){await vn.storage.from("adjuntos").remove([`${t}/${F}`]);const ee=((A==null?void 0:A.archivos)||[]).filter(ye=>ye!==F);await ae.ordenes.update(t,{archivos:ee}),r(`Adjunto eliminado: ${F}`)}async function M(){if(!A)return;const F=typeof A.cliente=="object"?A.cliente.nombre:A.cliente,ee=window.open("","_blank","width=240,height=350");ee&&(ee.document.write(`
        <html>
        <body style="font-family: monospace; font-size:11px; margin:8px; line-height:1.3;">
          <div style="text-align:center;">
            <h4 style="margin:4px 0;"> ENTRADA TALLER</h4>
            <hr style="border:0;border-top:1px dashed #000;margin:4px 0;"/>
          </div>
          <p><b>ORDEN:</b> ${A.codigo}</p>
          <p><b>CLIENTE:</b> ${F}</p>
          <p><b>EQUIPO:</b> ${typeof A.equipo=="object"?A.equipo.aparato||"":A.equipo}</p>
          <p><b>UBICACIN:</b> ${g||""}</p>
          <p><b>FECHA:</b> ${new Date(A.creada).toLocaleDateString()}</p>
          <hr style="border:0;border-top:1px dashed #000;margin:6px 0;"/>
          <p style="text-align:center;">BricoFrank Reparaciones</p>
          <script>
            window.print();
            setTimeout(()=>window.close(),500);
          <\/script>
        </body>
        </html>
      `),ee.document.close()),await ae.ordenes.update(t,{ultimaImpresion:new Date().toISOString(),actualizada:new Date().toISOString()}),r(" Etiqueta impresa y registrada.")}if(!A)return h.jsx("p",{className:"text-sm opacity-70",children:"Cargando detalles..."});const H=typeof A.cliente=="object"?A.cliente:{nombre:A.cliente||"",telefono:A.telefono||""},V=typeof A.equipo=="object"?{aparato:A.equipo.aparato||(T==null?void 0:T.aparato)||"",marca:A.equipo.marca||(T==null?void 0:T.marca)||"",modelo:A.equipo.modelo||(T==null?void 0:T.modelo)||"",numeroSerie:A.equipo.numeroSerie||(T==null?void 0:T.numeroSerie)||"",descripcion:A.equipo.descripcion||(T==null?void 0:T.descripcion)||""}:{aparato:A.equipo||(T==null?void 0:T.aparato)||"",marca:(T==null?void 0:T.marca)||"",modelo:(T==null?void 0:T.modelo)||"",numeroSerie:(T==null?void 0:T.numeroSerie)||"",descripcion:(T==null?void 0:T.descripcion)||""};return h.jsxs("section",{className:"grid gap-4",children:[h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:["Cliente"," ",_&&h.jsx("span",{className:"text-xs text-yellow-600",children:" Guardando..."}),!_&&(n==null?void 0:n.includes("Guardado"))&&h.jsx("span",{className:"text-xs text-green-600",children:" Guardado"})]}),h.jsxs("p",{children:[h.jsx("b",{children:"Nombre:"})," ",H.nombre]}),h.jsxs("p",{children:[h.jsx("b",{children:"Telfono:"})," ",H.telefono]}),"email"in H&&H.email&&h.jsxs("p",{children:[h.jsx("b",{children:"Email:"})," ",H.email]}),h.jsxs("p",{children:[h.jsx("b",{children:"Creada:"})," ",new Date(A.creada).toLocaleString()]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Equipo"}),h.jsxs("p",{children:[h.jsx("b",{children:"Aparato:"})," ",V.aparato]}),h.jsxs("p",{children:[h.jsx("b",{children:"Marca:"})," ",V.marca]}),h.jsxs("p",{children:[h.jsx("b",{children:"Modelo:"})," ",V.modelo]}),h.jsxs("p",{children:[h.jsx("b",{children:"N de serie:"})," ",V.numeroSerie]}),h.jsxs("p",{children:[h.jsx("b",{children:"Descripcin:"})," ",V.descripcion]})]})]})}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Ubicacin fsica"}),h.jsx("input",{type:"text",className:"input w-full",value:g,placeholder:"Ejemplo: Estantera A3 / Caja 7",onChange:F=>y(F.target.value)}),h.jsx("button",{className:"btn btn-secondary mt-3",onClick:M,children:" Imprimir etiqueta"}),A.ultimaImpresion&&h.jsxs("p",{className:"text-xs opacity-70 mt-2",children:["ltima impresin:"," ",new Date(A.ultimaImpresion).toLocaleString()]})]})}),h.jsx(bx,{orden:A,onNavigateToBudget:e}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsxs("h2",{className:"text-lg font-semibold mb-2",children:["Estado actual: ",h.jsx("b",{children:A.estado})]}),h.jsx("select",{className:"input",value:A.estado,onChange:F=>S(F.target.value),children:xx.map(F=>h.jsx("option",{value:F.id,children:F.label},F.id))})]})}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Trabajo realizado"}),h.jsx("textarea",{className:"input min-h-32",value:d,onChange:F=>p(F.target.value)})]})}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Adjuntos"}),h.jsx("input",{type:"file",multiple:!0,onChange:F=>u(F.target.files?Array.from(F.target.files):null)}),h.jsx("button",{className:"btn btn-primary mt-2",onClick:b,children:"Subir"}),i.length>0&&h.jsx("div",{className:"mt-4 grid sm:grid-cols-3 gap-2",children:i.map(F=>h.jsxs("div",{className:"border p-2 rounded",children:[h.jsx("a",{href:vn.storage.from("adjuntos").getPublicUrl(`${t}/${F.name}`).data.publicUrl,target:"_blank",rel:"noreferrer",className:"block text-blue-600 text-sm truncate",children:F.name}),h.jsx("button",{className:"btn btn-sm btn-danger mt-1",onClick:()=>x(F.name),children:"Borrar"})]},F.name))})]})}),n&&h.jsxs("div",{className:"fixed bottom-4 right-4 bg-white dark:bg-neutral-800 border p-3 rounded shadow",children:[n,h.jsx("button",{className:"ml-2 btn btn-sm",onClick:()=>r(null),children:"Cerrar"})]})]})}const kd=new Date,zh=t=>t.toISOString().split("T")[0],Ug=new Date(kd);Ug.setDate(kd.getDate()-1);const Fh=["recepcion","diagnostico","presupuesto","reparacion","listo","entregado"];function Sx(){const[t,e]=Y.useState(zh(Ug)),[n,r]=Y.useState(zh(kd)),i=lr(()=>ae.ordenes.toArray(),[],[]),s=Y.useMemo(()=>{if(!i)return[];const d=new Date(t).getTime(),p=new Date(n);p.setDate(p.getDate()+1);const g=p.getTime();return i.filter(y=>{const _=new Date(y.creada).getTime();return _>=d&&_<g})},[i,t,n]),a=Y.useMemo(()=>{const d=Fh.reduce((_,C)=>({..._,[C]:0}),{});let p=0,g=0;const y=s.filter(_=>_.estado==="entregado");for(const _ of s)d[_.estado]!==void 0&&d[_.estado]++,_.estado==="entregado"&&p++;for(const _ of y)_.presupuestoAprox&&_.presupuestoAprox>0&&(g+=_.presupuestoAprox);return{totalOrdenes:s.length,totalEntregadas:p,conteoPorEstado:d,ingresosEstimados:g}},[s]);function u({title:d,value:p,Icon:g,isSmall:y=!1}){return h.jsxs("div",{className:`p-4 rounded-lg shadow border border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800 ${y?"":"col-span-1"}`,children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:d}),h.jsx(g,{className:"size-5 text-primary-500"})]}),h.jsx("p",{className:`mt-1 ${y?"text-lg":"text-3xl font-bold"}`,children:p})]})}return h.jsxs("div",{className:"grid gap-4",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Informes y Estadsticas"}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Rango de Fecha de Creacin"}),h.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[h.jsxs("label",{children:[h.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Desde (Creada)"}),h.jsx("input",{type:"date",className:"input w-full",value:t,onChange:d=>e(d.target.value)})]}),h.jsxs("label",{children:[h.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Hasta (Creada)"}),h.jsx("input",{type:"date",className:"input w-full",value:n,onChange:d=>r(d.target.value)})]})]}),h.jsxs("p",{className:"text-sm opacity-70 mt-3",children:["Mostrando datos de ",s.length," rdenes creadas entre ",t," y ",n,"."]})]})}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[h.jsx(u,{title:"rdenes Totales",value:a.totalOrdenes,Icon:dc}),h.jsx(u,{title:"rdenes Entregadas",value:a.totalEntregadas,Icon:rw}),h.jsx(u,{title:"rdenes Pendientes",value:a.totalOrdenes-a.totalEntregadas,Icon:aw}),h.jsx(u,{title:"Ingresos (Est. Entregadas)",value:`${a.ingresosEstimados.toFixed(2)} `,Icon:ag})]}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h3",{className:"text-lg font-semibold mb-3",children:"rdenes por Estado (Total en el Periodo)"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Fh.map(d=>h.jsx(u,{title:d.charAt(0).toUpperCase()+d.slice(1),value:a.conteoPorEstado[d],Icon:dc,isSmall:!0},d))})]})})]})}function Bh(t,e){return t?typeof t=="string"?`${t}${e?` (${e})`:""}`:t.nombre||"":""}function Kh(t){return t?typeof t=="string"?t||"":[t.aparato||"",t.marca||"",t.modelo||"",t.numeroSerie?`SN:${t.numeroSerie}`:""].filter(Boolean).join(" ").trim()||"":""}function yu(t){const e=t.creada||t.fecha_creacion;return e?new Date(e).getTime():0}function Ex({ordenId:t}){const[e,n]=Y.useState(t);Y.useEffect(()=>{n(t)},[t]);const r=lr(async()=>(await ae.ordenes.toArray()).sort((ie,pe)=>yu(ie)-yu(pe)),[]),[i,s]=Y.useState(""),a=Y.useMemo(()=>{if(!r)return[];const W=i.trim().toLowerCase();return W?r.filter(ie=>{const pe=(ie.codigo||ie.codigo_orden||"").toLowerCase(),ce=Bh(ie.cliente,ie.telefono).toLowerCase(),je=Kh(ie.equipo).toLowerCase();return pe.includes(W)||ce.includes(W)||je.includes(W)}):r},[r,i]),u=lr(()=>e?ae.ordenes.get(e):Promise.resolve(void 0),[e]),[d,p]=Y.useState(null),[g,y]=Y.useState(null),[_,C]=Y.useState([{nombre:"",precio:0}]),[T,j]=Y.useState(0),[A,S]=Y.useState(25),[b,x]=Y.useState(""),[M,H]=Y.useState(""),[V,F]=Y.useState(null);Y.useEffect(()=>{var W;u&&(typeof u.cliente=="object"?p(u.cliente):p({nombre:typeof u.cliente=="string"&&u.cliente||"",telefono:u.telefono||""}),typeof u.equipo=="object"?y(u.equipo):y({aparato:u.equipo||""}),C((W=u.piezas)!=null&&W.length?u.piezas:[{nombre:"",precio:0}]),S(u.tarifa||25),j(u.horasReparacion||0),x(u.precioNuevo??""),H(u.precioSegundaMano??""),F(u.presupuestoAprox??null))},[u]);const ee=Y.useCallback(async W=>{e&&await ae.ordenes.update(e,{piezas:_,horasReparacion:T,tarifa:A,precioNuevo:b===""?null:Number(b),precioSegundaMano:M===""?null:Number(M),presupuestoAprox:V,actualizada:new Date().toISOString(),...W||{}})},[e,_,T,A,b,M,V]);Y.useEffect(()=>{if(!u)return;const W=setTimeout(()=>ee(),600);return()=>clearTimeout(W)},[_,T,A,b,M,V,u,ee]);const ye=()=>{const W=T*A+_.reduce((pe,ce)=>pe+(ce.precio||0),0)*1.15,ie=M&&W>Number(M)*.8?Number(M)*.8:W;F(Math.round(ie*100)/100)};return e?u?h.jsxs("section",{className:"grid gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{className:"btn",onClick:()=>n(void 0),children:" Volver a la lista"}),h.jsx("div",{className:"text-sm opacity-70",children:(u.codigo||u.codigo_orden||u.id.slice(0,8))+"  "+(u.estado||"")})]}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"font-semibold",children:"Cliente"}),h.jsx("p",{children:(d==null?void 0:d.nombre)||""}),h.jsx("p",{children:(d==null?void 0:d.telefono)||""}),"email"in(d||{})&&(d==null?void 0:d.email)&&h.jsx("p",{children:d.email})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"font-semibold",children:"Equipo"}),h.jsx("p",{children:((g==null?void 0:g.aparato)||(g==null?void 0:g.categoria)||g||"")+" "+((g==null?void 0:g.marca)||"")+" "+((g==null?void 0:g.modelo)||"")}),h.jsx("p",{children:(g==null?void 0:g.descripcion)||""})]})]})}),h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid gap-3",children:[h.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[h.jsxs("label",{children:["Tarifa /h",h.jsx("input",{type:"number",className:"input",value:A,onChange:W=>S(Number(W.target.value)||0)})]}),h.jsxs("label",{children:["Horas",h.jsx("input",{type:"number",step:"0.5",className:"input",value:T||"",onChange:W=>j(Number(W.target.value)||0)})]})]}),h.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[h.jsxs("label",{children:["Precio nuevo ()",h.jsx("input",{type:"number",className:"input",value:b,onChange:W=>x(W.target.value===""?"":Number(W.target.value))})]}),h.jsxs("label",{children:["Precio segunda mano ()",h.jsx("input",{type:"number",className:"input",value:M,onChange:W=>H(W.target.value===""?"":Number(W.target.value))})]})]}),h.jsx("h3",{className:"font-semibold mt-3",children:"Piezas"}),_.map((W,ie)=>h.jsxs("div",{className:"grid sm:grid-cols-[2fr_1fr_auto] gap-2",children:[h.jsx("input",{className:"input",placeholder:"Nombre",value:W.nombre,onChange:pe=>C(ce=>ce.map((je,Re)=>Re===ie?{...je,nombre:pe.target.value}:je))}),h.jsx("input",{type:"number",className:"input",placeholder:"Precio",value:W.precio||"",onChange:pe=>C(ce=>ce.map((je,Re)=>Re===ie?{...je,precio:Number(pe.target.value)||0}:je))}),h.jsx("button",{className:"btn",onClick:()=>C(pe=>pe.filter((ce,je)=>je!==ie)),children:"Quitar"})]},ie)),h.jsx("button",{className:"btn mt-2",onClick:()=>C(W=>[...W,{nombre:"",precio:0}]),children:"Aadir pieza"}),h.jsx("button",{className:"btn btn-primary mt-4",onClick:ye,children:"Calcular"}),V!==null&&h.jsxs("div",{className:"text-lg font-bold mt-2",children:["Total: ",V.toFixed(2)," "]})]})})]}):h.jsxs("p",{className:"text-sm opacity-70",children:["Cargando datos de la orden (",e,")..."]}):h.jsx("section",{className:"grid gap-4",children:h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body grid gap-3",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"rdenes (todas)"}),h.jsx("input",{className:"input",placeholder:"Buscar por cdigo, cliente o equipo",value:i,onChange:W=>s(W.target.value)}),!r&&h.jsx("p",{className:"text-sm opacity-70",children:"Cargando rdenes"}),r&&a.length===0&&h.jsx("p",{className:"text-sm opacity-70",children:"Sin resultados."}),r&&a.length>0&&h.jsx("div",{className:"grid gap-2",children:a.map(W=>h.jsxs("button",{className:"text-left border p-2 rounded hover:bg-neutral-50 dark:hover:bg-neutral-800",onClick:()=>n(W.id),children:[h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[h.jsx("div",{className:"font-semibold",children:W.codigo||W.codigo_orden||W.id.slice(0,8)}),h.jsx("div",{className:"text-xs opacity-70",children:new Date(yu(W)).toLocaleString()})]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"opacity-70",children:"Cliente:"})," ",Bh(W.cliente,W.telefono)]}),h.jsxs("div",{className:"text-sm",children:[h.jsx("span",{className:"opacity-70",children:"Equipo:"})," ",Kh(W.equipo)]}),W.estado&&h.jsxs("div",{className:"text-xs mt-1",children:[h.jsx("span",{className:"opacity-70",children:"Estado:"})," ",W.estado]})]},W.id))})]})})})}function jx(){const[t,e]=Y.useState([]),[n,r]=Y.useState(!0);return Y.useEffect(()=>{(async()=>{const{data:s,error:a}=await vn.from("presupuestos").select("*").order("id",{ascending:!1});a?alert("Error al obtener presupuestos: "+a.message):e(s),r(!1)})()},[]),n?h.jsx("p",{className:"p-4",children:"Cargando presupuestos..."}):h.jsxs("section",{className:"p-4 grid gap-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:"Presupuestos guardados"}),h.jsxs("table",{className:"table-auto w-full border border-neutral-200",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100",children:[h.jsx("th",{className:"p-2 text-left",children:"ID"}),h.jsx("th",{className:"p-2 text-left",children:"Horas"}),h.jsx("th",{className:"p-2 text-left",children:"Tarifa"}),h.jsx("th",{className:"p-2 text-left",children:"Piezas"}),h.jsx("th",{className:"p-2 text-left",children:"Mano de Obra"}),h.jsx("th",{className:"p-2 text-left",children:"Total"})]})}),h.jsx("tbody",{children:t.map(i=>h.jsxs("tr",{className:"border-t",children:[h.jsx("td",{className:"p-2",children:i.id}),h.jsx("td",{className:"p-2",children:i.horas}),h.jsx("td",{className:"p-2",children:i.tarifa}),h.jsx("td",{className:"p-2",children:i.piezas}),h.jsx("td",{className:"p-2",children:i.mano_obra.toFixed(2)}),h.jsx("td",{className:"p-2 font-semibold",children:i.total.toFixed(2)})]},i.id))})]})]})}function Cx(){return h.jsx("section",{className:"grid gap-4",children:h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:[h.jsx("h2",{className:"text-lg font-semibold",children:"Historial de Reparaciones (rdenes Entregadas)"}),h.jsx("p",{className:"text-sm opacity-70",children:'Aqu se mostrar el listado de todas las rdenes en estado **"Entregado"** y se permitir su bsqueda y exportacin.'}),h.jsx("p",{className:"text-sm opacity-70 mt-2",children:"Pendiente de implementar."})]})})})}async function Mg(t){throw new Error("Falta VITE_MOUSER_KEY en tu .env.local")}function Nx(t){const e=t.trim().toUpperCase();return/^R\d*/.test(e)?"Resistencia":/^C\d*/.test(e)?"Condensador":/^D\d*/.test(e)?"Diodo":/^Q\d*/.test(e)?"Transistor":/^U\d*/.test(e)||/LM78/.test(e)||/AMS/.test(e)?"Regulador":/^L\d*/.test(e)?"Inductor":/^IC/.test(e)||/\bOP\b/.test(e)?"IC / Chip":"Otros"}function Ox(t){const e=t.trim().split(/\s+/);return e.shift(),e.join(" ")}function Tx(){const[t,e]=Y.useState(""),[n,r]=Y.useState([]),[i,s]=Y.useState(!1);function a(){const g=t.split(`
`).map(y=>y.trim()).filter(y=>y.length>0).map(y=>({id:Ut(),tipo:Nx(y),nombre:Ox(y),cantidad:1,ubicacion:""}));r(g)}async function u(){if(n.length!==0){s(!0);try{await ae.transaction("rw",ae.componentes,async()=>{for(const p of n)await ae.componentes.add({id:Ut(),tipo:p.tipo,nombre:p.nombre,cantidad:p.cantidad,ubicacion:p.ubicacion,fecha_alta:new Date().toISOString()})}),alert(` ${n.length} componentes guardados en el inventario.`),r([]),e("")}catch(p){alert("Error al guardar: "+p.message)}finally{s(!1)}}}function d(p,g,y){r(_=>_.map(C=>C.id===p?{...C,[g]:y}:C))}return h.jsxs("div",{className:"card p-4 grid gap-3",children:[h.jsx("h3",{className:"font-semibold text-lg",children:"Importar desde documento"}),h.jsx("textarea",{className:"border p-2 h-32 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Pega aqu las lneas del documento (por ejemplo: R10 10k 1/4W, C5 100n 50V...)",value:t,onChange:p=>e(p.target.value)}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"bg-black text-white px-3 py-2",onClick:a,disabled:!t.trim(),children:"Analizar"}),n.length>0&&h.jsx("button",{className:"bg-green-700 text-white px-3 py-2",onClick:u,disabled:i,children:i?"Guardando...":"Guardar todos"})]}),n.length>0&&h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm border-t mt-3",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[h.jsx("th",{className:"p-2 text-left",children:"Tipo"}),h.jsx("th",{className:"p-2 text-left",children:"Nombre / Valor"}),h.jsx("th",{className:"p-2 text-left",children:"Cantidad"}),h.jsx("th",{className:"p-2 text-left",children:"Ubicacin"})]})}),h.jsx("tbody",{children:n.map(p=>h.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[h.jsx("td",{className:"p-2",children:h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:p.tipo,onChange:g=>d(p.id,"tipo",g.target.value)})}),h.jsx("td",{className:"p-2",children:h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:p.nombre,onChange:g=>d(p.id,"nombre",g.target.value)})}),h.jsx("td",{className:"p-2 w-24",children:h.jsx("input",{type:"number",min:1,className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:p.cantidad,onChange:g=>d(p.id,"cantidad",parseInt(g.target.value))})}),h.jsx("td",{className:"p-2",children:h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:p.ubicacion,onChange:g=>d(p.id,"ubicacion",g.target.value)})})]},p.id))})]})})]})}function Px(t,e){const n=(t+" "+e).toLowerCase();return n.includes("resistor")||n.includes("ohm")?"Resistencias":n.includes("capacitor")||n.includes("condensador")||n.includes("uf")?"Condensadores":n.includes("diode")||n.includes("rectifier")?"Diodos":n.includes("transistor")||n.includes("bjt")||n.includes("mosfet")||n.includes("fet")?"Transistores":n.includes("regulator")||n.includes("ldo")||n.includes("dc-dc")?"Reguladores":n.includes("relay")?"Rels":n.includes("fuse")?"Fusibles":n.includes("connector")||n.includes("header")?"Conectores":n.includes("ic")||n.includes("integrated circuit")?"IC / Chips":"Otros"}function Rx(){const[t,e]=Y.useState(""),[n,r]=Y.useState(null),[i,s]=Y.useState(null),[a,u]=Y.useState(!1),[d,p]=Y.useState("");async function g(){const _=t.trim();if(!_)return;u(!0),p(""),r(null),s(null);const C=await ae.componentes.where("nombre").equalsIgnoreCase(_).first();if(C){r(C),p(" Encontrado en tu base local."),u(!1);return}try{const T=await Mg(_);if(!T||T.length===0)p(" No se encontraron datos en Mouser.");else{const j=T[0],A=Px(j.name,j.description),S={id:Ut(),tipo:A,nombre:j.name,cantidad:1,ubicacion:"",notas:`${j.manufacturer} / ${j.mpn} - ${j.description}${j.productUrl?" | "+j.productUrl:""}`,fecha_alta:new Date().toISOString()};r(S),s(j.productUrl||null),p(" Datos obtenidos de Mouser.")}}catch(T){p(" Error al consultar Mouser: "+T.message)}finally{u(!1)}}async function y(){n&&(await ae.componentes.add(n),p(" Componente guardado en el inventario."),r(null),e(""),s(null))}return h.jsxs("div",{className:"card p-4 grid gap-3",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Identificador de componentes"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx("input",{className:"border p-2 flex-1 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Cdigo o serigrafa del componente (ej: BC547, LM317, IRF540N, 10k)",value:t,onChange:_=>e(_.target.value)}),h.jsx("button",{className:"bg-black text-white px-4 py-2",onClick:g,disabled:a,children:a?"Buscando...":"Identificar"})]}),d&&h.jsx("p",{className:"text-sm opacity-80",children:d}),n&&h.jsxs("div",{className:"border-t pt-2 mt-2",children:[h.jsx("h4",{className:"font-semibold mb-1",children:"Resultado:"}),h.jsx("table",{className:"w-full text-sm border",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 font-semibold w-32",children:"Tipo"}),h.jsx("td",{className:"p-2",children:n.tipo})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 font-semibold",children:"Nombre"}),h.jsx("td",{className:"p-2",children:n.nombre})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 font-semibold",children:"Descripcin"}),h.jsx("td",{className:"p-2",children:n.notas})]}),i&&h.jsxs("tr",{children:[h.jsx("td",{className:"p-2 font-semibold",children:"Datasheet"}),h.jsx("td",{className:"p-2",children:h.jsx("a",{href:i,target:"_blank",className:"text-blue-600 dark:text-blue-400 underline",children:"Ver hoja de datos"})})]})]})}),h.jsx("button",{className:"bg-green-700 text-white px-4 py-2 mt-3",onClick:y,children:"Guardar en inventario"})]})]})}const Ax=["Resistencias","Condensadores","Diodos","Transistores","Fusibles","Rels","Conectores","Cables","IC / Chips","Reguladores","Otros"];function qh(t){switch(t){case"k":return 1e3;case"m":return .001;case"u":case"":return 1e-6;case"n":return 1e-9;case"p":return 1e-12;default:return 1}}function Ix(t){if(!t)return null;let e=t.toLowerCase().replace(",",".").trim();/^\d+r\d+$/i.test(e)&&(e=e.replace("r","."));const n=e.match(/^(\d+)([kmunp])(\d+)$/);if(n){const[,s,a,u]=n,d=parseFloat(s+"."+u),p=qh(a);return d*p}const r=e.match(/^(\d+(\.\d+)?)([kmunp])?$/);if(r){const[,s,,a]=r,u=parseFloat(s),d=qh(a??"");return u*d}const i=Number(e);return Number.isNaN(i)?null:i}function Wh(t){if(!t)return null;const e=t.split(/[\s\/,_-]+/);for(const n of e){const r=Ix(n);if(r!==null)return r}return null}function Dx(t,e){const n=Wh(e);if(n===null)return!1;const r=Wh(t);if(r===null)return!1;const i=Math.abs(r-n),s=Math.max(n*.05,1e-12);return i<=s}function $x(t){const e=t.toLowerCase();return e.includes("resistor")||e.includes("resistencia")||e.includes("ohm")?"Resistencias":e.includes("capacitor")||e.includes("condensador")||e.includes("uf")||e.includes("nf")||e.includes("pf")?"Condensadores":e.includes("diode")||e.includes("rectifier")?"Diodos":e.includes("transistor")||e.includes("bjt")||e.includes("fet")||e.includes("mosfet")?"Transistores":e.includes("fuse")?"Fusibles":e.includes("relay")?"Rels":e.includes("connector")||e.includes("header")||e.includes("terminal")?"Conectores":e.includes("regulator")||e.includes("ldo")||e.includes("dc-dc")?"Reguladores":e.includes("ic ")||e.includes("integrated circuit")?"IC / Chips":"Otros"}function Lx(){const[t,e]=Y.useState(""),[n,r]=Y.useState("Resistencias"),[i,s]=Y.useState(""),[a,u]=Y.useState(1),[d,p]=Y.useState(""),[g,y]=Y.useState(""),[_,C]=Y.useState(""),[T,j]=Y.useState(""),[A,S]=Y.useState(""),[b,x]=Y.useState(null),[M,H]=Y.useState(""),[V,F]=Y.useState(1),[ee,ye]=Y.useState(""),[W,ie]=Y.useState(""),[pe,ce]=Y.useState(""),[je,Re]=Y.useState([]),[lt,an]=Y.useState(!1),te=lr(async()=>await ae.componentes.toArray(),[]),de=lr(async()=>{var B,Oe;return await((Oe=(B=ae.equivalencias)==null?void 0:B.toArray)==null?void 0:Oe.call(B))??[]},[]),fe=Y.useMemo(()=>{if(!te)return[];const B=t.trim().toLowerCase();return B?te.filter(Oe=>{const qe=Oe.nombre.toLowerCase().includes(B)||Oe.tipo.toLowerCase().includes(B)||(Oe.ubicacion??"").toLowerCase().includes(B)||(Oe.notas??"").toLowerCase().includes(B),be=Dx(Oe.nombre,B);return qe||be}).sort((Oe,qe)=>Oe.tipo.localeCompare(qe.tipo)):te.slice().sort((Oe,qe)=>Oe.tipo.localeCompare(qe.tipo))},[te,t]),Ne=Y.useMemo(()=>{const B={};return fe.forEach(Oe=>{B[Oe.tipo]||(B[Oe.tipo]=[]),B[Oe.tipo].push(Oe)}),Object.entries(B)},[fe]);async function Fe(){if(!i.trim()){alert("Introduce un nombre / valor");return}if(!a||a<=0){alert("Cantidad debe ser > 0");return}const B={id:Ut(),tipo:n,nombre:i,cantidad:a,ubicacion:d,notas:g,fecha_alta:new Date().toISOString()};await ae.componentes.add(B),s(""),u(1),p(""),y("")}function Pt(B){x(B.id),H(B.nombre),F(B.cantidad),ye(B.ubicacion??""),ie(B.notas??"")}async function Bt(){if(b){if(!M.trim()){alert("El nombre no puede estar vaco");return}await ae.componentes.update(b,{nombre:M,cantidad:V,ubicacion:ee,notas:W}),x(null)}}async function ln(B){confirm("Eliminar este componente del inventario?")&&(await ae.componentes.delete(B),b===B&&x(null))}async function ut(){if(!_.trim()||!T.trim()){alert("Rellena origen y sustituto");return}const B={id:Ut(),origen:_,sustituto:T,notas:A,fecha:new Date().toISOString()};await ae.equivalencias.add(B),C(""),j(""),S("")}async function un(){if(pe.trim()){an(!0),Re([]);try{const B=await Mg(pe);Re(B)}catch(B){alert("Error al consultar Mouser: "+B.message)}finally{an(!1)}}}async function tl(B){const Oe=$x(B.description||B.name),qe={id:Ut(),tipo:Oe,nombre:B.name,cantidad:1,ubicacion:"",notas:`${B.manufacturer} / ${B.mpn} - ${B.description}`,fecha_alta:new Date().toISOString()};await ae.componentes.add(qe),alert("Componente aadido al inventario.")}return h.jsxs("section",{className:"grid gap-4",children:[h.jsx(Rx,{}),h.jsxs("div",{className:"card p-4 grid gap-3",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Buscar en inventario"}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Buscar por nombre, tipo, valor (10k, 100n...), ubicacin o notas",value:t,onChange:B=>e(B.target.value)})]}),Ne.map(([B,Oe])=>h.jsxs("div",{className:"card p-4",children:[h.jsx("h3",{className:"font-semibold mb-2",children:B}),h.jsxs("table",{className:"w-full text-sm border-t",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[h.jsx("th",{className:"p-2 text-left",children:"Nombre / valor"}),h.jsx("th",{className:"p-2 text-left",children:"Cantidad"}),h.jsx("th",{className:"p-2 text-left",children:"Ubicacin"}),h.jsx("th",{className:"p-2 text-left",children:"Notas"}),h.jsx("th",{className:"p-2 text-left",children:"Acciones"})]})}),h.jsx("tbody",{children:Oe.map(qe=>{const be=b===qe.id;return h.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[h.jsx("td",{className:"p-2",children:be?h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:M,onChange:Rt=>H(Rt.target.value)}):qe.nombre}),h.jsx("td",{className:"p-2 w-20",children:be?h.jsx("input",{type:"number",min:0,className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:V,onChange:Rt=>F(parseInt(Rt.target.value)||0)}):qe.cantidad}),h.jsx("td",{className:"p-2 w-32",children:be?h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:ee,onChange:Rt=>ye(Rt.target.value)}):qe.ubicacion||"-"}),h.jsx("td",{className:"p-2",children:be?h.jsx("input",{className:"border p-1 w-full bg-white dark:bg-neutral-800 dark:text-neutral-100",value:W,onChange:Rt=>ie(Rt.target.value)}):qe.notas||"-"}),h.jsx("td",{className:"p-2 space-x-2",children:be?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"text-sm px-2 py-1 bg-green-700 text-white",onClick:Bt,children:"Guardar"}),h.jsx("button",{className:"text-sm px-2 py-1 bg-neutral-500 text-white",onClick:()=>x(null),children:"Cancelar"})]}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"text-sm px-2 py-1 bg-blue-600 text-white",onClick:()=>Pt(qe),children:"Editar"}),h.jsx("button",{className:"text-sm px-2 py-1 bg-red-700 text-white",onClick:()=>ln(qe.id),children:"Borrar"})]})})]},qe.id)})})]})]},B)),h.jsxs("div",{className:"card p-4 grid gap-2",children:[h.jsx("h3",{className:"font-semibold",children:"Aadir componente al inventario"}),h.jsxs("div",{className:"grid sm:grid-cols-2 gap-2",children:[h.jsx("select",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",value:n,onChange:B=>r(B.target.value),children:Ax.map(B=>h.jsx("option",{children:B},B))}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Nombre / valor (ej: 10k 1/4W, BC547, 100n 50V)",value:i,onChange:B=>s(B.target.value)}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",type:"number",min:0,value:a,onChange:B=>u(parseInt(B.target.value)||0)}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Ubicacin (cajn, caja, etc.)",value:d,onChange:B=>p(B.target.value)})]}),h.jsx("textarea",{className:"border p-2 mt-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Notas (proveedor, referencia, observaciones...)",value:g,onChange:B=>y(B.target.value)}),h.jsx("button",{className:"bg-black text-white p-2 mt-2",onClick:Fe,children:"Aadir"})]}),h.jsxs("div",{className:"card p-4 grid gap-2",children:[h.jsx("h3",{className:"font-semibold",children:"Buscar equivalentes en Mouser"}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[h.jsx("input",{className:"border p-2 flex-1 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Cdigo o referencia (ej: BC547, LM7805...)",value:pe,onChange:B=>ce(B.target.value)}),h.jsx("button",{className:"bg-black text-white px-4 py-2",onClick:un,disabled:lt,children:lt?"Buscando...":"Buscar en Mouser"})]}),je.length>0&&h.jsx("div",{className:"mt-3",children:h.jsxs("table",{className:"w-full text-sm border-t",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[h.jsx("th",{className:"p-2 text-left",children:"Nombre"}),h.jsx("th",{className:"p-2 text-left",children:"Fabricante"}),h.jsx("th",{className:"p-2 text-left",children:"Descripcin"}),h.jsx("th",{className:"p-2 text-left",children:"Enlace"}),h.jsx("th",{className:"p-2 text-left",children:"Accin"})]})}),h.jsx("tbody",{children:je.map((B,Oe)=>h.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[h.jsx("td",{className:"p-2",children:B.name}),h.jsx("td",{className:"p-2",children:B.manufacturer}),h.jsx("td",{className:"p-2",children:B.description}),h.jsx("td",{className:"p-2",children:h.jsx("a",{href:B.productUrl,target:"_blank",className:"text-blue-600 dark:text-blue-400 underline",children:"Ver"})}),h.jsx("td",{className:"p-2",children:h.jsx("button",{className:"text-sm px-2 py-1 bg-green-700 text-white",onClick:()=>tl(B),children:"Aadir al inventario"})})]},Oe))})]})})]}),h.jsxs("div",{className:"card p-4 grid gap-2",children:[h.jsx("h3",{className:"font-semibold",children:"Registrar equivalencia local"}),h.jsxs("div",{className:"grid sm:grid-cols-3 gap-2",children:[h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Componente original",value:_,onChange:B=>C(B.target.value)}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Sustituto",value:T,onChange:B=>j(B.target.value)}),h.jsx("input",{className:"border p-2 bg-white text-neutral-900 dark:bg-neutral-800 dark:text-neutral-100",placeholder:"Notas (opcional)",value:A,onChange:B=>S(B.target.value)})]}),h.jsx("button",{className:"bg-black text-white p-2 mt-2",onClick:ut,children:"Aadir equivalencia"}),de&&de.length>0&&h.jsxs("table",{className:"w-full text-sm border-t mt-3",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-neutral-100 dark:bg-neutral-800",children:[h.jsx("th",{className:"p-2 text-left",children:"Origen"}),h.jsx("th",{className:"p-2 text-left",children:"Sustituto"}),h.jsx("th",{className:"p-2 text-left",children:"Notas"})]})}),h.jsx("tbody",{children:de.map(B=>h.jsxs("tr",{className:"border-t hover:bg-neutral-50 dark:hover:bg-neutral-700",children:[h.jsx("td",{className:"p-2",children:B.origen}),h.jsx("td",{className:"p-2",children:B.sustituto}),h.jsx("td",{className:"p-2",children:B.notas||"-"})]},B.id))})]})]}),h.jsx(Tx,{})]})}function Ux(){const[t,e]=Y.useState("ordenes"),[n,r]=Y.useState(null),i=Y.useCallback(d=>{r(d),e("reparacion")},[]),s=Y.useCallback(d=>{r(d),e("reparacion")},[]),a=Y.useCallback(()=>{e("ordenes")},[]),u=Y.useCallback(()=>{n&&e("presupuesto")},[n]);return h.jsxs(ax,{tab:t,onTab:e,children:[t==="registro"&&h.jsx(_x,{onCreated:i}),t==="ordenes"&&h.jsx(fx,{onOpen:s}),t==="reparacion"&&h.jsx("div",{className:"grid grid-cols-1 gap-4",children:n?h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-secondary w-fit mb-2",onClick:a,children:" Volver a rdenes"}),h.jsx(kx,{ordenId:n,onNavigateToBudget:u})]}):h.jsx("div",{className:"card",children:h.jsxs("div",{className:"card-body",children:["Selecciona una orden desde ",h.jsx("b",{children:"rdenes"})," para ver los detalles."]})})}),t==="informes"&&h.jsx(Sx,{}),t==="presupuesto"&&h.jsx(Ex,{ordenId:n}),t==="listapresupuestos"&&h.jsx(jx,{}),t==="historial"&&h.jsx(Cx,{}),t==="componentes"&&h.jsx(Lx,{})]})}sg(document.getElementById("root")).render(h.jsx(Vn.StrictMode,{children:h.jsx(Ux,{})}));
