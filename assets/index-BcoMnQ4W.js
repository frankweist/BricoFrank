(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Qh={exports:{}},Na={},Jh={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),mg=Symbol.for("react.portal"),vg=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),yg=Symbol.for("react.profiler"),wg=Symbol.for("react.provider"),_g=Symbol.for("react.context"),bg=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),Sg=Symbol.for("react.memo"),xg=Symbol.for("react.lazy"),cf=Symbol.iterator;function Eg(t){return t===null||typeof t!="object"?null:(t=cf&&t[cf]||t["@@iterator"],typeof t=="function"?t:null)}var Yh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xh=Object.assign,Zh={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=Zh,this.updater=n||Yh}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ep(){}ep.prototype=Ai.prototype;function Cc(t,e,n){this.props=t,this.context=e,this.refs=Zh,this.updater=n||Yh}var Oc=Cc.prototype=new ep;Oc.constructor=Cc;Xh(Oc,Ai.prototype);Oc.isPureReactComponent=!0;var df=Array.isArray,tp=Object.prototype.hasOwnProperty,Pc={current:null},np={key:!0,ref:!0,__self:!0,__source:!0};function rp(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)tp.call(e,r)&&!np.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var d=Array(u),p=0;p<u;p++)d[p]=arguments[p+2];i.children=d}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Ks,type:t,key:s,ref:a,props:i,_owner:Pc.current}}function jg(t,e){return{$$typeof:Ks,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ks}function Cg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ff=/\/+/g;function $l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cg(""+t.key):e.toString(36)}function Vo(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ks:case mg:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+$l(a,0):r,df(i)?(n="",t!=null&&(n=t.replace(ff,"$&/")+"/"),Vo(i,e,n,"",function(p){return p})):i!=null&&(Tc(i)&&(i=jg(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ff,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",df(t))for(var u=0;u<t.length;u++){s=t[u];var d=r+$l(s,u);a+=Vo(s,e,n,d,i)}else if(d=Eg(t),typeof d=="function")for(t=d.call(t),u=0;!(s=t.next()).done;)s=s.value,d=r+$l(s,u++),a+=Vo(s,e,n,d,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Eo(t,e,n){if(t==null)return t;var r=[],i=0;return Vo(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Og(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ht={current:null},Ho={transition:null},Pg={ReactCurrentDispatcher:ht,ReactCurrentBatchConfig:Ho,ReactCurrentOwner:Pc};function ip(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Eo,forEach:function(t,e,n){Eo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Eo(t,function(){e++}),e},toArray:function(t){return Eo(t,function(e){return e})||[]},only:function(t){if(!Tc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Ai;ve.Fragment=vg;ve.Profiler=yg;ve.PureComponent=Cc;ve.StrictMode=gg;ve.Suspense=kg;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pg;ve.act=ip;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xh({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Pc.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(d in e)tp.call(e,d)&&!np.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&u!==void 0?u[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){u=Array(d);for(var p=0;p<d;p++)u[p]=arguments[p+2];r.children=u}return{$$typeof:Ks,type:t.type,key:i,ref:s,props:r,_owner:a}};ve.createContext=function(t){return t={$$typeof:_g,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:wg,_context:t},t.Consumer=t};ve.createElement=rp;ve.createFactory=function(t){var e=rp.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:bg,render:t}};ve.isValidElement=Tc;ve.lazy=function(t){return{$$typeof:xg,_payload:{_status:-1,_result:t},_init:Og}};ve.memo=function(t,e){return{$$typeof:Sg,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ho.transition;Ho.transition={};try{t()}finally{Ho.transition=e}};ve.unstable_act=ip;ve.useCallback=function(t,e){return ht.current.useCallback(t,e)};ve.useContext=function(t){return ht.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return ht.current.useDeferredValue(t)};ve.useEffect=function(t,e){return ht.current.useEffect(t,e)};ve.useId=function(){return ht.current.useId()};ve.useImperativeHandle=function(t,e,n){return ht.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return ht.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return ht.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return ht.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return ht.current.useReducer(t,e,n)};ve.useRef=function(t){return ht.current.useRef(t)};ve.useState=function(t){return ht.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return ht.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return ht.current.useTransition()};ve.version="18.3.1";Jh.exports=ve;var we=Jh.exports;const ei=Gh(we);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg=we,Ag=Symbol.for("react.element"),Rg=Symbol.for("react.fragment"),Ng=Object.prototype.hasOwnProperty,Ig=Tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dg={key:!0,ref:!0,__self:!0,__source:!0};function sp(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ng.call(e,r)&&!Dg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Ag,type:t,key:s,ref:a,props:i,_owner:Ig.current}}Na.Fragment=Rg;Na.jsx=sp;Na.jsxs=sp;Qh.exports=Na;var x=Qh.exports,op={exports:{}},At={},ap={exports:{}},lp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,ce){var de=te.length;te.push(ce);e:for(;0<de;){var je=de-1>>>1,Fe=te[je];if(0<i(Fe,ce))te[je]=ce,te[de]=Fe,de=je;else break e}}function n(te){return te.length===0?null:te[0]}function r(te){if(te.length===0)return null;var ce=te[0],de=te.pop();if(de!==ce){te[0]=de;e:for(var je=0,Fe=te.length,Mt=Fe>>>1;je<Mt;){var Jt=2*(je+1)-1,kn=te[Jt],mt=Jt+1,Sn=te[mt];if(0>i(kn,de))mt<Fe&&0>i(Sn,kn)?(te[je]=Sn,te[mt]=de,je=mt):(te[je]=kn,te[Jt]=de,je=Jt);else if(mt<Fe&&0>i(Sn,de))te[je]=Sn,te[mt]=de,je=mt;else break e}}return ce}function i(te,ce){var de=te.sortIndex-ce.sortIndex;return de!==0?de:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var d=[],p=[],v=1,g=null,w=3,O=!1,L=!1,M=!1,q=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(te){for(var ce=n(p);ce!==null;){if(ce.callback===null)r(p);else if(ce.startTime<=te)r(p),ce.sortIndex=ce.expirationTime,e(d,ce);else break;ce=n(p)}}function A(te){if(M=!1,k(te),!L)if(n(d)!==null)L=!0,an(U);else{var ce=n(p);ce!==null&&$i(A,ce.startTime-te)}}function U(te,ce){L=!1,M&&(M=!1,E(re),re=-1),O=!0;var de=w;try{for(k(ce),g=n(d);g!==null&&(!(g.expirationTime>ce)||te&&!Me());){var je=g.callback;if(typeof je=="function"){g.callback=null,w=g.priorityLevel;var Fe=je(g.expirationTime<=ce);ce=t.unstable_now(),typeof Fe=="function"?g.callback=Fe:g===n(d)&&r(d),k(ce)}else r(d);g=n(d)}if(g!==null)var Mt=!0;else{var Jt=n(p);Jt!==null&&$i(A,Jt.startTime-ce),Mt=!1}return Mt}finally{g=null,w=de,O=!1}}var K=!1,W=null,re=-1,ie=5,oe=-1;function Me(){return!(t.unstable_now()-oe<ie)}function xt(){if(W!==null){var te=t.unstable_now();oe=te;var ce=!0;try{ce=W(!0,te)}finally{ce?Be():(K=!1,W=null)}}else K=!1}var Be;if(typeof _=="function")Be=function(){_(xt)};else if(typeof MessageChannel<"u"){var Ur=new MessageChannel,ir=Ur.port2;Ur.port1.onmessage=xt,Be=function(){ir.postMessage(null)}}else Be=function(){q(xt,0)};function an(te){W=te,K||(K=!0,Be())}function $i(te,ce){re=q(function(){te(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){L||O||(L=!0,an(U))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(te){switch(w){case 1:case 2:case 3:var ce=3;break;default:ce=w}var de=w;w=ce;try{return te()}finally{w=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var de=w;w=te;try{return ce()}finally{w=de}},t.unstable_scheduleCallback=function(te,ce,de){var je=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?je+de:je):de=je,te){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=de+Fe,te={id:v++,callback:ce,priorityLevel:te,startTime:de,expirationTime:Fe,sortIndex:-1},de>je?(te.sortIndex=de,e(p,te),n(d)===null&&te===n(p)&&(M?(E(re),re=-1):M=!0,$i(A,de-je))):(te.sortIndex=Fe,e(d,te),L||O||(L=!0,an(U))),te},t.unstable_shouldYield=Me,t.unstable_wrapCallback=function(te){var ce=w;return function(){var de=w;w=ce;try{return te.apply(this,arguments)}finally{w=de}}}})(lp);ap.exports=lp;var $g=ap.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=we,Tt=$g;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var up=new Set,xs={};function Dr(t,e){ki(t,e),ki(t+"Capture",e)}function ki(t,e){for(xs[t]=e,t=0;t<e.length;t++)up.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ku=Object.prototype.hasOwnProperty,Ug=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hf={},pf={};function zg(t){return ku.call(pf,t)?!0:ku.call(hf,t)?!1:Ug.test(t)?pf[t]=!0:(hf[t]=!0,!1)}function Mg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bg(t,e,n,r){if(e===null||typeof e>"u"||Mg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ac=/[\-:]([a-z])/g;function Rc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ac,Rc);nt[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ac,Rc);nt[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ac,Rc);nt[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Nc(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bg(e,n,i,r)&&(n=null),r||i===null?zg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=Lg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jo=Symbol.for("react.element"),ri=Symbol.for("react.portal"),ii=Symbol.for("react.fragment"),Ic=Symbol.for("react.strict_mode"),Su=Symbol.for("react.profiler"),cp=Symbol.for("react.provider"),dp=Symbol.for("react.context"),Dc=Symbol.for("react.forward_ref"),xu=Symbol.for("react.suspense"),Eu=Symbol.for("react.suspense_list"),$c=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),fp=Symbol.for("react.offscreen"),mf=Symbol.iterator;function Yi(t){return t===null||typeof t!="object"?null:(t=mf&&t[mf]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Ll;function as(t){if(Ll===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ll=e&&e[1]||""}return`
`+Ll+t}var Ul=!1;function zl(t,e){if(!t||Ul)return"";Ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,u=s.length-1;1<=a&&0<=u&&i[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==s[u]){var d=`
`+i[a].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=a&&0<=u);break}}}finally{Ul=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function Fg(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=zl(t.type,!1),t;case 11:return t=zl(t.type.render,!1),t;case 1:return t=zl(t.type,!0),t;default:return""}}function ju(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ii:return"Fragment";case ri:return"Portal";case Su:return"Profiler";case Ic:return"StrictMode";case xu:return"Suspense";case Eu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dp:return(t.displayName||"Context")+".Consumer";case cp:return(t._context.displayName||"Context")+".Provider";case Dc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case $c:return e=t.displayName||null,e!==null?e:ju(t.type)||"Memo";case Dn:e=t._payload,t=t._init;try{return ju(t(e))}catch{}}return null}function Kg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ju(e);case 8:return e===Ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qg(t){var e=hp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Co(t){t._valueTracker||(t._valueTracker=qg(t))}function pp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hp(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function sa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cu(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mp(t,e){e=e.checked,e!=null&&Nc(t,"checked",e,!1)}function Ou(t,e){mp(t,e);var n=Yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pu(t,e.type,Yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pu(t,e,n){(e!=="number"||sa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Tu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ls(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yn(n)}}function vp(t,e){var n=Yn(e.value),r=Yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function wf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Au(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oo,yp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oo=Oo||document.createElement("div"),Oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Es(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wg=["Webkit","ms","Moz","O"];Object.keys(fs).forEach(function(t){Wg.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fs[e]=fs[t]})});function wp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fs.hasOwnProperty(t)&&fs[t]?(""+e).trim():e+"px"}function _p(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=wp(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Vg=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ru(t,e){if(e){if(Vg[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Nu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Iu=null;function Lc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Du=null,vi=null,gi=null;function _f(t){if(t=Vs(t)){if(typeof Du!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Ua(e),Du(t.stateNode,t.type,e))}}function bp(t){vi?gi?gi.push(t):gi=[t]:vi=t}function kp(){if(vi){var t=vi,e=gi;if(gi=vi=null,_f(t),e)for(t=0;t<e.length;t++)_f(e[t])}}function Sp(t,e){return t(e)}function xp(){}var Ml=!1;function Ep(t,e,n){if(Ml)return t(e,n);Ml=!0;try{return Sp(t,e,n)}finally{Ml=!1,(vi!==null||gi!==null)&&(xp(),kp())}}function js(t,e){var n=t.stateNode;if(n===null)return null;var r=Ua(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var $u=!1;if(gn)try{var Xi={};Object.defineProperty(Xi,"passive",{get:function(){$u=!0}}),window.addEventListener("test",Xi,Xi),window.removeEventListener("test",Xi,Xi)}catch{$u=!1}function Hg(t,e,n,r,i,s,a,u,d){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var hs=!1,oa=null,aa=!1,Lu=null,Gg={onError:function(t){hs=!0,oa=t}};function Qg(t,e,n,r,i,s,a,u,d){hs=!1,oa=null,Hg.apply(Gg,arguments)}function Jg(t,e,n,r,i,s,a,u,d){if(Qg.apply(this,arguments),hs){if(hs){var p=oa;hs=!1,oa=null}else throw Error(H(198));aa||(aa=!0,Lu=p)}}function $r(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function bf(t){if($r(t)!==t)throw Error(H(188))}function Yg(t){var e=t.alternate;if(!e){if(e=$r(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return bf(i),t;if(s===r)return bf(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Cp(t){return t=Yg(t),t!==null?Op(t):null}function Op(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Op(t);if(e!==null)return e;t=t.sibling}return null}var Pp=Tt.unstable_scheduleCallback,kf=Tt.unstable_cancelCallback,Xg=Tt.unstable_shouldYield,Zg=Tt.unstable_requestPaint,ze=Tt.unstable_now,ey=Tt.unstable_getCurrentPriorityLevel,Uc=Tt.unstable_ImmediatePriority,Tp=Tt.unstable_UserBlockingPriority,la=Tt.unstable_NormalPriority,ty=Tt.unstable_LowPriority,Ap=Tt.unstable_IdlePriority,Ia=null,sn=null;function ny(t){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Ia,t,void 0,(t.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:sy,ry=Math.log,iy=Math.LN2;function sy(t){return t>>>=0,t===0?32:31-(ry(t)/iy|0)|0}var Po=64,To=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ua(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=us(u):(s&=a,s!==0&&(r=us(s)))}else a=n&~i,a!==0?r=us(a):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ht(e),i=1<<n,r|=t[n],e&=~i;return r}function oy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ay(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Ht(s),u=1<<a,d=i[a];d===-1?(!(u&n)||u&r)&&(i[a]=oy(u,e)):d<=e&&(t.expiredLanes|=u),s&=~u}}function Uu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rp(){var t=Po;return Po<<=1,!(Po&4194240)&&(Po=64),t}function Bl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qs(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ht(e),t[e]=n}function ly(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ht(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ke=0;function Np(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ip,Mc,Dp,$p,Lp,zu=!1,Ao=[],Kn=null,qn=null,Wn=null,Cs=new Map,Os=new Map,Un=[],uy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sf(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":Cs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function Zi(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vs(e),e!==null&&Mc(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cy(t,e,n,r,i){switch(e){case"focusin":return Kn=Zi(Kn,t,e,n,r,i),!0;case"dragenter":return qn=Zi(qn,t,e,n,r,i),!0;case"mouseover":return Wn=Zi(Wn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Cs.set(s,Zi(Cs.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Os.set(s,Zi(Os.get(s)||null,t,e,n,r,i)),!0}return!1}function Up(t){var e=Sr(t.target);if(e!==null){var n=$r(e);if(n!==null){if(e=n.tag,e===13){if(e=jp(n),e!==null){t.blockedOn=e,Lp(t.priority,function(){Dp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Go(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Iu=r,n.target.dispatchEvent(r),Iu=null}else return e=Vs(n),e!==null&&Mc(e),t.blockedOn=n,!1;e.shift()}return!0}function xf(t,e,n){Go(t)&&n.delete(e)}function dy(){zu=!1,Kn!==null&&Go(Kn)&&(Kn=null),qn!==null&&Go(qn)&&(qn=null),Wn!==null&&Go(Wn)&&(Wn=null),Cs.forEach(xf),Os.forEach(xf)}function es(t,e){t.blockedOn===e&&(t.blockedOn=null,zu||(zu=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,dy)))}function Ps(t){function e(i){return es(i,t)}if(0<Ao.length){es(Ao[0],t);for(var n=1;n<Ao.length;n++){var r=Ao[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&es(Kn,t),qn!==null&&es(qn,t),Wn!==null&&es(Wn,t),Cs.forEach(e),Os.forEach(e),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Up(n),n.blockedOn===null&&Un.shift()}var yi=bn.ReactCurrentBatchConfig,ca=!0;function fy(t,e,n,r){var i=ke,s=yi.transition;yi.transition=null;try{ke=1,Bc(t,e,n,r)}finally{ke=i,yi.transition=s}}function hy(t,e,n,r){var i=ke,s=yi.transition;yi.transition=null;try{ke=4,Bc(t,e,n,r)}finally{ke=i,yi.transition=s}}function Bc(t,e,n,r){if(ca){var i=Mu(t,e,n,r);if(i===null)Yl(t,e,r,da,n),Sf(t,r);else if(cy(i,t,e,n,r))r.stopPropagation();else if(Sf(t,r),e&4&&-1<uy.indexOf(t)){for(;i!==null;){var s=Vs(i);if(s!==null&&Ip(s),s=Mu(t,e,n,r),s===null&&Yl(t,e,r,da,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Yl(t,e,r,null,n)}}var da=null;function Mu(t,e,n,r){if(da=null,t=Lc(r),t=Sr(t),t!==null)if(e=$r(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return da=t,null}function zp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ey()){case Uc:return 1;case Tp:return 4;case la:case ty:return 16;case Ap:return 536870912;default:return 16}default:return 16}}var Bn=null,Fc=null,Qo=null;function Mp(){if(Qo)return Qo;var t,e=Fc,n=e.length,r,i="value"in Bn?Bn.value:Bn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Qo=i.slice(t,1<r?1-r:void 0)}function Jo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ro(){return!0}function Ef(){return!1}function Rt(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ro:Ef,this.isPropagationStopped=Ef,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ro)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ro)},persist:function(){},isPersistent:Ro}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kc=Rt(Ri),Ws=Ie({},Ri,{view:0,detail:0}),py=Rt(Ws),Fl,Kl,ts,Da=Ie({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ts&&(ts&&t.type==="mousemove"?(Fl=t.screenX-ts.screenX,Kl=t.screenY-ts.screenY):Kl=Fl=0,ts=t),Fl)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),jf=Rt(Da),my=Ie({},Da,{dataTransfer:0}),vy=Rt(my),gy=Ie({},Ws,{relatedTarget:0}),ql=Rt(gy),yy=Ie({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),wy=Rt(yy),_y=Ie({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),by=Rt(_y),ky=Ie({},Ri,{data:0}),Cf=Rt(ky),Sy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ey={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ey[t])?!!e[t]:!1}function qc(){return jy}var Cy=Ie({},Ws,{key:function(t){if(t.key){var e=Sy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qc,charCode:function(t){return t.type==="keypress"?Jo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oy=Rt(Cy),Py=Ie({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=Rt(Py),Ty=Ie({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qc}),Ay=Rt(Ty),Ry=Ie({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ny=Rt(Ry),Iy=Ie({},Da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=Rt(Iy),$y=[9,13,27,32],Wc=gn&&"CompositionEvent"in window,ps=null;gn&&"documentMode"in document&&(ps=document.documentMode);var Ly=gn&&"TextEvent"in window&&!ps,Bp=gn&&(!Wc||ps&&8<ps&&11>=ps),Pf=" ",Tf=!1;function Fp(t,e){switch(t){case"keyup":return $y.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function Uy(t,e){switch(t){case"compositionend":return Kp(e);case"keypress":return e.which!==32?null:(Tf=!0,Pf);case"textInput":return t=e.data,t===Pf&&Tf?null:t;default:return null}}function zy(t,e){if(si)return t==="compositionend"||!Wc&&Fp(t,e)?(t=Mp(),Qo=Fc=Bn=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bp&&e.locale!=="ko"?null:e.data;default:return null}}var My={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!My[t.type]:e==="textarea"}function qp(t,e,n,r){bp(r),e=fa(e,"onChange"),0<e.length&&(n=new Kc("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ms=null,Ts=null;function By(t){tm(t,0)}function $a(t){var e=li(t);if(pp(e))return t}function Fy(t,e){if(t==="change")return e}var Wp=!1;if(gn){var Wl;if(gn){var Vl="oninput"in document;if(!Vl){var Rf=document.createElement("div");Rf.setAttribute("oninput","return;"),Vl=typeof Rf.oninput=="function"}Wl=Vl}else Wl=!1;Wp=Wl&&(!document.documentMode||9<document.documentMode)}function Nf(){ms&&(ms.detachEvent("onpropertychange",Vp),Ts=ms=null)}function Vp(t){if(t.propertyName==="value"&&$a(Ts)){var e=[];qp(e,Ts,t,Lc(t)),Ep(By,e)}}function Ky(t,e,n){t==="focusin"?(Nf(),ms=e,Ts=n,ms.attachEvent("onpropertychange",Vp)):t==="focusout"&&Nf()}function qy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $a(Ts)}function Wy(t,e){if(t==="click")return $a(e)}function Vy(t,e){if(t==="input"||t==="change")return $a(e)}function Hy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qt=typeof Object.is=="function"?Object.is:Hy;function As(t,e){if(Qt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ku.call(e,i)||!Qt(t[i],e[i]))return!1}return!0}function If(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Df(t,e){var n=If(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=If(n)}}function Hp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Gp(){for(var t=window,e=sa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sa(t.document)}return e}function Vc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gy(t){var e=Gp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hp(n.ownerDocument.documentElement,n)){if(r!==null&&Vc(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Df(n,s);var a=Df(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qy=gn&&"documentMode"in document&&11>=document.documentMode,oi=null,Bu=null,vs=null,Fu=!1;function $f(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fu||oi==null||oi!==sa(r)||(r=oi,"selectionStart"in r&&Vc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&As(vs,r)||(vs=r,r=fa(Bu,"onSelect"),0<r.length&&(e=new Kc("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=oi)))}function No(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ai={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Hl={},Qp={};gn&&(Qp=document.createElement("div").style,"AnimationEvent"in window||(delete ai.animationend.animation,delete ai.animationiteration.animation,delete ai.animationstart.animation),"TransitionEvent"in window||delete ai.transitionend.transition);function La(t){if(Hl[t])return Hl[t];if(!ai[t])return t;var e=ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qp)return Hl[t]=e[n];return t}var Jp=La("animationend"),Yp=La("animationiteration"),Xp=La("animationstart"),Zp=La("transitionend"),em=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){em.set(t,e),Dr(e,[t])}for(var Gl=0;Gl<Lf.length;Gl++){var Ql=Lf[Gl],Jy=Ql.toLowerCase(),Yy=Ql[0].toUpperCase()+Ql.slice(1);Zn(Jy,"on"+Yy)}Zn(Jp,"onAnimationEnd");Zn(Yp,"onAnimationIteration");Zn(Xp,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(Zp,"onTransitionEnd");ki("onMouseEnter",["mouseout","mouseover"]);ki("onMouseLeave",["mouseout","mouseover"]);ki("onPointerEnter",["pointerout","pointerover"]);ki("onPointerLeave",["pointerout","pointerover"]);Dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xy=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function Uf(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Jg(r,e,void 0,t),t.currentTarget=null}function tm(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],d=u.instance,p=u.currentTarget;if(u=u.listener,d!==s&&i.isPropagationStopped())break e;Uf(i,u,p),s=d}else for(a=0;a<r.length;a++){if(u=r[a],d=u.instance,p=u.currentTarget,u=u.listener,d!==s&&i.isPropagationStopped())break e;Uf(i,u,p),s=d}}}if(aa)throw t=Lu,aa=!1,Lu=null,t}function Oe(t,e){var n=e[Hu];n===void 0&&(n=e[Hu]=new Set);var r=t+"__bubble";n.has(r)||(nm(e,t,2,!1),n.add(r))}function Jl(t,e,n){var r=0;e&&(r|=4),nm(n,t,r,e)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Rs(t){if(!t[Io]){t[Io]=!0,up.forEach(function(n){n!=="selectionchange"&&(Xy.has(n)||Jl(n,!1,t),Jl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Io]||(e[Io]=!0,Jl("selectionchange",!1,e))}}function nm(t,e,n,r){switch(zp(e)){case 1:var i=fy;break;case 4:i=hy;break;default:i=Bc}n=i.bind(null,e,n,t),i=void 0,!$u||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Sr(u),a===null)return;if(d=a.tag,d===5||d===6){r=s=a;continue e}u=u.parentNode}}r=r.return}Ep(function(){var p=s,v=Lc(n),g=[];e:{var w=em.get(t);if(w!==void 0){var O=Kc,L=t;switch(t){case"keypress":if(Jo(n)===0)break e;case"keydown":case"keyup":O=Oy;break;case"focusin":L="focus",O=ql;break;case"focusout":L="blur",O=ql;break;case"beforeblur":case"afterblur":O=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=vy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=Ay;break;case Jp:case Yp:case Xp:O=wy;break;case Zp:O=Ny;break;case"scroll":O=py;break;case"wheel":O=Dy;break;case"copy":case"cut":case"paste":O=by;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Of}var M=(e&4)!==0,q=!M&&t==="scroll",E=M?w!==null?w+"Capture":null:w;M=[];for(var _=p,k;_!==null;){k=_;var A=k.stateNode;if(k.tag===5&&A!==null&&(k=A,E!==null&&(A=js(_,E),A!=null&&M.push(Ns(_,A,k)))),q)break;_=_.return}0<M.length&&(w=new O(w,L,null,n,v),g.push({event:w,listeners:M}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",O=t==="mouseout"||t==="pointerout",w&&n!==Iu&&(L=n.relatedTarget||n.fromElement)&&(Sr(L)||L[yn]))break e;if((O||w)&&(w=v.window===v?v:(w=v.ownerDocument)?w.defaultView||w.parentWindow:window,O?(L=n.relatedTarget||n.toElement,O=p,L=L?Sr(L):null,L!==null&&(q=$r(L),L!==q||L.tag!==5&&L.tag!==6)&&(L=null)):(O=null,L=p),O!==L)){if(M=jf,A="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(M=Of,A="onPointerLeave",E="onPointerEnter",_="pointer"),q=O==null?w:li(O),k=L==null?w:li(L),w=new M(A,_+"leave",O,n,v),w.target=q,w.relatedTarget=k,A=null,Sr(v)===p&&(M=new M(E,_+"enter",L,n,v),M.target=k,M.relatedTarget=q,A=M),q=A,O&&L)t:{for(M=O,E=L,_=0,k=M;k;k=Hr(k))_++;for(k=0,A=E;A;A=Hr(A))k++;for(;0<_-k;)M=Hr(M),_--;for(;0<k-_;)E=Hr(E),k--;for(;_--;){if(M===E||E!==null&&M===E.alternate)break t;M=Hr(M),E=Hr(E)}M=null}else M=null;O!==null&&zf(g,w,O,M,!1),L!==null&&q!==null&&zf(g,q,L,M,!0)}}e:{if(w=p?li(p):window,O=w.nodeName&&w.nodeName.toLowerCase(),O==="select"||O==="input"&&w.type==="file")var U=Fy;else if(Af(w))if(Wp)U=Vy;else{U=qy;var K=Ky}else(O=w.nodeName)&&O.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(U=Wy);if(U&&(U=U(t,p))){qp(g,U,n,v);break e}K&&K(t,w,p),t==="focusout"&&(K=w._wrapperState)&&K.controlled&&w.type==="number"&&Pu(w,"number",w.value)}switch(K=p?li(p):window,t){case"focusin":(Af(K)||K.contentEditable==="true")&&(oi=K,Bu=p,vs=null);break;case"focusout":vs=Bu=oi=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,$f(g,n,v);break;case"selectionchange":if(Qy)break;case"keydown":case"keyup":$f(g,n,v)}var W;if(Wc)e:{switch(t){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else si?Fp(t,n)&&(re="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(re="onCompositionStart");re&&(Bp&&n.locale!=="ko"&&(si||re!=="onCompositionStart"?re==="onCompositionEnd"&&si&&(W=Mp()):(Bn=v,Fc="value"in Bn?Bn.value:Bn.textContent,si=!0)),K=fa(p,re),0<K.length&&(re=new Cf(re,t,null,n,v),g.push({event:re,listeners:K}),W?re.data=W:(W=Kp(n),W!==null&&(re.data=W)))),(W=Ly?Uy(t,n):zy(t,n))&&(p=fa(p,"onBeforeInput"),0<p.length&&(v=new Cf("onBeforeInput","beforeinput",null,n,v),g.push({event:v,listeners:p}),v.data=W))}tm(g,e)})}function Ns(t,e,n){return{instance:t,listener:e,currentTarget:n}}function fa(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=js(t,n),s!=null&&r.unshift(Ns(t,s,i)),s=js(t,e),s!=null&&r.push(Ns(t,s,i))),t=t.return}return r}function Hr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zf(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var u=n,d=u.alternate,p=u.stateNode;if(d!==null&&d===r)break;u.tag===5&&p!==null&&(u=p,i?(d=js(n,s),d!=null&&a.unshift(Ns(n,d,u))):i||(d=js(n,s),d!=null&&a.push(Ns(n,d,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Zy=/\r\n?/g,e0=/\u0000|\uFFFD/g;function Mf(t){return(typeof t=="string"?t:""+t).replace(Zy,`
`).replace(e0,"")}function Do(t,e,n){if(e=Mf(e),Mf(t)!==e&&n)throw Error(H(425))}function ha(){}var Ku=null,qu=null;function Wu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,t0=typeof clearTimeout=="function"?clearTimeout:void 0,Bf=typeof Promise=="function"?Promise:void 0,n0=typeof queueMicrotask=="function"?queueMicrotask:typeof Bf<"u"?function(t){return Bf.resolve(null).then(t).catch(r0)}:Vu;function r0(t){setTimeout(function(){throw t})}function Xl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ps(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ps(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ff(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ni=Math.random().toString(36).slice(2),rn="__reactFiber$"+Ni,Is="__reactProps$"+Ni,yn="__reactContainer$"+Ni,Hu="__reactEvents$"+Ni,i0="__reactListeners$"+Ni,s0="__reactHandles$"+Ni;function Sr(t){var e=t[rn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[rn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ff(t);t!==null;){if(n=t[rn])return n;t=Ff(t)}return e}t=n,n=t.parentNode}return null}function Vs(t){return t=t[rn]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function li(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Ua(t){return t[Is]||null}var Gu=[],ui=-1;function er(t){return{current:t}}function Pe(t){0>ui||(t.current=Gu[ui],Gu[ui]=null,ui--)}function Ee(t,e){ui++,Gu[ui]=t.current,t.current=e}var Xn={},ut=er(Xn),_t=er(!1),Tr=Xn;function Si(t,e){var n=t.type.contextTypes;if(!n)return Xn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function bt(t){return t=t.childContextTypes,t!=null}function pa(){Pe(_t),Pe(ut)}function Kf(t,e,n){if(ut.current!==Xn)throw Error(H(168));Ee(ut,e),Ee(_t,n)}function rm(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,Kg(t)||"Unknown",i));return Ie({},n,r)}function ma(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,Tr=ut.current,Ee(ut,t),Ee(_t,_t.current),!0}function qf(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=rm(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=t,Pe(_t),Pe(ut),Ee(ut,t)):Pe(_t),Ee(_t,n)}var fn=null,za=!1,Zl=!1;function im(t){fn===null?fn=[t]:fn.push(t)}function o0(t){za=!0,im(t)}function tr(){if(!Zl&&fn!==null){Zl=!0;var t=0,e=ke;try{var n=fn;for(ke=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fn=null,za=!1}catch(i){throw fn!==null&&(fn=fn.slice(t+1)),Pp(Uc,tr),i}finally{ke=e,Zl=!1}}return null}var ci=[],di=0,va=null,ga=0,It=[],Dt=0,Ar=null,hn=1,pn="";function yr(t,e){ci[di++]=ga,ci[di++]=va,va=t,ga=e}function sm(t,e,n){It[Dt++]=hn,It[Dt++]=pn,It[Dt++]=Ar,Ar=t;var r=hn;t=pn;var i=32-Ht(r)-1;r&=~(1<<i),n+=1;var s=32-Ht(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,hn=1<<32-Ht(e)+i|n<<i|r,pn=s+t}else hn=1<<s|n<<i|r,pn=t}function Hc(t){t.return!==null&&(yr(t,1),sm(t,1,0))}function Gc(t){for(;t===va;)va=ci[--di],ci[di]=null,ga=ci[--di],ci[di]=null;for(;t===Ar;)Ar=It[--Dt],It[Dt]=null,pn=It[--Dt],It[Dt]=null,hn=It[--Dt],It[Dt]=null}var Pt=null,Ot=null,Ae=!1,Vt=null;function om(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wf(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pt=t,Ot=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ar!==null?{id:hn,overflow:pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pt=t,Ot=null,!0):!1;default:return!1}}function Qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ju(t){if(Ae){var e=Ot;if(e){var n=e;if(!Wf(t,e)){if(Qu(t))throw Error(H(418));e=Vn(n.nextSibling);var r=Pt;e&&Wf(t,e)?om(r,n):(t.flags=t.flags&-4097|2,Ae=!1,Pt=t)}}else{if(Qu(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ae=!1,Pt=t}}}function Vf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pt=t}function $o(t){if(t!==Pt)return!1;if(!Ae)return Vf(t),Ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wu(t.type,t.memoizedProps)),e&&(e=Ot)){if(Qu(t))throw am(),Error(H(418));for(;e;)om(t,e),e=Vn(e.nextSibling)}if(Vf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=Pt?Vn(t.stateNode.nextSibling):null;return!0}function am(){for(var t=Ot;t;)t=Vn(t.nextSibling)}function xi(){Ot=Pt=null,Ae=!1}function Qc(t){Vt===null?Vt=[t]:Vt.push(t)}var a0=bn.ReactCurrentBatchConfig;function ns(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=i.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Lo(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hf(t){var e=t._init;return e(t._payload)}function lm(t){function e(E,_){if(t){var k=E.deletions;k===null?(E.deletions=[_],E.flags|=16):k.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function i(E,_){return E=Jn(E,_),E.index=0,E.sibling=null,E}function s(E,_,k){return E.index=k,t?(k=E.alternate,k!==null?(k=k.index,k<_?(E.flags|=2,_):k):(E.flags|=2,_)):(E.flags|=1048576,_)}function a(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,_,k,A){return _===null||_.tag!==6?(_=ou(k,E.mode,A),_.return=E,_):(_=i(_,k),_.return=E,_)}function d(E,_,k,A){var U=k.type;return U===ii?v(E,_,k.props.children,A,k.key):_!==null&&(_.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Dn&&Hf(U)===_.type)?(A=i(_,k.props),A.ref=ns(E,_,k),A.return=E,A):(A=ra(k.type,k.key,k.props,null,E.mode,A),A.ref=ns(E,_,k),A.return=E,A)}function p(E,_,k,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=au(k,E.mode,A),_.return=E,_):(_=i(_,k.children||[]),_.return=E,_)}function v(E,_,k,A,U){return _===null||_.tag!==7?(_=Or(k,E.mode,A,U),_.return=E,_):(_=i(_,k),_.return=E,_)}function g(E,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ou(""+_,E.mode,k),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case jo:return k=ra(_.type,_.key,_.props,null,E.mode,k),k.ref=ns(E,null,_),k.return=E,k;case ri:return _=au(_,E.mode,k),_.return=E,_;case Dn:var A=_._init;return g(E,A(_._payload),k)}if(ls(_)||Yi(_))return _=Or(_,E.mode,k,null),_.return=E,_;Lo(E,_)}return null}function w(E,_,k,A){var U=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return U!==null?null:u(E,_,""+k,A);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case jo:return k.key===U?d(E,_,k,A):null;case ri:return k.key===U?p(E,_,k,A):null;case Dn:return U=k._init,w(E,_,U(k._payload),A)}if(ls(k)||Yi(k))return U!==null?null:v(E,_,k,A,null);Lo(E,k)}return null}function O(E,_,k,A,U){if(typeof A=="string"&&A!==""||typeof A=="number")return E=E.get(k)||null,u(_,E,""+A,U);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case jo:return E=E.get(A.key===null?k:A.key)||null,d(_,E,A,U);case ri:return E=E.get(A.key===null?k:A.key)||null,p(_,E,A,U);case Dn:var K=A._init;return O(E,_,k,K(A._payload),U)}if(ls(A)||Yi(A))return E=E.get(k)||null,v(_,E,A,U,null);Lo(_,A)}return null}function L(E,_,k,A){for(var U=null,K=null,W=_,re=_=0,ie=null;W!==null&&re<k.length;re++){W.index>re?(ie=W,W=null):ie=W.sibling;var oe=w(E,W,k[re],A);if(oe===null){W===null&&(W=ie);break}t&&W&&oe.alternate===null&&e(E,W),_=s(oe,_,re),K===null?U=oe:K.sibling=oe,K=oe,W=ie}if(re===k.length)return n(E,W),Ae&&yr(E,re),U;if(W===null){for(;re<k.length;re++)W=g(E,k[re],A),W!==null&&(_=s(W,_,re),K===null?U=W:K.sibling=W,K=W);return Ae&&yr(E,re),U}for(W=r(E,W);re<k.length;re++)ie=O(W,E,re,k[re],A),ie!==null&&(t&&ie.alternate!==null&&W.delete(ie.key===null?re:ie.key),_=s(ie,_,re),K===null?U=ie:K.sibling=ie,K=ie);return t&&W.forEach(function(Me){return e(E,Me)}),Ae&&yr(E,re),U}function M(E,_,k,A){var U=Yi(k);if(typeof U!="function")throw Error(H(150));if(k=U.call(k),k==null)throw Error(H(151));for(var K=U=null,W=_,re=_=0,ie=null,oe=k.next();W!==null&&!oe.done;re++,oe=k.next()){W.index>re?(ie=W,W=null):ie=W.sibling;var Me=w(E,W,oe.value,A);if(Me===null){W===null&&(W=ie);break}t&&W&&Me.alternate===null&&e(E,W),_=s(Me,_,re),K===null?U=Me:K.sibling=Me,K=Me,W=ie}if(oe.done)return n(E,W),Ae&&yr(E,re),U;if(W===null){for(;!oe.done;re++,oe=k.next())oe=g(E,oe.value,A),oe!==null&&(_=s(oe,_,re),K===null?U=oe:K.sibling=oe,K=oe);return Ae&&yr(E,re),U}for(W=r(E,W);!oe.done;re++,oe=k.next())oe=O(W,E,re,oe.value,A),oe!==null&&(t&&oe.alternate!==null&&W.delete(oe.key===null?re:oe.key),_=s(oe,_,re),K===null?U=oe:K.sibling=oe,K=oe);return t&&W.forEach(function(xt){return e(E,xt)}),Ae&&yr(E,re),U}function q(E,_,k,A){if(typeof k=="object"&&k!==null&&k.type===ii&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case jo:e:{for(var U=k.key,K=_;K!==null;){if(K.key===U){if(U=k.type,U===ii){if(K.tag===7){n(E,K.sibling),_=i(K,k.props.children),_.return=E,E=_;break e}}else if(K.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Dn&&Hf(U)===K.type){n(E,K.sibling),_=i(K,k.props),_.ref=ns(E,K,k),_.return=E,E=_;break e}n(E,K);break}else e(E,K);K=K.sibling}k.type===ii?(_=Or(k.props.children,E.mode,A,k.key),_.return=E,E=_):(A=ra(k.type,k.key,k.props,null,E.mode,A),A.ref=ns(E,_,k),A.return=E,E=A)}return a(E);case ri:e:{for(K=k.key;_!==null;){if(_.key===K)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(E,_.sibling),_=i(_,k.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=au(k,E.mode,A),_.return=E,E=_}return a(E);case Dn:return K=k._init,q(E,_,K(k._payload),A)}if(ls(k))return L(E,_,k,A);if(Yi(k))return M(E,_,k,A);Lo(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(E,_.sibling),_=i(_,k),_.return=E,E=_):(n(E,_),_=ou(k,E.mode,A),_.return=E,E=_),a(E)):n(E,_)}return q}var Ei=lm(!0),um=lm(!1),ya=er(null),wa=null,fi=null,Jc=null;function Yc(){Jc=fi=wa=null}function Xc(t){var e=ya.current;Pe(ya),t._currentValue=e}function Yu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){wa=t,Jc=fi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function Ut(t){var e=t._currentValue;if(Jc!==t)if(t={context:t,memoizedValue:e,next:null},fi===null){if(wa===null)throw Error(H(308));fi=t,wa.dependencies={lanes:0,firstContext:t}}else fi=fi.next=t;return e}var xr=null;function Zc(t){xr===null?xr=[t]:xr.push(t)}function cm(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zc(e)):(n.next=i.next,i.next=n),e.interleaved=n,wn(t,r)}function wn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $n=!1;function ed(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wn(t,n)}return i=r.interleaved,i===null?(e.next=e,Zc(r)):(e.next=i.next,i.next=e),r.interleaved=e,wn(t,n)}function Yo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zc(t,n)}}function Gf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _a(t,e,n,r){var i=t.updateQueue;$n=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var d=u,p=d.next;d.next=null,a===null?s=p:a.next=p,a=d;var v=t.alternate;v!==null&&(v=v.updateQueue,u=v.lastBaseUpdate,u!==a&&(u===null?v.firstBaseUpdate=p:u.next=p,v.lastBaseUpdate=d))}if(s!==null){var g=i.baseState;a=0,v=p=d=null,u=s;do{var w=u.lane,O=u.eventTime;if((r&w)===w){v!==null&&(v=v.next={eventTime:O,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var L=t,M=u;switch(w=e,O=n,M.tag){case 1:if(L=M.payload,typeof L=="function"){g=L.call(O,g,w);break e}g=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=M.payload,w=typeof L=="function"?L.call(O,g,w):L,w==null)break e;g=Ie({},g,w);break e;case 2:$n=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,w=i.effects,w===null?i.effects=[u]:w.push(u))}else O={eventTime:O,lane:w,tag:u.tag,payload:u.payload,callback:u.callback,next:null},v===null?(p=v=O,d=g):v=v.next=O,a|=w;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;w=u,u=w.next,w.next=null,i.lastBaseUpdate=w,i.shared.pending=null}}while(!0);if(v===null&&(d=g),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=v,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Nr|=a,t.lanes=a,t.memoizedState=g}}function Qf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var Hs={},on=er(Hs),Ds=er(Hs),$s=er(Hs);function Er(t){if(t===Hs)throw Error(H(174));return t}function td(t,e){switch(Ee($s,e),Ee(Ds,t),Ee(on,Hs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Au(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Au(e,t)}Pe(on),Ee(on,e)}function ji(){Pe(on),Pe(Ds),Pe($s)}function fm(t){Er($s.current);var e=Er(on.current),n=Au(e,t.type);e!==n&&(Ee(Ds,t),Ee(on,n))}function nd(t){Ds.current===t&&(Pe(on),Pe(Ds))}var Re=er(0);function ba(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eu=[];function rd(){for(var t=0;t<eu.length;t++)eu[t]._workInProgressVersionPrimary=null;eu.length=0}var Xo=bn.ReactCurrentDispatcher,tu=bn.ReactCurrentBatchConfig,Rr=0,Ne=null,He=null,Ye=null,ka=!1,gs=!1,Ls=0,l0=0;function ot(){throw Error(H(321))}function id(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qt(t[n],e[n]))return!1;return!0}function sd(t,e,n,r,i,s){if(Rr=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xo.current=t===null||t.memoizedState===null?f0:h0,t=n(r,i),gs){s=0;do{if(gs=!1,Ls=0,25<=s)throw Error(H(301));s+=1,Ye=He=null,e.updateQueue=null,Xo.current=p0,t=n(r,i)}while(gs)}if(Xo.current=Sa,e=He!==null&&He.next!==null,Rr=0,Ye=He=Ne=null,ka=!1,e)throw Error(H(300));return t}function od(){var t=Ls!==0;return Ls=0,t}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ne.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function zt(){if(He===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?Ne.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(H(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?Ne.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Us(t,e){return typeof e=="function"?e(t):e}function nu(t){var e=zt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=He,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=a=null,d=null,p=s;do{var v=p.lane;if((Rr&v)===v)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var g={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(u=d=g,a=r):d=d.next=g,Ne.lanes|=v,Nr|=v}p=p.next}while(p!==null&&p!==s);d===null?a=r:d.next=u,Qt(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,Nr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ru(t){var e=zt(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Qt(s,e.memoizedState)||(wt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hm(){}function pm(t,e){var n=Ne,r=zt(),i=e(),s=!Qt(r.memoizedState,i);if(s&&(r.memoizedState=i,wt=!0),r=r.queue,ad(gm.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,zs(9,vm.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error(H(349));Rr&30||mm(n,e,i)}return i}function mm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vm(t,e,n,r){e.value=n,e.getSnapshot=r,ym(e)&&wm(t)}function gm(t,e,n){return n(function(){ym(e)&&wm(t)})}function ym(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qt(t,n)}catch{return!0}}function wm(t){var e=wn(t,1);e!==null&&Gt(e,t,1,-1)}function Jf(t){var e=tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:t},e.queue=t,t=t.dispatch=d0.bind(null,Ne,t),[e.memoizedState,t]}function zs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _m(){return zt().memoizedState}function Zo(t,e,n,r){var i=tn();Ne.flags|=t,i.memoizedState=zs(1|e,n,void 0,r===void 0?null:r)}function Ma(t,e,n,r){var i=zt();r=r===void 0?null:r;var s=void 0;if(He!==null){var a=He.memoizedState;if(s=a.destroy,r!==null&&id(r,a.deps)){i.memoizedState=zs(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=zs(1|e,n,s,r)}function Yf(t,e){return Zo(8390656,8,t,e)}function ad(t,e){return Ma(2048,8,t,e)}function bm(t,e){return Ma(4,2,t,e)}function km(t,e){return Ma(4,4,t,e)}function Sm(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xm(t,e,n){return n=n!=null?n.concat([t]):null,Ma(4,4,Sm.bind(null,e,t),n)}function ld(){}function Em(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&id(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function jm(t,e){var n=zt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&id(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cm(t,e,n){return Rr&21?(Qt(n,e)||(n=Rp(),Ne.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function u0(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var r=tu.transition;tu.transition={};try{t(!1),e()}finally{ke=n,tu.transition=r}}function Om(){return zt().memoizedState}function c0(t,e,n){var r=Qn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pm(t))Tm(e,n);else if(n=cm(t,e,n,r),n!==null){var i=ft();Gt(n,t,r,i),Am(n,e,r)}}function d0(t,e,n){var r=Qn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pm(t))Tm(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(i.hasEagerState=!0,i.eagerState=u,Qt(u,a)){var d=e.interleaved;d===null?(i.next=i,Zc(e)):(i.next=d.next,d.next=i),e.interleaved=i;return}}catch{}finally{}n=cm(t,e,i,r),n!==null&&(i=ft(),Gt(n,t,r,i),Am(n,e,r))}}function Pm(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Tm(t,e){gs=ka=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Am(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zc(t,n)}}var Sa={readContext:Ut,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},f0={readContext:Ut,useCallback:function(t,e){return tn().memoizedState=[t,e===void 0?null:e],t},useContext:Ut,useEffect:Yf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4194308,4,Sm.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zo(4,2,t,e)},useMemo:function(t,e){var n=tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c0.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=tn();return t={current:t},e.memoizedState=t},useState:Jf,useDebugValue:ld,useDeferredValue:function(t){return tn().memoizedState=t},useTransition:function(){var t=Jf(!1),e=t[0];return t=u0.bind(null,t[1]),tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=tn();if(Ae){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Xe===null)throw Error(H(349));Rr&30||mm(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Yf(gm.bind(null,r,s,t),[t]),r.flags|=2048,zs(9,vm.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=tn(),e=Xe.identifierPrefix;if(Ae){var n=pn,r=hn;n=(r&~(1<<32-Ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ls++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=l0++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h0={readContext:Ut,useCallback:Em,useContext:Ut,useEffect:ad,useImperativeHandle:xm,useInsertionEffect:bm,useLayoutEffect:km,useMemo:jm,useReducer:nu,useRef:_m,useState:function(){return nu(Us)},useDebugValue:ld,useDeferredValue:function(t){var e=zt();return Cm(e,He.memoizedState,t)},useTransition:function(){var t=nu(Us)[0],e=zt().memoizedState;return[t,e]},useMutableSource:hm,useSyncExternalStore:pm,useId:Om,unstable_isNewReconciler:!1},p0={readContext:Ut,useCallback:Em,useContext:Ut,useEffect:ad,useImperativeHandle:xm,useInsertionEffect:bm,useLayoutEffect:km,useMemo:jm,useReducer:ru,useRef:_m,useState:function(){return ru(Us)},useDebugValue:ld,useDeferredValue:function(t){var e=zt();return He===null?e.memoizedState=t:Cm(e,He.memoizedState,t)},useTransition:function(){var t=ru(Us)[0],e=zt().memoizedState;return[t,e]},useMutableSource:hm,useSyncExternalStore:pm,useId:Om,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ba={isMounted:function(t){return(t=t._reactInternals)?$r(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),i=Qn(t),s=vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(Gt(e,t,i,r),Yo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),i=Qn(t),s=vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hn(t,s,i),e!==null&&(Gt(e,t,i,r),Yo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=Qn(t),i=vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hn(t,i,r),e!==null&&(Gt(e,t,r,n),Yo(e,t,r))}};function Xf(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!As(n,r)||!As(i,s):!0}function Rm(t,e,n){var r=!1,i=Xn,s=e.contextType;return typeof s=="object"&&s!==null?s=Ut(s):(i=bt(e)?Tr:ut.current,r=e.contextTypes,s=(r=r!=null)?Si(t,i):Xn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ba,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zf(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ba.enqueueReplaceState(e,e.state,null)}function Zu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ed(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ut(s):(s=bt(e)?Tr:ut.current,i.context=Si(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ba.enqueueReplaceState(i,i.state,null),_a(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ci(t,e){try{var n="",r=e;do n+=Fg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function iu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ec(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var m0=typeof WeakMap=="function"?WeakMap:Map;function Nm(t,e,n){n=vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ea||(Ea=!0,cc=r),ec(t,e)},n}function Im(t,e,n){n=vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ec(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ec(t,e),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function eh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new m0;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=P0.bind(null,t,e,n),e.then(t,t))}function th(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=vn(-1,1),e.tag=2,Hn(n,e,1))),n.lanes|=1),t)}var v0=bn.ReactCurrentOwner,wt=!1;function dt(t,e,n,r){e.child=t===null?um(e,null,n,r):Ei(e,t.child,n,r)}function rh(t,e,n,r,i){n=n.render;var s=e.ref;return wi(e,i),r=sd(t,e,n,r,s,i),n=od(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_n(t,e,i)):(Ae&&n&&Hc(e),e.flags|=1,dt(t,e,r,i),e.child)}function ih(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dm(t,e,s,r,i)):(t=ra(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:As,n(a,r)&&t.ref===e.ref)return _n(t,e,i)}return e.flags|=1,t=Jn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Dm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(As(s,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,_n(t,e,i)}return tc(t,e,n,r,i)}function $m(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(pi,Ct),Ct|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(pi,Ct),Ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ee(pi,Ct),Ct|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ee(pi,Ct),Ct|=r;return dt(t,e,i,n),e.child}function Lm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tc(t,e,n,r,i){var s=bt(n)?Tr:ut.current;return s=Si(e,s),wi(e,i),n=sd(t,e,n,r,s,i),r=od(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_n(t,e,i)):(Ae&&r&&Hc(e),e.flags|=1,dt(t,e,n,i),e.child)}function sh(t,e,n,r,i){if(bt(n)){var s=!0;ma(e)}else s=!1;if(wi(e,i),e.stateNode===null)ea(t,e),Rm(e,n,r),Zu(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var d=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Ut(p):(p=bt(n)?Tr:ut.current,p=Si(e,p));var v=n.getDerivedStateFromProps,g=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||d!==p)&&Zf(e,a,r,p),$n=!1;var w=e.memoizedState;a.state=w,_a(e,r,a,i),d=e.memoizedState,u!==r||w!==d||_t.current||$n?(typeof v=="function"&&(Xu(e,n,v,r),d=e.memoizedState),(u=$n||Xf(e,n,u,r,w,d,p))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),a.props=r,a.state=d,a.context=p,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,dm(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Kt(e.type,u),a.props=p,g=e.pendingProps,w=a.context,d=n.contextType,typeof d=="object"&&d!==null?d=Ut(d):(d=bt(n)?Tr:ut.current,d=Si(e,d));var O=n.getDerivedStateFromProps;(v=typeof O=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==g||w!==d)&&Zf(e,a,r,d),$n=!1,w=e.memoizedState,a.state=w,_a(e,r,a,i);var L=e.memoizedState;u!==g||w!==L||_t.current||$n?(typeof O=="function"&&(Xu(e,n,O,r),L=e.memoizedState),(p=$n||Xf(e,n,p,r,w,L,d)||!1)?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,L,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,L,d)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=L),a.props=r,a.state=L,a.context=d,r=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),r=!1)}return nc(t,e,n,r,s,i)}function nc(t,e,n,r,i,s){Lm(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&qf(e,n,!1),_n(t,e,s);r=e.stateNode,v0.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ei(e,t.child,null,s),e.child=Ei(e,null,u,s)):dt(t,e,u,s),e.memoizedState=r.state,i&&qf(e,n,!0),e.child}function Um(t){var e=t.stateNode;e.pendingContext?Kf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kf(t,e.context,!1),td(t,e.containerInfo)}function oh(t,e,n,r,i){return xi(),Qc(i),e.flags|=256,dt(t,e,n,r),e.child}var rc={dehydrated:null,treeContext:null,retryLane:0};function ic(t){return{baseLanes:t,cachePool:null,transitions:null}}function zm(t,e,n){var r=e.pendingProps,i=Re.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ee(Re,i&1),t===null)return Ju(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=qa(a,r,0,null),t=Or(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ic(n),e.memoizedState=rc,t):ud(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return g0(t,e,a,r,u,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,u=i.sibling;var d={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Jn(i,d),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=Jn(u,s):(s=Or(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?ic(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=rc,r}return s=t.child,t=s.sibling,r=Jn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ud(t,e){return e=qa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Uo(t,e,n,r){return r!==null&&Qc(r),Ei(e,t.child,null,n),t=ud(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g0(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=iu(Error(H(422))),Uo(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qa({mode:"visible",children:r.children},i,0,null),s=Or(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ei(e,t.child,null,a),e.child.memoizedState=ic(a),e.memoizedState=rc,s);if(!(e.mode&1))return Uo(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(H(419)),r=iu(s,r,void 0),Uo(t,e,a,r)}if(u=(a&t.childLanes)!==0,wt||u){if(r=Xe,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wn(t,i),Gt(r,t,i,-1))}return md(),r=iu(Error(H(421))),Uo(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=T0.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ot=Vn(i.nextSibling),Pt=e,Ae=!0,Vt=null,t!==null&&(It[Dt++]=hn,It[Dt++]=pn,It[Dt++]=Ar,hn=t.id,pn=t.overflow,Ar=e),e=ud(e,r.children),e.flags|=4096,e)}function ah(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yu(t.return,e,n)}function su(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(dt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ah(t,n,e);else if(t.tag===19)ah(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ee(Re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ba(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),su(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ba(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}su(e,!0,n,null,s);break;case"together":su(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Jn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Jn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function y0(t,e,n){switch(e.tag){case 3:Um(e),xi();break;case 5:fm(e);break;case 1:bt(e.type)&&ma(e);break;case 4:td(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ee(ya,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?zm(t,e,n):(Ee(Re,Re.current&1),t=_n(t,e,n),t!==null?t.sibling:null);Ee(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,$m(t,e,n)}return _n(t,e,n)}var Bm,sc,Fm,Km;Bm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sc=function(){};Fm=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Er(on.current);var s=null;switch(n){case"input":i=Cu(t,i),r=Cu(t,r),s=[];break;case"select":i=Ie({},i,{value:void 0}),r=Ie({},r,{value:void 0}),s=[];break;case"textarea":i=Tu(t,i),r=Tu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ha)}Ru(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var u=i[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xs.hasOwnProperty(p)?s||(s=[]):(s=s||[]).push(p,null));for(p in r){var d=r[p];if(u=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==u&&(d!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(n||(n={}),n[a]=d[a])}else n||(s||(s=[]),s.push(p,n)),n=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(s=s||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(s=s||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xs.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Oe("scroll",t),s||u===d||(s=[])):(s=s||[]).push(p,d))}n&&(s=s||[]).push("style",n);var p=s;(e.updateQueue=p)&&(e.flags|=4)}};Km=function(t,e,n,r){n!==r&&(e.flags|=4)};function rs(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function w0(t,e,n){var r=e.pendingProps;switch(Gc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return bt(e.type)&&pa(),at(e),null;case 3:return r=e.stateNode,ji(),Pe(_t),Pe(ut),rd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($o(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(hc(Vt),Vt=null))),sc(t,e),at(e),null;case 5:nd(e);var i=Er($s.current);if(n=e.type,t!==null&&e.stateNode!=null)Fm(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return at(e),null}if(t=Er(on.current),$o(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[rn]=e,r[Is]=s,t=(e.mode&1)!==0,n){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)Oe(cs[i],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":vf(r,s),Oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Oe("invalid",r);break;case"textarea":yf(r,s),Oe("invalid",r)}Ru(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&Do(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&Do(r.textContent,u,t),i=["children",""+u]):xs.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&Oe("scroll",r)}switch(n){case"input":Co(r),gf(r,s,!0);break;case"textarea":Co(r),wf(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ha)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[rn]=e,t[Is]=r,Bm(t,e,!1,!1),e.stateNode=t;e:{switch(a=Nu(n,r),n){case"dialog":Oe("cancel",t),Oe("close",t),i=r;break;case"iframe":case"object":case"embed":Oe("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)Oe(cs[i],t);i=r;break;case"source":Oe("error",t),i=r;break;case"img":case"image":case"link":Oe("error",t),Oe("load",t),i=r;break;case"details":Oe("toggle",t),i=r;break;case"input":vf(t,r),i=Cu(t,r),Oe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ie({},r,{value:void 0}),Oe("invalid",t);break;case"textarea":yf(t,r),i=Tu(t,r),Oe("invalid",t);break;default:i=r}Ru(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var d=u[s];s==="style"?_p(t,d):s==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&yp(t,d)):s==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&Es(t,d):typeof d=="number"&&Es(t,""+d):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xs.hasOwnProperty(s)?d!=null&&s==="onScroll"&&Oe("scroll",t):d!=null&&Nc(t,s,d,a))}switch(n){case"input":Co(t),gf(t,r,!1);break;case"textarea":Co(t),wf(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mi(t,!!r.multiple,s,!1):r.defaultValue!=null&&mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ha)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)Km(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Er($s.current),Er(on.current),$o(e)){if(r=e.stateNode,n=e.memoizedProps,r[rn]=e,(s=r.nodeValue!==n)&&(t=Pt,t!==null))switch(t.tag){case 3:Do(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Do(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rn]=e,e.stateNode=r}return at(e),null;case 13:if(Pe(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ae&&Ot!==null&&e.mode&1&&!(e.flags&128))am(),xi(),e.flags|=98560,s=!1;else if(s=$o(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[rn]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),s=!1}else Vt!==null&&(hc(Vt),Vt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ge===0&&(Ge=3):md())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ji(),sc(t,e),t===null&&Rs(e.stateNode.containerInfo),at(e),null;case 10:return Xc(e.type._context),at(e),null;case 17:return bt(e.type)&&pa(),at(e),null;case 19:if(Pe(Re),s=e.memoizedState,s===null)return at(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)rs(s,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ba(t),a!==null){for(e.flags|=128,rs(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Re,Re.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>Oi&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304)}else{if(!r)if(t=ba(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ae)return at(e),null}else 2*ze()-s.renderingStartTime>Oi&&n!==1073741824&&(e.flags|=128,r=!0,rs(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=Re.current,Ee(Re,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return pd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ct&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function _0(t,e){switch(Gc(e),e.tag){case 1:return bt(e.type)&&pa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ji(),Pe(_t),Pe(ut),rd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return nd(e),null;case 13:if(Pe(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Re),null;case 4:return ji(),null;case 10:return Xc(e.type._context),null;case 22:case 23:return pd(),null;case 24:return null;default:return null}}var zo=!1,lt=!1,b0=typeof WeakSet=="function"?WeakSet:Set,se=null;function hi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$e(t,e,r)}else n.current=null}function oc(t,e,n){try{n()}catch(r){$e(t,e,r)}}var lh=!1;function k0(t,e){if(Ku=ca,t=Gp(),Vc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,d=-1,p=0,v=0,g=t,w=null;t:for(;;){for(var O;g!==n||i!==0&&g.nodeType!==3||(u=a+i),g!==s||r!==0&&g.nodeType!==3||(d=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(O=g.firstChild)!==null;)w=g,g=O;for(;;){if(g===t)break t;if(w===n&&++p===i&&(u=a),w===s&&++v===r&&(d=a),(O=g.nextSibling)!==null)break;g=w,w=g.parentNode}g=O}n=u===-1||d===-1?null:{start:u,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(qu={focusedElem:t,selectionRange:n},ca=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var M=L.memoizedProps,q=L.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?M:Kt(e.type,M),q);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(A){$e(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return L=lh,lh=!1,L}function ys(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oc(e,n,s)}i=i.next}while(i!==r)}}function Fa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ac(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qm(t){var e=t.alternate;e!==null&&(t.alternate=null,qm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rn],delete e[Is],delete e[Hu],delete e[i0],delete e[s0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Wm(t){return t.tag===5||t.tag===3||t.tag===4}function uh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Wm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ha));else if(r!==4&&(t=t.child,t!==null))for(lc(t,e,n),t=t.sibling;t!==null;)lc(t,e,n),t=t.sibling}function uc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uc(t,e,n),t=t.sibling;t!==null;)uc(t,e,n),t=t.sibling}var et=null,qt=!1;function An(t,e,n){for(n=n.child;n!==null;)Vm(t,e,n),n=n.sibling}function Vm(t,e,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Ia,n)}catch{}switch(n.tag){case 5:lt||hi(n,e);case 6:var r=et,i=qt;et=null,An(t,e,n),et=r,qt=i,et!==null&&(qt?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(qt?(t=et,n=n.stateNode,t.nodeType===8?Xl(t.parentNode,n):t.nodeType===1&&Xl(t,n),Ps(t)):Xl(et,n.stateNode));break;case 4:r=et,i=qt,et=n.stateNode.containerInfo,qt=!0,An(t,e,n),et=r,qt=i;break;case 0:case 11:case 14:case 15:if(!lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&oc(n,e,a),i=i.next}while(i!==r)}An(t,e,n);break;case 1:if(!lt&&(hi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){$e(n,e,u)}An(t,e,n);break;case 21:An(t,e,n);break;case 22:n.mode&1?(lt=(r=lt)||n.memoizedState!==null,An(t,e,n),lt=r):An(t,e,n);break;default:An(t,e,n)}}function ch(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b0),e.forEach(function(r){var i=A0.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:et=u.stateNode,qt=!1;break e;case 3:et=u.stateNode.containerInfo,qt=!0;break e;case 4:et=u.stateNode.containerInfo,qt=!0;break e}u=u.return}if(et===null)throw Error(H(160));Vm(s,a,i),et=null,qt=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){$e(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hm(e,t),e=e.sibling}function Hm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bt(e,t),en(t),r&4){try{ys(3,t,t.return),Fa(3,t)}catch(M){$e(t,t.return,M)}try{ys(5,t,t.return)}catch(M){$e(t,t.return,M)}}break;case 1:Bt(e,t),en(t),r&512&&n!==null&&hi(n,n.return);break;case 5:if(Bt(e,t),en(t),r&512&&n!==null&&hi(n,n.return),t.flags&32){var i=t.stateNode;try{Es(i,"")}catch(M){$e(t,t.return,M)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&mp(i,s),Nu(u,a);var p=Nu(u,s);for(a=0;a<d.length;a+=2){var v=d[a],g=d[a+1];v==="style"?_p(i,g):v==="dangerouslySetInnerHTML"?yp(i,g):v==="children"?Es(i,g):Nc(i,v,g,p)}switch(u){case"input":Ou(i,s);break;case"textarea":vp(i,s);break;case"select":var w=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var O=s.value;O!=null?mi(i,!!s.multiple,O,!1):w!==!!s.multiple&&(s.defaultValue!=null?mi(i,!!s.multiple,s.defaultValue,!0):mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Is]=s}catch(M){$e(t,t.return,M)}}break;case 6:if(Bt(e,t),en(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(M){$e(t,t.return,M)}}break;case 3:if(Bt(e,t),en(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(M){$e(t,t.return,M)}break;case 4:Bt(e,t),en(t);break;case 13:Bt(e,t),en(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fd=ze())),r&4&&ch(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(p=lt)||v,Bt(e,t),lt=p):Bt(e,t),en(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(se=t,v=t.child;v!==null;){for(g=se=v;se!==null;){switch(w=se,O=w.child,w.tag){case 0:case 11:case 14:case 15:ys(4,w,w.return);break;case 1:hi(w,w.return);var L=w.stateNode;if(typeof L.componentWillUnmount=="function"){r=w,n=w.return;try{e=r,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(M){$e(r,n,M)}}break;case 5:hi(w,w.return);break;case 22:if(w.memoizedState!==null){fh(g);continue}}O!==null?(O.return=w,se=O):fh(g)}v=v.sibling}e:for(v=null,g=t;;){if(g.tag===5){if(v===null){v=g;try{i=g.stateNode,p?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=g.stateNode,d=g.memoizedProps.style,a=d!=null&&d.hasOwnProperty("display")?d.display:null,u.style.display=wp("display",a))}catch(M){$e(t,t.return,M)}}}else if(g.tag===6){if(v===null)try{g.stateNode.nodeValue=p?"":g.memoizedProps}catch(M){$e(t,t.return,M)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;v===g&&(v=null),g=g.return}v===g&&(v=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Bt(e,t),en(t),r&4&&ch(t);break;case 21:break;default:Bt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Wm(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Es(i,""),r.flags&=-33);var s=uh(t);uc(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=uh(t);lc(t,u,a);break;default:throw Error(H(161))}}catch(d){$e(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S0(t,e,n){se=t,Gm(t)}function Gm(t,e,n){for(var r=(t.mode&1)!==0;se!==null;){var i=se,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||zo;if(!a){var u=i.alternate,d=u!==null&&u.memoizedState!==null||lt;u=zo;var p=lt;if(zo=a,(lt=d)&&!p)for(se=i;se!==null;)a=se,d=a.child,a.tag===22&&a.memoizedState!==null?hh(i):d!==null?(d.return=a,se=d):hh(i);for(;s!==null;)se=s,Gm(s),s=s.sibling;se=i,zo=u,lt=p}dh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,se=s):dh(t)}}function dh(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Fa(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Qf(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qf(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var g=v.dehydrated;g!==null&&Ps(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}lt||e.flags&512&&ac(e)}catch(w){$e(e,e.return,w)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function fh(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function hh(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fa(4,e)}catch(d){$e(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(d){$e(e,i,d)}}var s=e.return;try{ac(e)}catch(d){$e(e,s,d)}break;case 5:var a=e.return;try{ac(e)}catch(d){$e(e,a,d)}}}catch(d){$e(e,e.return,d)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var x0=Math.ceil,xa=bn.ReactCurrentDispatcher,cd=bn.ReactCurrentOwner,Lt=bn.ReactCurrentBatchConfig,_e=0,Xe=null,We=null,tt=0,Ct=0,pi=er(0),Ge=0,Ms=null,Nr=0,Ka=0,dd=0,ws=null,gt=null,fd=0,Oi=1/0,cn=null,Ea=!1,cc=null,Gn=null,Mo=!1,Fn=null,ja=0,_s=0,dc=null,ta=-1,na=0;function ft(){return _e&6?ze():ta!==-1?ta:ta=ze()}function Qn(t){return t.mode&1?_e&2&&tt!==0?tt&-tt:a0.transition!==null?(na===0&&(na=Rp()),na):(t=ke,t!==0||(t=window.event,t=t===void 0?16:zp(t.type)),t):1}function Gt(t,e,n,r){if(50<_s)throw _s=0,dc=null,Error(H(185));qs(t,n,r),(!(_e&2)||t!==Xe)&&(t===Xe&&(!(_e&2)&&(Ka|=n),Ge===4&&zn(t,tt)),kt(t,r),n===1&&_e===0&&!(e.mode&1)&&(Oi=ze()+500,za&&tr()))}function kt(t,e){var n=t.callbackNode;ay(t,e);var r=ua(t,t===Xe?tt:0);if(r===0)n!==null&&kf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kf(n),e===1)t.tag===0?o0(ph.bind(null,t)):im(ph.bind(null,t)),n0(function(){!(_e&6)&&tr()}),n=null;else{switch(Np(r)){case 1:n=Uc;break;case 4:n=Tp;break;case 16:n=la;break;case 536870912:n=Ap;break;default:n=la}n=nv(n,Qm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qm(t,e){if(ta=-1,na=0,_e&6)throw Error(H(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=ua(t,t===Xe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ca(t,r);else{e=r;var i=_e;_e|=2;var s=Ym();(Xe!==t||tt!==e)&&(cn=null,Oi=ze()+500,Cr(t,e));do try{C0();break}catch(u){Jm(t,u)}while(!0);Yc(),xa.current=s,_e=i,We!==null?e=0:(Xe=null,tt=0,e=Ge)}if(e!==0){if(e===2&&(i=Uu(t),i!==0&&(r=i,e=fc(t,i))),e===1)throw n=Ms,Cr(t,0),zn(t,r),kt(t,ze()),n;if(e===6)zn(t,r);else{if(i=t.current.alternate,!(r&30)&&!E0(i)&&(e=Ca(t,r),e===2&&(s=Uu(t),s!==0&&(r=s,e=fc(t,s))),e===1))throw n=Ms,Cr(t,0),zn(t,r),kt(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:wr(t,gt,cn);break;case 3:if(zn(t,r),(r&130023424)===r&&(e=fd+500-ze(),10<e)){if(ua(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vu(wr.bind(null,t,gt,cn),e);break}wr(t,gt,cn);break;case 4:if(zn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ht(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*x0(r/1960))-r,10<r){t.timeoutHandle=Vu(wr.bind(null,t,gt,cn),r);break}wr(t,gt,cn);break;case 5:wr(t,gt,cn);break;default:throw Error(H(329))}}}return kt(t,ze()),t.callbackNode===n?Qm.bind(null,t):null}function fc(t,e){var n=ws;return t.current.memoizedState.isDehydrated&&(Cr(t,e).flags|=256),t=Ca(t,e),t!==2&&(e=gt,gt=n,e!==null&&hc(e)),t}function hc(t){gt===null?gt=t:gt.push.apply(gt,t)}function E0(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zn(t,e){for(e&=~dd,e&=~Ka,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ht(e),r=1<<n;t[n]=-1,e&=~r}}function ph(t){if(_e&6)throw Error(H(327));_i();var e=ua(t,0);if(!(e&1))return kt(t,ze()),null;var n=Ca(t,e);if(t.tag!==0&&n===2){var r=Uu(t);r!==0&&(e=r,n=fc(t,r))}if(n===1)throw n=Ms,Cr(t,0),zn(t,e),kt(t,ze()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,gt,cn),kt(t,ze()),null}function hd(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(Oi=ze()+500,za&&tr())}}function Ir(t){Fn!==null&&Fn.tag===0&&!(_e&6)&&_i();var e=_e;_e|=1;var n=Lt.transition,r=ke;try{if(Lt.transition=null,ke=1,t)return t()}finally{ke=r,Lt.transition=n,_e=e,!(_e&6)&&tr()}}function pd(){Ct=pi.current,Pe(pi)}function Cr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,t0(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(Gc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pa();break;case 3:ji(),Pe(_t),Pe(ut),rd();break;case 5:nd(r);break;case 4:ji();break;case 13:Pe(Re);break;case 19:Pe(Re);break;case 10:Xc(r.type._context);break;case 22:case 23:pd()}n=n.return}if(Xe=t,We=t=Jn(t.current,null),tt=Ct=e,Ge=0,Ms=null,dd=Ka=Nr=0,gt=ws=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}xr=null}return t}function Jm(t,e){do{var n=We;try{if(Yc(),Xo.current=Sa,ka){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ka=!1}if(Rr=0,Ye=He=Ne=null,gs=!1,Ls=0,cd.current=null,n===null||n.return===null){Ge=1,Ms=e,We=null;break}e:{var s=t,a=n.return,u=n,d=e;if(e=tt,u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,v=u,g=v.tag;if(!(v.mode&1)&&(g===0||g===11||g===15)){var w=v.alternate;w?(v.updateQueue=w.updateQueue,v.memoizedState=w.memoizedState,v.lanes=w.lanes):(v.updateQueue=null,v.memoizedState=null)}var O=th(a);if(O!==null){O.flags&=-257,nh(O,a,u,s,e),O.mode&1&&eh(s,p,e),e=O,d=p;var L=e.updateQueue;if(L===null){var M=new Set;M.add(d),e.updateQueue=M}else L.add(d);break e}else{if(!(e&1)){eh(s,p,e),md();break e}d=Error(H(426))}}else if(Ae&&u.mode&1){var q=th(a);if(q!==null){!(q.flags&65536)&&(q.flags|=256),nh(q,a,u,s,e),Qc(Ci(d,u));break e}}s=d=Ci(d,u),Ge!==4&&(Ge=2),ws===null?ws=[s]:ws.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=Nm(s,d,e);Gf(s,E);break e;case 1:u=d;var _=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Gn===null||!Gn.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=Im(s,u,e);Gf(s,A);break e}}s=s.return}while(s!==null)}Zm(n)}catch(U){e=U,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function Ym(){var t=xa.current;return xa.current=Sa,t===null?Sa:t}function md(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Xe===null||!(Nr&268435455)&&!(Ka&268435455)||zn(Xe,tt)}function Ca(t,e){var n=_e;_e|=2;var r=Ym();(Xe!==t||tt!==e)&&(cn=null,Cr(t,e));do try{j0();break}catch(i){Jm(t,i)}while(!0);if(Yc(),_e=n,xa.current=r,We!==null)throw Error(H(261));return Xe=null,tt=0,Ge}function j0(){for(;We!==null;)Xm(We)}function C0(){for(;We!==null&&!Xg();)Xm(We)}function Xm(t){var e=tv(t.alternate,t,Ct);t.memoizedProps=t.pendingProps,e===null?Zm(t):We=e,cd.current=null}function Zm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=_0(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,We=null;return}}else if(n=w0(n,e,Ct),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ge===0&&(Ge=5)}function wr(t,e,n){var r=ke,i=Lt.transition;try{Lt.transition=null,ke=1,O0(t,e,n,r)}finally{Lt.transition=i,ke=r}return null}function O0(t,e,n,r){do _i();while(Fn!==null);if(_e&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ly(t,s),t===Xe&&(We=Xe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mo||(Mo=!0,nv(la,function(){return _i(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Lt.transition,Lt.transition=null;var a=ke;ke=1;var u=_e;_e|=4,cd.current=null,k0(t,n),Hm(n,t),Gy(qu),ca=!!Ku,qu=Ku=null,t.current=n,S0(n),Zg(),_e=u,ke=a,Lt.transition=s}else t.current=n;if(Mo&&(Mo=!1,Fn=t,ja=i),s=t.pendingLanes,s===0&&(Gn=null),ny(n.stateNode),kt(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ea)throw Ea=!1,t=cc,cc=null,t;return ja&1&&t.tag!==0&&_i(),s=t.pendingLanes,s&1?t===dc?_s++:(_s=0,dc=t):_s=0,tr(),null}function _i(){if(Fn!==null){var t=Np(ja),e=Lt.transition,n=ke;try{if(Lt.transition=null,ke=16>t?16:t,Fn===null)var r=!1;else{if(t=Fn,Fn=null,ja=0,_e&6)throw Error(H(331));var i=_e;for(_e|=4,se=t.current;se!==null;){var s=se,a=s.child;if(se.flags&16){var u=s.deletions;if(u!==null){for(var d=0;d<u.length;d++){var p=u[d];for(se=p;se!==null;){var v=se;switch(v.tag){case 0:case 11:case 15:ys(8,v,s)}var g=v.child;if(g!==null)g.return=v,se=g;else for(;se!==null;){v=se;var w=v.sibling,O=v.return;if(qm(v),v===p){se=null;break}if(w!==null){w.return=O,se=w;break}se=O}}}var L=s.alternate;if(L!==null){var M=L.child;if(M!==null){L.child=null;do{var q=M.sibling;M.sibling=null,M=q}while(M!==null)}}se=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,se=a;else e:for(;se!==null;){if(s=se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ys(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,se=E;break e}se=s.return}}var _=t.current;for(se=_;se!==null;){a=se;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,se=k;else e:for(a=_;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Fa(9,u)}}catch(U){$e(u,u.return,U)}if(u===a){se=null;break e}var A=u.sibling;if(A!==null){A.return=u.return,se=A;break e}se=u.return}}if(_e=i,tr(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Ia,t)}catch{}r=!0}return r}finally{ke=n,Lt.transition=e}}return!1}function mh(t,e,n){e=Ci(n,e),e=Nm(t,e,1),t=Hn(t,e,1),e=ft(),t!==null&&(qs(t,1,e),kt(t,e))}function $e(t,e,n){if(t.tag===3)mh(t,t,n);else for(;e!==null;){if(e.tag===3){mh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){t=Ci(n,t),t=Im(e,t,1),e=Hn(e,t,1),t=ft(),e!==null&&(qs(e,1,t),kt(e,t));break}}e=e.return}}function P0(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(tt&n)===n&&(Ge===4||Ge===3&&(tt&130023424)===tt&&500>ze()-fd?Cr(t,0):dd|=n),kt(t,e)}function ev(t,e){e===0&&(t.mode&1?(e=To,To<<=1,!(To&130023424)&&(To=4194304)):e=1);var n=ft();t=wn(t,e),t!==null&&(qs(t,e,n),kt(t,n))}function T0(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ev(t,n)}function A0(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),ev(t,n)}var tv;tv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_t.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,y0(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ae&&e.flags&1048576&&sm(e,ga,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ea(t,e),t=e.pendingProps;var i=Si(e,ut.current);wi(e,n),i=sd(null,e,r,t,i,n);var s=od();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(s=!0,ma(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ed(e),i.updater=Ba,e.stateNode=i,i._reactInternals=e,Zu(e,r,t,n),e=nc(null,e,r,!0,s,n)):(e.tag=0,Ae&&s&&Hc(e),dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=N0(r),t=Kt(r,t),i){case 0:e=tc(null,e,r,t,n);break e;case 1:e=sh(null,e,r,t,n);break e;case 11:e=rh(null,e,r,t,n);break e;case 14:e=ih(null,e,r,Kt(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),tc(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),sh(t,e,r,i,n);case 3:e:{if(Um(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,dm(t,e),_a(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ci(Error(H(423)),e),e=oh(t,e,r,n,i);break e}else if(r!==i){i=Ci(Error(H(424)),e),e=oh(t,e,r,n,i);break e}else for(Ot=Vn(e.stateNode.containerInfo.firstChild),Pt=e,Ae=!0,Vt=null,n=um(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===i){e=_n(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return fm(e),t===null&&Ju(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Wu(r,i)?a=null:s!==null&&Wu(r,s)&&(e.flags|=32),Lm(t,e),dt(t,e,a,n),e.child;case 6:return t===null&&Ju(e),null;case 13:return zm(t,e,n);case 4:return td(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ei(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),rh(t,e,r,i,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ee(ya,r._currentValue),r._currentValue=a,s!==null)if(Qt(s.value,a)){if(s.children===i.children&&!_t.current){e=_n(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var d=u.firstContext;d!==null;){if(d.context===r){if(s.tag===1){d=vn(-1,n&-n),d.tag=2;var p=s.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?d.next=d:(d.next=v.next,v.next=d),p.pending=d}}s.lanes|=n,d=s.alternate,d!==null&&(d.lanes|=n),Yu(s.return,n,e),u.lanes|=n;break}d=d.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(H(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Yu(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wi(e,n),i=Ut(i),r=r(i),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,i=Kt(r,e.pendingProps),i=Kt(r.type,i),ih(t,e,r,i,n);case 15:return Dm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Kt(r,i),ea(t,e),e.tag=1,bt(r)?(t=!0,ma(e)):t=!1,wi(e,n),Rm(e,r,i),Zu(e,r,i,n),nc(null,e,r,!0,t,n);case 19:return Mm(t,e,n);case 22:return $m(t,e,n)}throw Error(H(156,e.tag))};function nv(t,e){return Pp(t,e)}function R0(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new R0(t,e,n,r)}function vd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N0(t){if(typeof t=="function")return vd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dc)return 11;if(t===$c)return 14}return 2}function Jn(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ra(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")vd(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ii:return Or(n.children,i,s,e);case Ic:a=8,i|=8;break;case Su:return t=$t(12,n,e,i|2),t.elementType=Su,t.lanes=s,t;case xu:return t=$t(13,n,e,i),t.elementType=xu,t.lanes=s,t;case Eu:return t=$t(19,n,e,i),t.elementType=Eu,t.lanes=s,t;case fp:return qa(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cp:a=10;break e;case dp:a=9;break e;case Dc:a=11;break e;case $c:a=14;break e;case Dn:a=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=$t(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Or(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function qa(t,e,n,r){return t=$t(22,t,r,e),t.elementType=fp,t.lanes=n,t.stateNode={isHidden:!1},t}function ou(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function au(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I0(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gd(t,e,n,r,i,s,a,u,d){return t=new I0(t,e,n,u,d),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ed(s),t}function D0(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rv(t){if(!t)return Xn;t=t._reactInternals;e:{if($r(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(bt(n))return rm(t,n,e)}return e}function iv(t,e,n,r,i,s,a,u,d){return t=gd(n,r,!0,t,i,s,a,u,d),t.context=rv(null),n=t.current,r=ft(),i=Qn(n),s=vn(r,i),s.callback=e??null,Hn(n,s,i),t.current.lanes=i,qs(t,i,r),kt(t,r),t}function Wa(t,e,n,r){var i=e.current,s=ft(),a=Qn(i);return n=rv(n),e.context===null?e.context=n:e.pendingContext=n,e=vn(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hn(i,e,a),t!==null&&(Gt(t,i,a,s),Yo(t,i,a)),a}function Oa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yd(t,e){vh(t,e),(t=t.alternate)&&vh(t,e)}function $0(){return null}var sv=typeof reportError=="function"?reportError:function(t){console.error(t)};function wd(t){this._internalRoot=t}Va.prototype.render=wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Wa(t,e,null,null)};Va.prototype.unmount=wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ir(function(){Wa(null,t,null,null)}),e[yn]=null}};function Va(t){this._internalRoot=t}Va.prototype.unstable_scheduleHydration=function(t){if(t){var e=$p();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Un.length&&e!==0&&e<Un[n].priority;n++);Un.splice(n,0,t),n===0&&Up(t)}};function _d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ha(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gh(){}function L0(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var p=Oa(a);s.call(p)}}var a=iv(e,r,t,0,null,!1,!1,"",gh);return t._reactRootContainer=a,t[yn]=a.current,Rs(t.nodeType===8?t.parentNode:t),Ir(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var p=Oa(d);u.call(p)}}var d=gd(t,0,!1,null,null,!1,!1,"",gh);return t._reactRootContainer=d,t[yn]=d.current,Rs(t.nodeType===8?t.parentNode:t),Ir(function(){Wa(e,d,n,r)}),d}function Ga(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var u=i;i=function(){var d=Oa(a);u.call(d)}}Wa(e,a,t,i)}else a=L0(n,e,t,i,r);return Oa(a)}Ip=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&(zc(e,n|1),kt(e,ze()),!(_e&6)&&(Oi=ze()+500,tr()))}break;case 13:Ir(function(){var r=wn(t,1);if(r!==null){var i=ft();Gt(r,t,1,i)}}),yd(t,1)}};Mc=function(t){if(t.tag===13){var e=wn(t,134217728);if(e!==null){var n=ft();Gt(e,t,134217728,n)}yd(t,134217728)}};Dp=function(t){if(t.tag===13){var e=Qn(t),n=wn(t,e);if(n!==null){var r=ft();Gt(n,t,e,r)}yd(t,e)}};$p=function(){return ke};Lp=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};Du=function(t,e,n){switch(e){case"input":if(Ou(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ua(r);if(!i)throw Error(H(90));pp(r),Ou(r,i)}}}break;case"textarea":vp(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};Sp=hd;xp=Ir;var U0={usingClientEntryPoint:!1,Events:[Vs,li,Ua,bp,kp,hd]},is={findFiberByHostInstance:Sr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z0={bundleType:is.bundleType,version:is.version,rendererPackageName:is.rendererPackageName,rendererConfig:is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cp(t),t===null?null:t.stateNode},findFiberByHostInstance:is.findFiberByHostInstance||$0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Ia=Bo.inject(z0),sn=Bo}catch{}}At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U0;At.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_d(e))throw Error(H(200));return D0(t,e,null,n)};At.createRoot=function(t,e){if(!_d(t))throw Error(H(299));var n=!1,r="",i=sv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gd(t,1,!1,null,null,n,!1,r,i),t[yn]=e.current,Rs(t.nodeType===8?t.parentNode:t),new wd(e)};At.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Cp(e),t=t===null?null:t.stateNode,t};At.flushSync=function(t){return Ir(t)};At.hydrate=function(t,e,n){if(!Ha(e))throw Error(H(200));return Ga(null,t,e,!0,n)};At.hydrateRoot=function(t,e,n){if(!_d(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=sv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=iv(e,null,t,1,n??null,i,!1,s,a),t[yn]=e.current,Rs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Va(e)};At.render=function(t,e,n){if(!Ha(e))throw Error(H(200));return Ga(null,t,e,!1,n)};At.unmountComponentAtNode=function(t){if(!Ha(t))throw Error(H(40));return t._reactRootContainer?(Ir(function(){Ga(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};At.unstable_batchedUpdates=hd;At.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ha(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Ga(t,e,n,!1,r)};At.version="18.3.1-next-f1338f8080-20240426";function ov(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ov)}catch(t){console.error(t)}}ov(),op.exports=At;var M0=op.exports,av,yh=M0;av=yh.createRoot,yh.hydrateRoot;/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),wh=t=>{const e=F0(t);return e.charAt(0).toUpperCase()+e.slice(1)},lv=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),K0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=we.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...u},d)=>we.createElement("svg",{ref:d,...q0,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:lv("lucide",i),...!s&&!K0(u)&&{"aria-hidden":"true"},...u},[...a.map(([p,v])=>we.createElement(p,v)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=(t,e)=>{const n=we.forwardRef(({className:r,...i},s)=>we.createElement(W0,{ref:s,iconNode:e,className:lv(`lucide-${B0(wh(t))}`,`lucide-${t}`,r),...i}));return n.displayName=wh(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],H0=nr("calculator",V0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Q0=nr("chevron-down",G0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y0=nr("chevron-right",J0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_h=nr("clipboard-list",X0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],bh=nr("hammer",Z0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kh=nr("moon",ew);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sh=nr("sun",tw);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],xh=nr("wrench",nw),rw="modulepreload",iw=function(t){return"/BricoFrank/"+t},Eh={},Gs=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(d=>{if(d=iw(d),d in Eh)return;Eh[d]=!0;const p=d.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":rw,p||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),p)return new Promise((w,O)=>{g.addEventListener("load",w),g.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return i.then(a=>{for(const u of a||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},sw=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ii);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class bd extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jh extends bd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ch extends bd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Oh extends bd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pc;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(pc||(pc={}));var ow=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class aw{constructor(e,{headers:n={},customFetch:r,region:i=pc.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=sw(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ow(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:a,body:u,signal:d}=r;let p={},{region:v}=r;v||(v=this.region);const g=new URL(`${this.url}/${n}`);v&&v!=="any"&&(p["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let w;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(p["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(p["Content-Type"]="application/json",w=JSON.stringify(u)));const O=yield this.fetch(g.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),s),body:w,signal:d}).catch(E=>{throw E.name==="AbortError"?E:new jh(E)}),L=O.headers.get("x-relay-error");if(L&&L==="true")throw new Ch(O);if(!O.ok)throw new Oh(O);let M=((i=O.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),q;return M==="application/json"?q=yield O.json():M==="application/octet-stream"?q=yield O.blob():M==="text/event-stream"?q=O:M==="multipart/form-data"?q=yield O.formData():q=yield O.text(),{data:q,error:null,response:O}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new jh(s)}:{data:null,error:s,response:s instanceof Oh||s instanceof Ch?s.context:void 0}}})}}var yt={},kd={},Qa={},Qs={},Ja={},Ya={},lw=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pi=lw();const uw=Pi.fetch,uv=Pi.fetch.bind(Pi),cv=Pi.Headers,cw=Pi.Request,dw=Pi.Response,Ii=Object.freeze(Object.defineProperty({__proto__:null,Headers:cv,Request:cw,Response:dw,default:uv,fetch:uw},Symbol.toStringTag,{value:"Module"})),fw=pg(Ii);var Xa={};Object.defineProperty(Xa,"__esModule",{value:!0});let hw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xa.default=hw;var dv=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ya,"__esModule",{value:!0});const pw=dv(fw),mw=dv(Xa);let vw=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=pw.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,u,d,p;let v=null,g=null,w=null,O=s.status,L=s.statusText;if(s.ok){if(this.method!=="HEAD"){const _=await s.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?g=_:g=JSON.parse(_))}const q=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),E=(d=s.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");q&&E&&E.length>1&&(w=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(v={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,w=null,O=406,L="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const q=await s.text();try{v=JSON.parse(q),Array.isArray(v)&&s.status===404&&(g=[],v=null,O=200,L="OK")}catch{s.status===404&&q===""?(O=204,L="No Content"):v={message:q}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,O=200,L="OK"),v&&this.shouldThrowOnError)throw new mw.default(v)}return{error:v,data:g,count:w,status:O,statusText:L}});return this.shouldThrowOnError||(i=i.catch(s=>{var a,u,d;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(u=s==null?void 0:s.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=s==null?void 0:s.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Ya.default=vw;var gw=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});const yw=gw(Ya);let ww=class extends yw.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const a=s?`${s}.order`:"order",u=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${u?`${u},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,a=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:a="text"}={}){var u;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${p}"; options=${d};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ja.default=ww;var _w=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qs,"__esModule",{value:!0});const bw=_w(Ja);let kw=class extends bw.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Qs.default=kw;var Sw=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qa,"__esModule",{value:!0});const ss=Sw(Qs);let xw=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=i}select(e,n){const{head:r=!1,count:i}=n??{},s=r?"HEAD":"GET";let a=!1;const u=(e??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new ss.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var i;const s="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(a.length>0){const u=[...new Set(a)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ss.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var a;const u="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const d=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(d.length>0){const p=[...new Set(d)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new ss.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:n}={}){var r;const i="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ss.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ss.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Qa.default=xw;var fv=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(kd,"__esModule",{value:!0});const Ew=fv(Qa),jw=fv(Qs);let Cw=class hv{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new Ew.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new hv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){var a;let u;const d=new URL(`${this.url}/rpc/${e}`);let p;r||i?(u=r?"HEAD":"GET",Object.entries(n).filter(([g,w])=>w!==void 0).map(([g,w])=>[g,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([g,w])=>{d.searchParams.append(g,w)})):(u="POST",p=n);const v=new Headers(this.headers);return s&&v.set("Prefer",`count=${s}`),new jw.default({method:u,url:d,headers:v,schema:this.schemaName,body:p,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};kd.default=Cw;var Di=St&&St.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const pv=Di(kd);yt.PostgrestClient=pv.default;const mv=Di(Qa);yt.PostgrestQueryBuilder=mv.default;const vv=Di(Qs);yt.PostgrestFilterBuilder=vv.default;const gv=Di(Ja);yt.PostgrestTransformBuilder=gv.default;const yv=Di(Ya);yt.PostgrestBuilder=yv.default;const wv=Di(Xa);yt.PostgrestError=wv.default;var Ow=yt.default={PostgrestClient:pv.default,PostgrestQueryBuilder:mv.default,PostgrestFilterBuilder:vv.default,PostgrestTransformBuilder:gv.default,PostgrestBuilder:yv.default,PostgrestError:wv.default};const{PostgrestClient:Pw,PostgrestQueryBuilder:fk,PostgrestFilterBuilder:hk,PostgrestTransformBuilder:pk,PostgrestBuilder:mk,PostgrestError:vk}=Ow;class Tw{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Aw="2.75.0",Rw=`realtime-js/${Aw}`,Nw="1.0.0",mc=1e4,Iw=1e3,Dw=100;var bs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bs||(bs={}));var Ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ve||(Ve={}));var Wt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Wt||(Wt={}));var vc;(function(t){t.websocket="websocket"})(vc||(vc={}));var br;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(br||(br={}));class $w{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const u=r.decode(e.slice(a,a+i));a=a+i;const d=r.decode(e.slice(a,a+s));a=a+s;const p=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:u,event:d,payload:p}}}class _v{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(xe||(xe={}));const Ph=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=Lw(a,t,e,i),s),{}):{}},Lw=(t,e,n,r)=>{const i=e.find(u=>u.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?bv(s,a):gc(a)},bv=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Bw(e,n)}switch(t){case xe.bool:return Uw(e);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return zw(e);case xe.json:case xe.jsonb:return Mw(e);case xe.timestamp:return Fw(e);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return gc(e);default:return gc(e)}},gc=t=>t,Uw=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},zw=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Mw=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Bw=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(u=>bv(e,u))}return t},Fw=t=>typeof t=="string"?t.replace(" ","T"):t,kv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class lu{constructor(e,n,r={},i=mc){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Th;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Th||(Th={}));class ks{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,i,s,a),this.pendingDiffs.forEach(d=>{this.state=ks.syncDiff(this.state,d,s,a)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ks.syncDiff(this.state,i,s,a),u())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),u={},d={};return this.map(s,(p,v)=>{a[p]||(d[p]=v)}),this.map(a,(p,v)=>{const g=s[p];if(g){const w=v.map(q=>q.presence_ref),O=g.map(q=>q.presence_ref),L=v.filter(q=>O.indexOf(q.presence_ref)<0),M=g.filter(q=>w.indexOf(q.presence_ref)<0);L.length>0&&(u[p]=L),M.length>0&&(d[p]=M)}else u[p]=v}),this.syncDiff(s,{joins:u,leaves:d},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(u,d)=>{var p;const v=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(d),v.length>0){const g=e[u].map(O=>O.presence_ref),w=v.filter(O=>g.indexOf(O.presence_ref)<0);e[u].unshift(...w)}r(u,v,d)}),this.map(a,(u,d)=>{let p=e[u];if(!p)return;const v=d.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),e[u]=p,i(u,p,d),p.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ah;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ah||(Ah={}));var Ss;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ss||(Ss={}));var dn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(dn||(dn={}));class Sd{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new lu(this,Wt.join,this.params,this.timeout),this.rejoinTimer=new _v(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Wt.reply,{},(a,u)=>{this._trigger(this._replyEventName(u),a)}),this.presence=new ks(this),this.broadcastEndpointURL=kv(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:a,presence:u,private:d}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(O=>O.filter))!==null&&i!==void 0?i:[],v=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,g={},w={broadcast:a,presence:Object.assign(Object.assign({},u),{enabled:v}),postgres_changes:p,private:d};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(O=>e==null?void 0:e(dn.CHANNEL_ERROR,O)),this._onClose(()=>e==null?void 0:e(dn.CLOSED)),this.updateJoinPayload(Object.assign({config:w},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:O})=>{var L;if(this.socket.setAuth(),O===void 0){e==null||e(dn.SUBSCRIBED);return}else{const M=this.bindings.postgres_changes,q=(L=M==null?void 0:M.length)!==null&&L!==void 0?L:0,E=[];for(let _=0;_<q;_++){const k=M[_],{filter:{event:A,schema:U,table:K,filter:W}}=k,re=O&&O[_];if(re&&re.event===A&&re.schema===U&&re.table===K&&re.filter===W)E.push(Object.assign(Object.assign({},k),{id:re.id}));else{this.unsubscribe(),this.state=Ve.errored,e==null||e(dn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(dn.SUBSCRIBED);return}}).receive("error",O=>{this.state=Ve.errored,e==null||e(dn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(O).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(dn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ve.joined&&e===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,u,d;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(u=(a=this.params)===null||a===void 0?void 0:a.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&s("ok"),p.receive("ok",()=>s("ok")),p.receive("error",()=>s("error")),p.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ve.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Wt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new lu(this,Wt.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new lu(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Dw){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:u,error:d,leave:p,join:v}=Wt;if(r&&[u,d,p,v].indexOf(a)>=0&&r!==this._joinRef())return;let w=this._onMessage(a,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(O=>{var L,M,q;return((L=O.filter)===null||L===void 0?void 0:L.event)==="*"||((q=(M=O.filter)===null||M===void 0?void 0:M.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===a}).map(O=>O.callback(w,r)):(s=this.bindings[a])===null||s===void 0||s.filter(O=>{var L,M,q,E,_,k;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in O){const A=O.id,U=(L=O.filter)===null||L===void 0?void 0:L.event;return A&&((M=n.ids)===null||M===void 0?void 0:M.includes(A))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((q=n.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const A=(_=(E=O==null?void 0:O.filter)===null||E===void 0?void 0:E.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return A==="*"||A===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return O.type.toLocaleLowerCase()===a}).map(O=>{if(typeof w=="object"&&"ids"in w){const L=w.data,{schema:M,table:q,commit_timestamp:E,type:_,errors:k}=L;w=Object.assign(Object.assign({},{schema:M,table:q,commit_timestamp:E,eventType:_,new:{},old:{},errors:k}),this._getPayloadRecords(L))}O.callback(w,r)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Sd.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Wt.close,{},e)}_onError(e){this._on(Wt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Ph(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Ph(e.columns,e.old_record)),n}}const uu=()=>{},Fo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Kw=[1e3,2e3,5e3,1e4],qw=1e4,Ww=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Vw{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mc,this.transport=null,this.heartbeatIntervalMs=Fo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=uu,this.ref=0,this.reconnectTimer=null,this.logger=uu,this.conn=null,this.sendBuffer=[],this.serializer=new $w,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...a)=>Gs(async()=>{const{default:u}=await Promise.resolve().then(()=>Ii);return{default:u}},void 0).then(({default:u})=>u(...a)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...a)=>s(...a)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vc.websocket}`,this.httpEndpoint=kv(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Nw}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bs.connecting:return br.Connecting;case bs.open:return br.Open;case bs.closing:return br.Closing;default:return br.Closed}}isConnected(){return this.connectionState()===br.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Sd(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Iw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Fo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,u=a?`(${a})`:"",d=s.status||"";this.log("receive",`${d} ${r} ${i} ${u}`.trim(),s),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Wt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ww],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Rw};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Wt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new _v(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,u,d,p,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:mc,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Fo.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:uu,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:g=>Kw[g-1]||qw,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(g,w)=>w(JSON.stringify(g)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class xd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function qe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hw extends xd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yc extends xd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Gw=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const Sv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ii);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Qw=()=>Gw(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Gs(()=>Promise.resolve().then(()=>Ii),void 0)).Response:Response}),wc=t=>{if(Array.isArray(t))return t.map(n=>wc(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=wc(r)}),e},Jw=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Lr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const cu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Yw=(t,e,n)=>Lr(void 0,void 0,void 0,function*(){const r=yield Qw();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new Hw(cu(i),s,a))}).catch(i=>{e(new yc(cu(i),i))}):e(new yc(cu(t),t))}),Xw=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Jw(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Js(t,e,n,r,i,s){return Lr(this,void 0,void 0,function*(){return new Promise((a,u)=>{t(n,Xw(e,r,i,s)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>a(d)).catch(d=>Yw(d,u,r))})})}function Pa(t,e,n,r){return Lr(this,void 0,void 0,function*(){return Js(t,"GET",e,n,r)})}function nn(t,e,n,r,i){return Lr(this,void 0,void 0,function*(){return Js(t,"POST",e,r,i,n)})}function _c(t,e,n,r,i){return Lr(this,void 0,void 0,function*(){return Js(t,"PUT",e,r,i,n)})}function Zw(t,e,n,r){return Lr(this,void 0,void 0,function*(){return Js(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xv(t,e,n,r,i){return Lr(this,void 0,void 0,function*(){return Js(t,"DELETE",e,r,i,n)})}var e_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class t_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return e_(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(qe(e))return{data:null,error:e};throw e}})}}var n_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class r_{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new t_(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return n_(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(qe(e))return{data:null,error:e};throw e}})}}var vt=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const i_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class s_{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Sv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return vt(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Rh),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const d=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",a.cacheControl),d&&s.append("metadata",this.encodeMetadata(d))):(s=r,u["cache-control"]=`max-age=${a.cacheControl}`,u["content-type"]=a.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i!=null&&i.headers&&(u=Object.assign(Object.assign({},u),i.headers));const p=this._removeEmptyFolders(n),v=this._getFinalPath(p),g=yield(e=="PUT"?_c:nn)(this.fetch,`${this.url}/object/${v}`,s,Object.assign({headers:u},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qe(s))return{data:null,error:s};throw s}})}upload(e,n,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return vt(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),u=new URL(this.url+`/object/upload/sign/${a}`);u.searchParams.set("token",n);try{let d;const p=Object.assign({upsert:Rh.upsert},i),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",p.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",p.cacheControl)):(d=r,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const g=yield _c(this.fetch,u.toString(),d,{headers:v});return{data:{path:s,fullPath:g.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(qe(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return vt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield nn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),u=a.searchParams.get("token");if(!u)throw new xd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}update(e,n,r){return vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return vt(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}copy(e,n,r){return vt(this,void 0,void 0,function*(){try{return{data:{path:(yield nn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return vt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield nn(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return vt(this,void 0,void 0,function*(){try{const i=yield nn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",u=this._getFinalPath(e),d=()=>Pa(this.fetch,`${this.url}/${i}/${u}${a}`,{headers:this.headers,noResolveJson:!0});return new r_(d,this.shouldThrowOnError)}info(e){return vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Pa(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wc(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}exists(e){return vt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Zw(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r)&&r instanceof yc){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const u=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&i.push(d);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}remove(e){return vt(this,void 0,void 0,function*(){try{return{data:yield xv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}})}list(e,n,r){return vt(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},i_),n),{prefix:e||""});return{data:yield nn(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}listV2(e,n){return vt(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield nn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const o_="2.75.0",a_={"X-Client-Info":`storage-js/${o_}`};var Gr=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class l_{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},a_),n),this.fetch=Sv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Gr(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(qe(e))return{data:null,error:e};throw e}})}getBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield Pa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}})}createBucket(e){return Gr(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield nn(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(qe(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Gr(this,void 0,void 0,function*(){try{return{data:yield _c(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Gr(this,void 0,void 0,function*(){try{return{data:yield xv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(qe(n))return{data:null,error:n};throw n}})}}class u_ extends l_{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new s_(this.url,this.headers,e,this.fetch)}}const c_="2.75.0";let ds="";typeof Deno<"u"?ds="deno":typeof document<"u"?ds="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ds="react-native":ds="node";const d_={"X-Client-Info":`supabase-js-${ds}/${c_}`},f_={headers:d_},h_={schema:"public"},p_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m_={};var v_=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};const g_=t=>{let e;return t?e=t:typeof fetch>"u"?e=uv:e=fetch,(...n)=>e(...n)},y_=()=>typeof Headers>"u"?cv:Headers,w_=(t,e,n)=>{const r=g_(n),i=y_();return(s,a)=>v_(void 0,void 0,void 0,function*(){var u;const d=(u=yield e())!==null&&u!==void 0?u:t;let p=new i(a==null?void 0:a.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${d}`),r(s,Object.assign(Object.assign({},a),{headers:p}))})};var __=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};function b_(t){return t.endsWith("/")?t:t+"/"}function k_(t,e){var n,r;const{db:i,auth:s,realtime:a,global:u}=t,{db:d,auth:p,realtime:v,global:g}=e,w={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},p),s),realtime:Object.assign(Object.assign({},v),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),u),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=u==null?void 0:u.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>__(this,void 0,void 0,function*(){return""})};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function S_(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(b_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ev="2.75.0",ti=30*1e3,bc=3,du=bc*ti,x_="http://localhost:9999",E_="supabase.auth.token",j_={"X-Client-Info":`gotrue-js/${Ev}`},kc="X-Supabase-Api-Version",jv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},C_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O_=10*60*1e3;class Bs extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class P_ extends Bs{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function T_(t){return ue(t)&&t.name==="AuthApiError"}class kr extends Bs{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class rr extends Bs{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class In extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function A_(t){return ue(t)&&t.name==="AuthSessionMissingError"}class Qr extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ko extends rr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qo extends rr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R_(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class Nh extends rr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sc extends rr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fu(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class Ih extends rr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class xc extends rr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ta="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Dh=` 	
\r=`.split(""),N_=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Dh.length;e+=1)t[Dh[e].charCodeAt(0)]=-2;for(let e=0;e<Ta.length;e+=1)t[Ta[e].charCodeAt(0)]=e;return t})();function $h(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ta[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ta[r]),e.queuedBits-=6}}function Cv(t,e,n){const r=N_[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Lh(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{$_(a,r,n)};for(let a=0;a<t.length;a+=1)Cv(t.charCodeAt(a),i,s);return e.join("")}function I_(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function D_(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}I_(r,e)}}function $_(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Cv(t.charCodeAt(i),n,r);return new Uint8Array(e)}function L_(t){const e=[];return D_(t,n=>e.push(n)),new Uint8Array(e)}function jr(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>$h(i,n,r)),$h(null,n,r),e.join("")}function U_(t){return Math.round(Date.now()/1e3)+t}function z_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const jt=()=>typeof window<"u"&&typeof document<"u",vr={tested:!1,writable:!1},Ov=()=>{if(!jt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vr.tested)return vr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vr.tested=!0,vr.writable=!0}catch{vr.tested=!0,vr.writable=!1}return vr.writable};function M_(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Pv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Gs(async()=>{const{default:r}=await Promise.resolve().then(()=>Ii);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},B_=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ni=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},gr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rn=async(t,e)=>{await t.removeItem(e)};class Za{constructor(){this.promise=new Za.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Za.promiseConstructor=Promise;function hu(t){const e=t.split(".");if(e.length!==3)throw new xc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!C_.test(e[r]))throw new xc("JWT not in base64url format");return{header:JSON.parse(Lh(e[0])),payload:JSON.parse(Lh(e[1])),signature:bi(e[2]),raw:{header:e[0],payload:e[1]}}}async function F_(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function K_(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function q_(t){return("0"+t.toString(16)).substr(-2)}function W_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,q_).join("")}async function V_(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function H_(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await V_(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jr(t,e,n=!1){const r=W_();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ni(t,`${e}-code-verifier`,i);const s=await H_(r);return[s,r===s?"plain":"s256"]}const G_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Q_(t){const e=t.headers.get(kc);if(!e||!e.match(G_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function J_(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Y_(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const X_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yr(t){if(!X_.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pu(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Uh(t){return JSON.parse(JSON.stringify(t))}var Z_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _r=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),eb=[502,503,504];async function zh(t){var e;if(!B_(t))throw new Sc(_r(t),0);if(eb.includes(t.status))throw new Sc(_r(t),t.status);let n;try{n=await t.json()}catch(s){throw new kr(_r(s),s)}let r;const i=Q_(t);if(i&&i.getTime()>=jv["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ih(_r(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new In}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Ih(_r(n),t.status,n.weak_password.reasons);throw new P_(_r(n),t.status||500,r)}const tb=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function pe(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[kc]||(s[kc]=jv["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const u=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",d=await nb(t,e,n+u,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function nb(t,e,n,r,i,s){const a=tb(e,r,i,s);let u;try{u=await t(n,Object.assign({},a))}catch(d){throw console.error(d),new Sc(_r(d),0)}if(u.ok||await zh(u),r!=null&&r.noResolveJson)return u;try{return await u.json()}catch(d){await zh(d)}}function Ft(t){var e;let n=null;sb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=U_(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Mh(t){const e=Ft(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Mn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function rb(t){return{data:t,error:null}}function ib(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=Z_(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},d=Object.assign({},a);return{data:{properties:u,user:d},error:null}}function Bh(t){return t}function sb(t){return t.access_token&&t.refresh_token&&t.expires_in}const mu=["global","local","others"];var ob=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class ab{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Pv(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=mu[0]){if(mu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mu.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Mn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=ob(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ib,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Mn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Bh});if(v.error)throw v.error;const g=await v.json(),w=(a=v.headers.get("x-total-count"))!==null&&a!==void 0?a:0,O=(d=(u=v.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return O.length>0&&(O.forEach(L=>{const M=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(L.split(";")[1].split("=")[1]);p[`${q}Page`]=M}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(ue(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Yr(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Mn})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Yr(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Mn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Yr(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Mn})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Yr(e.userId);try{const{data:n,error:r}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Yr(e.userId),Yr(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,u,d;try{const p={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Bh});if(v.error)throw v.error;const g=await v.json(),w=(a=v.headers.get("x-total-count"))!==null&&a!==void 0?a:0,O=(d=(u=v.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return O.length>0&&(O.forEach(L=>{const M=parseInt(L.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(L.split(";")[1].split("=")[1]);p[`${q}Page`]=M}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(ue(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await pe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function Fh(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Xr={debug:!!(globalThis&&Ov()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lb extends Tv{}async function ub(t,e,n){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lb(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Xr.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function cb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Av(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function db(t){return parseInt(t,16)}function fb(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function hb(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:u,requestId:d,resources:p,scheme:v,uri:g,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const O=Av(t.address),L=v?`${v}://${r}`:r,M=t.statement?`${t.statement}
`:"",q=`${L} wants you to sign in with your Ethereum account:
${O}

${M}`;let E=`URI: ${g}
Version: ${w}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),u&&(E+=`
Not Before: ${u.toISOString()}`),d&&(E+=`
Request ID: ${d}`),p){let _=`
Resources:`;for(const k of p){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);_+=`
- ${k}`}E+=_}return`${q}
${E}`}class Ke extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Aa extends Ke{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function pb({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ke({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ke({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ke({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ke({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ke({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ke({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Ke({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ke({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(Nv(a)){if(s.rp.id!==a)return new Ke({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ke({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mb({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ke({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ke({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Nv(r)){if(n.rpId!==r)return new Ke({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ke({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ke({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ke({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var Rv=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class vb{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const gb=new vb;function yb(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Rv(t,["challenge","user","excludeCredentials"]),s=bi(e).buffer,a=Object.assign(Object.assign({},n),{id:bi(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let d=0;d<r.length;d++){const p=r[d];u.excludeCredentials[d]=Object.assign(Object.assign({},p),{id:bi(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function wb(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Rv(t,["challenge","allowCredentials"]),i=bi(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const u=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},u),{id:bi(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function _b(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:jr(new Uint8Array(t.response.attestationObject)),clientDataJSON:jr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function bb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:jr(new Uint8Array(i.authenticatorData)),clientDataJSON:jr(new Uint8Array(i.clientDataJSON)),signature:jr(new Uint8Array(i.signature)),userHandle:i.userHandle?jr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Nv(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Kh(){var t,e;return!!(jt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function kb(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",e)}:{data:null,error:new Aa("Empty credential response",e)}}catch(e){return{data:null,error:pb({error:e,options:t})}}}async function Sb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Aa("Browser returned unexpected credential type",e)}:{data:null,error:new Aa("Empty credential response",e)}}catch(e){return{data:null,error:mb({error:e,options:t})}}}const xb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Eb={userVerification:"preferred",hints:["security-key"]};function Ra(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const u=r[s];e(u)?r[s]=Ra(u,a):r[s]=Ra(a)}else r[s]=a}return r}function jb(t,e){return Ra(xb,t,e||{})}function Cb(t,e){return Ra(Eb,t,e||{})}class Ob{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:u};const d=i??gb.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:p}=a.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(a.webauthn.type){case"create":{const p=jb(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:v,error:g}=await kb({publicKey:p,signal:d});return v?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const p=Cb(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:v,error:g}=await Sb(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:p,signal:d}));return v?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(a){return ue(a)?{data:null,error:a}:{data:null,error:new kr("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn authentication")};try{if(!Kh())return{data:null,error:new kr("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:u};const{webauthn:d}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:d.type,rpId:n,rpOrigins:r,credential_response:d.credential_response}})}catch(a){return ue(a)?{data:null,error:a}:{data:null,error:new kr("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Bs("rpId is required for WebAuthn registration")};try{if(!Kh())return{data:null,error:new kr("Browser does not support WebAuthn",null)};const{data:a,error:u}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:u};const{data:d,error:p}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return d?this._verify({factorId:a.id,challengeId:d.challengeId,webauthn:{rpId:n,rpOrigins:r,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:p}}catch(a){return ue(a)?{data:null,error:a}:{data:null,error:new kr("Unexpected error in register",a)}}}}cb();const Pb={url:x_,storageKey:E_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qh(t,e,n){return await n()}const Zr={};class Fs{get jwks(){var e,n;return(n=(e=Zr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Zr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Zr[this.storageKey]=Object.assign(Object.assign({},Zr[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Fs.nextInstanceID,Fs.nextInstanceID+=1,this.instanceID>0&&jt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Pb),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ab({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Pv(i.fetch),this.lock=i.lock||qh,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:jt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ub:this.lock=qh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ob(this)},this.persistSession?(i.storage?this.storage=i.storage:Ov()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fh(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Fh(this.memoryStorage)),jt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ev}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=M_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),jt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),R_(s)){const d=(e=s.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",u),await this._saveSession(a),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?{error:n}:{error:new kr("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ft}),{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:v,password:g,options:w}=e;let O=null,L=null;this.flowType==="pkce"&&([O,L]=await Jr(this.storage,this.storageKey)),s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:v,password:g,data:(n=w==null?void 0:w.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:O,code_challenge_method:L},xform:Ft})}else if("phone"in e){const{phone:v,password:g,options:w}=e;s=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(i=w==null?void 0:w.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:Ft})}else throw new Ko("You must provide either an email or phone number and a password");const{data:a,error:u}=s;if(u||!a)return{data:{user:null,session:null},error:u};const d=a.session,p=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Mh})}else if("phone"in e){const{phone:s,password:a,options:u}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Mh})}else throw new Ko("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Qr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,u,d,p,v,g,w;let O,L;if("message"in e)O=e.message,L=e.signature;else{const{chain:M,wallet:q,statement:E,options:_}=e;let k;if(jt())if(typeof q=="object")k=q;else{const ie=window;if("ethereum"in ie&&typeof ie.ethereum=="object"&&"request"in ie.ethereum&&typeof ie.ethereum.request=="function")k=ie.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=q}const A=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),U=await k.request({method:"eth_requestAccounts"}).then(ie=>ie).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=Av(U[0]);let W=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!W){const ie=await k.request({method:"eth_chainId"});W=db(ie)}const re={domain:A.host,address:K,statement:E,uri:A.href,version:"1",chainId:W,nonce:(i=_==null?void 0:_.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(p=_==null?void 0:_.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=_==null?void 0:_.signInWithEthereum)===null||v===void 0?void 0:v.resources};O=hb(re),L=await k.request({method:"personal_sign",params:[fb(O),K]})}try{const{data:M,error:q}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:O,signature:L},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Ft});if(q)throw q;return!M||!M.session||!M.user?{data:{user:null,session:null},error:new Qr}:(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),{data:Object.assign({},M),error:q})}catch(M){if(ue(M))return{data:{user:null,session:null},error:M};throw M}}async signInWithSolana(e){var n,r,i,s,a,u,d,p,v,g,w,O;let L,M;if("message"in e)L=e.message,M=e.signature;else{const{chain:q,wallet:E,statement:_,options:k}=e;let A;if(jt())if(typeof E=="object")A=E;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))A=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=E}const U=new URL((n=k==null?void 0:k.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in A&&A.signIn){const K=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),_?{statement:_}:null));let W;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")W=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)W=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in W&&"signature"in W&&(typeof W.signedMessage=="string"||W.signedMessage instanceof Uint8Array)&&W.signature instanceof Uint8Array)L=typeof W.signedMessage=="string"?W.signedMessage:new TextDecoder().decode(W.signedMessage),M=W.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");L=[`${U.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(i=(r=k==null?void 0:k.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=k==null?void 0:k.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k==null?void 0:k.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((g=(v=k==null?void 0:k.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...k.signInWithSolana.resources.map(W=>`- ${W}`)]:[]].join(`
`);const K=await A.signMessage(new TextEncoder().encode(L),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=K}}try{const{data:q,error:E}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:L,signature:jr(M)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(O=e.options)===null||O===void 0?void 0:O.captchaToken}}:null),xform:Ft});if(E)throw E;return!q||!q.session||!q.user?{data:{user:null,session:null},error:new Qr}:(q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),{data:Object.assign({},q),error:E})}catch(q){if(ue(q))return{data:{user:null,session:null},error:q};throw q}}async _exchangeCodeForSession(e){const n=await gr(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ft});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Qr}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(ue(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,u=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ft}),{data:d,error:p}=u;return p?{data:{user:null,session:null},error:p}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Qr}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:p})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:u,options:d}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Jr(this.storage,this.storageKey));const{error:g}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:u,options:d}=e,{data:p,error:v}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=d==null?void 0:d.data)!==null&&i!==void 0?i:{},create_user:(s=d==null?void 0:d.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(a=d==null?void 0:d.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new Ko("You must provide either an email or phone number.")}catch(u){if(ue(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:u}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ft});if(u)throw u;if(!a)throw new Error("An error occurred on token verification.");const d=a.session,p=a.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:p,session:d},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await Jr(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:rb})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new In;const{error:i}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:u}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:u}}throw new Ko("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await gr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<du:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await gr(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=pu()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,p,v)=>(!a&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,p,v))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Mn}):await this._useSession(async n=>{var r,i,s;const{data:a,error:u}=n;if(u)throw u;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new In}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Mn})})}catch(n){if(ue(n))return A_(n)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new In;const a=i.session;let u=null,d=null;this.flowType==="pkce"&&e.email!=null&&([u,d]=await Jr(this.storage,this.storageKey));const{data:p,error:v}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:d}),jwt:a.access_token,xform:Mn});if(v)throw v;return a.user=p.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new In;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=hu(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:u,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};s=u}else{const{data:u,error:d}=await this._getUser(e.access_token);if(d)throw d;s={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:u}=n;if(u)throw u;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new In;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!jt())throw new qo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nh("No code detected.");const{data:_,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:u,expires_at:d,token_type:p}=e;if(!s||!u||!a||!p)throw new qo("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(u);let w=v+g;d&&(w=parseInt(d));const O=w-v;O*1e3<=ti&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${O}s, should have been closer to ${g}s`);const L=w-g;v-L>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",L,w,v):v-L<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",L,w,v);const{data:M,error:q}=await this._getUser(s);if(q)throw q;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:g,expires_at:w,refresh_token:a,token_type:p,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(ue(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await gr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:u}=await this.admin.signOut(a,e);if(u&&!(T_(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=z_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Jr(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,u,d,p,v;const{data:g,error:w}=s;if(w)throw w;const O=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",O,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(i)throw i;return jt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ue(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:u,token:d,access_token:p,nonce:v}=e,g=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:d,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ft}),{data:w,error:O}=g;return O?{data:{user:null,session:null},error:O}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new Qr}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:O})}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await K_(async i=>(i>0&&await F_(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ft})),(i,s)=>{const a=200*Math.pow(2,i);return s&&fu(s)&&Date.now()+a-r<ti})}catch(r){if(this._debug(n,"error",r),ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),jt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await gr(this.storage,this.storageKey);if(i&&this.userStorage){let a=await gr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await ni(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:pu()}else if(i&&!i.user&&!i.user){const a=await gr(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await Rn(this.storage,this.storageKey+"-user"),await ni(this.storage,this.storageKey,i)):i.user=pu()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<du;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${du}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),fu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:u}=await this._getUser(i.access_token);!u&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new In;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Za;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new In;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const u={data:s.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(s){if(this._debug(i,"error",s),ue(s)){const a={data:null,error:s};return fu(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(d){s.push(d)}});if(await Promise.all(a),s.length>0){for(let u=0;u<s.length;u+=1)console.error(s[u]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ni(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Uh(i);await ni(this.storage,this.storageKey,s)}else{const i=Uh(n);await ni(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ti);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ti);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ti}ms, refresh threshold is ${bc} ticks`),i<=bc&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Tv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Jr(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(u.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:p}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&d.type==="totp"&&(!((i=d==null?void 0:d.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?_b(e.webauthn.credential_response):bb(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:d}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const a=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:u}=a;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:yb(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:wb(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=hu(i.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(g=>g.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const v=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+O_>i)return r;const{data:s,error:a}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:O,error:L}=await this.getSession();if(L||!O.session)return{data:null,error:L};r=O.session.access_token}const{header:i,payload:s,signature:a,raw:{header:u,payload:d}}=hu(r);n!=null&&n.allowExpired||J_(s.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:O}=await this.getUser(r);if(O)throw O;return{data:{claims:s,header:i,signature:a},error:null}}const v=Y_(i.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,a,L_(`${u}.${d}`)))throw new xc("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}Fs.nextInstanceID=0;const Tb=Fs;class Ab extends Tb{constructor(e){super(e)}}var Rb=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function u(v){try{p(r.next(v))}catch(g){a(g)}}function d(v){try{p(r.throw(v))}catch(g){a(g)}}function p(v){v.done?s(v.value):i(v.value).then(u,d)}p((r=r.apply(t,e||[])).next())})};class Nb{constructor(e,n,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=n;const u=S_(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:h_,realtime:m_,auth:Object.assign(Object.assign({},p_),{storageKey:d}),global:f_},v=k_(r??{},p);this.storageKey=(i=v.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=v.global.headers)!==null&&s!==void 0?s:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,v.global.fetch),this.fetch=w_(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Pw(new URL("rest/v1",u).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new u_(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new aw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return Rb(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:u,lock:d,debug:p},v,g){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ab({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),v),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:u,lock:d,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Vw(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ib=(t,e,n)=>new Nb(t,e,n);function Db(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Db()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ed=Ib(`https://dzazapfzfuonyuvslhgk.supabase.co
`,`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR6YXphcGZ6ZnVvbnl1dnNsaGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAwNDA3NzAsImV4cCI6MjA3NTYxNjc3MH0.wSVO93VzKwC3Tvwwh-1yCDb1gV0Kw5ava5iBGYfD_j0
`);var Iv={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(St,function(){var n=function(o,l){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])})(o,l)},r=function(){return(r=Object.assign||function(o){for(var l,c=1,f=arguments.length;c<f;c++)for(var h in l=arguments[c])Object.prototype.hasOwnProperty.call(l,h)&&(o[h]=l[h]);return o}).apply(this,arguments)};function i(o,l,c){for(var f,h=0,m=l.length;h<m;h++)!f&&h in l||((f=f||Array.prototype.slice.call(l,0,h))[h]=l[h]);return o.concat(f||Array.prototype.slice.call(l))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:St,a=Object.keys,u=Array.isArray;function d(o,l){return typeof l!="object"||a(l).forEach(function(c){o[c]=l[c]}),o}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var p=Object.getPrototypeOf,v={}.hasOwnProperty;function g(o,l){return v.call(o,l)}function w(o,l){typeof l=="function"&&(l=l(p(o))),(typeof Reflect>"u"?a:Reflect.ownKeys)(l).forEach(function(c){L(o,c,l[c])})}var O=Object.defineProperty;function L(o,l,c,f){O(o,l,d(c&&g(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},f))}function M(o){return{from:function(l){return o.prototype=Object.create(l.prototype),L(o.prototype,"constructor",o),{extend:w.bind(null,o.prototype)}}}}var q=Object.getOwnPropertyDescriptor,E=[].slice;function _(o,l,c){return E.call(o,l,c)}function k(o,l){return l(o)}function A(o){if(!o)throw new Error("Assertion Failed")}function U(o){s.setImmediate?setImmediate(o):setTimeout(o,0)}function K(o,l){if(typeof l=="string"&&g(o,l))return o[l];if(!l)return o;if(typeof l!="string"){for(var c=[],f=0,h=l.length;f<h;++f){var m=K(o,l[f]);c.push(m)}return c}var y=l.indexOf(".");if(y!==-1){var b=o[l.substr(0,y)];return b==null?void 0:K(b,l.substr(y+1))}}function W(o,l,c){if(o&&l!==void 0&&!("isFrozen"in Object&&Object.isFrozen(o)))if(typeof l!="string"&&"length"in l){A(typeof c!="string"&&"length"in c);for(var f=0,h=l.length;f<h;++f)W(o,l[f],c[f])}else{var m,y,b=l.indexOf(".");b!==-1?(m=l.substr(0,b),(y=l.substr(b+1))===""?c===void 0?u(o)&&!isNaN(parseInt(m))?o.splice(m,1):delete o[m]:o[m]=c:W(b=!(b=o[m])||!g(o,m)?o[m]={}:b,y,c)):c===void 0?u(o)&&!isNaN(parseInt(l))?o.splice(l,1):delete o[l]:o[l]=c}}function re(o){var l,c={};for(l in o)g(o,l)&&(c[l]=o[l]);return c}var ie=[].concat;function oe(o){return ie.apply([],o)}var or="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(oe([8,16,32,64].map(function(o){return["Int","Uint","Float"].map(function(l){return l+o+"Array"})}))).filter(function(o){return s[o]}),Me=new Set(or.map(function(o){return s[o]})),xt=null;function Be(o){return xt=new WeakMap,o=function l(c){if(!c||typeof c!="object")return c;var f=xt.get(c);if(f)return f;if(u(c)){f=[],xt.set(c,f);for(var h=0,m=c.length;h<m;++h)f.push(l(c[h]))}else if(Me.has(c.constructor))f=c;else{var y,b=p(c);for(y in f=b===Object.prototype?{}:Object.create(b),xt.set(c,f),c)g(c,y)&&(f[y]=l(c[y]))}return f}(o),xt=null,o}var Ur={}.toString;function ir(o){return Ur.call(o).slice(8,-1)}var an=typeof Symbol<"u"?Symbol.iterator:"@@iterator",$i=typeof an=="symbol"?function(o){var l;return o!=null&&(l=o[an])&&l.apply(o)}:function(){return null};function te(o,l){return l=o.indexOf(l),0<=l&&o.splice(l,1),0<=l}var ce={};function de(o){var l,c,f,h;if(arguments.length===1){if(u(o))return o.slice();if(this===ce&&typeof o=="string")return[o];if(h=$i(o)){for(c=[];!(f=h.next()).done;)c.push(f.value);return c}if(o==null)return[o];if(typeof(l=o.length)!="number")return[o];for(c=new Array(l);l--;)c[l]=o[l];return c}for(l=arguments.length,c=new Array(l);l--;)c[l]=arguments[l];return c}var je=typeof Symbol<"u"?function(o){return o[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Nt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zi),Fe={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Mt(o,l){this.name=o,this.message=l}function Jt(o,l){return o+". Errors: "+Object.keys(l).map(function(c){return l[c].toString()}).filter(function(c,f,h){return h.indexOf(c)===f}).join(`
`)}function kn(o,l,c,f){this.failures=l,this.failedKeys=f,this.successCount=c,this.message=Jt(o,l)}function mt(o,l){this.name="BulkError",this.failures=Object.keys(l).map(function(c){return l[c]}),this.failuresByPos=l,this.message=Jt(o,this.failures)}M(Mt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(kn).from(Mt),M(mt).from(Mt);var Sn=Nt.reduce(function(o,l){return o[l]=l+"Error",o},{}),Lv=Mt,le=Nt.reduce(function(o,l){var c=l+"Error";function f(h,m){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=Fe[l]||c,this.inner=null)}return M(f).from(Lv),o[l]=f,o},{});le.Syntax=SyntaxError,le.Type=TypeError,le.Range=RangeError;var Od=zi.reduce(function(o,l){return o[l+"Error"]=le[l],o},{}),Ys=Nt.reduce(function(o,l){return["Syntax","Type","Range"].indexOf(l)===-1&&(o[l+"Error"]=le[l]),o},{});function Se(){}function Li(o){return o}function Uv(o,l){return o==null||o===Li?l:function(c){return l(o(c))}}function sr(o,l){return function(){o.apply(this,arguments),l.apply(this,arguments)}}function zv(o,l){return o===Se?l:function(){var c=o.apply(this,arguments);c!==void 0&&(arguments[0]=c);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=l.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?sr(f,this.onsuccess):f),h&&(this.onerror=this.onerror?sr(h,this.onerror):h),m!==void 0?m:c}}function Mv(o,l){return o===Se?l:function(){o.apply(this,arguments);var c=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,l.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?sr(c,this.onsuccess):c),f&&(this.onerror=this.onerror?sr(f,this.onerror):f)}}function Bv(o,l){return o===Se?l:function(c){var f=o.apply(this,arguments);d(c,f);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,c=l.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?sr(h,this.onsuccess):h),m&&(this.onerror=this.onerror?sr(m,this.onerror):m),f===void 0?c===void 0?void 0:c:d(f,c)}}function Fv(o,l){return o===Se?l:function(){return l.apply(this,arguments)!==!1&&o.apply(this,arguments)}}function tl(o,l){return o===Se?l:function(){var c=o.apply(this,arguments);if(c&&typeof c.then=="function"){for(var f=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return c.then(function(){return l.apply(f,m)})}return l.apply(this,arguments)}}Ys.ModifyError=kn,Ys.DexieError=Mt,Ys.BulkError=mt;var Yt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Pd(o){Yt=o}var Ui={},Td=100,or=typeof Promise>"u"?[]:function(){var o=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[o,p(o),o];var l=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[l,p(l),o]}(),zi=or[0],Nt=or[1],or=or[2],Nt=Nt&&Nt.then,ar=zi&&zi.constructor,nl=!!or,Mi=function(o,l){Bi.push([o,l]),Xs&&(queueMicrotask(qv),Xs=!1)},rl=!0,Xs=!0,lr=[],Zs=[],il=Li,xn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},ae=xn,Bi=[],ur=0,eo=[];function ee(o){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var l=this._PSD=ae;if(typeof o!="function"){if(o!==Ui)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ol(this,this._value))}this._state=null,this._value=null,++l.ref,function c(f,h){try{h(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var y=f._lib&&zr();m&&typeof m.then=="function"?c(f,function(b,j){m instanceof ee?m._then(b,j):m.then(b,j)}):(f._state=!0,f._value=m,Rd(f)),y&&Mr()}},ol.bind(null,f))}catch(m){ol(f,m)}}(this,o)}var sl={get:function(){var o=ae,l=io;function c(f,h){var m=this,y=!o.global&&(o!==ae||l!==io),b=y&&!jn(),j=new ee(function(P,R){al(m,new Ad(Id(f,o,y,b),Id(h,o,y,b),P,R,o))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return c.prototype=Ui,c},set:function(o){L(this,"then",o&&o.prototype===Ui?sl:{get:function(){return o},set:sl.set})}};function Ad(o,l,c,f,h){this.onFulfilled=typeof o=="function"?o:null,this.onRejected=typeof l=="function"?l:null,this.resolve=c,this.reject=f,this.psd=h}function ol(o,l){var c,f;Zs.push(l),o._state===null&&(c=o._lib&&zr(),l=il(l),o._state=!1,o._value=l,f=o,lr.some(function(h){return h._value===f._value})||lr.push(f),Rd(o),c&&Mr())}function Rd(o){var l=o._listeners;o._listeners=[];for(var c=0,f=l.length;c<f;++c)al(o,l[c]);var h=o._PSD;--h.ref||h.finalize(),ur===0&&(++ur,Mi(function(){--ur==0&&ll()},[]))}function al(o,l){if(o._state!==null){var c=o._state?l.onFulfilled:l.onRejected;if(c===null)return(o._state?l.resolve:l.reject)(o._value);++l.psd.ref,++ur,Mi(Kv,[c,o,l])}else o._listeners.push(l)}function Kv(o,l,c){try{var f,h=l._value;!l._state&&Zs.length&&(Zs=[]),f=Yt&&l._consoleTask?l._consoleTask.run(function(){return o(h)}):o(h),l._state||Zs.indexOf(h)!==-1||function(m){for(var y=lr.length;y;)if(lr[--y]._value===m._value)return lr.splice(y,1)}(l),c.resolve(f)}catch(m){c.reject(m)}finally{--ur==0&&ll(),--c.psd.ref||c.psd.finalize()}}function qv(){cr(xn,function(){zr()&&Mr()})}function zr(){var o=rl;return Xs=rl=!1,o}function Mr(){var o,l,c;do for(;0<Bi.length;)for(o=Bi,Bi=[],c=o.length,l=0;l<c;++l){var f=o[l];f[0].apply(null,f[1])}while(0<Bi.length);Xs=rl=!0}function ll(){var o=lr;lr=[],o.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var l=eo.slice(0),c=l.length;c;)l[--c]()}function to(o){return new ee(Ui,!1,o)}function Te(o,l){var c=ae;return function(){var f=zr(),h=ae;try{return Cn(c,!0),o.apply(this,arguments)}catch(m){l&&l(m)}finally{Cn(h,!1),f&&Mr()}}}w(ee.prototype,{then:sl,_then:function(o,l){al(this,new Ad(null,null,o,l,ae))},catch:function(o){if(arguments.length===1)return this.then(null,o);var l=o,c=arguments[1];return typeof l=="function"?this.then(null,function(f){return(f instanceof l?c:to)(f)}):this.then(null,function(f){return(f&&f.name===l?c:to)(f)})},finally:function(o){return this.then(function(l){return ee.resolve(o()).then(function(){return l})},function(l){return ee.resolve(o()).then(function(){return to(l)})})},timeout:function(o,l){var c=this;return o<1/0?new ee(function(f,h){var m=setTimeout(function(){return h(new le.Timeout(l))},o);c.then(f,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&L(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),xn.env=Nd(),w(ee,{all:function(){var o=de.apply(null,arguments).map(so);return new ee(function(l,c){o.length===0&&l([]);var f=o.length;o.forEach(function(h,m){return ee.resolve(h).then(function(y){o[m]=y,--f||l(o)},c)})})},resolve:function(o){return o instanceof ee?o:o&&typeof o.then=="function"?new ee(function(l,c){o.then(l,c)}):new ee(Ui,!0,o)},reject:to,race:function(){var o=de.apply(null,arguments).map(so);return new ee(function(l,c){o.map(function(f){return ee.resolve(f).then(l,c)})})},PSD:{get:function(){return ae},set:function(o){return ae=o}},totalEchoes:{get:function(){return io}},newPSD:En,usePSD:cr,scheduler:{get:function(){return Mi},set:function(o){Mi=o}},rejectionMapper:{get:function(){return il},set:function(o){il=o}},follow:function(o,l){return new ee(function(c,f){return En(function(h,m){var y=ae;y.unhandleds=[],y.onunhandled=m,y.finalize=sr(function(){var b,j=this;b=function(){j.unhandleds.length===0?h():m(j.unhandleds[0])},eo.push(function P(){b(),eo.splice(eo.indexOf(P),1)}),++ur,Mi(function(){--ur==0&&ll()},[])},y.finalize),o()},l,c,f)})}}),ar&&(ar.allSettled&&L(ee,"allSettled",function(){var o=de.apply(null,arguments).map(so);return new ee(function(l){o.length===0&&l([]);var c=o.length,f=new Array(c);o.forEach(function(h,m){return ee.resolve(h).then(function(y){return f[m]={status:"fulfilled",value:y}},function(y){return f[m]={status:"rejected",reason:y}}).then(function(){return--c||l(f)})})})}),ar.any&&typeof AggregateError<"u"&&L(ee,"any",function(){var o=de.apply(null,arguments).map(so);return new ee(function(l,c){o.length===0&&c(new AggregateError([]));var f=o.length,h=new Array(f);o.forEach(function(m,y){return ee.resolve(m).then(function(b){return l(b)},function(b){h[y]=b,--f||c(new AggregateError(h))})})})}),ar.withResolvers&&(ee.withResolvers=ar.withResolvers));var Qe={awaits:0,echoes:0,id:0},Wv=0,no=[],ro=0,io=0,Vv=0;function En(o,l,c,f){var h=ae,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++Vv,xn.env,m.env=nl?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},l&&d(m,l),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=cr(m,o,c,f),m.ref===0&&m.finalize(),f}function Br(){return Qe.id||(Qe.id=++Wv),++Qe.awaits,Qe.echoes+=Td,Qe.id}function jn(){return!!Qe.awaits&&(--Qe.awaits==0&&(Qe.id=0),Qe.echoes=Qe.awaits*Td,!0)}function so(o){return Qe.echoes&&o&&o.constructor===ar?(Br(),o.then(function(l){return jn(),l},function(l){return jn(),Le(l)})):o}function Hv(){var o=no[no.length-1];no.pop(),Cn(o,!1)}function Cn(o,l){var c,f=ae;(l?!Qe.echoes||ro++&&o===ae:!ro||--ro&&o===ae)||queueMicrotask(l?(function(h){++io,Qe.echoes&&--Qe.echoes!=0||(Qe.echoes=Qe.awaits=Qe.id=0),no.push(ae),Cn(h,!0)}).bind(null,o):Hv),o!==ae&&(ae=o,f===xn&&(xn.env=Nd()),nl&&(c=xn.env.Promise,l=o.env,(f.global||o.global)&&(Object.defineProperty(s,"Promise",l.PromiseProp),c.all=l.all,c.race=l.race,c.resolve=l.resolve,c.reject=l.reject,l.allSettled&&(c.allSettled=l.allSettled),l.any&&(c.any=l.any))))}function Nd(){var o=s.Promise;return nl?{Promise:o,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:o.all,race:o.race,allSettled:o.allSettled,any:o.any,resolve:o.resolve,reject:o.reject}:{}}function cr(o,l,c,f,h){var m=ae;try{return Cn(o,!0),l(c,f,h)}finally{Cn(m,!1)}}function Id(o,l,c,f){return typeof o!="function"?o:function(){var h=ae;c&&Br(),Cn(l,!0);try{return o.apply(this,arguments)}finally{Cn(h,!1),f&&queueMicrotask(jn)}}}function ul(o){Promise===ar&&Qe.echoes===0?ro===0?o():enqueueNativeMicroTask(o):setTimeout(o,0)}(""+Nt).indexOf("[native code]")===-1&&(Br=jn=Se);var Le=ee.reject,dr="￿",ln="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Dd="String expected.",Fr=[],oo="__dbnames",cl="readonly",dl="readwrite";function fr(o,l){return o?l?function(){return o.apply(this,arguments)&&l.apply(this,arguments)}:o:l}var $d={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ao(o){return typeof o!="string"||/\./.test(o)?function(l){return l}:function(l){return l[o]===void 0&&o in l&&delete(l=Be(l))[o],l}}function Ld(){throw le.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ge(o,l){try{var c=Ud(o),f=Ud(l);if(c!==f)return c==="Array"?1:f==="Array"?-1:c==="binary"?1:f==="binary"?-1:c==="string"?1:f==="string"?-1:c==="Date"?1:f!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return l<o?1:o<l?-1:0;case"binary":return function(h,m){for(var y=h.length,b=m.length,j=y<b?y:b,P=0;P<j;++P)if(h[P]!==m[P])return h[P]<m[P]?-1:1;return y===b?0:y<b?-1:1}(zd(o),zd(l));case"Array":return function(h,m){for(var y=h.length,b=m.length,j=y<b?y:b,P=0;P<j;++P){var R=ge(h[P],m[P]);if(R!==0)return R}return y===b?0:y<b?-1:1}(o,l)}}catch{}return NaN}function Ud(o){var l=typeof o;return l!="object"?l:ArrayBuffer.isView(o)?"binary":(o=ir(o),o==="ArrayBuffer"?"binary":o)}function zd(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):new Uint8Array(o)}function lo(o,l,c){var f=o.schema.yProps;return f?(l&&0<c.numFailures&&(l=l.filter(function(h,m){return!c.failures[m]})),Promise.all(f.map(function(h){return h=h.updatesTable,l?o.db.table(h).where("k").anyOf(l).delete():o.db.table(h).clear()})).then(function(){return c})):c}var Md=(Ce.prototype._trans=function(o,l,c){var f=this._tx||ae.trans,h=this.name,m=Yt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(o==="readonly"?"read":"write"," ").concat(this.name));function y(P,R,S){if(!S.schema[h])throw new le.NotFound("Table "+h+" not part of transaction");return l(S.idbtrans,S)}var b=zr();try{var j=f&&f.db._novip===this.db._novip?f===ae.trans?f._promise(o,y,c):En(function(){return f._promise(o,y,c)},{trans:f,transless:ae.transless||ae}):function P(R,S,D,C){if(R.idbdb&&(R._state.openComplete||ae.letThrough||R._vip)){var T=R._createTransaction(S,D,R._dbSchema);try{T.create(),R._state.PR1398_maxLoop=3}catch(I){return I.name===Sn.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return P(R,S,D,C)})):Le(I)}return T._promise(S,function(I,N){return En(function(){return ae.trans=T,C(I,N,T)})}).then(function(I){if(S==="readwrite")try{T.idbtrans.commit()}catch{}return S==="readonly"?I:T._completion.then(function(){return I})})}if(R._state.openComplete)return Le(new le.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return Le(new le.DatabaseClosed);R.open().catch(Se)}return R._state.dbReadyPromise.then(function(){return P(R,S,D,C)})}(this.db,o,[this.name],y);return m&&(j._consoleTask=m,j=j.catch(function(P){return console.trace(P),Le(P)})),j}finally{b&&Mr()}},Ce.prototype.get=function(o,l){var c=this;return o&&o.constructor===Object?this.where(o).first(l):o==null?Le(new le.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return c.core.get({trans:f,key:o}).then(function(h){return c.hook.reading.fire(h)})}).then(l)},Ce.prototype.where=function(o){if(typeof o=="string")return new this.db.WhereClause(this,o);if(u(o))return new this.db.WhereClause(this,"[".concat(o.join("+"),"]"));var l=a(o);if(l.length===1)return this.where(l[0]).equals(o[l[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(b){if(b.compound&&l.every(function(P){return 0<=b.keyPath.indexOf(P)})){for(var j=0;j<l.length;++j)if(l.indexOf(b.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(b,j){return b.keyPath.length-j.keyPath.length})[0];if(c&&this.db._maxKey!==dr){var m=c.keyPath.slice(0,l.length);return this.where(m).equals(m.map(function(j){return o[j]}))}!c&&Yt&&console.warn("The query ".concat(JSON.stringify(o)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(l.join("+"),"]"));var f=this.schema.idxByName;function h(b,j){return ge(b,j)===0}var y=l.reduce(function(S,j){var P=S[0],R=S[1],S=f[j],D=o[j];return[P||S,P||!S?fr(R,S&&S.multi?function(C){return C=K(C,j),u(C)&&C.some(function(T){return h(D,T)})}:function(C){return h(D,K(C,j))}):R]},[null,null]),m=y[0],y=y[1];return m?this.where(m.name).equals(o[m.keyPath]).filter(y):c?this.filter(y):this.where(l).equals("")},Ce.prototype.filter=function(o){return this.toCollection().and(o)},Ce.prototype.count=function(o){return this.toCollection().count(o)},Ce.prototype.offset=function(o){return this.toCollection().offset(o)},Ce.prototype.limit=function(o){return this.toCollection().limit(o)},Ce.prototype.each=function(o){return this.toCollection().each(o)},Ce.prototype.toArray=function(o){return this.toCollection().toArray(o)},Ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ce.prototype.orderBy=function(o){return new this.db.Collection(new this.db.WhereClause(this,u(o)?"[".concat(o.join("+"),"]"):o))},Ce.prototype.reverse=function(){return this.toCollection().reverse()},Ce.prototype.mapToClass=function(o){var l,c=this.db,f=this.name;function h(){return l!==null&&l.apply(this,arguments)||this}(this.schema.mappedClass=o).prototype instanceof Ld&&(function(j,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function R(){this.constructor=j}n(j,P),j.prototype=P===null?Object.create(P):(R.prototype=P.prototype,new R)}(h,l=o),Object.defineProperty(h.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},o=h);for(var m=new Set,y=o.prototype;y;y=p(y))Object.getOwnPropertyNames(y).forEach(function(j){return m.add(j)});function b(j){if(!j)return j;var P,R=Object.create(o.prototype);for(P in j)if(!m.has(P))try{R[P]=j[P]}catch{}return R}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=b,this.hook("reading",b),o},Ce.prototype.defineClass=function(){return this.mapToClass(function(o){d(this,o)})},Ce.prototype.add=function(o,l){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,y=o;return m&&h&&(y=ao(m)(o)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"add",keys:l!=null?[l]:null,values:[y]})}).then(function(b){return b.numFailures?ee.reject(b.failures[0]):b.lastResult}).then(function(b){if(m)try{W(o,m,b)}catch{}return b})},Ce.prototype.update=function(o,l){return typeof o!="object"||u(o)?this.where(":id").equals(o).modify(l):(o=K(o,this.schema.primKey.keyPath),o===void 0?Le(new le.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(o).modify(l))},Ce.prototype.put=function(o,l){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,y=o;return m&&h&&(y=ao(m)(o)),this._trans("readwrite",function(b){return c.core.mutate({trans:b,type:"put",values:[y],keys:l!=null?[l]:null})}).then(function(b){return b.numFailures?ee.reject(b.failures[0]):b.lastResult}).then(function(b){if(m)try{W(o,m,b)}catch{}return b})},Ce.prototype.delete=function(o){var l=this;return this._trans("readwrite",function(c){return l.core.mutate({trans:c,type:"delete",keys:[o]}).then(function(f){return lo(l,[o],f)}).then(function(f){return f.numFailures?ee.reject(f.failures[0]):void 0})})},Ce.prototype.clear=function(){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"deleteRange",range:$d}).then(function(c){return lo(o,null,c)})}).then(function(l){return l.numFailures?ee.reject(l.failures[0]):void 0})},Ce.prototype.bulkGet=function(o){var l=this;return this._trans("readonly",function(c){return l.core.getMany({keys:o,trans:c}).then(function(f){return f.map(function(h){return l.hook.reading.fire(h)})})})},Ce.prototype.bulkAdd=function(o,l,c){var f=this,h=Array.isArray(l)?l:void 0,m=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(y){var P=f.schema.primKey,b=P.auto,P=P.keyPath;if(P&&h)throw new le.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,P=P&&b?o.map(ao(P)):o;return f.core.mutate({trans:y,type:"add",keys:h,values:P,wantResults:m}).then(function(T){var S=T.numFailures,D=T.results,C=T.lastResult,T=T.failures;if(S===0)return m?D:C;throw new mt("".concat(f.name,".bulkAdd(): ").concat(S," of ").concat(j," operations failed"),T)})})},Ce.prototype.bulkPut=function(o,l,c){var f=this,h=Array.isArray(l)?l:void 0,m=(c=c||(h?void 0:l))?c.allKeys:void 0;return this._trans("readwrite",function(y){var P=f.schema.primKey,b=P.auto,P=P.keyPath;if(P&&h)throw new le.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==o.length)throw new le.InvalidArgument("Arguments objects and keys must have the same length");var j=o.length,P=P&&b?o.map(ao(P)):o;return f.core.mutate({trans:y,type:"put",keys:h,values:P,wantResults:m}).then(function(T){var S=T.numFailures,D=T.results,C=T.lastResult,T=T.failures;if(S===0)return m?D:C;throw new mt("".concat(f.name,".bulkPut(): ").concat(S," of ").concat(j," operations failed"),T)})})},Ce.prototype.bulkUpdate=function(o){var l=this,c=this.core,f=o.map(function(y){return y.key}),h=o.map(function(y){return y.changes}),m=[];return this._trans("readwrite",function(y){return c.getMany({trans:y,keys:f,cache:"clone"}).then(function(b){var j=[],P=[];o.forEach(function(S,D){var C=S.key,T=S.changes,I=b[D];if(I){for(var N=0,$=Object.keys(T);N<$.length;N++){var z=$[N],B=T[z];if(z===l.schema.primKey.keyPath){if(ge(B,C)!==0)throw new le.Constraint("Cannot update primary key in bulkUpdate()")}else W(I,z,B)}m.push(D),j.push(C),P.push(I)}});var R=j.length;return c.mutate({trans:y,type:"put",keys:j,values:P,updates:{keys:f,changeSpecs:h}}).then(function(S){var D=S.numFailures,C=S.failures;if(D===0)return R;for(var T=0,I=Object.keys(C);T<I.length;T++){var N,$=I[T],z=m[Number($)];z!=null&&(N=C[$],delete C[$],C[z]=N)}throw new mt("".concat(l.name,".bulkUpdate(): ").concat(D," of ").concat(R," operations failed"),C)})})})},Ce.prototype.bulkDelete=function(o){var l=this,c=o.length;return this._trans("readwrite",function(f){return l.core.mutate({trans:f,type:"delete",keys:o}).then(function(h){return lo(l,o,h)})}).then(function(y){var h=y.numFailures,m=y.lastResult,y=y.failures;if(h===0)return m;throw new mt("".concat(l.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),y)})},Ce);function Ce(){}function Fi(o){function l(y,b){if(b){for(var j=arguments.length,P=new Array(j-1);--j;)P[j-1]=arguments[j];return c[y].subscribe.apply(null,P),o}if(typeof y=="string")return c[y]}var c={};l.addEventType=m;for(var f=1,h=arguments.length;f<h;++f)m(arguments[f]);return l;function m(y,b,j){if(typeof y!="object"){var P;b=b||Fv;var R={subscribers:[],fire:j=j||Se,subscribe:function(S){R.subscribers.indexOf(S)===-1&&(R.subscribers.push(S),R.fire=b(R.fire,S))},unsubscribe:function(S){R.subscribers=R.subscribers.filter(function(D){return D!==S}),R.fire=R.subscribers.reduce(b,j)}};return c[y]=l[y]=R}a(P=y).forEach(function(S){var D=P[S];if(u(D))m(S,P[S][0],P[S][1]);else{if(D!=="asap")throw new le.InvalidArgument("Invalid event config");var C=m(S,Li,function(){for(var T=arguments.length,I=new Array(T);T--;)I[T]=arguments[T];C.subscribers.forEach(function(N){U(function(){N.apply(null,I)})})})}})}}function Ki(o,l){return M(l).from({prototype:o}),l}function Kr(o,l){return!(o.filter||o.algorithm||o.or)&&(l?o.justLimit:!o.replayFilter)}function fl(o,l){o.filter=fr(o.filter,l)}function hl(o,l,c){var f=o.replayFilter;o.replayFilter=f?function(){return fr(f(),l())}:l,o.justLimit=c&&!f}function uo(o,l){if(o.isPrimKey)return l.primaryKey;var c=l.getIndexByKeyPath(o.index);if(!c)throw new le.Schema("KeyPath "+o.index+" on object store "+l.name+" is not indexed");return c}function Bd(o,l,c){var f=uo(o,l.schema);return l.openCursor({trans:c,values:!o.keysOnly,reverse:o.dir==="prev",unique:!!o.unique,query:{index:f,range:o.range}})}function co(o,l,c,f){var h=o.replayFilter?fr(o.filter,o.replayFilter()):o.filter;if(o.or){var m={},y=function(b,j,P){var R,S;h&&!h(j,P,function(D){return j.stop(D)},function(D){return j.fail(D)})||((S=""+(R=j.primaryKey))=="[object ArrayBuffer]"&&(S=""+new Uint8Array(R)),g(m,S)||(m[S]=!0,l(b,j,P)))};return Promise.all([o.or._iterate(y,c),Fd(Bd(o,f,c),o.algorithm,y,!o.keysOnly&&o.valueMapper)])}return Fd(Bd(o,f,c),fr(o.algorithm,h),l,!o.keysOnly&&o.valueMapper)}function Fd(o,l,c,f){var h=Te(f?function(m,y,b){return c(f(m),y,b)}:c);return o.then(function(m){if(m)return m.start(function(){var y=function(){return m.continue()};l&&!l(m,function(b){return y=b},function(b){m.stop(b),y=Se},function(b){m.fail(b),y=Se})||h(m.value,m,function(b){return y=b}),y()})})}var qi=(Kd.prototype.execute=function(o){var l=this["@@propmod"];if(l.add!==void 0){var c=l.add;if(u(c))return i(i([],u(o)?o:[],!0),c).sort();if(typeof c=="number")return(Number(o)||0)+c;if(typeof c=="bigint")try{return BigInt(o)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(l.remove!==void 0){var f=l.remove;if(u(f))return u(o)?o.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(o)-f;if(typeof f=="bigint")try{return BigInt(o)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=l.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof o=="string"&&o.startsWith(c)?l.replacePrefix[1]+o.substring(c.length):o},Kd);function Kd(o){this["@@propmod"]=o}var Gv=(be.prototype._read=function(o,l){var c=this._ctx;return c.error?c.table._trans(null,Le.bind(null,c.error)):c.table._trans("readonly",o).then(l)},be.prototype._write=function(o){var l=this._ctx;return l.error?l.table._trans(null,Le.bind(null,l.error)):l.table._trans("readwrite",o,"locked")},be.prototype._addAlgorithm=function(o){var l=this._ctx;l.algorithm=fr(l.algorithm,o)},be.prototype._iterate=function(o,l){return co(this._ctx,o,l,this._ctx.table.core)},be.prototype.clone=function(o){var l=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return o&&d(c,o),l._ctx=c,l},be.prototype.raw=function(){return this._ctx.valueMapper=null,this},be.prototype.each=function(o){var l=this._ctx;return this._read(function(c){return co(l,o,c,l.table.core)})},be.prototype.count=function(o){var l=this;return this._read(function(c){var f=l._ctx,h=f.table.core;if(Kr(f,!0))return h.count({trans:c,query:{index:uo(f,h.schema),range:f.range}}).then(function(y){return Math.min(y,f.limit)});var m=0;return co(f,function(){return++m,!1},c,h).then(function(){return m})}).then(o)},be.prototype.sortBy=function(o,l){var c=o.split(".").reverse(),f=c[0],h=c.length-1;function m(j,P){return P?m(j[c[P]],P-1):j[f]}var y=this._ctx.dir==="next"?1:-1;function b(j,P){return ge(m(j,h),m(P,h))*y}return this.toArray(function(j){return j.sort(b)}).then(l)},be.prototype.toArray=function(o){var l=this;return this._read(function(c){var f=l._ctx;if(f.dir==="next"&&Kr(f,!0)&&0<f.limit){var h=f.valueMapper,m=uo(f,f.table.core.schema);return f.table.core.query({trans:c,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(b){return b=b.result,h?b.map(h):b})}var y=[];return co(f,function(b){return y.push(b)},c,f.table.core).then(function(){return y})},o)},be.prototype.offset=function(o){var l=this._ctx;return o<=0||(l.offset+=o,Kr(l)?hl(l,function(){var c=o;return function(f,h){return c===0||(c===1?--c:h(function(){f.advance(c),c=0}),!1)}}):hl(l,function(){var c=o;return function(){return--c<0}})),this},be.prototype.limit=function(o){return this._ctx.limit=Math.min(this._ctx.limit,o),hl(this._ctx,function(){var l=o;return function(c,f,h){return--l<=0&&f(h),0<=l}},!0),this},be.prototype.until=function(o,l){return fl(this._ctx,function(c,f,h){return!o(c.value)||(f(h),l)}),this},be.prototype.first=function(o){return this.limit(1).toArray(function(l){return l[0]}).then(o)},be.prototype.last=function(o){return this.reverse().first(o)},be.prototype.filter=function(o){var l;return fl(this._ctx,function(c){return o(c.value)}),(l=this._ctx).isMatch=fr(l.isMatch,o),this},be.prototype.and=function(o){return this.filter(o)},be.prototype.or=function(o){return new this.db.WhereClause(this._ctx.table,o,this)},be.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},be.prototype.desc=function(){return this.reverse()},be.prototype.eachKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.key,f)})},be.prototype.eachUniqueKey=function(o){return this._ctx.unique="unique",this.eachKey(o)},be.prototype.eachPrimaryKey=function(o){var l=this._ctx;return l.keysOnly=!l.isMatch,this.each(function(c,f){o(f.primaryKey,f)})},be.prototype.keys=function(o){var l=this._ctx;l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,h){c.push(h.key)}).then(function(){return c}).then(o)},be.prototype.primaryKeys=function(o){var l=this._ctx;if(l.dir==="next"&&Kr(l,!0)&&0<l.limit)return this._read(function(f){var h=uo(l,l.table.core.schema);return l.table.core.query({trans:f,values:!1,limit:l.limit,query:{index:h,range:l.range}})}).then(function(f){return f.result}).then(o);l.keysOnly=!l.isMatch;var c=[];return this.each(function(f,h){c.push(h.primaryKey)}).then(function(){return c}).then(o)},be.prototype.uniqueKeys=function(o){return this._ctx.unique="unique",this.keys(o)},be.prototype.firstKey=function(o){return this.limit(1).keys(function(l){return l[0]}).then(o)},be.prototype.lastKey=function(o){return this.reverse().firstKey(o)},be.prototype.distinct=function(){var o=this._ctx,o=o.index&&o.table.schema.idxByName[o.index];if(!o||!o.multi)return this;var l={};return fl(this._ctx,function(h){var f=h.primaryKey.toString(),h=g(l,f);return l[f]=!0,!h}),this},be.prototype.modify=function(o){var l=this,c=this._ctx;return this._write(function(f){var h,m,y;y=typeof o=="function"?o:(h=a(o),m=h.length,function($){for(var z=!1,B=0;B<m;++B){var F=h[B],V=o[F],J=K($,F);V instanceof qi?(W($,F,V.execute(J)),z=!0):J!==V&&(W($,F,V),z=!0)}return z});var b=c.table.core,S=b.schema.primaryKey,j=S.outbound,P=S.extractKey,R=200,S=l.db._options.modifyChunkSize;S&&(R=typeof S=="object"?S[b.name]||S["*"]||200:S);function D($,F){var B=F.failures,F=F.numFailures;T+=$-F;for(var V=0,J=a(B);V<J.length;V++){var G=J[V];C.push(B[G])}}var C=[],T=0,I=[],N=o===qd;return l.clone().primaryKeys().then(function($){function z(F){var V=Math.min(R,$.length-F),J=$.slice(F,F+V);return(N?Promise.resolve([]):b.getMany({trans:f,keys:J,cache:"immutable"})).then(function(G){var Q=[],X=[],Y=j?[]:null,ne=N?J:[];if(!N)for(var me=0;me<V;++me){var ye=G[me],he={value:Be(ye),primKey:$[F+me]};y.call(he,he.value,he)!==!1&&(he.value==null?ne.push($[F+me]):j||ge(P(ye),P(he.value))===0?(X.push(he.value),j&&Y.push($[F+me])):(ne.push($[F+me]),Q.push(he.value)))}return Promise.resolve(0<Q.length&&b.mutate({trans:f,type:"add",values:Q}).then(function(De){for(var fe in De.failures)ne.splice(parseInt(fe),1);D(Q.length,De)})).then(function(){return(0<X.length||B&&typeof o=="object")&&b.mutate({trans:f,type:"put",keys:Y,values:X,criteria:B,changeSpec:typeof o!="function"&&o,isAdditionalChunk:0<F}).then(function(De){return D(X.length,De)})}).then(function(){return(0<ne.length||B&&N)&&b.mutate({trans:f,type:"delete",keys:ne,criteria:B,isAdditionalChunk:0<F}).then(function(De){return lo(c.table,ne,De)}).then(function(De){return D(ne.length,De)})}).then(function(){return $.length>F+V&&z(F+R)})})}var B=Kr(c)&&c.limit===1/0&&(typeof o!="function"||N)&&{index:c.index,range:c.range};return z(0).then(function(){if(0<C.length)throw new kn("Error modifying one or more objects",C,T,I);return $.length})})})},be.prototype.delete=function(){var o=this._ctx,l=o.range;return!Kr(o)||o.table.schema.yProps||!o.isPrimKey&&l.type!==3?this.modify(qd):this._write(function(c){var f=o.table.core.schema.primaryKey,h=l;return o.table.core.count({trans:c,query:{index:f,range:h}}).then(function(m){return o.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(j){var b=j.failures,j=j.numFailures;if(j)throw new kn("Could not delete some values",Object.keys(b).map(function(P){return b[P]}),m-j);return m-j})})})},be);function be(){}var qd=function(o,l){return l.value=null};function Qv(o,l){return o<l?-1:o===l?0:1}function Jv(o,l){return l<o?-1:o===l?0:1}function Et(o,l,c){return o=o instanceof Vd?new o.Collection(o):o,o._ctx.error=new(c||TypeError)(l),o}function qr(o){return new o.Collection(o,function(){return Wd("")}).limit(0)}function fo(o,l,c,f){var h,m,y,b,j,P,R,S=c.length;if(!c.every(function(T){return typeof T=="string"}))return Et(o,Dd);function D(T){h=T==="next"?function(N){return N.toUpperCase()}:function(N){return N.toLowerCase()},m=T==="next"?function(N){return N.toLowerCase()}:function(N){return N.toUpperCase()},y=T==="next"?Qv:Jv;var I=c.map(function(N){return{lower:m(N),upper:h(N)}}).sort(function(N,$){return y(N.lower,$.lower)});b=I.map(function(N){return N.upper}),j=I.map(function(N){return N.lower}),R=(P=T)==="next"?"":f}D("next"),o=new o.Collection(o,function(){return On(b[0],j[S-1]+f)}),o._ondirectionchange=function(T){D(T)};var C=0;return o._addAlgorithm(function(T,I,N){var $=T.key;if(typeof $!="string")return!1;var z=m($);if(l(z,j,C))return!0;for(var B=null,F=C;F<S;++F){var V=function(J,G,Q,X,Y,ne){for(var me=Math.min(J.length,X.length),ye=-1,he=0;he<me;++he){var De=G[he];if(De!==X[he])return Y(J[he],Q[he])<0?J.substr(0,he)+Q[he]+Q.substr(he+1):Y(J[he],X[he])<0?J.substr(0,he)+X[he]+Q.substr(he+1):0<=ye?J.substr(0,ye)+G[ye]+Q.substr(ye+1):null;Y(J[he],De)<0&&(ye=he)}return me<X.length&&ne==="next"?J+Q.substr(J.length):me<J.length&&ne==="prev"?J.substr(0,Q.length):ye<0?null:J.substr(0,ye)+X[ye]+Q.substr(ye+1)}($,z,b[F],j[F],y,P);V===null&&B===null?C=F+1:(B===null||0<y(B,V))&&(B=V)}return I(B!==null?function(){T.continue(B+R)}:N),!1}),o}function On(o,l,c,f){return{type:2,lower:o,upper:l,lowerOpen:c,upperOpen:f}}function Wd(o){return{type:1,lower:o,upper:o}}var Vd=(Object.defineProperty(Je.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Je.prototype.between=function(o,l,c,f){c=c!==!1,f=f===!0;try{return 0<this._cmp(o,l)||this._cmp(o,l)===0&&(c||f)&&(!c||!f)?qr(this):new this.Collection(this,function(){return On(o,l,!c,!f)})}catch{return Et(this,ln)}},Je.prototype.equals=function(o){return o==null?Et(this,ln):new this.Collection(this,function(){return Wd(o)})},Je.prototype.above=function(o){return o==null?Et(this,ln):new this.Collection(this,function(){return On(o,void 0,!0)})},Je.prototype.aboveOrEqual=function(o){return o==null?Et(this,ln):new this.Collection(this,function(){return On(o,void 0,!1)})},Je.prototype.below=function(o){return o==null?Et(this,ln):new this.Collection(this,function(){return On(void 0,o,!1,!0)})},Je.prototype.belowOrEqual=function(o){return o==null?Et(this,ln):new this.Collection(this,function(){return On(void 0,o)})},Je.prototype.startsWith=function(o){return typeof o!="string"?Et(this,Dd):this.between(o,o+dr,!0,!0)},Je.prototype.startsWithIgnoreCase=function(o){return o===""?this.startsWith(o):fo(this,function(l,c){return l.indexOf(c[0])===0},[o],dr)},Je.prototype.equalsIgnoreCase=function(o){return fo(this,function(l,c){return l===c[0]},[o],"")},Je.prototype.anyOfIgnoreCase=function(){var o=de.apply(ce,arguments);return o.length===0?qr(this):fo(this,function(l,c){return c.indexOf(l)!==-1},o,"")},Je.prototype.startsWithAnyOfIgnoreCase=function(){var o=de.apply(ce,arguments);return o.length===0?qr(this):fo(this,function(l,c){return c.some(function(f){return l.indexOf(f)===0})},o,dr)},Je.prototype.anyOf=function(){var o=this,l=de.apply(ce,arguments),c=this._cmp;try{l.sort(c)}catch{return Et(this,ln)}if(l.length===0)return qr(this);var f=new this.Collection(this,function(){return On(l[0],l[l.length-1])});f._ondirectionchange=function(m){c=m==="next"?o._ascending:o._descending,l.sort(c)};var h=0;return f._addAlgorithm(function(m,y,b){for(var j=m.key;0<c(j,l[h]);)if(++h===l.length)return y(b),!1;return c(j,l[h])===0||(y(function(){m.continue(l[h])}),!1)}),f},Je.prototype.notEqual=function(o){return this.inAnyRange([[-1/0,o],[o,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Je.prototype.noneOf=function(){var o=de.apply(ce,arguments);if(o.length===0)return new this.Collection(this);try{o.sort(this._ascending)}catch{return Et(this,ln)}var l=o.reduce(function(c,f){return c?c.concat([[c[c.length-1][1],f]]):[[-1/0,f]]},null);return l.push([o[o.length-1],this.db._maxKey]),this.inAnyRange(l,{includeLowers:!1,includeUppers:!1})},Je.prototype.inAnyRange=function($,l){var c=this,f=this._cmp,h=this._ascending,m=this._descending,y=this._min,b=this._max;if($.length===0)return qr(this);if(!$.every(function(z){return z[0]!==void 0&&z[1]!==void 0&&h(z[0],z[1])<=0}))return Et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",le.InvalidArgument);var j=!l||l.includeLowers!==!1,P=l&&l.includeUppers===!0,R,S=h;function D(z,B){return S(z[0],B[0])}try{(R=$.reduce(function(z,B){for(var F=0,V=z.length;F<V;++F){var J=z[F];if(f(B[0],J[1])<0&&0<f(B[1],J[0])){J[0]=y(J[0],B[0]),J[1]=b(J[1],B[1]);break}}return F===V&&z.push(B),z},[])).sort(D)}catch{return Et(this,ln)}var C=0,T=P?function(z){return 0<h(z,R[C][1])}:function(z){return 0<=h(z,R[C][1])},I=j?function(z){return 0<m(z,R[C][0])}:function(z){return 0<=m(z,R[C][0])},N=T,$=new this.Collection(this,function(){return On(R[0][0],R[R.length-1][1],!j,!P)});return $._ondirectionchange=function(z){S=z==="next"?(N=T,h):(N=I,m),R.sort(D)},$._addAlgorithm(function(z,B,F){for(var V,J=z.key;N(J);)if(++C===R.length)return B(F),!1;return!T(V=J)&&!I(V)||(c._cmp(J,R[C][1])===0||c._cmp(J,R[C][0])===0||B(function(){S===h?z.continue(R[C][0]):z.continue(R[C][1])}),!1)}),$},Je.prototype.startsWithAnyOf=function(){var o=de.apply(ce,arguments);return o.every(function(l){return typeof l=="string"})?o.length===0?qr(this):this.inAnyRange(o.map(function(l){return[l,l+dr]})):Et(this,"startsWithAnyOf() only works with strings")},Je);function Je(){}function Xt(o){return Te(function(l){return Wi(l),o(l.target.error),!1})}function Wi(o){o.stopPropagation&&o.stopPropagation(),o.preventDefault&&o.preventDefault()}var Vi="storagemutated",pl="x-storagemutated-1",Pn=Fi(null,Vi),Yv=(Zt.prototype._lock=function(){return A(!ae.global),++this._reculock,this._reculock!==1||ae.global||(ae.lockOwnerFor=this),this},Zt.prototype._unlock=function(){if(A(!ae.global),--this._reculock==0)for(ae.global||(ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var o=this._blockedFuncs.shift();try{cr(o[1],o[0])}catch{}}return this},Zt.prototype._locked=function(){return this._reculock&&ae.lockOwnerFor!==this},Zt.prototype.create=function(o){var l=this;if(!this.mode)return this;var c=this.db.idbdb,f=this.db._state.dbOpenError;if(A(!this.idbtrans),!o&&!c)switch(f&&f.name){case"DatabaseClosedError":throw new le.DatabaseClosed(f);case"MissingAPIError":throw new le.MissingAPI(f.message,f);default:throw new le.OpenFailed(f)}if(!this.active)throw new le.TransactionInactive;return A(this._completion._state===null),(o=this.idbtrans=o||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(h){Wi(h),l._reject(o.error)}),o.onabort=Te(function(h){Wi(h),l.active&&l._reject(new le.Abort(o.error)),l.active=!1,l.on("abort").fire(h)}),o.oncomplete=Te(function(){l.active=!1,l._resolve(),"mutatedParts"in o&&Pn.storagemutated.fire(o.mutatedParts)}),this},Zt.prototype._promise=function(o,l,c){var f=this;if(o==="readwrite"&&this.mode!=="readwrite")return Le(new le.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new le.TransactionInactive);if(this._locked())return new ee(function(m,y){f._blockedFuncs.push([function(){f._promise(o,l,c).then(m,y)},ae])});if(c)return En(function(){var m=new ee(function(y,b){f._lock();var j=l(y,b,f);j&&j.then&&j.then(y,b)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var h=new ee(function(m,y){var b=l(m,y,f);b&&b.then&&b.then(m,y)});return h._lib=!0,h},Zt.prototype._root=function(){return this.parent?this.parent._root():this},Zt.prototype.waitFor=function(o){var l,c=this._root(),f=ee.resolve(o);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return f}):(c._waitingFor=f,c._waitingQueue=[],l=c.idbtrans.objectStore(c.storeNames[0]),function m(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(l.get(-1/0).onsuccess=m)}());var h=c._waitingFor;return new ee(function(m,y){f.then(function(b){return c._waitingQueue.push(Te(m.bind(null,b)))},function(b){return c._waitingQueue.push(Te(y.bind(null,b)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},Zt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new le.Abort))},Zt.prototype.table=function(o){var l=this._memoizedTables||(this._memoizedTables={});if(g(l,o))return l[o];var c=this.schema[o];if(!c)throw new le.NotFound("Table "+o+" not part of transaction");return c=new this.db.Table(o,c,this),c.core=this.db.core.table(o),l[o]=c},Zt);function Zt(){}function ml(o,l,c,f,h,m,y,b){return{name:o,keyPath:l,unique:c,multi:f,auto:h,compound:m,src:(c&&!y?"&":"")+(f?"*":"")+(h?"++":"")+Hd(l),type:b}}function Hd(o){return typeof o=="string"?o:o?"["+[].join.call(o,"+")+"]":""}function vl(o,l,c){return{name:o,primKey:l,indexes:c,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},c.reduce(function(h,m,y){return y=f(m,y),y&&(h[y[0]]=y[1]),h},{}))};var f}var Hi=function(o){try{return o.only([[]]),Hi=function(){return[[]]},[[]]}catch{return Hi=function(){return dr},dr}};function gl(o){return o==null?function(){}:typeof o=="string"?(l=o).split(".").length===1?function(c){return c[l]}:function(c){return K(c,l)}:function(c){return K(c,o)};var l}function Gd(o){return[].slice.call(o)}var Xv=0;function Gi(o){return o==null?":id":typeof o=="string"?o:"[".concat(o.join("+"),"]")}function Zv(o,l,j){function f(N){if(N.type===3)return null;if(N.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var C=N.lower,T=N.upper,I=N.lowerOpen,N=N.upperOpen;return C===void 0?T===void 0?null:l.upperBound(T,!!N):T===void 0?l.lowerBound(C,!!I):l.bound(C,T,!!I,!!N)}function h(D){var C,T=D.name;return{name:T,schema:D,mutate:function(I){var N=I.trans,$=I.type,z=I.keys,B=I.values,F=I.range;return new Promise(function(V,J){V=Te(V);var G=N.objectStore(T),Q=G.keyPath==null,X=$==="put"||$==="add";if(!X&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var Y,ne=(z||B||{length:1}).length;if(z&&B&&z.length!==B.length)throw new Error("Given keys array must have same length as given values array.");if(ne===0)return V({numFailures:0,failures:{},results:[],lastResult:void 0});function me(ct){++De,Wi(ct)}var ye=[],he=[],De=0;if($==="deleteRange"){if(F.type===4)return V({numFailures:De,failures:he,results:[],lastResult:void 0});F.type===3?ye.push(Y=G.clear()):ye.push(Y=G.delete(f(F)))}else{var Q=X?Q?[B,z]:[B,null]:[z,null],fe=Q[0],it=Q[1];if(X)for(var st=0;st<ne;++st)ye.push(Y=it&&it[st]!==void 0?G[$](fe[st],it[st]):G[$](fe[st])),Y.onerror=me;else for(st=0;st<ne;++st)ye.push(Y=G[$](fe[st])),Y.onerror=me}function xo(ct){ct=ct.target.result,ye.forEach(function(mr,Dl){return mr.error!=null&&(he[Dl]=mr.error)}),V({numFailures:De,failures:he,results:$==="delete"?z:ye.map(function(mr){return mr.result}),lastResult:ct})}Y.onerror=function(ct){me(ct),xo(ct)},Y.onsuccess=xo})},getMany:function(I){var N=I.trans,$=I.keys;return new Promise(function(z,B){z=Te(z);for(var F,V=N.objectStore(T),J=$.length,G=new Array(J),Q=0,X=0,Y=function(ye){ye=ye.target,G[ye._pos]=ye.result,++X===Q&&z(G)},ne=Xt(B),me=0;me<J;++me)$[me]!=null&&((F=V.get($[me]))._pos=me,F.onsuccess=Y,F.onerror=ne,++Q);Q===0&&z(G)})},get:function(I){var N=I.trans,$=I.key;return new Promise(function(z,B){z=Te(z);var F=N.objectStore(T).get($);F.onsuccess=function(V){return z(V.target.result)},F.onerror=Xt(B)})},query:(C=P,function(I){return new Promise(function(N,$){N=Te(N);var z,B,F,Q=I.trans,V=I.values,J=I.limit,Y=I.query,G=J===1/0?void 0:J,X=Y.index,Y=Y.range,Q=Q.objectStore(T),X=X.isPrimaryKey?Q:Q.index(X.name),Y=f(Y);if(J===0)return N({result:[]});C?((G=V?X.getAll(Y,G):X.getAllKeys(Y,G)).onsuccess=function(ne){return N({result:ne.target.result})},G.onerror=Xt($)):(z=0,B=!V&&"openKeyCursor"in X?X.openKeyCursor(Y):X.openCursor(Y),F=[],B.onsuccess=function(ne){var me=B.result;return me?(F.push(V?me.value:me.primaryKey),++z===J?N({result:F}):void me.continue()):N({result:F})},B.onerror=Xt($))})}),openCursor:function(I){var N=I.trans,$=I.values,z=I.query,B=I.reverse,F=I.unique;return new Promise(function(V,J){V=Te(V);var X=z.index,G=z.range,Q=N.objectStore(T),Q=X.isPrimaryKey?Q:Q.index(X.name),X=B?F?"prevunique":"prev":F?"nextunique":"next",Y=!$&&"openKeyCursor"in Q?Q.openKeyCursor(f(G),X):Q.openCursor(f(G),X);Y.onerror=Xt(J),Y.onsuccess=Te(function(ne){var me,ye,he,De,fe=Y.result;fe?(fe.___id=++Xv,fe.done=!1,me=fe.continue.bind(fe),ye=(ye=fe.continuePrimaryKey)&&ye.bind(fe),he=fe.advance.bind(fe),De=function(){throw new Error("Cursor not stopped")},fe.trans=N,fe.stop=fe.continue=fe.continuePrimaryKey=fe.advance=function(){throw new Error("Cursor not started")},fe.fail=Te(J),fe.next=function(){var it=this,st=1;return this.start(function(){return st--?it.continue():it.stop()}).then(function(){return it})},fe.start=function(it){function st(){if(Y.result)try{it()}catch(ct){fe.fail(ct)}else fe.done=!0,fe.start=function(){throw new Error("Cursor behind last entry")},fe.stop()}var xo=new Promise(function(ct,mr){ct=Te(ct),Y.onerror=Xt(mr),fe.fail=mr,fe.stop=function(Dl){fe.stop=fe.continue=fe.continuePrimaryKey=fe.advance=De,ct(Dl)}});return Y.onsuccess=Te(function(ct){Y.onsuccess=st,st()}),fe.continue=me,fe.continuePrimaryKey=ye,fe.advance=he,st(),xo},V(fe)):V(null)},J)})},count:function(I){var N=I.query,$=I.trans,z=N.index,B=N.range;return new Promise(function(F,V){var J=$.objectStore(T),G=z.isPrimaryKey?J:J.index(z.name),J=f(B),G=J?G.count(J):G.count();G.onsuccess=Te(function(Q){return F(Q.target.result)}),G.onerror=Xt(V)})}}}var m,y,b,R=(y=j,b=Gd((m=o).objectStoreNames),{schema:{name:m.name,tables:b.map(function(D){return y.objectStore(D)}).map(function(D){var C=D.keyPath,N=D.autoIncrement,T=u(C),I={},N={name:D.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:C==null,compound:T,keyPath:C,autoIncrement:N,unique:!0,extractKey:gl(C)},indexes:Gd(D.indexNames).map(function($){return D.index($)}).map(function(F){var z=F.name,B=F.unique,V=F.multiEntry,F=F.keyPath,V={name:z,compound:u(F),keyPath:F,unique:B,multiEntry:V,extractKey:gl(F)};return I[Gi(F)]=V}),getIndexByKeyPath:function($){return I[Gi($)]}};return I[":id"]=N.primaryKey,C!=null&&(I[Gi(C)]=N.primaryKey),N})},hasGetAll:0<b.length&&"getAll"in y.objectStore(b[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=R.schema,P=R.hasGetAll,R=j.tables.map(h),S={};return R.forEach(function(D){return S[D.name]=D}),{stack:"dbcore",transaction:o.transaction.bind(o),table:function(D){if(!S[D])throw new Error("Table '".concat(D,"' not found"));return S[D]},MIN_KEY:-1/0,MAX_KEY:Hi(l),schema:j}}function eg(o,l,c,f){var h=c.IDBKeyRange;return c.indexedDB,{dbcore:(f=Zv(l,h,f),o.dbcore.reduce(function(m,y){return y=y.create,r(r({},m),y(m))},f))}}function ho(o,f){var c=f.db,f=eg(o._middlewares,c,o._deps,f);o.core=f.dbcore,o.tables.forEach(function(h){var m=h.name;o.core.schema.tables.some(function(y){return y.name===m})&&(h.core=o.core.table(m),o[m]instanceof o.Table&&(o[m].core=h.core))})}function po(o,l,c,f){c.forEach(function(h){var m=f[h];l.forEach(function(y){var b=function j(P,R){return q(P,R)||(P=p(P))&&j(P,R)}(y,h);(!b||"value"in b&&b.value===void 0)&&(y===o.Transaction.prototype||y instanceof o.Transaction?L(y,h,{get:function(){return this.table(h)},set:function(j){O(this,h,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):y[h]=new o.Table(h,m))})})}function yl(o,l){l.forEach(function(c){for(var f in c)c[f]instanceof o.Table&&delete c[f]})}function tg(o,l){return o._cfg.version-l._cfg.version}function ng(o,l,c,f){var h=o._dbSchema;c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=vl("$meta",Jd("")[0],[]),o._storeNames.push("$meta"));var m=o._createTransaction("readwrite",o._storeNames,h);m.create(c),m._completion.catch(f);var y=m._reject.bind(m),b=ae.transless||ae;En(function(){return ae.trans=m,ae.transless=b,l!==0?(ho(o,c),P=l,((j=m).storeNames.includes("$meta")?j.table("$meta").get("version").then(function(R){return R??P}):ee.resolve(P)).then(function(R){return D=R,C=m,T=c,I=[],R=(S=o)._versions,N=S._dbSchema=vo(0,S.idbdb,T),(R=R.filter(function($){return $._cfg.version>=D})).length!==0?(R.forEach(function($){I.push(function(){var z=N,B=$._cfg.dbschema;go(S,z,T),go(S,B,T),N=S._dbSchema=B;var F=wl(z,B);F.add.forEach(function(X){_l(T,X[0],X[1].primKey,X[1].indexes)}),F.change.forEach(function(X){if(X.recreate)throw new le.Upgrade("Not yet support for changing primary key");var Y=T.objectStore(X.name);X.add.forEach(function(ne){return mo(Y,ne)}),X.change.forEach(function(ne){Y.deleteIndex(ne.name),mo(Y,ne)}),X.del.forEach(function(ne){return Y.deleteIndex(ne)})});var V=$._cfg.contentUpgrade;if(V&&$._cfg.version>D){ho(S,T),C._memoizedTables={};var J=re(B);F.del.forEach(function(X){J[X]=z[X]}),yl(S,[S.Transaction.prototype]),po(S,[S.Transaction.prototype],a(J),J),C.schema=J;var G,Q=je(V);return Q&&Br(),F=ee.follow(function(){var X;(G=V(C))&&Q&&(X=jn.bind(null,null),G.then(X,X))}),G&&typeof G.then=="function"?ee.resolve(G):F.then(function(){return G})}}),I.push(function(z){var B,F,V=$._cfg.dbschema;B=V,F=z,[].slice.call(F.db.objectStoreNames).forEach(function(J){return B[J]==null&&F.db.deleteObjectStore(J)}),yl(S,[S.Transaction.prototype]),po(S,[S.Transaction.prototype],S._storeNames,S._dbSchema),C.schema=S._dbSchema}),I.push(function(z){S.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(S.idbdb.version/10)===$._cfg.version?(S.idbdb.deleteObjectStore("$meta"),delete S._dbSchema.$meta,S._storeNames=S._storeNames.filter(function(B){return B!=="$meta"})):z.objectStore("$meta").put($._cfg.version,"version"))})}),function $(){return I.length?ee.resolve(I.shift()(C.idbtrans)).then($):ee.resolve()}().then(function(){Qd(N,T)})):ee.resolve();var S,D,C,T,I,N}).catch(y)):(a(h).forEach(function(R){_l(c,R,h[R].primKey,h[R].indexes)}),ho(o,c),void ee.follow(function(){return o.on.populate.fire(m)}).catch(y));var j,P})}function rg(o,l){Qd(o._dbSchema,l),l.db.version%10!=0||l.objectStoreNames.contains("$meta")||l.db.createObjectStore("$meta").add(Math.ceil(l.db.version/10-1),"version");var c=vo(0,o.idbdb,l);go(o,o._dbSchema,l);for(var f=0,h=wl(c,o._dbSchema).change;f<h.length;f++){var m=function(y){if(y.change.length||y.recreate)return console.warn("Unable to patch indexes of table ".concat(y.name," because it has changes on the type of index or primary key.")),{value:void 0};var b=l.objectStore(y.name);y.add.forEach(function(j){Yt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(y.name,".").concat(j.src)),mo(b,j)})}(h[f]);if(typeof m=="object")return m.value}}function wl(o,l){var c,f={del:[],add:[],change:[]};for(c in o)l[c]||f.del.push(c);for(c in l){var h=o[c],m=l[c];if(h){var y={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)y.recreate=!0,f.change.push(y);else{var b=h.idxByName,j=m.idxByName,P=void 0;for(P in b)j[P]||y.del.push(P);for(P in j){var R=b[P],S=j[P];R?R.src!==S.src&&y.change.push(S):y.add.push(S)}(0<y.del.length||0<y.add.length||0<y.change.length)&&f.change.push(y)}}else f.add.push([c,m])}return f}function _l(o,l,c,f){var h=o.db.createObjectStore(l,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return f.forEach(function(m){return mo(h,m)}),h}function Qd(o,l){a(o).forEach(function(c){l.db.objectStoreNames.contains(c)||(Yt&&console.debug("Dexie: Creating missing table",c),_l(l,c,o[c].primKey,o[c].indexes))})}function mo(o,l){o.createIndex(l.name,l.keyPath,{unique:l.unique,multiEntry:l.multi})}function vo(o,l,c){var f={};return _(l.objectStoreNames,0).forEach(function(h){for(var m=c.objectStore(h),y=ml(Hd(P=m.keyPath),P||"",!0,!1,!!m.autoIncrement,P&&typeof P!="string",!0),b=[],j=0;j<m.indexNames.length;++j){var R=m.index(m.indexNames[j]),P=R.keyPath,R=ml(R.name,P,!!R.unique,!!R.multiEntry,!1,P&&typeof P!="string",!1);b.push(R)}f[h]=vl(h,y,b)}),f}function go(o,l,c){for(var f=c.db.objectStoreNames,h=0;h<f.length;++h){var m=f[h],y=c.objectStore(m);o._hasGetAll="getAll"in y;for(var b=0;b<y.indexNames.length;++b){var j=y.indexNames[b],P=y.index(j).keyPath,R=typeof P=="string"?P:"["+_(P).join("+")+"]";!l[m]||(P=l[m].idxByName[R])&&(P.name=j,delete l[m].idxByName[R],l[m].idxByName[j]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(o._hasGetAll=!1)}function Jd(o){return o.split(",").map(function(l,c){var m=l.split(":"),f=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(l=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return ml(h,m||null,/\&/.test(l),/\*/.test(l),/\+\+/.test(l),u(m),c===0,f)})}var ig=(Wr.prototype._createTableSchema=vl,Wr.prototype._parseIndexSyntax=Jd,Wr.prototype._parseStoresSpec=function(o,l){var c=this;a(o).forEach(function(f){if(o[f]!==null){var h=c._parseIndexSyntax(o[f]),m=h.shift();if(!m)throw new le.Schema("Invalid schema for table "+f+": "+o[f]);if(m.unique=!0,m.multi)throw new le.Schema("Primary key cannot be multiEntry*");h.forEach(function(y){if(y.auto)throw new le.Schema("Only primary key can be marked as autoIncrement (++)");if(!y.keyPath)throw new le.Schema("Index must have a name and cannot be an empty string")}),h=c._createTableSchema(f,m,h),l[f]=h}})},Wr.prototype.stores=function(c){var l=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,c):c;var c=l._versions,f={},h={};return c.forEach(function(m){d(f,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(f,h)}),l._dbSchema=h,yl(l,[l._allTables,l,l.Transaction.prototype]),po(l,[l._allTables,l,l.Transaction.prototype,this._cfg.tables],a(h),h),l._storeNames=a(h),this},Wr.prototype.upgrade=function(o){return this._cfg.contentUpgrade=tl(this._cfg.contentUpgrade||Se,o),this},Wr);function Wr(){}function bl(o,l){var c=o._dbNamesDB;return c||(c=o._dbNamesDB=new un(oo,{addons:[],indexedDB:o,IDBKeyRange:l})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function kl(o){return o&&typeof o.databases=="function"}function Sl(o){return En(function(){return ae.letThrough=!0,o()})}function xl(o){return!("from"in o)}var rt=function(o,l){if(!this){var c=new rt;return o&&"d"in o&&d(c,o),c}d(this,arguments.length?{d:1,from:o,to:1<arguments.length?l:o}:{d:0})};function Qi(o,l,c){var f=ge(l,c);if(!isNaN(f)){if(0<f)throw RangeError();if(xl(o))return d(o,{from:l,to:c,d:1});var h=o.l,f=o.r;if(ge(c,o.from)<0)return h?Qi(h,l,c):o.l={from:l,to:c,d:1,l:null,r:null},Xd(o);if(0<ge(l,o.to))return f?Qi(f,l,c):o.r={from:l,to:c,d:1,l:null,r:null},Xd(o);ge(l,o.from)<0&&(o.from=l,o.l=null,o.d=f?f.d+1:1),0<ge(c,o.to)&&(o.to=c,o.r=null,o.d=o.l?o.l.d+1:1),c=!o.r,h&&!o.l&&Ji(o,h),f&&c&&Ji(o,f)}}function Ji(o,l){xl(l)||function c(f,j){var m=j.from,y=j.to,b=j.l,j=j.r;Qi(f,m,y),b&&c(f,b),j&&c(f,j)}(o,l)}function Yd(o,l){var c=yo(l),f=c.next();if(f.done)return!1;for(var h=f.value,m=yo(o),y=m.next(h.from),b=y.value;!f.done&&!y.done;){if(ge(b.from,h.to)<=0&&0<=ge(b.to,h.from))return!0;ge(h.from,b.from)<0?h=(f=c.next(b.from)).value:b=(y=m.next(h.from)).value}return!1}function yo(o){var l=xl(o)?null:{s:0,n:o};return{next:function(c){for(var f=0<arguments.length;l;)switch(l.s){case 0:if(l.s=1,f)for(;l.n.l&&ge(c,l.n.from)<0;)l={up:l,n:l.n.l,s:1};else for(;l.n.l;)l={up:l,n:l.n.l,s:1};case 1:if(l.s=2,!f||ge(c,l.n.to)<=0)return{value:l.n,done:!1};case 2:if(l.n.r){l.s=3,l={up:l,n:l.n.r,s:0};continue}case 3:l=l.up}return{done:!0}}}}function Xd(o){var l,c,f=(((l=o.r)===null||l===void 0?void 0:l.d)||0)-(((c=o.l)===null||c===void 0?void 0:c.d)||0),h=1<f?"r":f<-1?"l":"";h&&(l=h=="r"?"l":"r",c=r({},o),f=o[h],o.from=f.from,o.to=f.to,o[h]=f[h],c[h]=f[l],(o[l]=c).d=Zd(c)),o.d=Zd(o)}function Zd(c){var l=c.r,c=c.l;return(l?c?Math.max(l.d,c.d):l.d:c?c.d:0)+1}function wo(o,l){return a(l).forEach(function(c){o[c]?Ji(o[c],l[c]):o[c]=function f(h){var m,y,b={};for(m in h)g(h,m)&&(y=h[m],b[m]=!y||typeof y!="object"||Me.has(y.constructor)?y:f(y));return b}(l[c])}),o}function El(o,l){return o.all||l.all||Object.keys(o).some(function(c){return l[c]&&Yd(l[c],o[c])})}w(rt.prototype,((Nt={add:function(o){return Ji(this,o),this},addKey:function(o){return Qi(this,o,o),this},addKeys:function(o){var l=this;return o.forEach(function(c){return Qi(l,c,c)}),this},hasKey:function(o){var l=yo(this).next(o).value;return l&&ge(l.from,o)<=0&&0<=ge(l.to,o)}})[an]=function(){return yo(this)},Nt));var hr={},jl={},Cl=!1;function _o(o){wo(jl,o),Cl||(Cl=!0,setTimeout(function(){Cl=!1,Ol(jl,!(jl={}))},0))}function Ol(o,l){l===void 0&&(l=!1);var c=new Set;if(o.all)for(var f=0,h=Object.values(hr);f<h.length;f++)ef(y=h[f],o,c,l);else for(var m in o){var y,b=/^idb\:\/\/(.*)\/(.*)\//.exec(m);b&&(m=b[1],b=b[2],(y=hr["idb://".concat(m,"/").concat(b)])&&ef(y,o,c,l))}c.forEach(function(j){return j()})}function ef(o,l,c,f){for(var h=[],m=0,y=Object.entries(o.queries.query);m<y.length;m++){for(var b=y[m],j=b[0],P=[],R=0,S=b[1];R<S.length;R++){var D=S[R];El(l,D.obsSet)?D.subscribers.forEach(function(N){return c.add(N)}):f&&P.push(D)}f&&h.push([j,P])}if(f)for(var C=0,T=h;C<T.length;C++){var I=T[C],j=I[0],P=I[1];o.queries.query[j]=P}}function sg(o){var l=o._state,c=o._deps.indexedDB;if(l.isBeingOpened||o.idbdb)return l.dbReadyPromise.then(function(){return l.dbOpenError?Le(l.dbOpenError):o});l.isBeingOpened=!0,l.dbOpenError=null,l.openComplete=!1;var f=l.openCanceller,h=Math.round(10*o.verno),m=!1;function y(){if(l.openCanceller!==f)throw new le.DatabaseClosed("db.open() was cancelled")}function b(){return new ee(function(D,C){if(y(),!c)throw new le.MissingAPI;var T=o.name,I=l.autoSchema||!h?c.open(T):c.open(T,h);if(!I)throw new le.MissingAPI;I.onerror=Xt(C),I.onblocked=Te(o._fireOnBlocked),I.onupgradeneeded=Te(function(N){var $;R=I.transaction,l.autoSchema&&!o._options.allowEmptyDB?(I.onerror=Wi,R.abort(),I.result.close(),($=c.deleteDatabase(T)).onsuccess=$.onerror=Te(function(){C(new le.NoSuchDatabase("Database ".concat(T," doesnt exist")))})):(R.onerror=Xt(C),N=N.oldVersion>Math.pow(2,62)?0:N.oldVersion,S=N<1,o.idbdb=I.result,m&&rg(o,R),ng(o,N/10,R,C))},C),I.onsuccess=Te(function(){R=null;var N,$,z,B,F,V=o.idbdb=I.result,J=_(V.objectStoreNames);if(0<J.length)try{var G=V.transaction((B=J).length===1?B[0]:B,"readonly");if(l.autoSchema)$=V,z=G,(N=o).verno=$.version/10,z=N._dbSchema=vo(0,$,z),N._storeNames=_($.objectStoreNames,0),po(N,[N._allTables],a(z),z);else if(go(o,o._dbSchema,G),((F=wl(vo(0,(F=o).idbdb,G),F._dbSchema)).add.length||F.change.some(function(Q){return Q.add.length||Q.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),V.close(),h=V.version+1,m=!0,D(b());ho(o,G)}catch{}Fr.push(o),V.onversionchange=Te(function(Q){l.vcFired=!0,o.on("versionchange").fire(Q)}),V.onclose=Te(function(Q){o.on("close").fire(Q)}),S&&(F=o._deps,G=T,V=F.indexedDB,F=F.IDBKeyRange,kl(V)||G===oo||bl(V,F).put({name:G}).catch(Se)),D()},C)}).catch(function(D){switch(D==null?void 0:D.name){case"UnknownError":if(0<l.PR1398_maxLoop)return l.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),b();break;case"VersionError":if(0<h)return h=0,b()}return ee.reject(D)})}var j,P=l.dbReadyResolve,R=null,S=!1;return ee.race([f,(typeof navigator>"u"?ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(D){function C(){return indexedDB.databases().finally(D)}j=setInterval(C,100),C()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(b)]).then(function(){return y(),l.onReadyBeingFired=[],ee.resolve(Sl(function(){return o.on.ready.fire(o.vip)})).then(function D(){if(0<l.onReadyBeingFired.length){var C=l.onReadyBeingFired.reduce(tl,Se);return l.onReadyBeingFired=[],ee.resolve(Sl(function(){return C(o.vip)})).then(D)}})}).finally(function(){l.openCanceller===f&&(l.onReadyBeingFired=null,l.isBeingOpened=!1)}).catch(function(D){l.dbOpenError=D;try{R&&R.abort()}catch{}return f===l.openCanceller&&o._close(),Le(D)}).finally(function(){l.openComplete=!0,P()}).then(function(){var D;return S&&(D={},o.tables.forEach(function(C){C.schema.indexes.forEach(function(T){T.name&&(D["idb://".concat(o.name,"/").concat(C.name,"/").concat(T.name)]=new rt(-1/0,[[[]]]))}),D["idb://".concat(o.name,"/").concat(C.name,"/")]=D["idb://".concat(o.name,"/").concat(C.name,"/:dels")]=new rt(-1/0,[[[]]])}),Pn(Vi).fire(D),Ol(D,!0)),o})}function Pl(o){function l(m){return o.next(m)}var c=h(l),f=h(function(m){return o.throw(m)});function h(m){return function(j){var b=m(j),j=b.value;return b.done?j:j&&typeof j.then=="function"?j.then(c,f):u(j)?Promise.all(j).then(c,f):c(j)}}return h(l)()}function bo(o,l,c){for(var f=u(o)?o.slice():[o],h=0;h<c;++h)f.push(l);return f}var og={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema,h={},m=[];function y(S,D,C){var T=Gi(S),I=h[T]=h[T]||[],N=S==null?0:typeof S=="string"?1:S.length,$=0<D,$=r(r({},C),{name:$?"".concat(T,"(virtual-from:").concat(C.name,")"):C.name,lowLevelIndex:C,isVirtual:$,keyTail:D,keyLength:N,extractKey:gl(S),unique:!$&&C.unique});return I.push($),$.isPrimaryKey||m.push($),1<N&&y(N===2?S[0]:S.slice(0,N-1),D+1,C),I.sort(function(z,B){return z.keyTail-B.keyTail}),$}l=y(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[l];for(var b=0,j=f.indexes;b<j.length;b++){var P=j[b];y(P.keyPath,0,P)}function R(S){var D,C=S.query.index;return C.isVirtual?r(r({},S),{query:{index:C.lowLevelIndex,range:(D=S.query.range,C=C.keyTail,{type:D.type===1?2:D.type,lower:bo(D.lower,D.lowerOpen?o.MAX_KEY:o.MIN_KEY,C),lowerOpen:!0,upper:bo(D.upper,D.upperOpen?o.MIN_KEY:o.MAX_KEY,C),upperOpen:!0})}}):S}return r(r({},c),{schema:r(r({},f),{primaryKey:l,indexes:m,getIndexByKeyPath:function(S){return(S=h[Gi(S)])&&S[0]}}),count:function(S){return c.count(R(S))},query:function(S){return c.query(R(S))},openCursor:function(S){var D=S.query.index,C=D.keyTail,T=D.isVirtual,I=D.keyLength;return T?c.openCursor(R(S)).then(function($){return $&&N($)}):c.openCursor(S);function N($){return Object.create($,{continue:{value:function(z){z!=null?$.continue(bo(z,S.reverse?o.MAX_KEY:o.MIN_KEY,C)):S.unique?$.continue($.key.slice(0,I).concat(S.reverse?o.MIN_KEY:o.MAX_KEY,C)):$.continue()}},continuePrimaryKey:{value:function(z,B){$.continuePrimaryKey(bo(z,o.MAX_KEY,C),B)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var z=$.key;return I===1?z[0]:z.slice(0,I)}},value:{get:function(){return $.value}}})}}})}})}};function Tl(o,l,c,f){return c=c||{},f=f||"",a(o).forEach(function(h){var m,y,b;g(l,h)?(m=o[h],y=l[h],typeof m=="object"&&typeof y=="object"&&m&&y?(b=ir(m))!==ir(y)?c[f+h]=l[h]:b==="Object"?Tl(m,y,c,f+h+"."):m!==y&&(c[f+h]=l[h]):m!==y&&(c[f+h]=l[h])):c[f+h]=void 0}),a(l).forEach(function(h){g(o,h)||(c[f+h]=l[h])}),c}function Al(o,l){return l.type==="delete"?l.keys:l.keys||l.values.map(o.extractKey)}var ag={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(o){return r(r({},o),{table:function(l){var c=o.table(l),f=c.schema.primaryKey;return r(r({},c),{mutate:function(h){var m=ae.trans,y=m.table(l).hook,b=y.deleting,j=y.creating,P=y.updating;switch(h.type){case"add":if(j.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"put":if(j.fire===Se&&P.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"delete":if(b.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"deleteRange":if(b.fire===Se)break;return m._promise("readwrite",function(){return function S(D,C,T){return c.query({trans:D,values:!1,query:{index:f,range:C},limit:T}).then(function(I){var N=I.result;return R({type:"delete",keys:N,trans:D}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):N.length<T?{failures:[],numFailures:0,lastResult:void 0}:S(D,r(r({},C),{lower:N[N.length-1],lowerOpen:!0}),T)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function R(S){var D,C,T,I=ae.trans,N=S.keys||Al(f,S);if(!N)throw new Error("Keys missing");return(S=S.type==="add"||S.type==="put"?r(r({},S),{keys:N}):r({},S)).type!=="delete"&&(S.values=i([],S.values)),S.keys&&(S.keys=i([],S.keys)),D=c,T=N,((C=S).type==="add"?Promise.resolve([]):D.getMany({trans:C.trans,keys:T,cache:"immutable"})).then(function($){var z=N.map(function(B,F){var V,J,G,Q=$[F],X={onerror:null,onsuccess:null};return S.type==="delete"?b.fire.call(X,B,Q,I):S.type==="add"||Q===void 0?(V=j.fire.call(X,B,S.values[F],I),B==null&&V!=null&&(S.keys[F]=B=V,f.outbound||W(S.values[F],f.keyPath,B))):(V=Tl(Q,S.values[F]),(J=P.fire.call(X,V,B,Q,I))&&(G=S.values[F],Object.keys(J).forEach(function(Y){g(G,Y)?G[Y]=J[Y]:W(G,Y,J[Y])}))),X});return c.mutate(S).then(function(B){for(var F=B.failures,V=B.results,J=B.numFailures,B=B.lastResult,G=0;G<N.length;++G){var Q=(V||N)[G],X=z[G];Q==null?X.onerror&&X.onerror(F[G]):X.onsuccess&&X.onsuccess(S.type==="put"&&$[G]?S.values[G]:Q)}return{failures:F,results:V,numFailures:J,lastResult:B}}).catch(function(B){return z.forEach(function(F){return F.onerror&&F.onerror(B)}),Promise.reject(B)})})}}})}})}};function tf(o,l,c){try{if(!l||l.keys.length<o.length)return null;for(var f=[],h=0,m=0;h<l.keys.length&&m<o.length;++h)ge(l.keys[h],o[m])===0&&(f.push(c?Be(l.values[h]):l.values[h]),++m);return f.length===o.length?f:null}catch{return null}}var lg={stack:"dbcore",level:-1,create:function(o){return{table:function(l){var c=o.table(l);return r(r({},c),{getMany:function(f){if(!f.cache)return c.getMany(f);var h=tf(f.keys,f.trans._cache,f.cache==="clone");return h?ee.resolve(h):c.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Be(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),c.mutate(f)}})}}}};function nf(o,l){return o.trans.mode==="readonly"&&!!o.subscr&&!o.trans.explicit&&o.trans.db._options.cache!=="disabled"&&!l.schema.primaryKey.outbound}function rf(o,l){switch(o){case"query":return l.values&&!l.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var ug={stack:"dbcore",level:0,name:"Observability",create:function(o){var l=o.schema.name,c=new rt(o.MIN_KEY,o.MAX_KEY);return r(r({},o),{transaction:function(f,h,m){if(ae.subscr&&h!=="readonly")throw new le.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ae.querier));return o.transaction(f,h,m)},table:function(f){var h=o.table(f),m=h.schema,y=m.primaryKey,S=m.indexes,b=y.extractKey,j=y.outbound,P=y.autoIncrement&&S.filter(function(C){return C.compound&&C.keyPath.includes(y.keyPath)}),R=r(r({},h),{mutate:function(C){function T(Y){return Y="idb://".concat(l,"/").concat(f,"/").concat(Y),B[Y]||(B[Y]=new rt)}var I,N,$,z=C.trans,B=C.mutatedParts||(C.mutatedParts={}),F=T(""),V=T(":dels"),J=C.type,X=C.type==="deleteRange"?[C.range]:C.type==="delete"?[C.keys]:C.values.length<50?[Al(y,C).filter(function(Y){return Y}),C.values]:[],G=X[0],Q=X[1],X=C.trans._cache;return u(G)?(F.addKeys(G),(X=J==="delete"||G.length===Q.length?tf(G,X):null)||V.addKeys(G),(X||Q)&&(I=T,N=X,$=Q,m.indexes.forEach(function(Y){var ne=I(Y.name||"");function me(he){return he!=null?Y.extractKey(he):null}function ye(he){return Y.multiEntry&&u(he)?he.forEach(function(De){return ne.addKey(De)}):ne.addKey(he)}(N||$).forEach(function(he,it){var fe=N&&me(N[it]),it=$&&me($[it]);ge(fe,it)!==0&&(fe!=null&&ye(fe),it!=null&&ye(it))})}))):G?(Q={from:(Q=G.lower)!==null&&Q!==void 0?Q:o.MIN_KEY,to:(Q=G.upper)!==null&&Q!==void 0?Q:o.MAX_KEY},V.add(Q),F.add(Q)):(F.add(c),V.add(c),m.indexes.forEach(function(Y){return T(Y.name).add(c)})),h.mutate(C).then(function(Y){return!G||C.type!=="add"&&C.type!=="put"||(F.addKeys(Y.results),P&&P.forEach(function(ne){for(var me=C.values.map(function(fe){return ne.extractKey(fe)}),ye=ne.keyPath.findIndex(function(fe){return fe===y.keyPath}),he=0,De=Y.results.length;he<De;++he)me[he][ye]=Y.results[he];T(ne.name).addKeys(me)})),z.mutatedParts=wo(z.mutatedParts||{},B),Y})}}),S=function(T){var I=T.query,T=I.index,I=I.range;return[T,new rt((T=I.lower)!==null&&T!==void 0?T:o.MIN_KEY,(I=I.upper)!==null&&I!==void 0?I:o.MAX_KEY)]},D={get:function(C){return[y,new rt(C.key)]},getMany:function(C){return[y,new rt().addKeys(C.keys)]},count:S,query:S,openCursor:S};return a(D).forEach(function(C){R[C]=function(T){var I=ae.subscr,N=!!I,$=nf(ae,h)&&rf(C,T)?T.obsSet={}:I;if(N){var z=function(Q){return Q="idb://".concat(l,"/").concat(f,"/").concat(Q),$[Q]||($[Q]=new rt)},B=z(""),F=z(":dels"),I=D[C](T),N=I[0],I=I[1];if((C==="query"&&N.isPrimaryKey&&!T.values?F:z(N.name||"")).add(I),!N.isPrimaryKey){if(C!=="count"){var V=C==="query"&&j&&T.values&&h.query(r(r({},T),{values:!1}));return h[C].apply(this,arguments).then(function(Q){if(C==="query"){if(j&&T.values)return V.then(function(me){return me=me.result,B.addKeys(me),Q});var X=T.values?Q.result.map(b):Q.result;(T.values?B:F).addKeys(X)}else if(C==="openCursor"){var Y=Q,ne=T.values;return Y&&Object.create(Y,{key:{get:function(){return F.addKey(Y.primaryKey),Y.key}},primaryKey:{get:function(){var me=Y.primaryKey;return F.addKey(me),me}},value:{get:function(){return ne&&B.addKey(Y.primaryKey),Y.value}}})}return Q})}F.add(c)}}return h[C].apply(this,arguments)}}),R}})}};function sf(o,l,c){if(c.numFailures===0)return l;if(l.type==="deleteRange")return null;var f=l.keys?l.keys.length:"values"in l&&l.values?l.values.length:1;return c.numFailures===f?null:(l=r({},l),u(l.keys)&&(l.keys=l.keys.filter(function(h,m){return!(m in c.failures)})),"values"in l&&u(l.values)&&(l.values=l.values.filter(function(h,m){return!(m in c.failures)})),l)}function Rl(o,l){return c=o,((f=l).lower===void 0||(f.lowerOpen?0<ge(c,f.lower):0<=ge(c,f.lower)))&&(o=o,(l=l).upper===void 0||(l.upperOpen?ge(o,l.upper)<0:ge(o,l.upper)<=0));var c,f}function of(o,l,D,f,h,m){if(!D||D.length===0)return o;var y=l.query.index,b=y.multiEntry,j=l.query.range,P=f.schema.primaryKey.extractKey,R=y.extractKey,S=(y.lowLevelIndex||y).extractKey,D=D.reduce(function(C,T){var I=C,N=[];if(T.type==="add"||T.type==="put")for(var $=new rt,z=T.values.length-1;0<=z;--z){var B,F=T.values[z],V=P(F);$.hasKey(V)||(B=R(F),(b&&u(B)?B.some(function(Y){return Rl(Y,j)}):Rl(B,j))&&($.addKey(V),N.push(F)))}switch(T.type){case"add":var J=new rt().addKeys(l.values?C.map(function(ne){return P(ne)}):C),I=C.concat(l.values?N.filter(function(ne){return ne=P(ne),!J.hasKey(ne)&&(J.addKey(ne),!0)}):N.map(function(ne){return P(ne)}).filter(function(ne){return!J.hasKey(ne)&&(J.addKey(ne),!0)}));break;case"put":var G=new rt().addKeys(T.values.map(function(ne){return P(ne)}));I=C.filter(function(ne){return!G.hasKey(l.values?P(ne):ne)}).concat(l.values?N:N.map(function(ne){return P(ne)}));break;case"delete":var Q=new rt().addKeys(T.keys);I=C.filter(function(ne){return!Q.hasKey(l.values?P(ne):ne)});break;case"deleteRange":var X=T.range;I=C.filter(function(ne){return!Rl(P(ne),X)})}return I},o);return D===o?o:(D.sort(function(C,T){return ge(S(C),S(T))||ge(P(C),P(T))}),l.limit&&l.limit<1/0&&(D.length>l.limit?D.length=l.limit:o.length===l.limit&&D.length<l.limit&&(h.dirty=!0)),m?Object.freeze(D):D)}function af(o,l){return ge(o.lower,l.lower)===0&&ge(o.upper,l.upper)===0&&!!o.lowerOpen==!!l.lowerOpen&&!!o.upperOpen==!!l.upperOpen}function cg(o,l){return function(c,f,h,m){if(c===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=ge(c,f))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return f}(o.lower,l.lower,o.lowerOpen,l.lowerOpen)<=0&&0<=function(c,f,h,m){if(c===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=ge(c,f))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return f}(o.upper,l.upper,o.upperOpen,l.upperOpen)}function dg(o,l,c,f){o.subscribers.add(c),f.addEventListener("abort",function(){var h,m;o.subscribers.delete(c),o.subscribers.size===0&&(h=o,m=l,setTimeout(function(){h.subscribers.size===0&&te(m,h)},3e3))})}var fg={stack:"dbcore",level:0,name:"Cache",create:function(o){var l=o.schema.name;return r(r({},o),{transaction:function(c,f,h){var m,y,b=o.transaction(c,f,h);return f==="readwrite"&&(y=(m=new AbortController).signal,h=function(j){return function(){if(m.abort(),f==="readwrite"){for(var P=new Set,R=0,S=c;R<S.length;R++){var D=S[R],C=hr["idb://".concat(l,"/").concat(D)];if(C){var T=o.table(D),I=C.optimisticOps.filter(function(ne){return ne.trans===b});if(b._explicit&&j&&b.mutatedParts)for(var N=0,$=Object.values(C.queries.query);N<$.length;N++)for(var z=0,B=(J=$[N]).slice();z<B.length;z++)El((G=B[z]).obsSet,b.mutatedParts)&&(te(J,G),G.subscribers.forEach(function(ne){return P.add(ne)}));else if(0<I.length){C.optimisticOps=C.optimisticOps.filter(function(ne){return ne.trans!==b});for(var F=0,V=Object.values(C.queries.query);F<V.length;F++)for(var J,G,Q,X=0,Y=(J=V[F]).slice();X<Y.length;X++)(G=Y[X]).res!=null&&b.mutatedParts&&(j&&!G.dirty?(Q=Object.isFrozen(G.res),Q=of(G.res,G.req,I,T,G,Q),G.dirty?(te(J,G),G.subscribers.forEach(function(ne){return P.add(ne)})):Q!==G.res&&(G.res=Q,G.promise=ee.resolve({result:Q}))):(G.dirty&&te(J,G),G.subscribers.forEach(function(ne){return P.add(ne)})))}}}P.forEach(function(ne){return ne()})}}},b.addEventListener("abort",h(!1),{signal:y}),b.addEventListener("error",h(!1),{signal:y}),b.addEventListener("complete",h(!0),{signal:y})),b},table:function(c){var f=o.table(c),h=f.schema.primaryKey;return r(r({},f),{mutate:function(m){var y=ae.trans;if(h.outbound||y.db._options.cache==="disabled"||y.explicit||y.idbtrans.mode!=="readwrite")return f.mutate(m);var b=hr["idb://".concat(l,"/").concat(c)];return b?(y=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Al(h,m).some(function(j){return j==null}))?(b.optimisticOps.push(m),m.mutatedParts&&_o(m.mutatedParts),y.then(function(j){0<j.numFailures&&(te(b.optimisticOps,m),(j=sf(0,m,j))&&b.optimisticOps.push(j),m.mutatedParts&&_o(m.mutatedParts))}),y.catch(function(){te(b.optimisticOps,m),m.mutatedParts&&_o(m.mutatedParts)})):y.then(function(j){var P=sf(0,r(r({},m),{values:m.values.map(function(R,S){var D;return j.failures[S]?R:(R=(D=h.keyPath)!==null&&D!==void 0&&D.includes(".")?Be(R):r({},R),W(R,h.keyPath,j.results[S]),R)})}),j);b.optimisticOps.push(P),queueMicrotask(function(){return m.mutatedParts&&_o(m.mutatedParts)})}),y):f.mutate(m)},query:function(m){if(!nf(ae,f)||!rf("query",m))return f.query(m);var y=((P=ae.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",S=ae,b=S.requery,j=S.signal,P=function(T,I,N,$){var z=hr["idb://".concat(T,"/").concat(I)];if(!z)return[];if(!(I=z.queries[N]))return[null,!1,z,null];var B=I[($.query?$.query.index.name:null)||""];if(!B)return[null,!1,z,null];switch(N){case"query":var F=B.find(function(V){return V.req.limit===$.limit&&V.req.values===$.values&&af(V.req.query.range,$.query.range)});return F?[F,!0,z,B]:[B.find(function(V){return("limit"in V.req?V.req.limit:1/0)>=$.limit&&(!$.values||V.req.values)&&cg(V.req.query.range,$.query.range)}),!1,z,B];case"count":return F=B.find(function(V){return af(V.req.query.range,$.query.range)}),[F,!!F,z,B]}}(l,c,"query",m),R=P[0],S=P[1],D=P[2],C=P[3];return R&&S?R.obsSet=m.obsSet:(S=f.query(m).then(function(T){var I=T.result;if(R&&(R.res=I),y){for(var N=0,$=I.length;N<$;++N)Object.freeze(I[N]);Object.freeze(I)}else T.result=Be(I);return T}).catch(function(T){return C&&R&&te(C,R),Promise.reject(T)}),R={obsSet:m.obsSet,promise:S,subscribers:new Set,type:"query",req:m,dirty:!1},C?C.push(R):(C=[R],(D=D||(hr["idb://".concat(l,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=C)),dg(R,C,b,j),R.promise.then(function(T){return{result:of(T.result,m,D==null?void 0:D.optimisticOps,f,R,y)}})}})}})}};function ko(o,l){return new Proxy(o,{get:function(c,f,h){return f==="db"?l:Reflect.get(c,f,h)}})}var un=(Ue.prototype.version=function(o){if(isNaN(o)||o<.1)throw new le.Type("Given version is not a positive number");if(o=Math.round(10*o)/10,this.idbdb||this._state.isBeingOpened)throw new le.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,o);var l=this._versions,c=l.filter(function(f){return f._cfg.version===o})[0];return c||(c=new this.Version(o),l.push(c),l.sort(tg),c.stores({}),this._state.autoSchema=!1,c)},Ue.prototype._whenReady=function(o){var l=this;return this.idbdb&&(this._state.openComplete||ae.letThrough||this._vip)?o():new ee(function(c,f){if(l._state.openComplete)return f(new le.DatabaseClosed(l._state.dbOpenError));if(!l._state.isBeingOpened){if(!l._state.autoOpen)return void f(new le.DatabaseClosed);l.open().catch(Se)}l._state.dbReadyPromise.then(c,f)}).then(o)},Ue.prototype.use=function(o){var l=o.stack,c=o.create,f=o.level,h=o.name;return h&&this.unuse({stack:l,name:h}),o=this._middlewares[l]||(this._middlewares[l]=[]),o.push({stack:l,create:c,level:f??10,name:h}),o.sort(function(m,y){return m.level-y.level}),this},Ue.prototype.unuse=function(o){var l=o.stack,c=o.name,f=o.create;return l&&this._middlewares[l]&&(this._middlewares[l]=this._middlewares[l].filter(function(h){return f?h.create!==f:!!c&&h.name!==c})),this},Ue.prototype.open=function(){var o=this;return cr(xn,function(){return sg(o)})},Ue.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var o=this._state,l=Fr.indexOf(this);if(0<=l&&Fr.splice(l,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}o.isBeingOpened||(o.dbReadyPromise=new ee(function(c){o.dbReadyResolve=c}),o.openCanceller=new ee(function(c,f){o.cancelOpen=f}))},Ue.prototype.close=function(c){var l=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;l?(c.isBeingOpened&&c.cancelOpen(new le.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new le.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Ue.prototype.delete=function(o){var l=this;o===void 0&&(o={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ee(function(h,m){function y(){l.close(o);var b=l._deps.indexedDB.deleteDatabase(l.name);b.onsuccess=Te(function(){var j,P,R;j=l._deps,P=l.name,R=j.indexedDB,j=j.IDBKeyRange,kl(R)||P===oo||bl(R,j).delete(P).catch(Se),h()}),b.onerror=Xt(m),b.onblocked=l._fireOnBlocked}if(c)throw new le.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(y):y()})},Ue.prototype.backendDB=function(){return this.idbdb},Ue.prototype.isOpen=function(){return this.idbdb!==null},Ue.prototype.hasBeenClosed=function(){var o=this._state.dbOpenError;return o&&o.name==="DatabaseClosed"},Ue.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ue.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ue.prototype,"tables",{get:function(){var o=this;return a(this._allTables).map(function(l){return o._allTables[l]})},enumerable:!1,configurable:!0}),Ue.prototype.transaction=function(){var o=(function(l,c,f){var h=arguments.length;if(h<2)throw new le.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return f=m.pop(),[l,oe(m),f]}).apply(this,arguments);return this._transaction.apply(this,o)},Ue.prototype._transaction=function(o,l,c){var f=this,h=ae.trans;h&&h.db===this&&o.indexOf("!")===-1||(h=null);var m,y,b=o.indexOf("?")!==-1;o=o.replace("!","").replace("?","");try{if(y=l.map(function(P){if(P=P instanceof f.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),o=="r"||o===cl)m=cl;else{if(o!="rw"&&o!=dl)throw new le.InvalidArgument("Invalid transaction mode: "+o);m=dl}if(h){if(h.mode===cl&&m===dl){if(!b)throw new le.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&y.forEach(function(P){if(h&&h.storeNames.indexOf(P)===-1){if(!b)throw new le.SubTransaction("Table "+P+" not included in parent transaction.");h=null}}),b&&h&&!h.active&&(h=null)}}catch(P){return h?h._promise(null,function(R,S){S(P)}):Le(P)}var j=(function P(R,S,D,C,T){return ee.resolve().then(function(){var I=ae.transless||ae,N=R._createTransaction(S,D,R._dbSchema,C);if(N.explicit=!0,I={trans:N,transless:I},C)N.idbtrans=C.idbtrans;else try{N.create(),N.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(B){return B.name===Sn.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return P(R,S,D,null,T)})):Le(B)}var $,z=je(T);return z&&Br(),I=ee.follow(function(){var B;($=T.call(N,N))&&(z?(B=jn.bind(null,null),$.then(B,B)):typeof $.next=="function"&&typeof $.throw=="function"&&($=Pl($)))},I),($&&typeof $.then=="function"?ee.resolve($).then(function(B){return N.active?B:Le(new le.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return $})).then(function(B){return C&&N._resolve(),N._completion.then(function(){return B})}).catch(function(B){return N._reject(B),Le(B)})})}).bind(null,this,m,y,h,c);return h?h._promise(m,j,"lock"):ae.trans?cr(ae.transless,function(){return f._whenReady(j)}):this._whenReady(j)},Ue.prototype.table=function(o){if(!g(this._allTables,o))throw new le.InvalidTable("Table ".concat(o," does not exist"));return this._allTables[o]},Ue);function Ue(o,l){var c=this;this._middlewares={},this.verno=0;var f=Ue.dependencies;this._options=l=r({addons:Ue.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},l),this._deps={indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},f=l.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,y,b,j,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:l.autoOpen};P.dbReadyPromise=new ee(function(S){P.dbReadyResolve=S}),P.openCanceller=new ee(function(S,D){P.cancelOpen=D}),this._state=P,this.name=o,this.on=Fi(this,"populate","blocked","versionchange","close",{ready:[tl,Se]}),this.once=function(S,D){var C=function(){for(var T=[],I=0;I<arguments.length;I++)T[I]=arguments[I];c.on(S).unsubscribe(C),D.apply(c,T)};return c.on(S,C)},this.on.ready.subscribe=k(this.on.ready.subscribe,function(S){return function(D,C){Ue.vip(function(){var T,I=c._state;I.openComplete?(I.dbOpenError||ee.resolve().then(D),C&&S(D)):I.onReadyBeingFired?(I.onReadyBeingFired.push(D),C&&S(D)):(S(D),T=c,C||S(function N(){T.on.ready.unsubscribe(D),T.on.ready.unsubscribe(N)}))})}}),this.Collection=(h=this,Ki(Gv.prototype,function($,N){this.db=h;var C=$d,T=null;if(N)try{C=N()}catch(z){T=z}var I=$._ctx,N=I.table,$=N.hook.reading.fire;this._ctx={table:N,index:I.index,isPrimKey:!I.index||N.schema.primKey.keyPath&&I.index===N.schema.primKey.name,range:C,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:T,or:I.or,valueMapper:$!==Li?$:null}})),this.Table=(m=this,Ki(Md.prototype,function(S,D,C){this.db=m,this._tx=C,this.name=S,this.schema=D,this.hook=m._allTables[S]?m._allTables[S].hook:Fi(null,{creating:[zv,Se],reading:[Uv,Li],updating:[Bv,Se],deleting:[Mv,Se]})})),this.Transaction=(y=this,Ki(Yv.prototype,function(S,D,C,T,I){var N=this;S!=="readonly"&&D.forEach(function($){$=($=C[$])===null||$===void 0?void 0:$.yProps,$&&(D=D.concat($.map(function(z){return z.updatesTable})))}),this.db=y,this.mode=S,this.storeNames=D,this.schema=C,this.chromeTransactionDurability=T,this.idbtrans=null,this.on=Fi(this,"complete","error","abort"),this.parent=I||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function($,z){N._resolve=$,N._reject=z}),this._completion.then(function(){N.active=!1,N.on.complete.fire()},function($){var z=N.active;return N.active=!1,N.on.error.fire($),N.parent?N.parent._reject($):z&&N.idbtrans&&N.idbtrans.abort(),Le($)})})),this.Version=(b=this,Ki(ig.prototype,function(S){this.db=b,this._cfg={version:S,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,Ki(Vd.prototype,function(S,D,C){if(this.db=j,this._ctx={table:S,index:D===":id"?null:D,or:C},this._cmp=this._ascending=ge,this._descending=function(T,I){return ge(I,T)},this._max=function(T,I){return 0<ge(T,I)?T:I},this._min=function(T,I){return ge(T,I)<0?T:I},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new le.MissingAPI})),this.on("versionchange",function(S){0<S.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(S){!S.newVersion||S.newVersion<S.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(S.oldVersion/10))}),this._maxKey=Hi(l.IDBKeyRange),this._createTransaction=function(S,D,C,T){return new c.Transaction(S,D,C,c._options.chromeTransactionDurability,T)},this._fireOnBlocked=function(S){c.on("blocked").fire(S),Fr.filter(function(D){return D.name===c.name&&D!==c&&!D._state.vcFired}).map(function(D){return D.on("versionchange").fire(S)})},this.use(lg),this.use(fg),this.use(ug),this.use(og),this.use(ag);var R=new Proxy(this,{get:function(S,D,C){if(D==="_vip")return!0;if(D==="table")return function(I){return ko(c.table(I),R)};var T=Reflect.get(S,D,C);return T instanceof Md?ko(T,R):D==="tables"?T.map(function(I){return ko(I,R)}):D==="_createTransaction"?function(){return ko(T.apply(this,arguments),R)}:T}});this.vip=R,f.forEach(function(S){return S(c)})}var So,Nt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hg=(Nl.prototype.subscribe=function(o,l,c){return this._subscribe(o&&typeof o!="function"?o:{next:o,error:l,complete:c})},Nl.prototype[Nt]=function(){return this},Nl);function Nl(o){this._subscribe=o}try{So={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{So={indexedDB:null,IDBKeyRange:null}}function lf(o){var l,c=!1,f=new hg(function(h){var m=je(o),y,b=!1,j={},P={},R={get closed(){return b},unsubscribe:function(){b||(b=!0,y&&y.abort(),S&&Pn.storagemutated.unsubscribe(C))}};h.start&&h.start(R);var S=!1,D=function(){return ul(T)},C=function(I){wo(j,I),El(P,j)&&D()},T=function(){var I,N,$;!b&&So.indexedDB&&(j={},I={},y&&y.abort(),y=new AbortController,$=function(z){var B=zr();try{m&&Br();var F=En(o,z);return F=m?F.finally(jn):F}finally{B&&Mr()}}(N={subscr:I,signal:y.signal,requery:D,querier:o,trans:null}),Promise.resolve($).then(function(z){c=!0,l=z,b||N.signal.aborted||(j={},function(B){for(var F in B)if(g(B,F))return;return 1}(P=I)||S||(Pn(Vi,C),S=!0),ul(function(){return!b&&h.next&&h.next(z)}))},function(z){c=!1,["DatabaseClosedError","AbortError"].includes(z==null?void 0:z.name)||b||ul(function(){b||h.error&&h.error(z)})}))};return setTimeout(D,0),R});return f.hasValue=function(){return c},f.getValue=function(){return l},f}var pr=un;function Il(o){var l=Tn;try{Tn=!0,Pn.storagemutated.fire(o),Ol(o,!0)}finally{Tn=l}}w(pr,r(r({},Ys),{delete:function(o){return new pr(o,{addons:[]}).delete()},exists:function(o){return new pr(o,{addons:[]}).open().then(function(l){return l.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(o){try{return l=pr.dependencies,c=l.indexedDB,l=l.IDBKeyRange,(kl(c)?Promise.resolve(c.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==oo})}):bl(c,l).toCollection().primaryKeys()).then(o)}catch{return Le(new le.MissingAPI)}var l,c},defineClass:function(){return function(o){d(this,o)}},ignoreTransaction:function(o){return ae.trans?cr(ae.transless,o):o()},vip:Sl,async:function(o){return function(){try{var l=Pl(o.apply(this,arguments));return l&&typeof l.then=="function"?l:ee.resolve(l)}catch(c){return Le(c)}}},spawn:function(o,l,c){try{var f=Pl(o.apply(c,l||[]));return f&&typeof f.then=="function"?f:ee.resolve(f)}catch(h){return Le(h)}},currentTransaction:{get:function(){return ae.trans||null}},waitFor:function(o,l){return l=ee.resolve(typeof o=="function"?pr.ignoreTransaction(o):o).timeout(l||6e4),ae.trans?ae.trans.waitFor(l):l},Promise:ee,debug:{get:function(){return Yt},set:function(o){Pd(o)}},derive:M,extend:d,props:w,override:k,Events:Fi,on:Pn,liveQuery:lf,extendObservabilitySet:wo,getByKeyPath:K,setByKeyPath:W,delByKeyPath:function(o,l){typeof l=="string"?W(o,l,void 0):"length"in l&&[].map.call(l,function(c){W(o,c,void 0)})},shallowClone:re,deepClone:Be,getObjectDiff:Tl,cmp:ge,asap:U,minKey:-1/0,addons:[],connections:Fr,errnames:Sn,dependencies:So,cache:hr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(o){return parseInt(o)}).reduce(function(o,l,c){return o+l/Math.pow(10,2*c)})})),pr.maxKey=Hi(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Pn(Vi,function(o){Tn||(o=new CustomEvent(pl,{detail:o}),Tn=!0,dispatchEvent(o),Tn=!1)}),addEventListener(pl,function(o){o=o.detail,Tn||Il(o)}));var Vr,Tn=!1,uf=function(){};return typeof BroadcastChannel<"u"&&((uf=function(){(Vr=new BroadcastChannel(pl)).onmessage=function(o){return o.data&&Il(o.data)}})(),typeof Vr.unref=="function"&&Vr.unref(),Pn(Vi,function(o){Tn||Vr.postMessage(o)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(o){if(!un.disableBfCache&&o.persisted){Yt&&console.debug("Dexie: handling persisted pagehide"),Vr!=null&&Vr.close();for(var l=0,c=Fr;l<c.length;l++)c[l].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(o){!un.disableBfCache&&o.persisted&&(Yt&&console.debug("Dexie: handling persisted pageshow"),uf(),Il({all:new rt(-1/0,[[]])}))})),ee.rejectionMapper=function(o,l){return!o||o instanceof Mt||o instanceof TypeError||o instanceof SyntaxError||!o.name||!Od[o.name]?o:(l=new Od[o.name](l||o.message,o),"stack"in o&&L(l,"stack",{get:function(){return this.inner.stack}}),l)},Pd(Yt),r(un,Object.freeze({__proto__:null,Dexie:un,liveQuery:lf,Entity:Ld,cmp:ge,PropModification:qi,replacePrefix:function(o,l){return new qi({replacePrefix:[o,l]})},add:function(o){return new qi({add:o})},remove:function(o){return new qi({remove:o})},default:un,RangeSet:rt,mergeRanges:Ji,rangesOverlap:Yd}),{default:un}),un})})(Iv);var $b=Iv.exports;const Ec=Gh($b),Wh=Symbol.for("Dexie"),Ti=globalThis[Wh]||(globalThis[Wh]=Ec);if(Ec.semVer!==Ti.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ec.semVer} and ${Ti.semVer}`);const{liveQuery:gk,mergeRanges:yk,rangesOverlap:wk,RangeSet:_k,cmp:bk,Entity:kk,PropModification:Sk,replacePrefix:xk,add:Ek,remove:jk,DexieYProvider:Ck}=Ti;class Lb extends Ti{constructor(){super("gestor-reparaciones"),this.version(1).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado"}),this.version(2).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"}),this.version(3).stores({clientes:"id, nombre, telefono, fecha_alta",equipos:"id, clienteId, marca, modelo, fecha_recepcion",ordenes:"id, codigo, equipoId, estado, creada, actualizada, cliente, telefono, equipo",eventos:"id, ordenId, fecha",piezas:"id, ordenId, estado",adjuntos:"id, ordenId, fecha"})}}const Z=new Lb,jd="2f647c2d-8b01-447a-8959-1e35520937a6";let el="idle",vu=null,Vh=!1,gu=null;function Ub(){return el}const ia=[];function zb(t){return ia.push(t),()=>{const e=ia.indexOf(t);e!==-1&&ia.splice(e,1)}}function mn(t){el=t,ia.forEach(e=>e(t))}function Mb(){gu&&clearTimeout(gu),gu=setTimeout(()=>{el!=="syncing"&&Cd()},2e3)}async function Bb(){mn("syncing"),console.log("⚙️ Sincronización manual forzada...");try{await Cd(),await jc()}catch(t){throw console.error("❌ Error en sincronización forzada:",t),mn("error"),t}}async function Cd(){try{mn("syncing"),console.log("📤 Subiendo backup a Supabase...");const t=await Z.clientes.toArray(),e=await Z.equipos.toArray(),n=await Z.ordenes.toArray(),r=await Z.adjuntos.toArray(),i={clientes:t,equipos:e,ordenes:n,adjuntos:r,fecha:new Date().toISOString()},{error:s}=await Ed.from("backups").upsert([{id:jd,fecha:new Date().toISOString(),payload:i}],{onConflict:"id"});if(s)throw s;console.log("✅ Backup subido correctamente."),mn("ok")}catch(t){console.error("❌ Error en syncPush:",t.message),mn("error")}}async function jc(){try{mn("syncing"),console.log("⬇️ Descargando backup desde Supabase...");const{data:t,error:e}=await Ed.from("backups").select("payload").eq("id",jd).single();if(e)throw e;const n=t==null?void 0:t.payload;if(!n||!n.fecha){console.log("⚠️ No se encontró backup válido en Supabase. Se mantendrán los datos locales."),mn("ok");return}const r=new Date(n.fecha),i=await Z.ordenes.count(),s=await Z.ordenes.orderBy("actualizada").last();if(i===0||r>new Date((s==null?void 0:s.actualizada)||0)){console.log("🔄 Restaurando backup remoto más reciente...");const{clientes:a,equipos:u,ordenes:d,adjuntos:p}=n;await Z.transaction("rw",Z.clientes,Z.equipos,Z.ordenes,Z.adjuntos,async()=>{await Z.clientes.clear(),await Z.equipos.clear(),await Z.ordenes.clear(),await Z.adjuntos.clear(),await Z.clientes.bulkAdd(a||[]),await Z.equipos.bulkAdd(u||[]),await Z.ordenes.bulkAdd(d||[]),await Z.adjuntos.bulkAdd(p||[])}),console.log("✅ Datos restaurados desde Supabase.")}else console.log("Datos locales más recientes o iguales. No se realiza pull.");mn("ok")}catch(t){console.error("❌ Error en syncPull:",t.message),mn("error")}}function Fb(t=12e4){vu&&clearInterval(vu),console.log("⚙️ AutoSync activado cada",t/1e3,"segundos"),Vh||jc().then(async()=>{Z.on("changes",n=>{if(!navigator.onLine)return;n.some(i=>i.table==="clientes"||i.table==="ordenes"||i.table==="equipos")&&Mb()});const{data:e}=await Ed.from("backups").select("id").eq("id",jd);(!e||e.length===0)&&(console.log("🔥 No hay backup remoto, forzando un Push inicial..."),Cd()),Vh=!0}),vu=setInterval(()=>{el!=="syncing"&&jc()},t)}function Kb({tab:t,onTab:e,children:n}){const[r,i]=we.useState(()=>localStorage.getItem("gr_dark")==="1"),[s,a]=we.useState(Ub());return we.useEffect(()=>{const u=d=>a(d);Fb(),zb(u)},[]),x.jsxs("div",{className:"min-h-screen grid grid-cols-1 lg:grid-cols-[240px_1fr] bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100",children:[x.jsxs("aside",{className:"hidden lg:flex lg:flex-col gap-2 border-r border-neutral-200/70 dark:border-neutral-800 p-4",children:[x.jsxs("div",{className:"flex items-center gap-2 font-semibold text-lg",children:[x.jsx(xh,{className:"size-5"})," Gestor"]}),x.jsxs("nav",{className:"mt-4 grid gap-1",children:[x.jsx(os,{icon:_h,label:"Registro",active:t==="registro",onClick:()=>e("registro")}),x.jsx(os,{icon:_h,label:"Órdenes",active:t==="ordenes",onClick:()=>e("ordenes")}),x.jsx(os,{icon:H0,label:"Presupuesto",active:t==="presupuesto",onClick:()=>e("presupuesto")}),x.jsx(os,{icon:bh,label:"Reparación",active:t==="reparacion",onClick:()=>e("reparacion")}),x.jsx(os,{icon:bh,label:"Historial",active:t==="historial",onClick:()=>e("historial")})]}),x.jsx("div",{className:"mt-auto pt-4 border-t border-neutral-200/70 dark:border-neutral-800",children:x.jsxs("button",{className:"btn btn-ghost w-full",onClick:()=>i(u=>!u),children:[r?x.jsx(Sh,{className:"size-4"}):x.jsx(kh,{className:"size-4"}),x.jsx("span",{className:"ml-2",children:r?"Modo claro":"Modo oscuro"})]})})]}),x.jsxs("div",{className:"flex flex-col min-h-screen",children:[x.jsx("header",{className:"sticky top-0 z-10 border-b border-neutral-200/70 dark:border-neutral-800 bg-white/80 dark:bg-neutral-950/70 backdrop-blur",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center gap-3",children:[x.jsx(xh,{className:"size-5 lg:hidden"}),x.jsx("h1",{className:"font-semibold",children:"Gestor de Reparaciones"}),x.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[x.jsx("span",{"data-sync-chip":!0,className:`tab ${s==="idle"?"tab-active":""}`,title:s,children:s==="idle"||s==="ok"?"Sincronizado":s==="syncing"?"Sincronizando…":s==="offline"?"Offline":"Error"}),x.jsx("button",{className:`tab ${t==="registro"?"tab-active":""}`,onClick:()=>e("registro"),children:"Registro"}),x.jsx("button",{className:`tab ${t==="ordenes"?"tab-active":""}`,onClick:()=>e("ordenes"),children:"Órdenes"}),x.jsx("button",{className:`tab ${t==="presupuesto"?"tab-active":""}`,onClick:()=>e("presupuesto"),children:"Presupuesto"}),x.jsx("button",{className:`tab ${t==="reparacion"?"tab-active":""}`,onClick:()=>e("reparacion"),children:"Reparación"}),x.jsx("button",{className:`tab ${t==="historial"?"tab-active":""}`,onClick:()=>e("historial"),children:"Historial"}),x.jsx("button",{title:"Tema",className:"btn btn-ghost",onClick:()=>i(u=>!u),children:r?x.jsx(Sh,{className:"size-4"}):x.jsx(kh,{className:"size-4"})})]})]})}),x.jsx("main",{className:"max-w-6xl w-full mx-auto p-4",children:x.jsx("div",{className:"grid gap-4",children:n})})]})]})}function os({icon:t,label:e,active:n,onClick:r}){return x.jsxs("button",{onClick:r,className:`flex items-center gap-2 rounded-lg px-3 py-2 text-left hover:bg-neutral-100 dark:hover:bg-neutral-900 ${n?"bg-neutral-100 dark:bg-neutral-900 font-medium":""}`,children:[x.jsx(t,{className:"size-4"})," ",x.jsx("span",{children:e})]})}function qb(t,e,n){var r,i;typeof t=="function"?(r=e||[],i=n):(r=[],i=e);var s=ei.useRef({hasResult:!1,result:i,error:null}),a=ei.useReducer(function(p){return p+1},0);a[0];var u=a[1],d=ei.useMemo(function(){var p=typeof t=="function"?t():t;if(!p||typeof p.subscribe!="function")throw t===p?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!s.current.hasResult&&typeof window<"u"&&(typeof p.hasValue!="function"||p.hasValue()))if(typeof p.getValue=="function")s.current.result=p.getValue(),s.current.hasResult=!0;else{var v=p.subscribe(function(g){s.current.result=g,s.current.hasResult=!0});typeof v=="function"?v():v.unsubscribe()}return p},r);if(ei.useDebugValue(s.current.result),ei.useEffect(function(){var p=d.subscribe(function(v){var g=s.current;(g.error!==null||g.result!==v)&&(g.error=null,g.result=v,g.hasResult=!0,u())},function(v){var g=s.current;g.error!==v&&(g.error=v,u())});return typeof p=="function"?p:p.unsubscribe.bind(p)},r),s.current.error)throw s.current.error;return s.current.result}function Ln(t,e,n){return qb(function(){return Ti.liveQuery(t)},e||[],n)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(t){var e=Ti.DexieYProvider;e&&e.release(t)});const Ze=[];for(let t=0;t<256;++t)Ze.push((t+256).toString(16).slice(1));function Wb(t,e=0){return(Ze[t[e+0]]+Ze[t[e+1]]+Ze[t[e+2]]+Ze[t[e+3]]+"-"+Ze[t[e+4]]+Ze[t[e+5]]+"-"+Ze[t[e+6]]+Ze[t[e+7]]+"-"+Ze[t[e+8]]+Ze[t[e+9]]+"-"+Ze[t[e+10]]+Ze[t[e+11]]+Ze[t[e+12]]+Ze[t[e+13]]+Ze[t[e+14]]+Ze[t[e+15]]).toLowerCase()}let yu;const Vb=new Uint8Array(16);function Hb(){if(!yu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yu=crypto.getRandomValues.bind(crypto)}return yu(Vb)}const Gb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hh={randomUUID:Gb};function Qb(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??Hb();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Wb(r)}function Pr(t,e,n){return Hh.randomUUID&&!t?Hh.randomUUID():Qb(t)}function Dv(t=Date.now()){return"ORD-"+t}async function $v(t){const e=new Date().toISOString();let n;if(t.id){if(await Z.clientes.update(t.id,{nombre:t.nombre,telefono:t.telefono,email:t.email||null}),n=await Z.clientes.get(t.id),!n)throw new Error(`Error: Cliente con ID ${t.id} no encontrado para actualizar.`)}else n={id:Pr(),nombre:t.nombre,telefono:t.telefono,email:t.email||null,fecha_alta:e},await Z.clientes.add(n);return n}async function Jb(t){const e=new Date().toISOString();return Z.transaction("rw",Z.clientes,Z.equipos,Z.ordenes,Z.eventos,async()=>{const n=await $v(t.cliente),r={id:Pr(),clienteId:n.id,categoria:t.equipo.categoria,marca:t.equipo.marca,modelo:t.equipo.modelo,numeroSerie:t.equipo.numeroSerie,descripcion:t.equipo.descripcion,fecha_recepcion:e},i={id:Pr(),codigo:Dv(),equipoId:r.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${r.marca} ${r.modelo}`},s={id:Pr(),ordenId:i.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e};return await Z.equipos.add(r),await Z.ordenes.add(i),await Z.eventos.add(s),{cliente:n,equipo:r,orden:i}})}async function Yb(t){const e=new Date().toISOString();return Z.transaction("rw",Z.clientes,Z.equipos,Z.ordenes,Z.eventos,async()=>{const n=await $v(t.cliente),r=t.equipos.map(u=>({id:Pr(),clienteId:n.id,categoria:u.categoria,marca:u.marca,modelo:u.modelo,numeroSerie:u.numeroSerie,descripcion:u.descripcion,fecha_recepcion:e})),i=r.map(u=>({id:Pr(),codigo:Dv(),equipoId:u.id,estado:"recepcion",creada:e,actualizada:e,cliente:n.nombre,telefono:n.telefono,equipo:`${u.marca} ${u.modelo}`})),s=i.map(u=>({id:Pr(),ordenId:u.id,tipo:"recepcion",texto:"Equipo recibido y registrado.",fecha:e}));return await Z.equipos.bulkAdd(r),await Z.ordenes.bulkAdd(i),await Z.eventos.bulkAdd(s),{resultados:i.map((u,d)=>({cliente:n,equipo:r[d],orden:u}))}})}const Wo={id:void 0,nombre:"",telefono:"",email:""},wu={categoria:"",marca:"",modelo:"",numeroSerie:"",descripcion:""};function Xb({onCreated:t}){const[e,n]=we.useState(Wo),[r,i]=we.useState([{...wu}]);Ln(()=>Z.clientes.toArray(),[]);const s=!!e.nombre&&!!e.telefono&&r.every(g=>g.categoria&&g.marca&&g.modelo&&g.descripcion);function a(g,w){i(O=>O.map((L,M)=>M===g?{...L,...w}:L))}function u(){i(g=>[...g,{...wu}])}function d(g){i(w=>w.length>1?w.filter((O,L)=>L!==g):w)}function p(){n(Wo),i([{...wu}])}async function v(){if(!s)return;const g={id:e.id,nombre:e.nombre,telefono:e.telefono,email:e.email};try{if(r.length===1){const O=r[0],{orden:L}=await Jb({cliente:g,equipo:{categoria:O.categoria,marca:O.marca,modelo:O.modelo,numeroSerie:O.numeroSerie||void 0,descripcion:O.descripcion}});p(),t(L.id);return}const{resultados:w}=await Yb({cliente:g,equipos:r.map(O=>({categoria:O.categoria,marca:O.marca,modelo:O.modelo,numeroSerie:O.numeroSerie||void 0,descripcion:O.descripcion}))});p(),t(w[0].orden.id)}catch(w){console.error("Error al crear la orden:",w),alert("Hubo un error al crear la orden. Revisa la consola.")}}return x.jsx("section",{className:"grid gap-4",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-4",children:[x.jsx("h2",{className:"text-lg font-semibold",children:"Registro cliente y aparatos"}),x.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[x.jsxs(Nn,{label:"Nombre*",children:[x.jsx("input",{className:"input",value:e.nombre,onChange:g=>n({...e,nombre:g.target.value})}),e.id&&x.jsxs("span",{className:"text-xs text-green-500",children:["Cliente existente ID: ",e.id.substring(0,4),"..."]})]}),x.jsx(Nn,{label:"Teléfono*",children:x.jsx("input",{className:"input",value:e.telefono,onChange:g=>{n(w=>({...w,telefono:g.target.value})),e.id&&g.target.value!==e.telefono&&n(w=>({...w,id:void 0,nombre:Wo.nombre,email:Wo.email}))}})}),x.jsx(Nn,{label:"Email",children:x.jsx("input",{className:"input",value:e.email,onChange:g=>n({...e,email:g.target.value})})})]}),x.jsxs("div",{className:"grid gap-4",children:[r.map((g,w)=>x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-3",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("div",{className:"font-medium",children:["Equipo #",w+1]}),r.length>1&&x.jsx("button",{className:"btn",onClick:()=>d(w),children:"Quitar"})]}),x.jsxs("div",{className:"grid sm:grid-cols-2 gap-3",children:[x.jsx(Nn,{label:"Aparato*",children:x.jsx("input",{className:"input",placeholder:"Ej: Móvil, Ordenador, Robot aspirador...",value:g.categoria,onChange:O=>a(w,{categoria:O.target.value})})}),x.jsx(Nn,{label:"Marca*",children:x.jsx("input",{className:"input",value:g.marca,onChange:O=>a(w,{marca:O.target.value})})}),x.jsx(Nn,{label:"Modelo*",children:x.jsx("input",{className:"input",value:g.modelo,onChange:O=>a(w,{modelo:O.target.value})})}),x.jsx(Nn,{label:"Nº de serie",children:x.jsx("input",{className:"input",value:g.numeroSerie,onChange:O=>a(w,{numeroSerie:O.target.value})})})]}),x.jsx(Nn,{label:"Daño inicial*",children:x.jsx("textarea",{className:"input min-h-28",value:g.descripcion,onChange:O=>a(w,{descripcion:O.target.value})})})]})},w)),x.jsx("div",{children:x.jsx("button",{className:"btn",onClick:u,children:"Añadir otro equipo"})})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsx("button",{className:"btn btn-primary",disabled:!s,onClick:v,children:"Crear orden(es)"}),x.jsx("button",{className:"btn",onClick:p,children:"Limpiar"})]})]})})})}function Nn({label:t,children:e}){return x.jsxs("label",{className:"grid gap-1",children:[x.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function Zb(t){const e=i=>`"${(i||"").replace(/"/g,'""')}"`;return[["ID","Código","Estado","Cliente","Teléfono","Equipo","Creada","Actualizada"].join(",")].concat(t.map(i=>[i.id,i.codigo,i.estado,i.cliente,i.telefono,i.equipo,new Date(i.creada).toLocaleString(),new Date(i.actualizada).toLocaleString()].map(e).join(","))).join(`\r
`)}async function ek(){return new Promise(t=>{const e=document.createElement("input");e.type="file",e.accept="application/json",e.onchange=async()=>{var r;const n=(r=e.files)==null?void 0:r[0];if(!n){t(null);return}try{const i=JSON.parse(await n.text());t(i)}catch{t(null)}},e.click()})}function tk({onOpen:t}){const[e,n]=we.useState(""),[r,i]=we.useState("todos"),[s,a]=we.useState(""),[u,d]=we.useState(""),[p,v]=we.useState("act_desc"),[g,w]=we.useState(null),[O,L]=we.useState(!1),M=Ln(()=>Z.ordenes.toArray(),[]),q=we.useMemo(()=>{if(!M)return[];const U={};M.forEach(ie=>{if(!ie.cliente||!ie.telefono||!ie.equipo){console.warn("Orden ignorada por falta de campos redundantes:",ie.id);return}const oe=ie.cliente+ie.telefono,Me={id:ie.id,codigo:ie.codigo,estado:ie.estado,cliente:ie.cliente,telefono:ie.telefono,equipo:ie.equipo,creada:ie.creada,actualizada:ie.actualizada};U[oe]||(U[oe]={clienteId:oe,nombre:Me.cliente,telefono:Me.telefono,totalOrdenes:0,ordenes:[]}),U[oe].ordenes.push(Me),U[oe].totalOrdenes++});let K=Object.values(U);const W=e.trim().toLowerCase(),re={creada_desc:(ie,oe)=>new Date(oe.creada).getTime()-new Date(ie.creada).getTime(),creada_asc:(ie,oe)=>new Date(ie.creada).getTime()-new Date(oe.creada).getTime(),act_desc:(ie,oe)=>new Date(oe.actualizada).getTime()-new Date(ie.actualizada).getTime(),act_asc:(ie,oe)=>new Date(ie.actualizada).getTime()-new Date(oe.actualizada).getTime()}[p];return K=K.filter(ie=>{const oe=ie.ordenes.filter(Be=>{let Ur=r==="todos"||Be.estado===r,ir=s?new Date(Be.creada)>=new Date(s):!0,an=u?new Date(Be.creada).setHours(23,59,59,999)>=new Date(u).getTime():!0;return Ur&&ir&&an}).sort(re),Me=ie.nombre.toLowerCase().includes(W)||ie.telefono.includes(W),xt=oe.some(Be=>Be.codigo.toLowerCase().includes(W)||Be.equipo.toLowerCase().includes(W));return ie.ordenes=oe,(Me||xt)&&oe.length>0}),g&&!K.some(ie=>ie.clienteId===g)&&w(null),K},[M,e,r,s,u,p,g]);function E(){const U=q.flatMap(oe=>oe.ordenes);if(U.length===0){alert("No hay órdenes para exportar.");return}const K=Zb(U),W=new Blob([K],{type:"text/csv;charset=utf-8;"}),re=URL.createObjectURL(W),ie=document.createElement("a");ie.href=re,ie.download=`ordenes-${new Date().toISOString().slice(0,10)}.csv`,ie.click(),URL.revokeObjectURL(re)}async function _(){if(!confirm("¿Estás seguro de que quieres importar datos? Esto podría añadir o sobrescribir datos si los IDs coinciden."))return;const U=await ek();if(U)try{await Z.transaction("rw",Z.clientes,Z.equipos,Z.ordenes,Z.eventos,Z.piezas,Z.adjuntos,async()=>{U.clientes&&await Z.clientes.bulkAdd(U.clientes).catch(()=>console.warn("Advertencia: Algunos clientes ya existían o tenían un ID repetido.")),U.equipos&&await Z.equipos.bulkAdd(U.equipos).catch(()=>console.warn("Advertencia: Algunos equipos ya existían o tenían un ID repetido.")),U.ordenes&&await Z.ordenes.bulkAdd(U.ordenes).catch(()=>console.warn("Advertencia: Algunas órdenes ya existían o tenían un ID repetido.")),U.eventos&&await Z.eventos.bulkAdd(U.eventos).catch(()=>console.warn("Advertencia: Algunos eventos ya existían o tenían un ID repetido.")),U.piezas&&await Z.piezas.bulkAdd(U.piezas).catch(()=>console.warn("Advertencia: Algunas piezas ya existían o tenían un ID repetido.")),U.adjuntos&&await Z.adjuntos.bulkAdd(U.adjuntos).catch(()=>console.warn("Advertencia: Algunos adjuntos ya existían o tenían un ID repetido."))}),alert("Datos importados correctamente.")}catch(K){alert(`Error al importar datos: ${K.message}`)}}async function k(U){confirm("¿Seguro que deseas eliminar esta orden?")&&(await Z.transaction("rw",Z.ordenes,Z.eventos,Z.piezas,Z.adjuntos,async()=>{await Z.eventos.where("ordenId").equals(U).delete(),await Z.piezas.where("ordenId").equals(U).delete(),Z.adjuntos&&await Z.adjuntos.where("ordenId").equals(U).delete(),await Z.ordenes.delete(U)}),alert("Orden eliminada correctamente"))}async function A(){L(!0);try{await Bb()}catch{alert("Error al sincronizar. Revisa la consola y la conexión.")}finally{L(!1)}}return x.jsxs("section",{className:"grid gap-3",children:[x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsxs("div",{className:"grid lg:grid-cols-5 gap-2",children:[x.jsx("input",{className:"input",placeholder:"Buscar por código, cliente, teléfono o equipo",value:e,onChange:U=>n(U.target.value)}),x.jsxs("select",{className:"input",value:r,onChange:U=>i(U.target.value),children:[x.jsx("option",{value:"todos",children:"Todos"}),x.jsx("option",{value:"recepcion",children:"recepcion"}),x.jsx("option",{value:"diagnostico",children:"diagnostico"}),x.jsx("option",{value:"reparacion",children:"reparacion"}),x.jsx("option",{value:"listo",children:"listo"}),x.jsx("option",{value:"entregado",children:"entregado"})]}),x.jsx("input",{className:"input",type:"date",value:s,onChange:U=>a(U.target.value)}),x.jsx("input",{className:"input",type:"date",value:u,onChange:U=>d(U.target.value)}),x.jsxs("select",{className:"input",value:p,onChange:U=>v(U.target.value),children:[x.jsx("option",{value:"act_desc",children:"Act. reciente"}),x.jsx("option",{value:"act_asc",children:"Act. antigua"}),x.jsx("option",{value:"creada_desc",children:"Creada reciente"}),x.jsx("option",{value:"creada_asc",children:"Creada antigua"})]})]}),x.jsxs("div",{className:"mt-3 flex gap-2",children:[x.jsx("button",{className:"btn",onClick:E,children:"Exportar CSV"}),x.jsx("button",{className:"btn",onClick:_,children:"Importar JSON"}),x.jsx("button",{className:"btn btn-secondary",onClick:A,disabled:O,children:O?"Sincronizando...":"Sincronizar ahora"})]})]})}),x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body p-0",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{}),x.jsxs("tbody",{children:[q.map(U=>x.jsxs(x.Fragment,{children:[x.jsx("tr",{className:"bg-neutral-100 dark:bg-neutral-800 font-semibold cursor-pointer",onClick:()=>w(K=>K===U.clienteId?null:U.clienteId),children:x.jsxs("td",{className:"py-2 px-3 flex items-center gap-2",colSpan:8,children:[g===U.clienteId?x.jsx(Q0,{className:"size-4"}):x.jsx(Y0,{className:"size-4"}),"Cliente: ",U.nombre," (",U.telefono,") | Órdenes: ",U.ordenes.length]})},U.clienteId),g===U.clienteId&&U.ordenes.map(K=>x.jsxs("tr",{className:"border-t border-neutral-200/70 dark:border-neutral-800",children:[x.jsx("td",{className:"py-2 pr-3 pl-8",children:K.codigo}),x.jsx("td",{className:"py-2 pr-3",children:K.cliente}),x.jsx("td",{className:"py-2 pr-3",children:K.telefono}),x.jsx("td",{className:"py-2 pr-3",children:K.equipo}),x.jsx("td",{className:"py-2 pr-3",children:K.estado}),x.jsx("td",{className:"py-2 pr-3",children:new Date(K.creada).toLocaleString()}),x.jsx("td",{className:"py-2 pr-3",children:new Date(K.actualizada).toLocaleString()}),x.jsxs("td",{className:"py-2 flex gap-2",children:[x.jsx("button",{className:"btn btn-primary",onClick:()=>t(K.id),children:"Abrir"}),x.jsx("button",{className:"btn",onClick:()=>k(K.id),children:"Eliminar"})]})]},K.id))]})),q.length===0&&x.jsx("tr",{children:x.jsx("td",{className:"py-4 opacity-70 px-4",colSpan:8,children:"No se encontraron órdenes."})})]})]})})})})]})}function _u({label:t,value:e,strong:n}){return x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body",children:[x.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),x.jsx("div",{className:`text-xl ${n?"font-bold":""}`,children:e.toFixed(2)})]})})}function bu({label:t,children:e}){return x.jsxs("label",{className:"grid gap-1",children:[x.jsx("span",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:t}),e]})}function nk(){const[t,e]=we.useState(1),[n,r]=we.useState(25),[i,s]=we.useState(0),a=t*n,u=a+i,d=u;return x.jsx("section",{className:"grid gap-4",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-4",children:[x.jsx("h2",{className:"text-lg font-semibold",children:"Presupuesto inicial"}),x.jsxs("div",{className:"grid sm:grid-cols-3 gap-3",children:[x.jsx(bu,{label:"Horas",children:x.jsx("input",{type:"number",className:"input",value:t,onChange:p=>e(parseFloat(p.target.value)||0)})}),x.jsx(bu,{label:"Tarifa €/h",children:x.jsx("input",{type:"number",className:"input",value:n,onChange:p=>r(parseFloat(p.target.value)||0)})}),x.jsx(bu,{label:"Piezas €",children:x.jsx("input",{type:"number",className:"input",value:i,onChange:p=>s(parseFloat(p.target.value)||0)})})]}),x.jsxs("div",{className:"grid sm:grid-cols-2 md:grid-cols-4 gap-3",children:[x.jsx(_u,{label:"Mano de obra",value:a}),x.jsx(_u,{label:"Subtotal",value:u}),x.jsx(_u,{label:"Total",value:d,strong:!0})]})]})})})}const rk=["recepcion","diagnostico","reparacion","listo","entregado"];function ik(t){if(t<1024)return t+" B";const e=1024,n=["KB","MB","GB","TB"];let r=-1,i=t;do i/=e,r++;while(i>=e&&r<n.length-1);return i.toFixed(1)+" "+n[r]}function sk({ordenId:t}){const[e,n]=we.useState(""),[r,i]=we.useState({nombre:"",cantidad:1,coste:0,estado:"pendiente"}),[s,a]=we.useState(null),[u,d]=we.useState(!1),p=Ln(()=>Z.ordenes.get(t),[t]),v=Ln(()=>p!=null&&p.equipoId?Z.equipos.get(p.equipoId):void 0,[p==null?void 0:p.equipoId]),g=Ln(()=>v!=null&&v.clienteId?Z.clientes.get(v.clienteId):void 0,[v==null?void 0:v.clienteId]),w=Ln(()=>Z.piezas.where("ordenId").equals(t).toArray(),[t]),O=Ln(()=>Z.eventos.where("ordenId").equals(t).reverse().toArray(),[t]),L=Ln(()=>Z.adjuntos.where("ordenId").equals(t).toArray(),[t]),M=we.useMemo(()=>(w||[]).reduce((A,U)=>A+U.coste*U.cantidad,0),[w]),q=we.useMemo(()=>{if(!p)return null;const A=v,U=g,K=A?`${A.marca} ${A.modelo} (${A.categoria||"Genérico"})`:"N/A";return{codigo:p.codigo,estado:p.estado,clienteNombre:(U==null?void 0:U.nombre)||"N/A",clienteTelefono:(U==null?void 0:U.telefono)||"N/A",equipoInfo:K,creada:p.creada,actualizada:p.actualizada}},[p,v,g]);async function E(A){if(!(!p||!A))try{await Z.ordenes.update(t,{estado:A,actualizada:new Date().toISOString()}),await Z.eventos.add({id:crypto.randomUUID(),ordenId:t,tipo:"estado",texto:`Estado cambiado a: ${A}`,fecha:new Date().toISOString()}),a({msg:`Estado actualizado a ${A}.`})}catch(U){console.error("Error al cambiar el estado:",U),a({msg:"Error al actualizar el estado."})}}we.useEffect(()=>{},[t]);async function _(A){}async function k(A,U){}return t?q?x.jsxs("section",{className:"grid gap-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("h2",{className:"text-lg font-semibold",children:["Orden: ",q.codigo]}),u?x.jsx("span",{className:"text-sm opacity-70",children:"⏳ Sincronizando…"}):x.jsx("span",{className:"text-sm opacity-70",children:"✔ Sincronizado"})]}),x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid sm:grid-cols-2 gap-3",children:[x.jsx("h3",{className:"font-medium sm:col-span-2",children:"Detalles Clave"}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Estado:"}),x.jsx("span",{className:"font-semibold text-right",children:q.estado.toUpperCase()})]}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Cliente:"}),x.jsx("span",{className:"text-right",children:q.clienteNombre})]}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Teléfono:"}),x.jsx("span",{className:"text-right",children:q.clienteTelefono})]}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Equipo:"}),x.jsx("span",{className:"text-right",children:q.equipoInfo})]}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Creada:"}),x.jsx("span",{className:"text-right",children:new Date(q.creada).toLocaleDateString()})]}),x.jsxs("div",{className:"flex justify-between border-b pb-1",children:[x.jsx("span",{className:"opacity-70",children:"Última Act.:"}),x.jsx("span",{className:"text-right",children:new Date(q.actualizada).toLocaleDateString()})]}),x.jsxs("div",{className:"mt-2 sm:col-span-2 grid sm:grid-cols-[150px_1fr] gap-2 items-center",children:[x.jsx("span",{className:"opacity-70",children:"Cambiar Estado a:"}),x.jsx("select",{className:"input",value:q.estado,onChange:A=>E(A.target.value),children:rk.map(A=>x.jsx("option",{value:A,children:A.toUpperCase()},A))})]})]})}),x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-3",children:[x.jsx("div",{className:"font-medium",children:"Timeline / Notas"}),x.jsxs("div",{className:"grid sm:grid-cols-[1fr_auto] gap-2",children:[x.jsx("input",{className:"input",placeholder:"Nueva nota",value:e,onChange:A=>n(A.target.value)}),x.jsx("button",{className:"btn btn-primary",onClick:async()=>{e.trim()&&(await Z.eventos.add({id:crypto.randomUUID(),ordenId:t,tipo:"nota",texto:e.trim(),fecha:new Date().toISOString()}),n(""),a({msg:"Nota agregada."}))},children:"Añadir"})]}),O!=null&&O.length?x.jsx("ul",{className:"text-sm",children:O.map(A=>x.jsxs("li",{children:[new Date(A.fecha).toLocaleString()," — ",A.texto]},A.id))}):x.jsx("p",{className:"text-sm opacity-60",children:"Sin eventos."})]})}),x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-3",children:[x.jsx("div",{className:"font-medium",children:"Piezas usadas"}),x.jsxs("div",{className:"grid sm:grid-cols-4 gap-2",children:[x.jsx("input",{className:"input",placeholder:"Nombre",value:r.nombre,onChange:A=>i({...r,nombre:A.target.value})}),x.jsx("input",{className:"input",type:"number",placeholder:"Cant.",value:r.cantidad,onChange:A=>i({...r,cantidad:+A.target.value})}),x.jsx("input",{className:"input",type:"number",placeholder:"Coste",value:r.coste,onChange:A=>i({...r,coste:+A.target.value})}),x.jsx("button",{className:"btn btn-primary",onClick:async()=>{r.nombre.trim()&&(await Z.piezas.add({id:crypto.randomUUID(),ordenId:t,...r}),i({nombre:"",cantidad:1,coste:0,estado:"pendiente"}),a({msg:"Pieza agregada."}))},children:"Añadir"})]}),w!=null&&w.length?x.jsx("ul",{className:"text-sm grid gap-1",children:w.map(A=>x.jsxs("li",{className:"flex justify-between items-center",children:[x.jsxs("span",{children:[A.nombre," ×",A.cantidad," — ",A.estado," — ",A.coste.toFixed(2)," €"]}),x.jsx("button",{className:"btn",onClick:async()=>{await Z.piezas.delete(A.id),a({msg:"Pieza eliminada."})},children:"Borrar"})]},A.id))}):x.jsx("p",{className:"text-sm opacity-60",children:"Sin piezas."}),x.jsxs("div",{className:"font-semibold text-right",children:["Total piezas: ",M.toFixed(2)," €"]})]})}),x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-3",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("span",{className:"font-medium",children:"Adjuntos"}),x.jsx("input",{type:"file",className:"input",multiple:!0,onChange:_})]}),L!=null&&L.length?x.jsx("div",{className:"grid sm:grid-cols-3 md:grid-cols-4 gap-3",children:L.map(A=>{const U=/^image\//.test(A.tipo),K=URL.createObjectURL(A.blob);return x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body grid gap-2",children:[x.jsx("div",{className:"text-sm break-all",children:A.nombre}),x.jsxs("div",{className:"text-xs opacity-70",children:[ik(A.tam)," — ",new Date(A.fecha).toLocaleString()]}),U?x.jsx("a",{href:K,target:"_blank",rel:"noreferrer",children:x.jsx("img",{src:K,alt:A.nombre,className:"w-full h-32 object-cover rounded-lg border"})}):x.jsx("a",{href:K,target:"_blank",rel:"noreferrer",className:"btn",children:"Descargar"}),x.jsx("button",{className:"btn",onClick:()=>k(A.id,A.nombre),children:"Borrar"})]})},A.id)})}):x.jsx("p",{className:"text-sm opacity-60",children:"Sin adjuntos."})]})}),s&&x.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:x.jsx("div",{className:"card",children:x.jsxs("div",{className:"card-body flex items-center gap-2",children:[x.jsx("span",{children:s.msg}),x.jsx("button",{className:"btn",onClick:()=>a(null),children:"Cerrar"})]})})})]}):x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body",children:"Cargando datos de la orden..."})}):x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body",children:"Selecciona una orden."})})}function ok(){const[t,e]=we.useState("ordenes"),[n,r]=we.useState(void 0);return x.jsxs(Kb,{tab:t,onTab:i=>{e(i)},children:[t==="registro"&&x.jsx(Xb,{onCreated:i=>{r(i),e("reparacion")}}),t==="ordenes"&&x.jsx(tk,{onOpen:i=>{r(i),e("reparacion")}}),t==="presupuesto"&&x.jsx(nk,{}),t==="reparacion"&&(n?x.jsx(sk,{ordenId:n}):x.jsx("div",{className:"card",children:x.jsx("div",{className:"card-body",children:"Selecciona una orden desde “Órdenes”."})}))]})}av(document.getElementById("root")).render(x.jsx(ei.StrictMode,{children:x.jsx(ok,{})}));
